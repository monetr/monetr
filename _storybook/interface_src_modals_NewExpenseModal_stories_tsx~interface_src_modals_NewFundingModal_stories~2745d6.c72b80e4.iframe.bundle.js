(self.webpackChunk_monetr_stories=self.webpackChunk_monetr_stories||[]).push([["interface_src_modals_NewExpenseModal_stories_tsx~interface_src_modals_NewFundingModal_stories~2745d6"],{"../interface/src/components/MSelect.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return m}});var r=n("../node_modules/react/jsx-runtime.js");n("../node_modules/react/index.js");var a=n.ir(n("../node_modules/react-select/dist/react-select.esm.js")),i=n.ir(n("../node_modules/@ebay/nice-modal-react/lib/esm/index.js")),s=n("../node_modules/@mui/icons-material/esm/index.js"),o=n("../node_modules/@mui/material/index.js"),u=n.ir(n("../interface/src/components/MLabel.tsx")),l=n.ir(n("../interface/src/components/MSpan.tsx")),c=n.ir(n("../interface/src/hooks/useTheme.ts")),d=n.ir(n("../interface/src/util/mergeTailwind.ts"));function m(e){let t=(0,c.default)(),{labelDecorator:n,className:s,...o}=e,l=(0,d.default)({"pb-[18px]":!e.error},s),m=(0,d.default)({"dark:focus:ring-dark-monetr-brand":!e.disabled&&!e.error,"dark:hover:ring-zinc-400":!e.disabled&&!e.error,"dark:ring-dark-monetr-border-string":!e.disabled&&!e.error,"dark:ring-red-500":!e.disabled&&!!e.error,"ring-gray-300":!e.disabled&&!e.error,"ring-red-300":!e.disabled&&!!e.error},{"focus:ring-purple-400":!e.error,"focus:ring-red-400":e.error},{"dark:bg-dark-monetr-background":!e.disabled,"dark:text-zinc-200":!e.disabled,"text-gray-900":!e.disabled},{"dark:text-gray-400":!e.value},{"dark:bg-dark-monetr-background-subtle":e.disabled,"dark:ring-dark-monetr-background-emphasis":e.disabled,"ring-gray-200":e.disabled,"text-gray-500":e.disabled},"block","md:hidden","border-0","dark:caret-zinc-50","focus:ring-2","focus:ring-inset","min-h-[38px]","px-3","py-1.5","ring-1","ring-inset","rounded-lg","shadow-sm","sm:leading-6","text-left","text-sm","w-full","relative");return(0,r.jsxs)("div",{className:l,children:[(0,r.jsx)(u.default,{label:e.label,htmlFor:e.id,required:e.required,disabled:e.disabled,children:(0,r.jsx)(n??(e=>null),{name:e.name,disabled:e.disabled})}),(0,r.jsx)("button",{type:"button",disabled:e.disabled,className:m,onClick:()=>(function(e){return i.default.show(f,e)})({title:e.placeholder,options:e.options,value:e.value,onChange:e.onChange}),role:"none",children:(0,r.jsx)(function(){return e.value?.label?(0,r.jsx)("span",{className:"truncate",children:e?.value?.label}):(0,r.jsx)("span",{className:"truncate",children:e?.placeholder})},{})}),(0,r.jsx)(a.default,{theme:e=>({...e,borderRadius:8,colors:{...e.colors,neutral0:t.tailwind.colors["dark-monetr"].background.DEFAULT,neutral5:t.tailwind.colors["dark-monetr"].background.subtle,neutral10:t.tailwind.colors["dark-monetr"].background.emphasis,neutral20:t.tailwind.colors["dark-monetr"].border.string,neutral30:t.tailwind.colors["dark-monetr"].content.DEFAULT,neutral60:t.tailwind.colors["dark-monetr"].content.emphasis,neutral70:t.tailwind.colors["dark-monetr"].content.emphasis,neutral80:t.tailwind.colors["dark-monetr"].content.emphasis,neutral90:t.tailwind.colors["dark-monetr"].content.emphasis,primary25:t.tailwind.colors["dark-monetr"].background.emphasis,primary50:t.tailwind.colors["dark-monetr"].brand.faint,primary:t.tailwind.colors["dark-monetr"].brand.DEFAULT}}),...o,className:"hidden md:block",isDisabled:e.disabled,styles:{placeholder:e=>({...e,fontSize:"0.875rem",lineHeight:"1.5rem"}),valueContainer:e=>({...e,fontSize:"0.875rem",lineHeight:"1.5rem"}),option:e=>({...e,color:t.tailwind.colors["dark-monetr"].content.emphasized}),menuPortal:e=>({...e,zIndex:9999})}}),(0,r.jsx)(function(){return e.error?(0,r.jsx)("p",{className:"text-xs font-medium text-red-500 mt-0.5",children:e.error}):null},{})]})}let f=i.default.create(function(e){let t=(0,i.useModal)(),n="undefined"!=typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),a=e.options;return(0,r.jsx)(o.SwipeableDrawer,{disableBackdropTransition:!n,disableDiscovery:n,anchor:"bottom",open:t.visible,onClose:t.hide,onOpen:()=>t.show(),className:"backdrop-blur-sm backdrop-brightness-50",children:(0,r.jsxs)("div",{className:"h-full flex flex-col gap-4 bg-dark-monetr-background pb-8",children:[(0,r.jsx)(l.default,{weight:"bold",size:"xl",className:"p-2",children:e.title}),(0,r.jsx)("ul",{className:"w-full flex flex-col gap-2",children:a.map(n=>(0,r.jsxs)("li",{className:"w-full flex items-center active:bg-dark-monetr-background-subtle py-2",onClick:()=>{e.onChange(n,void 0),t.hide()},children:[e.value?.value===n.value&&(0,r.jsx)(s.CheckCircleOutline,{className:"mx-2 w-6"}),e.value?.value!==n.value&&(0,r.jsx)("div",{className:"mx-2 w-6"}),(0,r.jsx)(l.default,{size:"lg",weight:"medium",children:n.label})]},n.value))})]})})})},"../interface/src/hooks/bankAccounts.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{useBankAccounts:function(){return u},useCreateBankAccount:function(){return l},useSelectedBankAccount:function(){return c},useSelectedBankAccountId:function(){return d}});var r=n("../node_modules/react-router-dom/dist/index.js"),a=n("../node_modules/@tanstack/react-query/build/lib/index.mjs"),i=n("../interface/src/hooks/links.ts"),s=n.ir(n("../interface/src/models/BankAccount.ts")),o=n.ir(n("../interface/src/util/request.ts"));function u(){let{data:e}=(0,i.useLinks)();return(0,a.useQuery)(["/bank_accounts"],{enabled:!!e&&e.length>0,select:e=>e.map(e=>new s.default(e))})}function l(){let e=(0,a.useQueryClient)();async function t(e){return(0,o.default)().post("/bank_accounts",e).then(e=>new s.default(e?.data))}let n=(0,a.useMutation)(t,{onSuccess:t=>Promise.all([e.setQueriesData(["/bank_accounts"],e=>(e??[]).concat(t)),e.setQueriesData([`/bank_accounts/${t.bankAccountId}`],t)])});return n.mutateAsync}function c(){let e=(0,a.useQueryClient)(),t=(0,r.useMatch)("/bank/:bankId/*"),n=+t?.params?.bankId||null;if(!n&&t?.params?.bankId)throw Error(`invalid bank account ID specified: "${t?.params?.bankId}" is not a valid bank account ID`);return(0,a.useQuery)([`/bank_accounts/${n}`],{enabled:!!n,select:e=>!!e&&new s.default(e),initialData:()=>e.getQueryData(["/bank_accounts"])?.find(e=>e.bankAccountId===n),initialDataUpdatedAt:()=>e.getQueryState(["/bank_accounts"])?.dataUpdatedAt})}function d(){let{data:e}=c();return e?.bankAccountId}},"../interface/src/hooks/links.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{useLinks:function(){return o},useLink:function(){return u},useCreateLink:function(){return l},useRemoveLink:function(){return c}});var r=n("../node_modules/@tanstack/react-query/build/lib/index.mjs");n("../node_modules/notistack/notistack.esm.js"),n("../interface/src/hooks/bankAccounts.ts");var a=n("../interface/src/hooks/useAuthentication.ts"),i=n.ir(n("../interface/src/models/Link.ts")),s=n.ir(n("../interface/src/util/request.ts"));function o(){let{result:{user:e,isActive:t}}=(0,a.useAuthenticationSink)();return(0,r.useQuery)(["/links"],{enabled:!!e&&t,select:e=>Array.isArray(e)?e.map(e=>new i.default(e)):[]})}function u(e){let t=(0,r.useQueryClient)();return(0,r.useQuery)([`/links/${e}`],{enabled:!!e,select:e=>new i.default(e),initialData:()=>t.getQueryData(["/links"])?.find(t=>t.linkId===e),initialDataUpdatedAt:()=>t.getQueryState(["/links"])?.dataUpdatedAt})}function l(){let e=(0,r.useQueryClient)();async function t(e){return(0,s.default)().post("/links",e).then(e=>new i.default(e?.data))}let n=(0,r.useMutation)(t,{onSuccess:t=>Promise.all([e.setQueriesData(["/links"],e=>(e??[]).concat(t)),e.setQueriesData([`/links/${t.linkId}`],t)])});return n.mutateAsync}function c(){let e=(0,r.useQueryClient)();return async function(t){return(0,s.default)().delete(`/links/${t}`).then(()=>void Promise.all([e.invalidateQueries(["/links"]),e.invalidateQueries(["/bank_accounts"])]))}}},"../interface/src/hooks/useAuthentication.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{useAuthenticationSink:function(){return u},useAfterCheckout:function(){return l}});var r=n.ir(n("../node_modules/@sentry/react/esm/index.js")),a=n("../node_modules/@tanstack/react-query/build/lib/index.mjs"),i=n("../node_modules/date-fns/esm/index.js"),s=n.ir(n("../interface/src/models/User.ts")),o=n.ir(n("../interface/src/util/request.ts"));function u(){let e=(0,a.useQuery)(["/users/me"],{onSuccess:e=>{e?.user?.accountId&&r.setUser({id:e.user.accountId.toString(10),username:`account:${e.user.accountId}`})},refetchOnWindowFocus:!0});return{...e,result:{user:e?.data?.user&&new s.default(e?.data?.user),isSetup:!!e?.data?.isSetup,isActive:!!e?.data?.isActive,isTrialing:!!e?.data?.isTrialing,activeUntil:e?.data?.activeUntil&&(0,i.parseJSON)(e.data.activeUntil),trialingUntil:e?.data?.trialingUntil&&(0,i.parseJSON)(e.data.trialingUntil),hasSubscription:!!e?.data?.hasSubscription}}}function l(){let e=(0,a.useQueryClient)();async function t(e){return(0,o.default)().get(`/billing/checkout/${e}`).then(e=>e.data)}let n=(0,a.useMutation)(t,{onSuccess:t=>Promise.all([e.setQueriesData(["/users/me"],e=>({...e,isActive:t.isActive}))])});return n.mutateAsync}},"../interface/src/models/BankAccount.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});var r=n("../interface/src/util/amounts.ts");class a{bankAccountId;linkId;availableBalance;currentBalance;mask;name;plaidName;plaidOfficialName;accountType;accountSubType;constructor(e){e&&Object.assign(this,e)}getAvailableBalanceString(){return(0,r.formatAmount)(this.availableBalance)}getCurrentBalanceString(){return(0,r.formatAmount)(this.currentBalance)}}},"../interface/src/models/Link.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{errorMessages:function(){return u},default:function(){return l}});var r,a,i,s,o=n("../node_modules/date-fns/esm/index.js");(r=i||(i={}))[r.Unknown=0]="Unknown",r[r.Plaid=1]="Plaid",r[r.Manual=2]="Manual",(a=s||(s={}))[a.Unknown=0]="Unknown",a[a.Pending=1]="Pending",a[a.Setup=2]="Setup",a[a.Error=3]="Error";let u={ITEM_LOGIN_REQUIRED:"This link's authentication has expired and needs to be re-authenticated."};class l{linkId;linkType;linkStatus;errorCode;plaidInstitutionId;plaidNewAccountsAvailable;institutionName;customInstitutionName;createdByUserId;lastSuccessfulUpdate;constructor(e){e&&Object.assign(this,{...e,lastSuccessfulUpdate:e.lastSuccessfulUpdate&&(0,o.parseJSON)(e.lastSuccessfulUpdate)})}getName(){return this.customInstitutionName??this.institutionName}getIsManual(){return this.linkType===i.Manual}getIsPlaid(){return this.linkType===i.Plaid}getCanUpdateAccountSelection(){return this.getIsPlaid()&&!0===this.plaidNewAccountsAvailable}getIsError(){return this.linkStatus===s.Error||null!=this.errorCode}getErrorMessage(){return u[this.errorCode]||null}}},"../interface/src/models/Login.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});class r{loginId;email;firstName;lastName;constructor(e){e&&Object.assign(this,e)}}},"../interface/src/models/User.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});var r=n.ir(n("../interface/src/models/Login.ts"));class a{userId;loginId;accountId;account;login;firstName;lastName;constructor(e){e&&Object.assign(this,{...e,login:new r.default(e?.login)})}}},"../interface/src/util/amounts.ts":function(e,t,n){"use strict";var r,a;Object.defineProperty(t,"__esModule",{value:!0});function i(e,t="en-US",n="USD"){let r=new Intl.NumberFormat(t,{style:"currency",currency:n}).resolvedOptions(),a=Math.pow(10,r.maximumFractionDigits);return+Math.fround(e/a).toFixed(r.maximumFractionDigits)}function s(e,t="en-US",n="USD"){let r=new Intl.NumberFormat(t,{style:"currency",currency:n}).resolvedOptions(),a=Math.pow(10,r.maximumFractionDigits);return+Math.round(e*a).toFixed(0)}function o(e,t=r.Stored,n="en-US",a="USD"){let i=new Intl.NumberFormat(n,{style:"currency",currency:a}),s=e;if(t===r.Stored){let t=i.resolvedOptions(),n=Math.pow(10,t.maximumFractionDigits);s=+Math.fround(e/n).toFixed(t.maximumFractionDigits)}return i.format(s)}!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{amountToFriendly:function(){return i},friendlyToAmount:function(){return s},formatAmount:function(){return o}}),(a=r||(r={}))[a.Stored=0]="Stored",a[a.Friendly=1]="Friendly"}}]);