(self.webpackChunk_monetr_stories=self.webpackChunk_monetr_stories||[]).push([["interface_src_pages_expense_details_stories_tsx~interface_src_pages_new_stories_tsx~interface~5968bb"],{"../interface/src/pages/verify/email/resend.tsx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return j},AfterEmailVerificationSent:function(){return g}});var i=s("../node_modules/react/jsx-runtime.js"),a=s("../node_modules/react/index.js"),n=s("../node_modules/react-router-dom/dist/index.js"),r=s("../node_modules/notistack/notistack.esm.js"),l=s.ir(s("../interface/src/components/MButton.tsx")),c=s.ir(s("../interface/src/components/MCaptcha.tsx")),o=s.ir(s("../interface/src/components/MForm.tsx")),d=s.ir(s("../interface/src/components/MLink.tsx")),u=s.ir(s("../interface/src/components/MLogo.tsx")),f=s.ir(s("../interface/src/components/MSpan.tsx")),m=s.ir(s("../interface/src/components/MTextField.tsx")),x=s("../interface/src/hooks/useAppConfiguration.ts"),p=s.ir(s("../interface/src/util/request.ts")),h=s.ir(s("../interface/src/util/verifyEmailAddress.ts"));function j(){let{enqueueSnackbar:e}=(0,r.useSnackbar)(),t=(0,x.useAppConfiguration)(),{state:s}=(0,n.useLocation)(),j={email:s&&s.emailAddress||void 0,captcha:null},[v,y]=(0,a.useState)(!1);async function _(t){return(0,p.default)().post("/authentication/verify/resend",{email:t.email,captcha:t.captcha}).then(()=>y(!0)).catch(t=>void e(t?.response?.data?.error||"Failed to resend verification link",{variant:"error",disableWindowBlurListener:!0}))}async function b(e,t){return t.setSubmitting(!0),_(e).finally(()=>t.setSubmitting(!1))}return v?(0,i.jsx)(g,{}):(0,i.jsx)(o.default,{initialValues:j,onSubmit:b,validate:function(e){let t={};return e.email&&!(0,h.default)(e.email)&&(t.email="Please provide a valid email address."),t},className:"w-full h-full flex flex-col justify-center items-center gap-2 p-4",children:(0,i.jsxs)("div",{className:"max-w-xs flex flex-col items-center gap-2",children:[(0,i.jsx)(u.default,{className:"h-24 w-24"}),(0,i.jsx)(function(){return s?(0,i.jsx)(f.default,{className:"text-center",size:"sm","data-testid":"resend-email-included",children:"It looks like your email address has not been verified. Do you want to resend the email verification link?"}):(0,i.jsx)(f.default,{className:"text-center",size:"sm","data-testid":"resend-email-excluded",children:"If your email verification link has expired, or you never got one. You can enter your email address below and another verification link will be sent to you."})},{}),(0,i.jsx)(m.default,{name:"email",autoComplete:"username",autoFocus:!0,label:"Email",className:"w-full","data-testid":"resend-email"}),(0,i.jsx)(c.default,{name:"captcha",show:!!t?.ReCAPTCHAKey,"data-testid":"resend-captcha"}),(0,i.jsx)(l.default,{type:"submit",color:"primary",className:"w-full",children:"Resend Verification"}),(0,i.jsxs)("div",{className:"mt-1 flex justify-center gap-1",children:[(0,i.jsx)(f.default,{color:"subtle",className:"text-sm",children:"Don't need to resend?"}),(0,i.jsx)(d.default,{to:"/login",size:"sm","data-testid":"login-signup",children:"Return to login"})]})]})})}function g(){return(0,i.jsx)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:(0,i.jsxs)("div",{className:"flex flex-col gap-2 max-w-xs items-center",children:[(0,i.jsx)(u.default,{className:"h-24 w-24"}),(0,i.jsx)(f.default,{className:"text-center",size:"lg",children:"A new verification link was sent to your email address..."}),(0,i.jsx)("div",{className:"mt-1 flex justify-center gap-1",children:(0,i.jsx)(d.default,{to:"/login",size:"sm","data-testid":"login-signup",children:"Return to login"})})]})})}}}]);