"use strict";(self.webpackChunk_monetr_stories=self.webpackChunk_monetr_stories||[]).push([[164],{"../interface/src/pages/app.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Transactions:()=>app_stories_Transactions,__namedExportsOrder:()=>__namedExportsOrder,default:()=>app_stories});var _Transactions_parameters,_Transactions_parameters_docs,_Transactions_parameters1,react=__webpack_require__("../node_modules/react/index.js"),src=__webpack_require__("../node_modules/axios-mock-adapter/src/index.js"),src_default=/*#__PURE__*/__webpack_require__.n(src),dist=__webpack_require__("../node_modules/react-router-dom/dist/index.js"),ErrorOutline=__webpack_require__("../node_modules/@mui/icons-material/esm/ErrorOutline.js"),PlusOne=__webpack_require__("../node_modules/@mui/icons-material/esm/PlusOne.js"),Settings=__webpack_require__("../node_modules/@mui/icons-material/esm/Settings.js"),Logout=__webpack_require__("../node_modules/@mui/icons-material/esm/Logout.js"),emotion_styled_browser_esm=__webpack_require__("../node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),CreditCard=__webpack_require__("../node_modules/@mui/icons-material/esm/CreditCard.js"),Badge=__webpack_require__("../node_modules/@mui/material/Badge/Badge.js"),Tooltip=__webpack_require__("../node_modules/@mui/material/Tooltip/Tooltip.js"),differenceInDays=__webpack_require__("../node_modules/date-fns/esm/differenceInDays/index.js"),lib_useQuery=__webpack_require__("../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),parseJSON=__webpack_require__("../node_modules/date-fns/esm/parseJSON/index.js");function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var AppConfiguration=function AppConfiguration(data){_class_call_check(this,AppConfiguration),_define_property(this,"requireLegalName",void 0),_define_property(this,"requirePhoneNumber",void 0),_define_property(this,"verifyLogin",void 0),_define_property(this,"verifyRegister",void 0),_define_property(this,"verifyEmailAddress",void 0),_define_property(this,"verifyForgotPassword",void 0),_define_property(this,"ReCAPTCHAKey",void 0),_define_property(this,"allowSignUp",void 0),_define_property(this,"allowForgotPassword",void 0),_define_property(this,"longPollPlaidSetup",void 0),_define_property(this,"requireBetaCode",void 0),_define_property(this,"initialPlan",void 0),_define_property(this,"billingEnabled",void 0),_define_property(this,"iconsEnabled",void 0),_define_property(this,"plaidEnabled",void 0),_define_property(this,"manualEnabled",void 0),_define_property(this,"release",void 0),_define_property(this,"revision",void 0),_define_property(this,"buildType",void 0),_define_property(this,"buildTime",void 0),data&&Object.assign(this,_object_spread_props(_object_spread({},data),{buildTime:data.buildTime&&(0,parseJSON.A)(data.buildTime)}))};function useAppConfigurationSink(){var result=(0,lib_useQuery.I)(["/config"],{staleTime:6e4,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1});return _object_spread({result:(null==result?void 0:result.data)&&new AppConfiguration(result.data)||null},result)}function useAppConfiguration(){return useAppConfigurationSink().result}var esm_exports=__webpack_require__("../node_modules/@sentry/core/build/esm/exports.js"),QueryClientProvider=__webpack_require__("../node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs"),useMutation=__webpack_require__("../node_modules/@tanstack/react-query/build/lib/useMutation.mjs");function Login_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function Login_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Login=function Login(data){Login_class_call_check(this,Login),Login_define_property(this,"loginId",void 0),Login_define_property(this,"email",void 0),Login_define_property(this,"firstName",void 0),Login_define_property(this,"lastName",void 0),Login_define_property(this,"totpEnabledAt",void 0),data&&Object.assign(this,data)};function User_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function User_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function User_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){User_define_property(target,key,source[key])})}return target}function User_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function User_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):User_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var User=function User(data){User_class_call_check(this,User),User_define_property(this,"userId",void 0),User_define_property(this,"loginId",void 0),User_define_property(this,"accountId",void 0),User_define_property(this,"account",void 0),User_define_property(this,"login",void 0),data&&Object.assign(this,User_object_spread_props(User_object_spread({},data),{login:new Login(null==data?void 0:data.login)}))},util_request=__webpack_require__("../interface/src/util/request.ts");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function useAuthentication_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function useAuthentication_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){useAuthentication_define_property(target,key,source[key])})}return target}function useAuthentication_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function useAuthentication_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):useAuthentication_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function _ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useAuthenticationSink(){var _result_data,_result_data1,_result_data2,_result_data3,_result_data4,_result_data5,_result_data6,_result_data7,_result_data8,result=(0,lib_useQuery.I)(["/users/me"],{onSuccess:function(data){var _data_user;(null==data?void 0:null===(_data_user=data.user)||void 0===_data_user?void 0:_data_user.accountId)&&esm_exports.gV({id:data.user.accountId,username:"account:".concat(data.user.accountId)})},refetchOnWindowFocus:!0});return useAuthentication_object_spread_props(useAuthentication_object_spread({},result),{result:{user:(null==result?void 0:null===(_result_data=result.data)||void 0===_result_data?void 0:_result_data.user)&&new User(null==result?void 0:null===(_result_data1=result.data)||void 0===_result_data1?void 0:_result_data1.user),mfaPending:!!(null==result?void 0:null===(_result_data2=result.data)||void 0===_result_data2?void 0:_result_data2.mfaPending),isSetup:!!(null==result?void 0:null===(_result_data3=result.data)||void 0===_result_data3?void 0:_result_data3.isSetup),isActive:!!(null==result?void 0:null===(_result_data4=result.data)||void 0===_result_data4?void 0:_result_data4.isActive),isTrialing:!!(null==result?void 0:null===(_result_data5=result.data)||void 0===_result_data5?void 0:_result_data5.isTrialing),activeUntil:(null==result?void 0:null===(_result_data6=result.data)||void 0===_result_data6?void 0:_result_data6.activeUntil)&&(0,parseJSON.A)(result.data.activeUntil),trialingUntil:(null==result?void 0:null===(_result_data7=result.data)||void 0===_result_data7?void 0:_result_data7.trialingUntil)&&(0,parseJSON.A)(result.data.trialingUntil),hasSubscription:!!(null==result?void 0:null===(_result_data8=result.data)||void 0===_result_data8?void 0:_result_data8.hasSubscription)}})}function useAuthentication(){return useAuthenticationSink().result.user}function useAfterCheckout(){var queryClient=(0,QueryClientProvider.jE)();function queryCheckoutSession(checkoutSessionId){return _queryCheckoutSession.apply(this,arguments)}function _queryCheckoutSession(){return(_queryCheckoutSession=_async_to_generator(function(checkoutSessionId){return _ts_generator(this,function(_state){return[2,(0,util_request.A)().get("/billing/checkout/".concat(checkoutSessionId)).then(function(result){return result.data})]})})).apply(this,arguments)}return(0,useMutation.n)(queryCheckoutSession,{onSuccess:function(result){return Promise.all([queryClient.setQueriesData(["/users/me"],function(previous){return useAuthentication_object_spread_props(useAuthentication_object_spread({},previous),{isActive:result.isActive})})])}}).mutateAsync}var resolveConfig=__webpack_require__("../node_modules/tailwindcss/resolveConfig.js"),resolveConfig_default=/*#__PURE__*/__webpack_require__.n(resolveConfig),theme=__webpack_require__("../interface/src/theme.ts"),tailwind_config=__webpack_require__("../interface/tailwind.config.cjs"),tailwind_config_default=/*#__PURE__*/__webpack_require__.n(tailwind_config);function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var realTailwindConfig=resolveConfig_default()(tailwind_config_default());function useTheme(){var _useState=_sliced_to_array((0,react.useState)("dark"),2),mode=_useState[0];return _useState[1],{tailwind:realTailwindConfig.theme,material:theme.A,mediaColorSchema:mode}}function BankSidebarSubscriptionItem(){var config=useAppConfiguration(),theme=useTheme(),result=useAuthenticationSink().result,path="/settings/billing";if(!(null==config?void 0:config.billingEnabled))return null;var StyledBadge=(0,emotion_styled_browser_esm.A)(Badge.A)(function(){return{"& .MuiBadge-badge":{opacity:"90%",backgroundColor:theme.tailwind.colors.yellow["600"],boxShadow:"0 0 0 2px ".concat(theme.tailwind.colors["dark-monetr"].background.DEFAULT),"&::after":{color:theme.tailwind.colors.yellow["600"],position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"100%",animation:"ripple-trial 3s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple-trial":{"0%":{transform:"scale(.8)",opacity:1},"70%":{transform:"scale(.9)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}});return(null==result?void 0:result.isTrialing)?/*#__PURE__*/react.createElement(dist.N_,{to:path,"data-testid":"bank-sidebar-subscription"},/*#__PURE__*/react.createElement(Tooltip.A,{title:"Your trial ends in ".concat((0,differenceInDays.A)(result.trialingUntil,new Date)," day(s)."),arrow:!0,placement:"right",classes:{tooltip:"text-base font-medium"}},/*#__PURE__*/react.createElement(StyledBadge,{overlap:"circular",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:(0,differenceInDays.A)(result.trialingUntil,new Date),classes:{badge:"left-1 top-1 text-[11px]"}},/*#__PURE__*/react.createElement(CreditCard.A,{className:"dark:hover:text-dark-monetr-content-emphasis dark:text-dark-monetr-content-subtle cursor-pointer mt-1.5"})))):/*#__PURE__*/react.createElement(dist.N_,{to:path,"data-testid":"bank-sidebar-subscription"},/*#__PURE__*/react.createElement(CreditCard.A,{className:"dark:hover:text-dark-monetr-content-emphasis dark:text-dark-monetr-content-subtle cursor-pointer"}))}let logo_namespaceObject=__webpack_require__.p+"static/media/logo.ccaa94d9.svg";var AccountBalance=__webpack_require__("../node_modules/@mui/icons-material/esm/AccountBalance.js"),react_router_dist=__webpack_require__("../node_modules/react-router/dist/index.js"),notistack_esm=__webpack_require__("../node_modules/notistack/notistack.esm.js");function PlaidLink_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function PlaidLink_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function PlaidLink_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){PlaidLink_define_property(target,key,source[key])})}return target}function PlaidLink_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function PlaidLink_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):PlaidLink_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var PlaidLinkStatus=/*#__PURE__*/function(PlaidLinkStatus){return PlaidLinkStatus[PlaidLinkStatus.Unknown=0]="Unknown",PlaidLinkStatus[PlaidLinkStatus.Pending=1]="Pending",PlaidLinkStatus[PlaidLinkStatus.Setup=2]="Setup",PlaidLinkStatus[PlaidLinkStatus.Error=3]="Error",PlaidLinkStatus[PlaidLinkStatus.PendingExpiration=4]="PendingExpiration",PlaidLinkStatus[PlaidLinkStatus.Revoked=5]="Revoked",PlaidLinkStatus}({}),PlaidLink=function PlaidLink(data){PlaidLink_class_call_check(this,PlaidLink),PlaidLink_define_property(this,"products",void 0),PlaidLink_define_property(this,"status",void 0),PlaidLink_define_property(this,"errorCode",void 0),PlaidLink_define_property(this,"expirationDate",void 0),PlaidLink_define_property(this,"newAccountsAvailable",void 0),PlaidLink_define_property(this,"institutionId",void 0),PlaidLink_define_property(this,"institutionName",void 0),PlaidLink_define_property(this,"lastManualSync",void 0),PlaidLink_define_property(this,"lastSuccessfulUpdate",void 0),PlaidLink_define_property(this,"lastAttemptedUpdate",void 0),PlaidLink_define_property(this,"updatedAt",void 0),PlaidLink_define_property(this,"createdAt",void 0),PlaidLink_define_property(this,"createdByUserId",void 0),data&&Object.assign(this,PlaidLink_object_spread_props(PlaidLink_object_spread({},data),{expirationDate:(null==data?void 0:data.expirationDate)&&(0,parseJSON.A)(data.expirationDate),lastManualSync:(null==data?void 0:data.lastManualSync)&&(0,parseJSON.A)(data.lastManualSync),lastSuccessfulUpdate:(null==data?void 0:data.lastSuccessfulUpdate)&&(0,parseJSON.A)(data.lastSuccessfulUpdate),lastAttemptedUpdate:(null==data?void 0:data.lastAttemptedUpdate)&&(0,parseJSON.A)(data.lastAttemptedUpdate),updatedAt:(null==data?void 0:data.updatedAt)&&(0,parseJSON.A)(data.updatedAt),createdAt:(null==data?void 0:data.createdAt)&&(0,parseJSON.A)(data.createdAt)}))};function Link_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function Link_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Link_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){Link_define_property(target,key,source[key])})}return target}function Link_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function Link_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Link_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var errorMessages={ITEM_LOGIN_REQUIRED:"This link's authentication has expired and needs to be re-authenticated."},Link=/*#__PURE__*/function(){function Link(data){Link_class_call_check(this,Link),Link_define_property(this,"linkId",void 0),Link_define_property(this,"linkType",void 0),Link_define_property(this,"institutionName",void 0),Link_define_property(this,"updatedAt",void 0),Link_define_property(this,"createdAt",void 0),Link_define_property(this,"createdBy",void 0),Link_define_property(this,"plaidLink",void 0),data&&Object.assign(this,Link_object_spread_props(Link_object_spread({},data),{plaidLink:(null==data?void 0:data.plaidLink)&&new PlaidLink(data.plaidLink),updatedAt:data.updatedAt&&(0,parseJSON.A)(data.updatedAt),createdAt:data.createdAt&&(0,parseJSON.A)(data.createdAt)}))}return _create_class(Link,[{key:"getName",value:function getName(){return this.institutionName}},{key:"getIsManual",value:function getIsManual(){return 2===this.linkType}},{key:"getIsPlaid",value:function getIsPlaid(){return 1===this.linkType&&!!this.plaidLink}},{key:"getCanUpdateAccountSelection",value:function getCanUpdateAccountSelection(){var _this_plaidLink;return this.getIsPlaid()&&(null===(_this_plaidLink=this.plaidLink)||void 0===_this_plaidLink?void 0:_this_plaidLink.newAccountsAvailable)===!0}},{key:"getIsError",value:function getIsError(){var _this_plaidLink;return(null===(_this_plaidLink=this.plaidLink)||void 0===_this_plaidLink?void 0:_this_plaidLink.status)===PlaidLinkStatus.Error}},{key:"getErrorMessage",value:function getErrorMessage(){var _this_plaidLink;return errorMessages[null===(_this_plaidLink=this.plaidLink)||void 0===_this_plaidLink?void 0:_this_plaidLink.status]||null}}]),Link}();function links_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function links_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){links_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){links_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function links_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useLinks(){var _useAuthenticationSink_result=useAuthenticationSink().result,user=_useAuthenticationSink_result.user,isActive=_useAuthenticationSink_result.isActive,mfaPending=_useAuthenticationSink_result.mfaPending;return(0,lib_useQuery.I)(["/links"],{enabled:!!user&&isActive&&!mfaPending,select:function(data){return Array.isArray(data)?data.map(function(item){return new Link(item)}):[]}})}function useLink(linkId){var queryClient=(0,QueryClientProvider.jE)();return(0,lib_useQuery.I)(["/links/".concat(linkId)],{enabled:!!linkId,select:function(data){return new Link(data)},initialData:function(){var _queryClient_getQueryData;return null===(_queryClient_getQueryData=queryClient.getQueryData(["/links"]))||void 0===_queryClient_getQueryData?void 0:_queryClient_getQueryData.find(function(item){return item.linkId===linkId})},initialDataUpdatedAt:function(){var _queryClient_getQueryState;return null===(_queryClient_getQueryState=queryClient.getQueryState(["/links"]))||void 0===_queryClient_getQueryState?void 0:_queryClient_getQueryState.dataUpdatedAt}})}function useCurrentLink(){var bankAccount=useSelectedBankAccount().data;return useLink(null==bankAccount?void 0:bankAccount.linkId)}function useCreateLink(){var queryClient=(0,QueryClientProvider.jE)();function createLink(newLink){return _createLink.apply(this,arguments)}function _createLink(){return(_createLink=links_async_to_generator(function(newLink){return links_ts_generator(this,function(_state){return[2,(0,util_request.A)().post("/links",newLink).then(function(result){return new Link(null==result?void 0:result.data)})]})})).apply(this,arguments)}return(0,useMutation.n)(createLink,{onSuccess:function(newLink){return Promise.all([queryClient.setQueriesData(["/links"],function(previous){return(null!=previous?previous:[]).concat(newLink)}),queryClient.setQueriesData(["/links/".concat(newLink.linkId)],newLink)])}}).mutateAsync}function useRemoveLink(){var _ref,queryClient=(0,QueryClientProvider.jE)();return _ref=links_async_to_generator(function(linkId){return links_ts_generator(this,function(_state){return[2,(0,util_request.A)().delete("/links/".concat(linkId)).then(function(){Promise.all([queryClient.setQueriesData(["/links"],function(previous){return previous.filter(function(item){return item.linkId!==linkId})}),queryClient.removeQueries(["/links/".concat(linkId)])])})]})}),function(linkId){return _ref.apply(this,arguments)}}function useTriggerManualPlaidSync(){var _ref,enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,queryClient=(0,QueryClientProvider.jE)();return _ref=links_async_to_generator(function(linkId){return links_ts_generator(this,function(_state){return[2,(0,util_request.A)().post("/plaid/link/sync",{linkId:linkId}).then(function(){enqueueSnackbar("Triggered a manual sync in the background!",{variant:"success",disableWindowBlurListener:!0})}).then(function(){return setTimeout(function(){return queryClient.invalidateQueries(["/links"])},2e3)}).catch(function(error){var _error_response_data,_error_response;enqueueSnackbar("Failed to trigger a manual sync: ".concat((null==error?void 0:null===(_error_response=error.response)||void 0===_error_response?void 0:null===(_error_response_data=_error_response.data)||void 0===_error_response_data?void 0:_error_response_data.error)||"unknown error","."),{variant:"error",disableWindowBlurListener:!0})})]})}),function(linkId){return _ref.apply(this,arguments)}}function PlaidBankAccount_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function PlaidBankAccount_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function PlaidBankAccount_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){PlaidBankAccount_define_property(target,key,source[key])})}return target}function PlaidBankAccount_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function PlaidBankAccount_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):PlaidBankAccount_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var PlaidBankAccount=function PlaidBankAccount(data){PlaidBankAccount_class_call_check(this,PlaidBankAccount),PlaidBankAccount_define_property(this,"name",void 0),PlaidBankAccount_define_property(this,"officialName",void 0),PlaidBankAccount_define_property(this,"mask",void 0),PlaidBankAccount_define_property(this,"availableBalance",void 0),PlaidBankAccount_define_property(this,"currentBalance",void 0),PlaidBankAccount_define_property(this,"limitBalance",void 0),PlaidBankAccount_define_property(this,"createdAt",void 0),PlaidBankAccount_define_property(this,"createdByUserId",void 0),data&&Object.assign(this,PlaidBankAccount_object_spread_props(PlaidBankAccount_object_spread({},data),{createdAt:(null==data?void 0:data.createdAt)&&(0,parseJSON.A)(data.createdAt)}))};function amountToFriendly(amount){var locale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en_US",currency=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"USD",localeAdjusted=locale.replace("_","-"),specs=new Intl.NumberFormat(localeAdjusted,{style:"currency",currency:currency}).resolvedOptions();return+Math.fround(amount/Math.pow(10,specs.maximumFractionDigits)).toFixed(specs.maximumFractionDigits)}function friendlyToAmount(friendly){var locale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en_US",currency=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"USD",localeAdjusted=locale.replace("_","-");return+Math.round(friendly*Math.pow(10,new Intl.NumberFormat(localeAdjusted,{style:"currency",currency:currency}).resolvedOptions().maximumFractionDigits)).toFixed(0)}var AmountType=/*#__PURE__*/function(AmountType){return AmountType[AmountType.Stored=0]="Stored",AmountType[AmountType.Friendly=1]="Friendly",AmountType}({});function formatAmount(amount){var type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,locale=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en_US",currency=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"USD",localeAdjusted=locale.replace("_","-"),intl=new Intl.NumberFormat(localeAdjusted,{style:"currency",currency:currency}),value=amount;if(0===type){var specs=intl.resolvedOptions();value=+Math.fround(amount/Math.pow(10,specs.maximumFractionDigits)).toFixed(specs.maximumFractionDigits)}return intl.format(value)}function BankAccount_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function BankAccount_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function BankAccount_create_class(Constructor,protoProps,staticProps){return protoProps&&BankAccount_defineProperties(Constructor.prototype,protoProps),staticProps&&BankAccount_defineProperties(Constructor,staticProps),Constructor}function BankAccount_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function BankAccount_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){BankAccount_define_property(target,key,source[key])})}return target}function BankAccount_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function BankAccount_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):BankAccount_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var BankAccount=/*#__PURE__*/function(){function BankAccount(data){BankAccount_class_call_check(this,BankAccount),BankAccount_define_property(this,"bankAccountId",void 0),BankAccount_define_property(this,"linkId",void 0),BankAccount_define_property(this,"availableBalance",void 0),BankAccount_define_property(this,"currentBalance",void 0),BankAccount_define_property(this,"mask",void 0),BankAccount_define_property(this,"name",void 0),BankAccount_define_property(this,"originalName",void 0),BankAccount_define_property(this,"status",void 0),BankAccount_define_property(this,"accountType",void 0),BankAccount_define_property(this,"accountSubType",void 0),BankAccount_define_property(this,"lastUpdated",void 0),BankAccount_define_property(this,"createdAt",void 0),BankAccount_define_property(this,"createdBy",void 0),BankAccount_define_property(this,"plaidBankAccount",void 0),data&&Object.assign(this,BankAccount_object_spread_props(BankAccount_object_spread({},data),{plaidBankAccount:(null==data?void 0:data.plaidBankAccount)&&new PlaidBankAccount(data.plaidBankAccount),lastUpdated:(null==data?void 0:data.lastUpdated)&&(0,parseJSON.A)(data.lastUpdated),createdAt:(null==data?void 0:data.createdAt)&&(0,parseJSON.A)(data.createdAt)}))}return BankAccount_create_class(BankAccount,[{key:"getAvailableBalanceString",value:function getAvailableBalanceString(){return formatAmount(this.availableBalance)}},{key:"getCurrentBalanceString",value:function getCurrentBalanceString(){return formatAmount(this.currentBalance)}}]),BankAccount}();function bankAccounts_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function bankAccounts_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){bankAccounts_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){bankAccounts_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function bankAccounts_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function bankAccounts_useBankAccounts(){var links=useLinks().data;return(0,lib_useQuery.I)(["/bank_accounts"],{enabled:!!links&&links.length>0,select:function(data){return data.map(function(item){return new BankAccount(item)})}})}function useCreateBankAccount(){var queryClient=(0,QueryClientProvider.jE)();function createBankAccount(newBankAccount){return _createBankAccount.apply(this,arguments)}function _createBankAccount(){return(_createBankAccount=bankAccounts_async_to_generator(function(newBankAccount){return bankAccounts_ts_generator(this,function(_state){return[2,(0,util_request.A)().post("/bank_accounts",newBankAccount).then(function(result){return new BankAccount(null==result?void 0:result.data)})]})})).apply(this,arguments)}return(0,useMutation.n)(createBankAccount,{onSuccess:function(newBankAccount){return Promise.all([queryClient.setQueriesData(["/bank_accounts"],function(previous){return(null!=previous?previous:[]).concat(newBankAccount)}),queryClient.setQueriesData(["/bank_accounts/".concat(newBankAccount.bankAccountId)],newBankAccount)])}}).mutateAsync}function useSelectedBankAccount(){var _match_params,_match_params1,_match_params2,queryClient=(0,QueryClientProvider.jE)(),match=(0,react_router_dist.RQ)("/bank/:bankId/*"),bankAccountId=(null==match?void 0:null===(_match_params=match.params)||void 0===_match_params?void 0:_match_params.bankId)||null;if(!bankAccountId&&(null==match?void 0:null===(_match_params1=match.params)||void 0===_match_params1?void 0:_match_params1.bankId))throw Error('invalid bank account ID specified: "'.concat(null==match?void 0:null===(_match_params2=match.params)||void 0===_match_params2?void 0:_match_params2.bankId,'" is not a valid bank account ID'));return(0,lib_useQuery.I)(["/bank_accounts/".concat(bankAccountId)],{enabled:!!bankAccountId,select:function(data){return!!data&&new BankAccount(data)},initialData:function(){var _queryClient_getQueryData;return null===(_queryClient_getQueryData=queryClient.getQueryData(["/bank_accounts"]))||void 0===_queryClient_getQueryData?void 0:_queryClient_getQueryData.find(function(item){return item.bankAccountId===bankAccountId})},initialDataUpdatedAt:function(){var _queryClient_getQueryState;return null===(_queryClient_getQueryState=queryClient.getQueryState(["/bank_accounts"]))||void 0===_queryClient_getQueryState?void 0:_queryClient_getQueryState.dataUpdatedAt}})}function bankAccounts_useSelectedBankAccountId(){var bankAccount=useSelectedBankAccount().data;return null==bankAccount?void 0:bankAccount.bankAccountId}function Institution_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function Institution_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Institution_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){Institution_define_property(target,key,source[key])})}return target}function Institution_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function Institution_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Institution_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var Institution=function Institution(data){Institution_class_call_check(this,Institution),Institution_define_property(this,"name",void 0),Institution_define_property(this,"url",void 0),Institution_define_property(this,"primaryColor",void 0),Institution_define_property(this,"logo",void 0),Institution_define_property(this,"status",void 0),Institution_define_property(this,"timestamp",void 0),data&&Object.assign(this,Institution_object_spread_props(Institution_object_spread({},data),{status:new InstitutionStatus(data.status),timestamp:new Date}))},InstitutionStatus=function InstitutionStatus(data){Institution_class_call_check(this,InstitutionStatus),Institution_define_property(this,"transactions_updates",void 0),Institution_define_property(this,"plaidIncidents",void 0),data&&Object.assign(this,Institution_object_spread_props(Institution_object_spread({},data),{plaidIncidents:((null==data?void 0:data.plaidIncidents)||[]).map(function(item){return new InstitutionPlaidIncident(item)})}))},InstitutionPlaidIncident=function InstitutionPlaidIncident(data){Institution_class_call_check(this,InstitutionPlaidIncident),Institution_define_property(this,"start",void 0),Institution_define_property(this,"end",void 0),Institution_define_property(this,"title",void 0),data&&Object.assign(this,Institution_object_spread_props(Institution_object_spread({},data),{start:(0,parseJSON.A)(data.start),end:data.end&&(0,parseJSON.A)(data.end)}))};function institutions_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function institutions_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){institutions_define_property(target,key,source[key])})}return target}function institutions_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function institutions_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):institutions_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function useInstitution(institutionId){var result=(0,lib_useQuery.I)(["/institutions/".concat(institutionId)],{staleTime:18e5,enabled:!!institutionId});return institutions_object_spread_props(institutions_object_spread({},result),{result:new Institution(result.data)})}var tw_merge=__webpack_require__("../interface/node_modules/tailwind-merge/dist/lib/tw-merge.mjs");function _type_of(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function mergeTailwind(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var flattened=args.map(function(arg){return(void 0===arg?"undefined":_type_of(arg))!=="object"||Array.isArray(arg)?arg:Object.keys(arg).filter(function(key){return!!arg[key]})});return(0,tw_merge.Q)(flattened)}function sortAccounts(bankAccounts){if(!bankAccounts)return[];var accountTypeOrder=["loan","credit","depository"],accountSubTypeOrder=["money market","mortgage","credit card","savings","checking"];return bankAccounts.sort(function(a,b){for(var items=[a,b],values=[0,0],i=0;i<2;i++){var multiplier="inactive"===items[i].status?-2:1;values[i]+=accountTypeOrder.indexOf(items[i].accountType),values[i]+=accountSubTypeOrder.indexOf(items[i].accountSubType),values[i]*=multiplier}return values[0]<values[1]?1:values[0]>values[1]?-1:0})}function BankSidebarItem(param){var _link_plaidLink,_selectBankAccount_data,link=param.link,institution=useInstitution(null===(_link_plaidLink=link.plaidLink)||void 0===_link_plaidLink?void 0:_link_plaidLink.institutionId).result,selectBankAccount=useSelectedBankAccount(),bankAccounts=bankAccounts_useBankAccounts().data,active=(null===(_selectBankAccount_data=selectBankAccount.data)||void 0===_selectBankAccount_data?void 0:_selectBankAccount_data.linkId)===link.linkId,destinationBankAccounts=sortAccounts(null==bankAccounts?void 0:bankAccounts.filter(function(bankAccount){return bankAccount.linkId===link.linkId})),destinationBankAccount=destinationBankAccounts.length>0?destinationBankAccounts[0]:null,classes=mergeTailwind("absolute","dark:bg-dark-monetr-border","right-0","rounded-l-xl","transition-transform","w-1.5",{"h-8":active,"scale-y-100":active},{"h-4":!active,"group-hover:scale-y-100":!active,"group-hover:scale-x-100":!active,"scale-x-0":!active,"scale-y-50":!active}),tooltip=link.getName();return link.getIsError()&&(tooltip="".concat(tooltip," (Error)")),/*#__PURE__*/react.createElement(Tooltip.A,{title:tooltip,arrow:!0,placement:"right",classes:{tooltip:"text-base font-medium"}},/*#__PURE__*/react.createElement("div",{className:"w-full h-12 flex items-center justify-center relative group","data-testid":"bank-sidebar-item-".concat(link.linkId)},/*#__PURE__*/react.createElement("div",{className:classes}),/*#__PURE__*/react.createElement(dist.N_,{className:"absolute rounded-full w-10 h-10 dark:bg-dark-monetr-background-subtle drop-shadow-md flex justify-center items-center",to:"/bank/".concat(null==destinationBankAccount?void 0:destinationBankAccount.bankAccountId,"/transactions")},/*#__PURE__*/react.createElement(function(){return(null==institution?void 0:institution.logo)?/*#__PURE__*/react.createElement("img",{"data-testid":"bank-sidebar-item-".concat(link.linkId,"-logo"),src:"data:image/png;base64,".concat(institution.logo)}):/*#__PURE__*/react.createElement(AccountBalance.A,{"data-testid":"bank-sidebar-item-".concat(link.linkId,"-logo-missing"),color:"info"})},null),/*#__PURE__*/react.createElement(function(){return link.getIsError()?/*#__PURE__*/react.createElement("span",{className:"absolute flex h-3 w-3 right-0 bottom-0"},/*#__PURE__*/react.createElement("span",{className:"animate-ping-slow absolute inline-flex h-full w-full rounded-full bg-yellow-400"}),/*#__PURE__*/react.createElement("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-yellow-500"})):null},null))))}try{BankSidebarItem.displayName="BankSidebarItem",BankSidebarItem.__docgenInfo={description:"",displayName:"BankSidebarItem",props:{link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"Link"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Layout/BankSidebarItem.tsx#BankSidebarItem"]={docgenInfo:BankSidebarItem.__docgenInfo,name:"BankSidebarItem",path:"../interface/src/components/Layout/BankSidebarItem.tsx#BankSidebarItem"})}catch(__react_docgen_typescript_loader_error){}function MDivider(props){var className=mergeTailwind("border-0 border-b-[thin] dark:border-dark-monetr-border",props.className);return /*#__PURE__*/react.createElement("hr",{className:className})}try{MDivider.displayName="MDivider",MDivider.__docgenInfo={description:"",displayName:"MDivider",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MDivider.tsx#MDivider"]={docgenInfo:MDivider.__docgenInfo,name:"MDivider",path:"../interface/src/components/MDivider.tsx#MDivider"})}catch(__react_docgen_typescript_loader_error){}var ArrowBackOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/ArrowBackOutlined.js"),MenuOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/MenuOutlined.js"),MenuOpenOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/MenuOpenOutlined.js"),useStore=(0,__webpack_require__("../node_modules/zustand/esm/index.mjs").vt)(function(set){return{mobileSidebarOpen:!1,setMobileSidebarOpen:function(isOpen){return set(function(){return{mobileSidebarOpen:isOpen}})}}});function MSidebarToggle(props){var navigate=(0,react_router_dist.Zp)(),_useStore=useStore(),setMobileSidebarOpen=_useStore.setMobileSidebarOpen,mobileSidebarOpen=_useStore.mobileSidebarOpen;function onClick(){props.backButton?navigate(props.backButton):setMobileSidebarOpen(!mobileSidebarOpen)}var className=mergeTailwind("visible lg:hidden","dark:text-dark-monetr-content-emphasis cursor-pointer h-12 flex items-center justify-center",props.className);return props.backButton?/*#__PURE__*/react.createElement("div",{className:className,onClick:onClick},/*#__PURE__*/react.createElement(ArrowBackOutlined.A,null)):/*#__PURE__*/react.createElement("div",{className:className,onClick:onClick},!mobileSidebarOpen&&/*#__PURE__*/react.createElement(MenuOutlined.A,null),mobileSidebarOpen&&/*#__PURE__*/react.createElement(MenuOpenOutlined.A,null))}try{MSidebarToggle.displayName="MSidebarToggle",MSidebarToggle.__docgenInfo={description:"",displayName:"MSidebarToggle",props:{backButton:{defaultValue:null,description:"",name:"backButton",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MSidebarToggle.tsx#MSidebarToggle"]={docgenInfo:MSidebarToggle.__docgenInfo,name:"MSidebarToggle",path:"../interface/src/components/MSidebarToggle.tsx#MSidebarToggle"})}catch(__react_docgen_typescript_loader_error){}function BankSidebar(props){var _useLinks=useLinks(),links=_useLinks.data,isLoading=_useLinks.isLoading,isError=_useLinks.isError;if(isLoading)return /*#__PURE__*/react.createElement(SidebarWrapper,{className:props.className});if(isError)return /*#__PURE__*/react.createElement(SidebarWrapper,{className:props.className},/*#__PURE__*/react.createElement("div",{className:"w-full h-12 flex items-center justify-center relative group"},/*#__PURE__*/react.createElement("div",{className:"absolute rounded-full w-10 h-10 dark:bg-dark-monetr-background-subtle dark:hover:bg-dark-monetr-background-emphasis drop-shadow-md flex justify-center items-center"},/*#__PURE__*/react.createElement(ErrorOutline.A,{className:"text-3xl"}))));var linksSorted=links.sort(function(a,b){var nameA=a.getName().toUpperCase(),nameB=b.getName().toUpperCase();return nameA<nameB?-1:nameA>nameB?1:0});return /*#__PURE__*/react.createElement(SidebarWrapper,{className:props.className},linksSorted.map(function(link){return /*#__PURE__*/react.createElement(BankSidebarItem,{key:link.linkId,link:link})}),/*#__PURE__*/react.createElement("div",{className:"w-full h-12 flex items-center justify-center relative group"},/*#__PURE__*/react.createElement(dist.N_,{to:"/link/create",className:"cursor-pointer absolute rounded-full w-10 h-10 dark:bg-dark-monetr-background-subtle dark:hover:bg-dark-monetr-background-emphasis drop-shadow-md flex justify-center items-center"},/*#__PURE__*/react.createElement(PlusOne.A,{className:"text-3xl"}))))}function SidebarWrapper(props){var className=mergeTailwind("border","border-transparent","dark:border-r-dark-monetr-border","flex","flex-col","flex-none","gap-4","h-full","items-center","lg:py-4","pt-2","pb-8","lg:pb-4","w-16",props.className);return /*#__PURE__*/react.createElement("div",{className:className,"data-testid":"bank-sidebar"},/*#__PURE__*/react.createElement(MSidebarToggle,{className:"flex lg:hidden"}),/*#__PURE__*/react.createElement("div",{className:"h-10 w-10"},/*#__PURE__*/react.createElement("img",{src:logo_namespaceObject,className:"w-full"})),/*#__PURE__*/react.createElement(MDivider,{className:"w-1/2"}),/*#__PURE__*/react.createElement("div",{className:"h-full w-full flex items-center flex-col overflow-y-auto"},null==props?void 0:props.children),/*#__PURE__*/react.createElement(BankSidebarSubscriptionItem,null),/*#__PURE__*/react.createElement(SettingsButton,null),/*#__PURE__*/react.createElement(LogoutButton,null))}function SettingsButton(){return /*#__PURE__*/react.createElement(dist.N_,{to:"/settings","data-testid":"bank-sidebar-settings"},/*#__PURE__*/react.createElement(Settings.A,{className:"dark:hover:text-dark-monetr-content-emphasis dark:text-dark-monetr-content-subtle cursor-pointer"}))}function LogoutButton(){return /*#__PURE__*/react.createElement(dist.N_,{to:"/logout","data-testid":"bank-sidebar-logout"},/*#__PURE__*/react.createElement(Logout.A,{className:"dark:hover:text-dark-monetr-content-emphasis dark:text-dark-monetr-content-subtle cursor-pointer"}))}try{BankSidebar.displayName="BankSidebar",BankSidebar.__docgenInfo={description:"",displayName:"BankSidebar",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Layout/BankSidebar.tsx#BankSidebar"]={docgenInfo:BankSidebar.__docgenInfo,name:"BankSidebar",path:"../interface/src/components/Layout/BankSidebar.tsx#BankSidebar"})}catch(__react_docgen_typescript_loader_error){}var AccountBalanceWalletOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/AccountBalanceWalletOutlined.js"),LocalAtmOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/LocalAtmOutlined.js"),TollOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/TollOutlined.js"),ShoppingCartOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/ShoppingCartOutlined.js"),PriceCheckOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/PriceCheckOutlined.js"),SavingsOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/SavingsOutlined.js"),TodayOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/TodayOutlined.js"),MoreVert=__webpack_require__("../node_modules/@mui/icons-material/esm/MoreVert.js"),Autorenew=__webpack_require__("../node_modules/@mui/icons-material/esm/Autorenew.js"),PriceChangeOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/PriceChangeOutlined.js"),AutorenewOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/AutorenewOutlined.js"),DeleteOutline=__webpack_require__("../node_modules/@mui/icons-material/esm/DeleteOutline.js"),Popover=__webpack_require__("../node_modules/@mui/material/Popover/Popover.js");function MSpan_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function MSpan_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){MSpan_define_property(target,key,source[key])})}return target}var MSpanPropsDefaults={color:"default",size:"inherit"};function MSpan(props){var _props_component,classNames=MSpanDeriveClasses(props=MSpan_object_spread({},MSpanPropsDefaults,props)),Element=null!==(_props_component=props.component)&&void 0!==_props_component?_props_component:"span";return /*#__PURE__*/react.createElement(Element,{className:classNames,"data-testid":props["data-testid"],onClick:props.onClick},props.children)}function MSpanDeriveClasses(props){var _props_component;return mergeTailwind("flex gap-2 items-center",{default:["dark:text-dark-monetr-content","text-monetr-content"],muted:["dark:text-dark-monetr-content-muted","text-monetr-content-muted"],subtle:["dark:text-dark-monetr-content-subtle","text-monetr-content-subtle"],emphasis:["dark:text-dark-monetr-content-emphasis","text-monetr-content-emphasis"],inherit:["text-inherit"]}[(props=MSpan_object_spread({},MSpanPropsDefaults,props)).color],{"block text-ellipsis min-w-0 truncate":props.ellipsis},{inherit:"text-size-inherit",xs:"text-xs",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl"}[props.size],{normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold"}[props.weight],{code:"dark:bg-dark-monetr-background-subtle px-1.5 rounded-lg"}[null===(_props_component=props.component)||void 0===_props_component?void 0:_props_component.toString()],props.className)}try{MSpan.displayName="MSpan",MSpan.__docgenInfo={description:"",displayName:"MSpan",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"() => void"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"enum",value:[{value:'"inherit"'},{value:'"default"'},{value:'"muted"'},{value:'"subtle"'},{value:'"emphasis"'}]}},ellipsis:{defaultValue:null,description:"",name:"ellipsis",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"inherit"'},{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"2xl"'},{value:'"3xl"'}]}},weight:{defaultValue:null,description:"",name:"weight",required:!1,type:{name:"enum",value:[{value:'"normal"'},{value:'"medium"'},{value:'"semibold"'},{value:'"bold"'}]}},component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MSpan.tsx#MSpan"]={docgenInfo:MSpan.__docgenInfo,name:"MSpan",path:"../interface/src/components/MSpan.tsx#MSpan"})}catch(__react_docgen_typescript_loader_error){}try{MSpanDeriveClasses.displayName="MSpanDeriveClasses",MSpanDeriveClasses.__docgenInfo={description:"Generates a list of class names based on the props provided. This is used to style the MSpan component but can be\ncalled anywhere if you want to have another component have consistent styling to that of the MSpan.",displayName:"MSpanDeriveClasses",props:{color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"enum",value:[{value:'"inherit"'},{value:'"default"'},{value:'"muted"'},{value:'"subtle"'},{value:'"emphasis"'}]}},ellipsis:{defaultValue:null,description:"",name:"ellipsis",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"inherit"'},{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"2xl"'},{value:'"3xl"'}]}},weight:{defaultValue:null,description:"",name:"weight",required:!1,type:{name:"enum",value:[{value:'"normal"'},{value:'"medium"'},{value:'"semibold"'},{value:'"bold"'}]}},component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MSpan.tsx#MSpanDeriveClasses"]={docgenInfo:MSpanDeriveClasses.__docgenInfo,name:"MSpanDeriveClasses",path:"../interface/src/components/MSpan.tsx#MSpanDeriveClasses"})}catch(__react_docgen_typescript_loader_error){}var lib_esm=__webpack_require__("../node_modules/@ebay/nice-modal-react/lib/esm/index.js"),DeleteOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/DeleteOutlined.js"),ButtonBase=__webpack_require__("../node_modules/@mui/material/ButtonBase/ButtonBase.js"),formik_esm=__webpack_require__("../node_modules/formik/dist/formik.esm.js");function MButton_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function MButton_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){MButton_define_property(target,key,source[key])})}return target}function MButton_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function MButton_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):MButton_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var MButtonPropsDefaults={disabled:!1,color:"secondary",variant:"solid"};function MBaseButton(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:MButtonPropsDefaults,_$_object_spread=MButton_object_spread({},MButtonPropsDefaults,props),disabled=_$_object_spread.disabled,theme=_$_object_spread.color,kind=_$_object_spread.variant,classNames=mergeTailwind({primary:{solid:{"dark:bg-dark-monetr-brand":!disabled,"dark:hover:bg-dark-monetr-brand-subtle":!disabled,"bg-purple-400":!disabled,"bg-purple-200":disabled,"hover:bg-purple-500":!disabled,"focus-visible:outline-purple-600":!disabled,"text-white":!0},text:{"dark:text-dark-monetr-brand-faint":!disabled,"focus-visible:outline-purple-600":!disabled,"text-purple-400":!disabled,"text-purple-200":disabled}},secondary:{solid:{"bg-white":!disabled,"dark:bg-dark-monetr-background-subtle":!disabled,"dark:hover:bg-dark-monetr-background-emphasis":!disabled,"dark:ring-dark-monetr-border":!disabled,"dark:ring-dark-monetr-border-subtle":disabled,"dark:text-dark-monetr-content-emphasis":!disabled,"dark:text-dark-monetr-content-muted":disabled,"focus-visible:outline-purple-200":!disabled,"hover:bg-gray-100":!disabled,"ring-1":!0,"ring-monetr-border-subtle":disabled,"ring-monetr-border":!disabled,"ring-inset":!0,"text-gray-400":disabled,"text-gray-900":!disabled},text:{"dark:hover:bg-dark-monetr-background-emphasis":!disabled,"dark:text-dark-monetr-content-emphasis":!disabled,"dark:text-dark-monetr-content-muted":disabled,"focus-visible:outline-purple-200":!disabled,"text-gray-400":disabled,"text-gray-900":!disabled},outlined:{"dark:hover:ring-dark-monetr-brand":!disabled,"dark:focus:ring-dark-monetr-brand":!disabled,"dark:ring-dark-monetr-border-string":!disabled,"dark:text-gray-400":!disabled,"ring-1":!disabled,"ring-inset":!disabled,"focus:ring-2":!disabled,"focus:ring-inset":!disabled,"min-h-[38px]":!0}},cancel:{solid:{"dark:bg-red-600":!disabled,"dark:hover:bg-red-500":!disabled,"bg-dark-monetr-red":!disabled,"bg-red-200":disabled,"hover:bg-red-600":!disabled,"focus-visible:outline-red-600":!disabled,"text-white":!0},text:{"text-dark-monetr-red":!disabled,"text-red-200":disabled,"focus-visible:outline-red-600":!disabled}}}[theme][kind],{"shadow-sm":"solid"===kind},"focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus:outline-none","font-semibold","px-3","py-1.5","rounded-lg","text-sm",props.className);return /*#__PURE__*/react.createElement(ButtonBase.A,MButton_object_spread_props(MButton_object_spread({},props),{className:classNames}))}function MFormButton(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:MButtonPropsDefaults,formikContext=(0,formik_esm.j7)();return props=MButton_object_spread_props(MButton_object_spread({},MButtonPropsDefaults,props),{disabled:(null==formikContext?void 0:formikContext.isSubmitting)||(null==props?void 0:props.disabled),onSubmit:(null==props?void 0:props.onSubmit)||("submit"===props.type?null==formikContext?void 0:formikContext.submitForm:void 0)}),/*#__PURE__*/react.createElement(MBaseButton,props)}try{MBaseButton.displayName="MBaseButton",MBaseButton.__docgenInfo={description:"",displayName:"MBaseButton",props:{color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"secondary"'},{value:'"cancel"'}]}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"solid"'},{value:'"outlined"'}]}},submitting:{defaultValue:null,description:"",name:"submitting",required:!1,type:{name:"boolean"}},action:{defaultValue:null,description:"A ref for imperative actions.\nIt currently only supports `focusVisible()` action.",name:"action",required:!1,type:{name:"Ref<ButtonBaseActions>"}},centerRipple:{defaultValue:{value:"false"},description:"If `true`, the ripples are centered.\nThey won't start at the cursor interaction position.",name:"centerRipple",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The content of the component.",name:"children",required:!1,type:{name:"ReactNode"}},classes:{defaultValue:null,description:"Override or extend the styles applied to the component.",name:"classes",required:!1,type:{name:"Partial<ButtonBaseClasses> & Partial<ClassNameMap<never>>"}},disabled:{defaultValue:{value:"false"},description:"If `true`, the component is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},disableRipple:{defaultValue:{value:"false"},description:"If `true`, the ripple effect is disabled.\n\n Without a ripple there is no styling for :focus-visible by default. Be sure\nto highlight the element by applying separate styles with the `.Mui-focusVisible` class.",name:"disableRipple",required:!1,type:{name:"boolean"}},disableTouchRipple:{defaultValue:{value:"false"},description:"If `true`, the touch ripple effect is disabled.",name:"disableTouchRipple",required:!1,type:{name:"boolean"}},focusRipple:{defaultValue:{value:"false"},description:"If `true`, the base button will have a keyboard focus ripple.",name:"focusRipple",required:!1,type:{name:"boolean"}},focusVisibleClassName:{defaultValue:null,description:"This prop can help identify which element has keyboard focus.\nThe class name will be applied when the element gains the focus through keyboard interaction.\nIt's a polyfill for the [CSS :focus-visible selector](https://drafts.csswg.org/selectors-4/#the-focus-visible-pseudo).\nThe rationale for using this feature [is explained here](https://github.com/WICG/focus-visible/blob/HEAD/explainer.md).\nA [polyfill can be used](https://github.com/WICG/focus-visible) to apply a `focus-visible` class to other components\nif needed.",name:"focusVisibleClassName",required:!1,type:{name:"string"}},LinkComponent:{defaultValue:{value:"'a'"},description:"The component used to render a link when the `href` prop is provided.",name:"LinkComponent",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},onFocusVisible:{defaultValue:null,description:"Callback fired when the component is focused with a keyboard.\nWe trigger a `onFocus` callback too.",name:"onFocusVisible",required:!1,type:{name:"FocusEventHandler<any>"}},sx:{defaultValue:null,description:"The system prop that allows defining system overrides as well as additional CSS styles.",name:"sx",required:!1,type:{name:"SxProps<Theme>"}},tabIndex:{defaultValue:{value:"0"},description:"",name:"tabIndex",required:!1,type:{name:"number"}},TouchRippleProps:{defaultValue:null,description:"Props applied to the `TouchRipple` element.",name:"TouchRippleProps",required:!1,type:{name:"Partial<TouchRippleProps>"}},touchRippleRef:{defaultValue:null,description:"A ref that points to the `TouchRipple` element.",name:"touchRippleRef",required:!1,type:{name:"Ref<TouchRippleActions>"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLButtonElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MButton.tsx#MBaseButton"]={docgenInfo:MBaseButton.__docgenInfo,name:"MBaseButton",path:"../interface/src/components/MButton.tsx#MBaseButton"})}catch(__react_docgen_typescript_loader_error){}try{MButton.displayName="MButton",MButton.__docgenInfo={description:"",displayName:"MButton",props:{color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"secondary"'},{value:'"cancel"'}]}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"solid"'},{value:'"outlined"'}]}},submitting:{defaultValue:null,description:"",name:"submitting",required:!1,type:{name:"boolean"}},action:{defaultValue:null,description:"A ref for imperative actions.\nIt currently only supports `focusVisible()` action.",name:"action",required:!1,type:{name:"Ref<ButtonBaseActions>"}},centerRipple:{defaultValue:{value:"false"},description:"If `true`, the ripples are centered.\nThey won't start at the cursor interaction position.",name:"centerRipple",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The content of the component.",name:"children",required:!1,type:{name:"ReactNode"}},classes:{defaultValue:null,description:"Override or extend the styles applied to the component.",name:"classes",required:!1,type:{name:"Partial<ButtonBaseClasses> & Partial<ClassNameMap<never>>"}},disabled:{defaultValue:{value:"false"},description:"If `true`, the component is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},disableRipple:{defaultValue:{value:"false"},description:"If `true`, the ripple effect is disabled.\n\n Without a ripple there is no styling for :focus-visible by default. Be sure\nto highlight the element by applying separate styles with the `.Mui-focusVisible` class.",name:"disableRipple",required:!1,type:{name:"boolean"}},disableTouchRipple:{defaultValue:{value:"false"},description:"If `true`, the touch ripple effect is disabled.",name:"disableTouchRipple",required:!1,type:{name:"boolean"}},focusRipple:{defaultValue:{value:"false"},description:"If `true`, the base button will have a keyboard focus ripple.",name:"focusRipple",required:!1,type:{name:"boolean"}},focusVisibleClassName:{defaultValue:null,description:"This prop can help identify which element has keyboard focus.\nThe class name will be applied when the element gains the focus through keyboard interaction.\nIt's a polyfill for the [CSS :focus-visible selector](https://drafts.csswg.org/selectors-4/#the-focus-visible-pseudo).\nThe rationale for using this feature [is explained here](https://github.com/WICG/focus-visible/blob/HEAD/explainer.md).\nA [polyfill can be used](https://github.com/WICG/focus-visible) to apply a `focus-visible` class to other components\nif needed.",name:"focusVisibleClassName",required:!1,type:{name:"string"}},LinkComponent:{defaultValue:{value:"'a'"},description:"The component used to render a link when the `href` prop is provided.",name:"LinkComponent",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},onFocusVisible:{defaultValue:null,description:"Callback fired when the component is focused with a keyboard.\nWe trigger a `onFocus` callback too.",name:"onFocusVisible",required:!1,type:{name:"FocusEventHandler<any>"}},sx:{defaultValue:null,description:"The system prop that allows defining system overrides as well as additional CSS styles.",name:"sx",required:!1,type:{name:"SxProps<Theme>"}},tabIndex:{defaultValue:{value:"0"},description:"",name:"tabIndex",required:!1,type:{name:"number"}},TouchRippleProps:{defaultValue:null,description:"Props applied to the `TouchRipple` element.",name:"TouchRippleProps",required:!1,type:{name:"Partial<TouchRippleProps>"}},touchRippleRef:{defaultValue:null,description:"A ref that points to the `TouchRipple` element.",name:"touchRippleRef",required:!1,type:{name:"Ref<TouchRippleActions>"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLButtonElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MButton.tsx#MButton"]={docgenInfo:MButton.__docgenInfo,name:"MButton",path:"../interface/src/components/MButton.tsx#MButton"})}catch(__react_docgen_typescript_loader_error){}var MModal=/*#__PURE__*/react.forwardRef(function(props,ref){if(!props.open)return null;var classNames=mergeTailwind("bg-background","overflow-auto","p-2","relative","rounded-none","sm:rounded-lg","shadow-xl","h-screen","sm:h-auto","w-screen","sm:w-full","sm:max-w-lg","pb-6","md:pb-2","transform",props.className);return /*#__PURE__*/react.createElement("div",{className:"top-0 left-0 absolute z-50 w-screen h-screen overflow-hidden",role:"dialog","aria-modal":"true"},/*#__PURE__*/react.createElement("div",{className:"hidden sm:inline sm:fixed inset-0 bg-dark-monetr-background bg-opacity-50 transition-opacity backdrop-blur-sm backdrop-brightness-50"}),/*#__PURE__*/react.createElement("div",{ref:ref,className:"fixed inset-0 z-10 overflow-y-hidden h-screen max-h-screen"},/*#__PURE__*/react.createElement("div",{className:"h-auto flex justify-center p-0 sm:p-4 items-center min-h-full"},/*#__PURE__*/react.createElement("div",{className:classNames},props.children))))});try{MModal.displayName="MModal",MModal.__docgenInfo={description:"",displayName:"MModal",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"() => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MModal.tsx#MModal"]={docgenInfo:MModal.__docgenInfo,name:"MModal",path:"../interface/src/components/MModal.tsx#MModal"})}catch(__react_docgen_typescript_loader_error){}function RemoveLinkModal_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function RemoveLinkModal_array_with_holes(arr){if(Array.isArray(arr))return arr}function RemoveLinkModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function RemoveLinkModal_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){RemoveLinkModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){RemoveLinkModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function RemoveLinkModal_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function RemoveLinkModal_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function RemoveLinkModal_sliced_to_array(arr,i){return RemoveLinkModal_array_with_holes(arr)||RemoveLinkModal_iterable_to_array_limit(arr,i)||RemoveLinkModal_unsupported_iterable_to_array(arr,i)||RemoveLinkModal_non_iterable_rest()}function RemoveLinkModal_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return RemoveLinkModal_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RemoveLinkModal_array_like_to_array(o,minLen)}}function RemoveLinkModal_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function RemoveLinkModal(props){var modal=(0,lib_esm.hS)(),ref=(0,react.useRef)(null),enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,_useState=RemoveLinkModal_sliced_to_array((0,react.useState)(!1),2),submitting=_useState[0],setSubmitting=_useState[1],removeLink=useRemoveLink(),navigate=(0,react_router_dist.Zp)();function submit(){return _submit.apply(this,arguments)}function _submit(){return(_submit=RemoveLinkModal_async_to_generator(function(){return RemoveLinkModal_ts_generator(this,function(_state){return setSubmitting(!0),[2,removeLink(props.link.linkId).then(function(){navigate("/"),modal.remove()}).catch(function(error){var _error_response_data,_error_response;setSubmitting(!1),enqueueSnackbar((null==error?void 0:null===(_error_response=error.response)||void 0===_error_response?void 0:null===(_error_response_data=_error_response.data)||void 0===_error_response_data?void 0:_error_response_data.error)||"Failed to remove ".concat(props.link.getName()),{variant:"error",disableWindowBlurListener:!0})})]})})).apply(this,arguments)}return /*#__PURE__*/react.createElement(MModal,{open:modal.visible,ref:ref,className:"py-4 md:max-w-md"},/*#__PURE__*/react.createElement("div",{className:"h-full flex flex-col gap-4 p-2 justify-between"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col"},/*#__PURE__*/react.createElement(MSpan,{weight:"bold",size:"xl",className:"mb-2"},/*#__PURE__*/react.createElement(DeleteOutlined.A,null),"Remove ",props.link.getName(),"?"),/*#__PURE__*/react.createElement(MSpan,{size:"lg",weight:"medium"},"Are you sure you want to remove your ",props.link.getName()," data?"),/*#__PURE__*/react.createElement(MSpan,{size:"lg"},"All expenses, goals and transactions related to this will be deleted. This cannot be undone.")),/*#__PURE__*/react.createElement("div",{className:"flex justify-end gap-2"},/*#__PURE__*/react.createElement(MBaseButton,{disabled:submitting,color:"secondary",onClick:modal.remove},"Cancel"),/*#__PURE__*/react.createElement(MBaseButton,{disabled:submitting,color:"cancel",type:"submit",onClick:submit},"Remove"))))}var removeLinkModal=lib_esm.Ay.create(RemoveLinkModal);function showRemoveLinkModal(props){return lib_esm.Ay.show(removeLinkModal,props)}try{showRemoveLinkModal.displayName="showRemoveLinkModal",showRemoveLinkModal.__docgenInfo={description:"",displayName:"showRemoveLinkModal",props:{link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"Link"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/modals/RemoveLinkModal.tsx#showRemoveLinkModal"]={docgenInfo:showRemoveLinkModal.__docgenInfo,name:"showRemoveLinkModal",path:"../interface/src/modals/RemoveLinkModal.tsx#showRemoveLinkModal"})}catch(__react_docgen_typescript_loader_error){}try{RemoveLinkModal.displayName="RemoveLinkModal",RemoveLinkModal.__docgenInfo={description:"",displayName:"RemoveLinkModal",props:{link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"Link"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/modals/RemoveLinkModal.tsx#RemoveLinkModal"]={docgenInfo:RemoveLinkModal.__docgenInfo,name:"RemoveLinkModal",path:"../interface/src/modals/RemoveLinkModal.tsx#RemoveLinkModal"})}catch(__react_docgen_typescript_loader_error){}var index_umd=__webpack_require__("../node_modules/react-plaid-link/dist/index.umd.js");function UpdatePlaidAccountOverlay_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function UpdatePlaidAccountOverlay_array_with_holes(arr){if(Array.isArray(arr))return arr}function UpdatePlaidAccountOverlay_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function UpdatePlaidAccountOverlay_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){UpdatePlaidAccountOverlay_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){UpdatePlaidAccountOverlay_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function UpdatePlaidAccountOverlay_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function UpdatePlaidAccountOverlay_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function UpdatePlaidAccountOverlay_sliced_to_array(arr,i){return UpdatePlaidAccountOverlay_array_with_holes(arr)||UpdatePlaidAccountOverlay_iterable_to_array_limit(arr,i)||UpdatePlaidAccountOverlay_unsupported_iterable_to_array(arr,i)||UpdatePlaidAccountOverlay_non_iterable_rest()}function UpdatePlaidAccountOverlay_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return UpdatePlaidAccountOverlay_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UpdatePlaidAccountOverlay_array_like_to_array(o,minLen)}}function UpdatePlaidAccountOverlay_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function UpdatePlaidAccountOverlay(param){var _ref,title,message,link=param.link,updateAccountSelection=param.updateAccountSelection,modal=(0,lib_esm.hS)(),queryClient=(0,QueryClientProvider.jE)(),_useState=UpdatePlaidAccountOverlay_sliced_to_array((0,react.useState)({loading:!0,linkToken:null,error:null}),2),state=_useState[0],setState=_useState[1];(0,react.useEffect)(function(){(0,util_request.A)().put("/plaid/link/update/".concat(link.linkId,"?update_account_selection=").concat(!!updateAccountSelection)).then(function(result){return setState({loading:!1,linkToken:result.data.linkToken})}).catch(function(error){throw setState({loading:!1,error:error}),error})},[link,updateAccountSelection]);var plaidOnSuccess=(0,react.useCallback)((_ref=UpdatePlaidAccountOverlay_async_to_generator(function(token,metadata){return UpdatePlaidAccountOverlay_ts_generator(this,function(_state){return console.log("plaidOnSuccess",{token:token,metadata:metadata}),setState({loading:!0}),[2,(0,util_request.A)().post("/plaid/link/update/callback",{linkId:link.linkId,publicToken:token,accountIds:metadata.accounts.map(function(account){return account.id})}).then(function(){return Promise.all([queryClient.invalidateQueries(["/bank_accounts"]),queryClient.invalidateQueries(["/links"]),queryClient.invalidateQueries(["/links/".concat(link.linkId)])])}).then(function(){return modal.remove()})]})}),function(token,metadata){return _ref.apply(this,arguments)}),[link,modal,queryClient]),plaidOnExit=(0,react.useCallback)(function(error,metadata){console.log("plaidOnExit",{error:error,metadata:metadata}),modal.remove()},[modal]),plaidOnEvent=(0,react.useCallback)(function(eventName,metadata){console.log("plaidOnEvent",{eventName:eventName,metadata:metadata})},[]),_usePlaidLink=(0,index_umd.usePlaidLink)({token:state.linkToken,onSuccess:plaidOnSuccess,onExit:plaidOnExit,onEvent:plaidOnEvent}),error=_usePlaidLink.error,open=_usePlaidLink.open;return(0,react.useEffect)(function(){if(error){console.error("PLAID LINK ERROR",error);return}open&&state.linkToken&&open()},[error,open,state.linkToken]),updateAccountSelection?(title="Updating Account Selection",message="One moment while we prepare Plaid to update your account selection for ".concat(link.getName(),".")):(title="Reauthenticating",message="One moment while we prepare Plaid to reauthenticate your connection to ".concat(link.getName(),".")),/*#__PURE__*/react.createElement(MModal,{open:modal.visible,className:"py-4 md:max-w-md"},/*#__PURE__*/react.createElement("div",{className:"h-full flex flex-col gap-4 p-2 justify-between"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col"},/*#__PURE__*/react.createElement(MSpan,{weight:"bold",size:"xl",className:"mb-2"},title),/*#__PURE__*/react.createElement(MSpan,{size:"lg",weight:"medium"},message))))}var updatePlaidAccountOverlay=lib_esm.Ay.create(UpdatePlaidAccountOverlay);function showUpdatePlaidAccountOverlay(props){return lib_esm.Ay.show(updatePlaidAccountOverlay,props)}try{showUpdatePlaidAccountOverlay.displayName="showUpdatePlaidAccountOverlay",showUpdatePlaidAccountOverlay.__docgenInfo={description:"",displayName:"showUpdatePlaidAccountOverlay",props:{link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"Link"}},updateAccountSelection:{defaultValue:null,description:"",name:"updateAccountSelection",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/modals/UpdatePlaidAccountOverlay.tsx#showUpdatePlaidAccountOverlay"]={docgenInfo:showUpdatePlaidAccountOverlay.__docgenInfo,name:"showUpdatePlaidAccountOverlay",path:"../interface/src/modals/UpdatePlaidAccountOverlay.tsx#showUpdatePlaidAccountOverlay"})}catch(__react_docgen_typescript_loader_error){}try{UpdatePlaidAccountOverlay.displayName="UpdatePlaidAccountOverlay",UpdatePlaidAccountOverlay.__docgenInfo={description:"",displayName:"UpdatePlaidAccountOverlay",props:{link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"Link"}},updateAccountSelection:{defaultValue:null,description:"",name:"updateAccountSelection",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/modals/UpdatePlaidAccountOverlay.tsx#UpdatePlaidAccountOverlay"]={docgenInfo:UpdatePlaidAccountOverlay.__docgenInfo,name:"UpdatePlaidAccountOverlay",path:"../interface/src/modals/UpdatePlaidAccountOverlay.tsx#UpdatePlaidAccountOverlay"})}catch(__react_docgen_typescript_loader_error){}function BudgetingSidebarTitle_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function BudgetingSidebarTitle_array_with_holes(arr){if(Array.isArray(arr))return arr}function BudgetingSidebarTitle_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function BudgetingSidebarTitle_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function BudgetingSidebarTitle_sliced_to_array(arr,i){return BudgetingSidebarTitle_array_with_holes(arr)||BudgetingSidebarTitle_iterable_to_array_limit(arr,i)||BudgetingSidebarTitle_unsupported_iterable_to_array(arr,i)||BudgetingSidebarTitle_non_iterable_rest()}function BudgetingSidebarTitle_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return BudgetingSidebarTitle_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BudgetingSidebarTitle_array_like_to_array(o,minLen)}}function BudgetingSidebarTitle(){var _useSelectedBankAccount=useSelectedBankAccount(),bankAccount=_useSelectedBankAccount.data;_useSelectedBankAccount.isLoading,_useSelectedBankAccount.isError;var link=useLink(null==bankAccount?void 0:bankAccount.linkId).data,triggerSync=useTriggerManualPlaidSync(),_useState=BudgetingSidebarTitle_sliced_to_array((0,react.useState)(null),2),anchorEl=_useState[0],setAnchorEl=_useState[1],open=!!anchorEl,closeMenu=(0,react.useCallback)(function(){return setAnchorEl(null)},[setAnchorEl]),handleClick=(0,react.useCallback)(function(event){setAnchorEl(event.currentTarget)},[setAnchorEl]),handleClose=(0,react.useCallback)(function(){return setAnchorEl(null)},[setAnchorEl]),handleReauthenticateLink=(0,react.useCallback)(function(){closeMenu(),showUpdatePlaidAccountOverlay({link:link})},[closeMenu,link]),handleTriggerResync=(0,react.useCallback)(function(){closeMenu(),triggerSync(null==bankAccount?void 0:bankAccount.linkId)},[null==bankAccount?void 0:bankAccount.linkId,closeMenu,triggerSync]),handleUpdateAccountSelection=(0,react.useCallback)(function(){closeMenu(),showUpdatePlaidAccountOverlay({link:link,updateAccountSelection:!0})},[closeMenu,link]),handleRemoveLink=(0,react.useCallback)(function(){closeMenu(),showRemoveLinkModal({link:link})},[closeMenu,link]);return link?/*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement("div",{onClick:handleClick,className:"flex h-12 w-full items-center p-2 dark:text-dark-monetr-content-emphasis dark:hover:bg-dark-monetr-background-emphasis cursor-pointer"},/*#__PURE__*/react.createElement("span",{className:"truncate text-xl font-semibold"},null==link?void 0:link.getName()),/*#__PURE__*/react.createElement(MoreVert.A,{className:"ml-auto"})),/*#__PURE__*/react.createElement(MDivider,{className:"w-1/2"}),/*#__PURE__*/react.createElement(Popover.Ay,{open:open,anchorEl:anchorEl,onClose:handleClose,transitionDuration:100,anchorOrigin:{vertical:"bottom",horizontal:"left"},className:"ml-[5px]"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col dark:bg-dark-monetr-background rounded-lg border dark:border-dark-monetr-border-subtle dark:shadow-2xl",style:{width:"".concat((null==anchorEl?void 0:anchorEl.offsetWidth)-10,"px")}},/*#__PURE__*/react.createElement(MenuItem,{visible:link.getIsPlaid()&&link.getIsError(),onClick:handleReauthenticateLink},/*#__PURE__*/react.createElement(Autorenew.A,{className:"mr-1 mb-0.5"}),"Reauthenticate"),/*#__PURE__*/react.createElement(MenuItem,{visible:link.getIsPlaid(),onClick:handleUpdateAccountSelection},/*#__PURE__*/react.createElement(PriceChangeOutlined.A,{className:"mr-1 mb-0.5"}),"Update Account Selection"),/*#__PURE__*/react.createElement(MenuItem,{visible:link.getIsPlaid(),onClick:handleTriggerResync},/*#__PURE__*/react.createElement(AutorenewOutlined.A,{className:"mr-1 mb-0.5"}),"Manually Resync"),/*#__PURE__*/react.createElement(MDivider,null),/*#__PURE__*/react.createElement(MenuItem,{visible:!0,onClick:handleRemoveLink},/*#__PURE__*/react.createElement(DeleteOutline.A,{className:"mr-1 mb-0.5 dark:text-dark-monetr-red"}),"Remove ",null==link?void 0:link.getName())))):null}function MenuItem(param){var visible=param.visible,onClick=param.onClick,children=param.children;return visible?/*#__PURE__*/react.createElement(MSpan,{size:"md",weight:"medium",className:"p-2 cursor-pointer dark:hover:bg-dark-monetr-background-emphasis dark:hover:text-dark-monetr-content-emphasis",component:"a",ellipsis:!0,onClick:onClick},children):null}var formatDistanceToNow=__webpack_require__("../node_modules/date-fns/esm/formatDistanceToNow/index.js");function PlaidLastUpdatedCard(props){var _link_data,_link_data_plaidLink,_link_data1,_link_data_plaidLink1,_link_data2,link=useLink(null==props?void 0:props.linkId);if(!(null==link?void 0:null===(_link_data=link.data)||void 0===_link_data?void 0:_link_data.plaidLink))return null;var lastUpdateString=(null==link?void 0:null===(_link_data1=link.data)||void 0===_link_data1?void 0:null===(_link_data_plaidLink=_link_data1.plaidLink)||void 0===_link_data_plaidLink?void 0:_link_data_plaidLink.lastSuccessfulUpdate)?(0,formatDistanceToNow.A)(link.data.plaidLink.lastSuccessfulUpdate):"Never",lastAttemptString=(null==link?void 0:null===(_link_data2=link.data)||void 0===_link_data2?void 0:null===(_link_data_plaidLink1=_link_data2.plaidLink)||void 0===_link_data_plaidLink1?void 0:_link_data_plaidLink1.lastAttemptedUpdate)?(0,formatDistanceToNow.A)(link.data.plaidLink.lastAttemptedUpdate):"Never";return /*#__PURE__*/react.createElement("div",{className:"p-2 group border-[thin] dark:border-dark-monetr-border rounded-lg w-full ease-in-out transition-[height] h-16 lg:h-10 lg:hover:h-16 hover:delay-0 delay-500 hover:dark:border-dark-monetr-border-string"},/*#__PURE__*/react.createElement(MSpan,{size:"sm",color:"subtle"},"Last Updated: ",lastUpdateString," ago"),/*#__PURE__*/react.createElement(MSpan,{size:"sm",color:"subtle",className:"transition-opacity opacity-100 lg:opacity-0 lg:group-hover:opacity-100 delay-500 group-hover:delay-0"},"Last Attempt: ",lastAttemptString," ago"))}try{PlaidLastUpdatedCard.displayName="PlaidLastUpdatedCard",PlaidLastUpdatedCard.__docgenInfo={description:"",displayName:"PlaidLastUpdatedCard",props:{linkId:{defaultValue:null,description:"",name:"linkId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Layout/PlaidLastUpdatedCard.tsx#PlaidLastUpdatedCard"]={docgenInfo:PlaidLastUpdatedCard.__docgenInfo,name:"PlaidLastUpdatedCard",path:"../interface/src/components/Layout/PlaidLastUpdatedCard.tsx#PlaidLastUpdatedCard"})}catch(__react_docgen_typescript_loader_error){}var react_slot_dist=__webpack_require__("../node_modules/@radix-ui/react-slot/dist/index.mjs"),class_variance_authority_dist=__webpack_require__("../node_modules/class-variance-authority/dist/index.mjs");function Button_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Button_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){Button_define_property(target,key,source[key])})}return target}function _object_without_properties(source,excluded){if(null==source)return{};var key,i,target=_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}var buttonVariants=(0,class_variance_authority_dist.F)(["focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus:outline-none","font-semibold","inline-flex items-center gap-1 justify-center","rounded-lg","enabled:active:brightness-110","[&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0","disabled:pointer-events-none"],{variants:{variant:{primary:["bg-monetr-brand enabled:hover:bg-dark-monetr-brand-subtle disabled:bg-purple-200","focus-visible:outline-purple-600","text-dark-monetr-content-emphasis","shadow-sm"],secondary:["bg-dark-monetr-background-subtle enabled:hover:bg-dark-monetr-background-emphasis","ring-1 ring-inset ring-dark-monetr-border disabled:ring-dark-monetr-border-subtle","text-dark-monetr-content-emphasis disabled:text-dark-monetr-content-subtle","focus-visible:outline-purple-200"],outlined:["ring-1 ring-inset enabled:focus:ring-2 enabled:hover:ring-2","enabled:hover:ring-dark-monetr-brand enabled:focus:ring-dark-monetr-brand","ring-dark-monetr-border-string disabled:ring-dark-monetr-border-subtle","text-dark-monetr-content-emphasis disabled:text-dark-monetr-content-muted"],destructive:["bg-red-600 enabled:hover:bg-red-500 disabled:bg-red-200","focus-visible:outline-red-600","text-dark-monetr-content-emphasis","shadow-sm"],text:["enabled:hover:bg-dark-monetr-background-emphasis","text-dark-monetr-content-emphasis disabled:text-dark-monetr-content-muted","focus-visible:outline-purple-200"]},size:{default:"h-8 text-sm px-3 py-1.5",md:"min-h-10 px-3 py-1.5"}},defaultVariants:{size:"default",variant:"primary"}}),Button=/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,color=_param.variant,size=_param.size,_param_asChild=_param.asChild,props=_object_without_properties(_param,["className","variant","size","asChild"]),Comp=void 0!==_param_asChild&&_param_asChild?react_slot_dist.DX:"button";return /*#__PURE__*/react.createElement(Comp,Button_object_spread({className:mergeTailwind(buttonVariants({variant:color,size:size,className:className})),ref:ref},props))});Button.displayName="Button";try{Button.displayName="Button",Button.__docgenInfo={description:"",displayName:"Button",props:{asChild:{defaultValue:{value:"false"},description:"",name:"asChild",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"md"'}]}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"primary"'},{value:'"secondary"'},{value:'"outlined"'},{value:'"destructive"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Button.tsx#Button"]={docgenInfo:Button.__docgenInfo,name:"Button",path:"../interface/src/components/Button.tsx#Button"})}catch(__react_docgen_typescript_loader_error){}var react_dialog_dist=__webpack_require__("../node_modules/@radix-ui/react-dialog/dist/index.mjs"),x=__webpack_require__("../node_modules/lucide-react/dist/esm/icons/x.js");function Dialog_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Dialog_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){Dialog_define_property(target,key,source[key])})}return target}function Dialog_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=Dialog_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function Dialog_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}react_dialog_dist.bL,react_dialog_dist.l9;var DialogPortal=react_dialog_dist.ZL;react_dialog_dist.bm;var DialogOverlay=/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,props=Dialog_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement(react_dialog_dist.hJ,Dialog_object_spread({ref:ref,className:mergeTailwind("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",className)},props))});DialogOverlay.displayName=react_dialog_dist.hJ.displayName,/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,children=_param.children,props=Dialog_object_without_properties(_param,["className","children"]);return /*#__PURE__*/react.createElement(DialogPortal,null,/*#__PURE__*/react.createElement(DialogOverlay,null),/*#__PURE__*/react.createElement(react_dialog_dist.UC,Dialog_object_spread({ref:ref,className:mergeTailwind("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",className)},props),children,/*#__PURE__*/react.createElement(react_dialog_dist.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-dark-monetr-content-subtle"},/*#__PURE__*/react.createElement(x.A,{className:"h-4 w-4"}),/*#__PURE__*/react.createElement("span",{className:"sr-only"},"Close"))))}).displayName=react_dialog_dist.UC.displayName;var DialogHeader=function(_param){var className=_param.className,props=Dialog_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement("div",Dialog_object_spread({className:mergeTailwind("flex flex-col space-y-1.5 text-center sm:text-left",className)},props))};DialogHeader.displayName="DialogHeader",/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,props=Dialog_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement(react_dialog_dist.hE,Dialog_object_spread({ref:ref,className:mergeTailwind("text-lg font-semibold leading-none tracking-tight",className)},props))}).displayName=react_dialog_dist.hE.displayName,/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,props=Dialog_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement(react_dialog_dist.VY,Dialog_object_spread({ref:ref,className:mergeTailwind("text-sm text-dark-monetr-content-subtle",className)},props))}).displayName=react_dialog_dist.VY.displayName;try{DialogHeader.displayName="DialogHeader",DialogHeader.__docgenInfo={description:"",displayName:"DialogHeader",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Dialog.tsx#DialogHeader"]={docgenInfo:DialogHeader.__docgenInfo,name:"DialogHeader",path:"../interface/src/components/Dialog.tsx#DialogHeader"})}catch(__react_docgen_typescript_loader_error){}var cmdk_dist=__webpack_require__("../node_modules/cmdk/dist/index.mjs"),search=__webpack_require__("../node_modules/lucide-react/dist/esm/icons/search.js");function Command_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Command_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){Command_define_property(target,key,source[key])})}return target}function Command_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=Command_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function Command_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}var Command=/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,props=Command_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement(cmdk_dist.uB,Command_object_spread({ref:ref,className:mergeTailwind("flex h-full w-full flex-col overflow-hidden rounded-lg bg-dark-monetr-background text-dark-monetr-content-emphasis",className)},props))});Command.displayName=cmdk_dist.uB.displayName;var CommandInput=/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,props=Command_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement("div",{className:"flex items-center border-b-[thin] border-dark-monetr-border px-3","cmdk-input-wrapper":""},/*#__PURE__*/react.createElement(search.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),/*#__PURE__*/react.createElement(cmdk_dist.uB.Input,Command_object_spread({ref:ref,className:mergeTailwind("flex h-11 w-full rounded-lg bg-transparent py-3 text-sm outline-none placeholder:text-gray-400 disabled:cursor-not-allowed disabled:opacity-50",className)},props)))});CommandInput.displayName=cmdk_dist.uB.Input.displayName;var CommandList=/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,props=Command_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement(cmdk_dist.uB.List,Command_object_spread({ref:ref,className:mergeTailwind("max-h-[300px] overflow-y-auto overflow-x-hidden",className)},props))});CommandList.displayName=cmdk_dist.uB.List.displayName;var CommandEmpty=/*#__PURE__*/react.forwardRef(function(props,ref){return /*#__PURE__*/react.createElement(cmdk_dist.uB.Empty,Command_object_spread({ref:ref,className:"py-6 text-center text-sm"},props))});CommandEmpty.displayName=cmdk_dist.uB.Empty.displayName;var CommandGroup=/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,props=Command_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement(cmdk_dist.uB.Group,Command_object_spread({ref:ref,className:mergeTailwind("overflow-hidden p-1 text-dark-monetr-content-emphasis","[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5","[&_[cmdk-group-heading]]:text-xs","[&_[cmdk-group-heading]]:font-semibold","[&_[cmdk-group-heading]]:text-dark-monetr-content-muted",className)},props))});CommandGroup.displayName=cmdk_dist.uB.Group.displayName,/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,props=Command_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement(cmdk_dist.uB.Separator,Command_object_spread({ref:ref,className:mergeTailwind("-mx-1 h-px bg-border",className)},props))}).displayName=cmdk_dist.uB.Separator.displayName;var CommandItem=/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,props=Command_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement(cmdk_dist.uB.Item,Command_object_spread({ref:ref,className:mergeTailwind(['text-dark-monetr-content-emphasis data-[disabled="true"]:text-dark-monetr-content-muted','data-[disabled="false"]:cursor-pointer data-[disabled="true"]:cursor-default','data-[disabled="true"]:pointer-events-none',"relative flex cursor-default select-none items-center rounded-lg","px-2 py-1.5","text-sm outline-none","aria-selected:bg-dark-monetr-background-emphasis aria-selected:text-accent-foreground"],className)},props))});CommandItem.displayName=cmdk_dist.uB.Item.displayName;var CommandShortcut=function(_param){var className=_param.className,props=Command_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement("span",Command_object_spread({className:mergeTailwind("ml-auto text-xs tracking-widest text-muted-foreground",className)},props))};CommandShortcut.displayName="CommandShortcut";try{CommandShortcut.displayName="CommandShortcut",CommandShortcut.__docgenInfo={description:"",displayName:"CommandShortcut",props:{label:{defaultValue:null,description:"Accessible label for this command menu. Not shown visibly.",name:"label",required:!1,type:{name:"string"}},filter:{defaultValue:null,description:"Custom filter function for whether each command menu item should matches the given search query.\nIt should return a number between 0 and 1, with 1 being the best match and 0 being hidden entirely.\nBy default, uses the `command-score` library.",name:"filter",required:!1,type:{name:"(value: string, search: string, keywords?: string[]) => number"}},value:{defaultValue:null,description:"Optional controlled state of the selected command menu item.",name:"value",required:!1,type:{name:"string"}},asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}},onValueChange:{defaultValue:null,description:"Event handler called when the selected item of the menu changes.",name:"onValueChange",required:!1,type:{name:"(value: string) => void"}},loop:{defaultValue:null,description:"Optionally set to `true` to turn on looping around when using the arrow keys.",name:"loop",required:!1,type:{name:"boolean"}},shouldFilter:{defaultValue:null,description:"Optionally set to `false` to turn off the automatic filtering and sorting.\nIf `false`, you must conditionally render valid items based on the search query yourself.",name:"shouldFilter",required:!1,type:{name:"boolean"}},disablePointerSelection:{defaultValue:null,description:"Optionally set to `true` to disable selection via pointer events.",name:"disablePointerSelection",required:!1,type:{name:"boolean"}},vimBindings:{defaultValue:null,description:"Set to `false` to disable ctrl+n/j/p/k shortcuts. Defaults to `true`.",name:"vimBindings",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Command.tsx#CommandShortcut"]={docgenInfo:CommandShortcut.__docgenInfo,name:"CommandShortcut",path:"../interface/src/components/Command.tsx#CommandShortcut"})}catch(__react_docgen_typescript_loader_error){}var react_popover_dist=__webpack_require__("../interface/node_modules/@radix-ui/react-popover/dist/index.mjs");function Popover_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Popover_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){Popover_define_property(target,key,source[key])})}return target}function Popover_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=Popover_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function Popover_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}var Popover_Popover=react_popover_dist.bL,PopoverTrigger=react_popover_dist.l9,PopoverContent=/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,_param_align=_param.align,_param_sideOffset=_param.sideOffset,props=Popover_object_without_properties(_param,["className","align","sideOffset"]);return /*#__PURE__*/react.createElement(react_popover_dist.ZL,null,/*#__PURE__*/react.createElement(react_popover_dist.UC,Popover_object_spread({ref:ref,align:void 0===_param_align?"center":_param_align,sideOffset:void 0===_param_sideOffset?4:_param_sideOffset,className:mergeTailwind("z-50 w-72 rounded-lg bg-dark-monetr-popover p-4 text-dark-monetr-content-emphasis","border border-dark-monetr-border","shadow-md outline-none","data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95","data-[side=bottom]:slide-in-from-top-2","data-[side=left]:slide-in-from-right-2","data-[side=right]:slide-in-from-left-2","data-[side=top]:slide-in-from-bottom-2",className)},props)))});PopoverContent.displayName=react_popover_dist.UC.displayName;try{Popover_Popover.displayName="Popover",Popover_Popover.__docgenInfo={description:"",displayName:"Popover",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Popover.tsx#Popover"]={docgenInfo:Popover_Popover.__docgenInfo,name:"Popover",path:"../interface/src/components/Popover.tsx#Popover"})}catch(__react_docgen_typescript_loader_error){}try{PopoverContent.displayName="PopoverContent",PopoverContent.__docgenInfo={description:"",displayName:"PopoverContent",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Popover.tsx#PopoverContent"]={docgenInfo:PopoverContent.__docgenInfo,name:"PopoverContent",path:"../interface/src/components/Popover.tsx#PopoverContent"})}catch(__react_docgen_typescript_loader_error){}try{PopoverTrigger.displayName="PopoverTrigger",PopoverTrigger.__docgenInfo={description:"",displayName:"PopoverTrigger",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Popover.tsx#PopoverTrigger"]={docgenInfo:PopoverTrigger.__docgenInfo,name:"PopoverTrigger",path:"../interface/src/components/Popover.tsx#PopoverTrigger"})}catch(__react_docgen_typescript_loader_error){}var check=__webpack_require__("../node_modules/lucide-react/dist/esm/icons/check.js"),chevrons_up_down=__webpack_require__("../node_modules/lucide-react/dist/esm/icons/chevrons-up-down.js");function Combobox_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Combobox_array_with_holes(arr){if(Array.isArray(arr))return arr}function Combobox_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Combobox_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function Combobox_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Combobox_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){Combobox_define_property(target,key,source[key])})}return target}function Combobox_sliced_to_array(arr,i){return Combobox_array_with_holes(arr)||Combobox_iterable_to_array_limit(arr,i)||Combobox_unsupported_iterable_to_array(arr,i)||Combobox_non_iterable_rest()}function Combobox_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return Combobox_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Combobox_array_like_to_array(o,minLen)}}var comboboxVariants=(0,class_variance_authority_dist.F)(["justify-between text-ellipsis overflow-hidden text-nowrap"],{variants:{variant:{outlined:["ring-1 enabled:ring-dark-monetr-border-string"],text:["ring-0","enabled:hover:bg-transparent",'data-[state="closed"]:enabled:hover:ring-1','data-[state="closed"]:enabled:hover:ring-dark-monetr-border-string','data-[state="closed"]:focus:ring-0','data-[state="open"]:ring-dark-monetr-brand data-[state="open"]:ring-2']},size:{default:"h-8 text-sm",md:"h-10"}},defaultVariants:{variant:"outlined",size:"md"}});function ComboboxItem(props){return /*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement(check.A,{className:mergeTailwind("mr-2 h-5 w-5",props.currentValue==props.option.value?"opacity-100":"opacity-0")}),props.option.label)}function Combobox(props){var _props_options_find,Item=Combobox_object_spread({Item:ComboboxItem},props.components).Item,_React_useState=Combobox_sliced_to_array(react.useState(!1),2),open=_React_useState[0],setOpen=_React_useState[1];return /*#__PURE__*/react.createElement(Popover_Popover,{open:open,onOpenChange:setOpen},/*#__PURE__*/react.createElement(PopoverTrigger,{asChild:!0},/*#__PURE__*/react.createElement(Button,{size:props.size,variant:props.variant,role:"combobox","aria-expanded":open,disabled:props.disabled,className:mergeTailwind(comboboxVariants({variant:props.variant,size:props.size}),props.className)},/*#__PURE__*/react.createElement("div",{className:"text-ellipsis text-nowrap min-w-0 overflow-hidden text-inherit"},props.value?null===(_props_options_find=props.options.find(function(option){return option.value===props.value}))||void 0===_props_options_find?void 0:_props_options_find.label:props.placeholder),/*#__PURE__*/react.createElement(chevrons_up_down.A,{className:"h-3 w-3 shrink-0 opacity-50"}))),/*#__PURE__*/react.createElement(PopoverContent,{className:"p-0"},/*#__PURE__*/react.createElement(Command,null,(props.options.length>1&&!1!==props.showSearch||props.showSearch)&&/*#__PURE__*/react.createElement(CommandInput,{placeholder:props.searchPlaceholder}),/*#__PURE__*/react.createElement(CommandList,null,/*#__PURE__*/react.createElement(CommandEmpty,null,props.emptyString),/*#__PURE__*/react.createElement(CommandGroup,null,props.options.map(function(option){return /*#__PURE__*/react.createElement(CommandItem,{key:option.value,value:"".concat(option.label," ").concat(option.value),title:option.label,onSelect:function(){props.onSelect&&props.onSelect(option.value),setOpen(!1)}},/*#__PURE__*/react.createElement(Item,{currentValue:props.value,option:option}))}))))))}try{ComboboxItem.displayName="ComboboxItem",ComboboxItem.__docgenInfo={description:"",displayName:"ComboboxItem",props:{currentValue:{defaultValue:null,description:"",name:"currentValue",required:!0,type:{name:"string"}},option:{defaultValue:null,description:"",name:"option",required:!0,type:{name:"ComboboxOption<V>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Combobox.tsx#ComboboxItem"]={docgenInfo:ComboboxItem.__docgenInfo,name:"ComboboxItem",path:"../interface/src/components/Combobox.tsx#ComboboxItem"})}catch(__react_docgen_typescript_loader_error){}try{Combobox.displayName="Combobox",Combobox.__docgenInfo={description:"",displayName:"Combobox",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"O[]"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},emptyString:{defaultValue:null,description:"",name:"emptyString",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},searchPlaceholder:{defaultValue:null,description:"",name:"searchPlaceholder",required:!1,type:{name:"string"}},showSearch:{defaultValue:null,description:"",name:"showSearch",required:!1,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"(value: V) => void"}},components:{defaultValue:null,description:"",name:"components",required:!1,type:{name:"{ Item?: ComponentType<ComboboxItemProps<V, O>>; }"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"md"'}]}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"outlined"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Combobox.tsx#Combobox"]={docgenInfo:Combobox.__docgenInfo,name:"Combobox",path:"../interface/src/components/Combobox.tsx#Combobox"})}catch(__react_docgen_typescript_loader_error){}function MBadge_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function MBadge_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){MBadge_define_property(target,key,source[key])})}return target}function MBadge_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function MBadge_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):MBadge_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function MBadge(props){var classes=mergeTailwind("bg-monetr-brand","dark:text-dark-monetr-content-emphasis","px-2","py-0.5","rounded-lg",props.className);return /*#__PURE__*/react.createElement(MSpan,MBadge_object_spread_props(MBadge_object_spread({},props),{className:classes}))}try{MBadge.displayName="MBadge",MBadge.__docgenInfo={description:"",displayName:"MBadge",props:{component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"() => void"}},ellipsis:{defaultValue:null,description:"",name:"ellipsis",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"inherit"'},{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"2xl"'},{value:'"3xl"'}]}},weight:{defaultValue:null,description:"",name:"weight",required:!1,type:{name:"enum",value:[{value:'"normal"'},{value:'"medium"'},{value:'"semibold"'},{value:'"bold"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MBadge.tsx#MBadge"]={docgenInfo:MBadge.__docgenInfo,name:"MBadge",path:"../interface/src/components/MBadge.tsx#MBadge"})}catch(__react_docgen_typescript_loader_error){}function Skeleton_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Skeleton_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){Skeleton_define_property(target,key,source[key])})}return target}function Skeleton_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=Skeleton_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function Skeleton_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function Skeleton(_param){var className=_param.className,props=Skeleton_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement("div",Skeleton_object_spread({className:mergeTailwind("animate-pulse rounded-lg bg-dark-monetr-background-emphasis px-3 py-1.5",className)},props),"")}try{Skeleton.displayName="Skeleton",Skeleton.__docgenInfo={description:"",displayName:"Skeleton",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Skeleton.tsx#Skeleton"]={docgenInfo:Skeleton.__docgenInfo,name:"Skeleton",path:"../interface/src/components/Skeleton.tsx#Skeleton"})}catch(__react_docgen_typescript_loader_error){}function SelectBankAccount(){var navigate=(0,react_router_dist.Zp)(),_useBankAccounts=bankAccounts_useBankAccounts(),allBankAccounts=_useBankAccounts.data,allIsLoading=_useBankAccounts.isLoading,_useSelectedBankAccount=useSelectedBankAccount(),selectedBankAccount=_useSelectedBankAccount.data,selectedIsLoading=_useSelectedBankAccount.isLoading,accounts=sortAccounts(null==allBankAccounts?void 0:allBankAccounts.filter(function(account){return account.linkId===(null==selectedBankAccount?void 0:selectedBankAccount.linkId)})).map(function(account){return{label:account.name,value:account.bankAccountId,type:account.accountSubType,mask:account.mask,status:account.status}}),current=null==accounts?void 0:accounts.find(function(account){return account.value===(null==selectedBankAccount?void 0:selectedBankAccount.bankAccountId)});return allIsLoading||selectedIsLoading?/*#__PURE__*/react.createElement(Skeleton,{className:"w-full h-10"}):/*#__PURE__*/react.createElement(Combobox,{className:"w-full",variant:"text",size:"md",options:accounts,value:null==current?void 0:current.value,placeholder:"Select a bank account...",searchPlaceholder:"Search for an account...",showSearch:!0,onSelect:function(value){return navigate("/bank/".concat(value,"/transactions"))},components:{Item:BankAccountSelectItem}})}function BankAccountSelectItem(props){return /*#__PURE__*/react.createElement("div",{className:"flex items-center w-full"},/*#__PURE__*/react.createElement(check.A,{className:mergeTailwind("mr-2 h-5 w-5",props.currentValue==props.option.value?"opacity-100":"opacity-0")}),/*#__PURE__*/react.createElement(MSpan,{className:"w-full pr-2",color:"emphasis",ellipsis:!0},props.option.label),""!=props.option.mask&&/*#__PURE__*/react.createElement(MBadge,{size:"xs",className:"font-mono"},props.option.mask))}function Balance_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function Balance_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Balance_create_class(Constructor,protoProps,staticProps){return protoProps&&Balance_defineProperties(Constructor.prototype,protoProps),staticProps&&Balance_defineProperties(Constructor,staticProps),Constructor}function Balance_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Balance_Balance=/*#__PURE__*/function(){function Balance(data){Balance_class_call_check(this,Balance),Balance_define_property(this,"bankAccountId",void 0),Balance_define_property(this,"available",void 0),Balance_define_property(this,"current",void 0),Balance_define_property(this,"free",void 0),Balance_define_property(this,"expenses",void 0),Balance_define_property(this,"goals",void 0),data&&Object.assign(this,data)}return Balance_create_class(Balance,[{key:"getFreeToUseString",value:function getFreeToUseString(){return formatAmount(this.free)}},{key:"getAvailableString",value:function getAvailableString(){return formatAmount(this.available)}},{key:"getCurrentString",value:function getCurrentString(){return formatAmount(this.current)}},{key:"getExpensesString",value:function getExpensesString(){return formatAmount(this.expenses)}},{key:"getGoalsString",value:function getGoalsString(){return formatAmount(this.goals)}}]),Balance}();function useCurrentBalance(){var selectedBankAccountId=bankAccounts_useSelectedBankAccountId(),result=(0,lib_useQuery.I)(["/bank_accounts/".concat(selectedBankAccountId,"/balances")],{enabled:!!selectedBankAccountId});return(null==result?void 0:result.data)&&new Balance_Balance(null==result?void 0:result.data)}var isBefore=__webpack_require__("../node_modules/date-fns/esm/isBefore/index.js"),format=__webpack_require__("../node_modules/date-fns/esm/format/index.js");function FundingSchedule_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function FundingSchedule_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function FundingSchedule_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){FundingSchedule_define_property(target,key,source[key])})}return target}function FundingSchedule_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function FundingSchedule_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):FundingSchedule_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var FundingSchedule=function FundingSchedule(data){FundingSchedule_class_call_check(this,FundingSchedule),FundingSchedule_define_property(this,"fundingScheduleId",void 0),FundingSchedule_define_property(this,"bankAccountId",void 0),FundingSchedule_define_property(this,"name",void 0),FundingSchedule_define_property(this,"description",void 0),FundingSchedule_define_property(this,"ruleset",void 0),FundingSchedule_define_property(this,"lastRecurrence",void 0),FundingSchedule_define_property(this,"nextRecurrence",void 0),FundingSchedule_define_property(this,"nextRecurrenceOriginal",void 0),FundingSchedule_define_property(this,"excludeWeekends",void 0),FundingSchedule_define_property(this,"estimatedDeposit",void 0),data&&Object.assign(this,FundingSchedule_object_spread_props(FundingSchedule_object_spread({},data),{lastRecurrence:data.lastRecurrence&&(0,parseJSON.A)(data.lastRecurrence),nextRecurrence:(0,parseJSON.A)(data.nextRecurrence),nextRecurrenceOriginal:(0,parseJSON.A)(data.nextRecurrenceOriginal)}))};function fundingSchedules_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function fundingSchedules_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){fundingSchedules_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){fundingSchedules_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function fundingSchedules_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useFundingSchedulesSink(){var selectedBankAccountId=bankAccounts_useSelectedBankAccountId();return(0,lib_useQuery.I)(["/bank_accounts/".concat(selectedBankAccountId,"/funding_schedules")],{enabled:!!selectedBankAccountId,select:function(data){return data.map(function(item){return new FundingSchedule(item)})}})}function useNextFundingDate(){var funding=useFundingSchedulesSink().data,date=null==funding?void 0:funding.sort(function(a,b){return(0,isBefore.A)(a.nextRecurrence,b.nextRecurrence)?1:-1}).pop();return date?(0,format.A)(date.nextRecurrence,"M/dd"):null}function useFundingSchedule(fundingScheduleId){var selectedBankAccountId=bankAccounts_useSelectedBankAccountId();return(0,lib_useQuery.I)(["/bank_accounts/".concat(selectedBankAccountId,"/funding_schedules/").concat(fundingScheduleId)],{enabled:!!selectedBankAccountId&&!!fundingScheduleId,select:function(data){return(null==data?void 0:data.fundingScheduleId)?new FundingSchedule(data):null}})}function useCreateFundingSchedule(){var queryClient=(0,QueryClientProvider.jE)();function createFundingSchedule(newItem){return _createFundingSchedule.apply(this,arguments)}function _createFundingSchedule(){return(_createFundingSchedule=fundingSchedules_async_to_generator(function(newItem){return fundingSchedules_ts_generator(this,function(_state){return[2,(0,util_request.A)().post("/bank_accounts/".concat(newItem.bankAccountId,"/funding_schedules"),newItem).then(function(result){return new FundingSchedule(null==result?void 0:result.data)})]})})).apply(this,arguments)}return(0,useMutation.n)(createFundingSchedule,{onSuccess:function(newFundingSchedule){return Promise.all([queryClient.setQueriesData(["/bank_accounts/".concat(newFundingSchedule.bankAccountId,"/funding_schedules")],function(previous){return previous.concat(newFundingSchedule)}),queryClient.setQueriesData(["/bank_accounts/".concat(newFundingSchedule.bankAccountId,"/funding_schedules/").concat(newFundingSchedule.fundingScheduleId)],newFundingSchedule)])}}).mutateAsync}function useUpdateFundingSchedule(){var queryClient=(0,QueryClientProvider.jE)();function updateFundingSchedule(fundingSchedule){return _updateFundingSchedule.apply(this,arguments)}function _updateFundingSchedule(){return(_updateFundingSchedule=fundingSchedules_async_to_generator(function(fundingSchedule){return fundingSchedules_ts_generator(this,function(_state){return[2,(0,util_request.A)().put("/bank_accounts/".concat(fundingSchedule.bankAccountId,"/funding_schedules/").concat(fundingSchedule.fundingScheduleId),fundingSchedule).then(function(result){return result.data})]})})).apply(this,arguments)}return(0,useMutation.n)(updateFundingSchedule,{onSuccess:function(response){return Promise.all([queryClient.setQueriesData(["/bank_accounts/".concat(response.fundingSchedule.bankAccountId,"/funding_schedules")],function(previous){return previous.map(function(item){return item.fundingScheduleId===response.fundingSchedule.fundingScheduleId?response.fundingSchedule:item})}),queryClient.setQueriesData(["/bank_accounts/".concat(response.fundingSchedule.bankAccountId,"/funding_schedules/").concat(response.fundingSchedule.fundingScheduleId)],response.fundingSchedule),queryClient.setQueriesData(["/bank_accounts/".concat(response.fundingSchedule.bankAccountId,"/spending")],function(previous){return previous.map(function(item){return(response.spending||[]).find(function(updated){return updated.spendingId===item.spendingId})||item})}),(response.spending||[]).map(function(spending){return queryClient.setQueriesData(["/bank_accounts/".concat(response.fundingSchedule.bankAccountId,"/spending/").concat(spending.spendingId)],spending)}),queryClient.invalidateQueries(["/bank_accounts/".concat(response.fundingSchedule.bankAccountId,"/forecast")]),queryClient.invalidateQueries(["/bank_accounts/".concat(response.fundingSchedule.bankAccountId,"/forecast/next_funding")])])}}).mutateAsync}function useRemoveFundingSchedule(){var queryClient=(0,QueryClientProvider.jE)();function removeFundingSchedule(fundingSchedule){return _removeFundingSchedule.apply(this,arguments)}function _removeFundingSchedule(){return(_removeFundingSchedule=fundingSchedules_async_to_generator(function(fundingSchedule){return fundingSchedules_ts_generator(this,function(_state){return[2,(0,util_request.A)().delete("/bank_accounts/".concat(fundingSchedule.bankAccountId,"/funding_schedules/").concat(fundingSchedule.fundingScheduleId)).then(function(){return fundingSchedule})]})})).apply(this,arguments)}return(0,useMutation.n)(removeFundingSchedule,{onSuccess:function(param){var bankAccountId=param.bankAccountId,fundingScheduleId=param.fundingScheduleId;return Promise.all([queryClient.setQueriesData(["/bank_accounts/".concat(bankAccountId,"/funding_schedules")],function(previous){return previous.filter(function(item){return item.fundingScheduleId!==fundingScheduleId})}),queryClient.removeQueries(["/bank_accounts/".concat(bankAccountId,"/funding_schedules/").concat(fundingScheduleId)])])}}).mutateAsync}function BudgetingSidebar_BudgetingSidebar(props){var _useSelectedBankAccount=useSelectedBankAccount(),bankAccount=_useSelectedBankAccount.data,isError=(_useSelectedBankAccount.isLoading,_useSelectedBankAccount.isError);useLink(null==bankAccount?void 0:bankAccount.linkId).data;var balance=useCurrentBalance(),className=mergeTailwind("w-72 h-full flex-none flex flex-col dark:border-r-dark-monetr-border border border-transparent items-center pb-6 lg:pb-4",props.className);if(isError)return null;function FreeToUse(){switch(null==bankAccount?void 0:bankAccount.accountSubType){case"checking":case"savings":var valueClassName=mergeTailwind({"dark:text-dark-monetr-content-emphasis":(null==balance?void 0:balance.free)>=0,"dark:text-dark-monetr-red":(null==balance?void 0:balance.free)<0});return /*#__PURE__*/react.createElement("div",{className:"flex w-full justify-between"},/*#__PURE__*/react.createElement(MSpan,{size:"lg",weight:"semibold",className:"dark:text-dark-monetr-content-emphasis"},/*#__PURE__*/react.createElement(AccountBalanceWalletOutlined.A,null),"Free-To-Use:"),/*#__PURE__*/react.createElement(MSpan,{size:"lg",weight:"semibold",className:valueClassName},null==balance?void 0:balance.getFreeToUseString()))}return null}function Available(){switch(null==bankAccount?void 0:bankAccount.accountSubType){case"checking":case"savings":return /*#__PURE__*/react.createElement("div",{className:"flex w-full justify-between"},/*#__PURE__*/react.createElement(MSpan,{size:"lg",weight:"semibold",className:"dark:text-dark-monetr-content-emphasis"},/*#__PURE__*/react.createElement(LocalAtmOutlined.A,null),"Available:"),/*#__PURE__*/react.createElement(MSpan,{size:"lg",weight:"semibold",className:"dark:text-dark-monetr-content-emphasis"},null==balance?void 0:balance.getAvailableString()))}return null}return /*#__PURE__*/react.createElement("div",{className:className},/*#__PURE__*/react.createElement(BudgetingSidebarTitle,null),/*#__PURE__*/react.createElement("div",{className:"flex h-full w-full flex-col items-center gap-4 px-2 pt-4"},/*#__PURE__*/react.createElement(SelectBankAccount,null),/*#__PURE__*/react.createElement(MDivider,{className:"w-1/2"}),/*#__PURE__*/react.createElement("div",{className:"flex w-full flex-col items-center gap-2 px-2"},/*#__PURE__*/react.createElement(FreeToUse,null),/*#__PURE__*/react.createElement(Available,null),/*#__PURE__*/react.createElement("div",{className:"flex w-full justify-between"},/*#__PURE__*/react.createElement(MSpan,{size:"lg",weight:"semibold",className:"dark:text-dark-monetr-content-emphasis"},/*#__PURE__*/react.createElement(TollOutlined.A,null),"Current:"),/*#__PURE__*/react.createElement(MSpan,{size:"lg",weight:"semibold",className:"dark:text-dark-monetr-content-emphasis"},null==balance?void 0:balance.getCurrentString()))),/*#__PURE__*/react.createElement(MDivider,{className:"w-1/2"}),/*#__PURE__*/react.createElement("div",{className:"flex h-full w-full flex-col gap-2 pb-4"},/*#__PURE__*/react.createElement(NavigationItem,{to:"/bank/".concat(null==bankAccount?void 0:bankAccount.bankAccountId,"/transactions")},/*#__PURE__*/react.createElement(ShoppingCartOutlined.A,null),/*#__PURE__*/react.createElement(MSpan,{ellipsis:!0,color:"inherit"},"Transactions")),/*#__PURE__*/react.createElement(NavigationItem,{to:"/bank/".concat(null==bankAccount?void 0:bankAccount.bankAccountId,"/expenses")},/*#__PURE__*/react.createElement(PriceCheckOutlined.A,null),/*#__PURE__*/react.createElement(MSpan,{ellipsis:!0,color:"inherit"},"Expenses"),/*#__PURE__*/react.createElement(MBadge,{className:"ml-auto",size:"sm"},null==balance?void 0:balance.getExpensesString())),/*#__PURE__*/react.createElement(NavigationItem,{to:"/bank/".concat(null==bankAccount?void 0:bankAccount.bankAccountId,"/goals")},/*#__PURE__*/react.createElement(SavingsOutlined.A,null),/*#__PURE__*/react.createElement(MSpan,{ellipsis:!0,color:"inherit"},"Goals"),/*#__PURE__*/react.createElement(MBadge,{className:"ml-auto",size:"sm"},null==balance?void 0:balance.getGoalsString())),/*#__PURE__*/react.createElement(NavigationItem,{to:"/bank/".concat(null==bankAccount?void 0:bankAccount.bankAccountId,"/funding")},/*#__PURE__*/react.createElement(TodayOutlined.A,null),/*#__PURE__*/react.createElement(MSpan,{ellipsis:!0,color:"inherit"},"Funding Schedules"),/*#__PURE__*/react.createElement(NextFundingBadge,null))),/*#__PURE__*/react.createElement(PlaidLastUpdatedCard,{linkId:null==bankAccount?void 0:bankAccount.linkId})))}function NavigationItem(props){var active=(0,react_router_dist.zy)().pathname.endsWith(props.to.replaceAll(".","")),className=mergeTailwind({"dark:bg-dark-monetr-background-emphasis":active,"dark:text-dark-monetr-content-emphasis":active,"dark:text-dark-monetr-content-subtle":!active,"font-semibold":active,"font-medium":!active},["align-middle","cursor-pointer","flex","text-lg","gap-2","dark:hover:bg-dark-monetr-background-emphasis","dark:hover:text-dark-monetr-content-emphasis","items-center","px-2","py-1","rounded-md","w-full"]);return /*#__PURE__*/react.createElement(dist.N_,{className:className,to:props.to},props.children)}function NextFundingBadge(){var next=useNextFundingDate();return next?/*#__PURE__*/react.createElement(MBadge,{className:"ml-auto",size:"sm"},next):null}try{BudgetingSidebar_BudgetingSidebar.displayName="BudgetingSidebar",BudgetingSidebar_BudgetingSidebar.__docgenInfo={description:"",displayName:"BudgetingSidebar",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Layout/BudgetingSidebar.tsx#BudgetingSidebar"]={docgenInfo:BudgetingSidebar_BudgetingSidebar.__docgenInfo,name:"BudgetingSidebar",path:"../interface/src/components/Layout/BudgetingSidebar.tsx#BudgetingSidebar"})}catch(__react_docgen_typescript_loader_error){}var HeartBroken=__webpack_require__("../node_modules/@mui/icons-material/esm/HeartBroken.js"),AddOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/AddOutlined.js"),AutoModeOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/AutoModeOutlined.js"),KeyboardArrowRight=__webpack_require__("../node_modules/@mui/icons-material/esm/KeyboardArrowRight.js"),react_avatar_dist=__webpack_require__("../node_modules/@radix-ui/react-avatar/dist/index.mjs");function Avatar_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Avatar_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){Avatar_define_property(target,key,source[key])})}return target}function Avatar_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=Avatar_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function Avatar_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}var Avatar=/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,props=Avatar_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement(react_avatar_dist.bL,Avatar_object_spread({ref:ref,className:mergeTailwind("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",className)},props))});Avatar.displayName=react_avatar_dist.bL.displayName;var AvatarImage=/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,props=Avatar_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement(react_avatar_dist._V,Avatar_object_spread({ref:ref,className:mergeTailwind("aspect-square h-full w-full",className)},props))});AvatarImage.displayName=react_avatar_dist._V.displayName;var AvatarFallback=/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,props=Avatar_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement(react_avatar_dist.H4,Avatar_object_spread({ref:ref,className:mergeTailwind("flex h-full w-full items-center justify-center rounded-full bg-muted",className)},props))});AvatarFallback.displayName=react_avatar_dist.H4.displayName;try{Avatar.displayName="Avatar",Avatar.__docgenInfo={description:"",displayName:"Avatar",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Avatar.tsx#Avatar"]={docgenInfo:Avatar.__docgenInfo,name:"Avatar",path:"../interface/src/components/Avatar.tsx#Avatar"})}catch(__react_docgen_typescript_loader_error){}try{AvatarFallback.displayName="AvatarFallback",AvatarFallback.__docgenInfo={description:"",displayName:"AvatarFallback",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Avatar.tsx#AvatarFallback"]={docgenInfo:AvatarFallback.__docgenInfo,name:"AvatarFallback",path:"../interface/src/components/Avatar.tsx#AvatarFallback"})}catch(__react_docgen_typescript_loader_error){}try{AvatarImage.displayName="AvatarImage",AvatarImage.__docgenInfo={description:"",displayName:"AvatarImage",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Avatar.tsx#AvatarImage"]={docgenInfo:AvatarImage.__docgenInfo,name:"AvatarImage",path:"../interface/src/components/Avatar.tsx#AvatarImage"})}catch(__react_docgen_typescript_loader_error){}function useIconSearch(name){var configuration=useAppConfiguration();return(0,lib_useQuery.I)(["/icons/search",{name:name}],{enabled:!!(null==configuration?void 0:configuration.iconsEnabled)&&!!name&&(null==name?void 0:name.length)>0,staleTime:36e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:!1}).data}function MerchantIcon_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function MerchantIcon_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){MerchantIcon_define_property(target,key,source[key])})}return target}function MerchantIcon(props){var icon=useIconSearch(null==props?void 0:props.name);if(null==icon?void 0:icon.svg){var _props_name,_icon_colors,classNames=mergeTailwind("dark:bg-dark-monetr-background-bright","flex","items-center","justify-center","h-10","w-10","rounded-full","flex-none"),colorStyles=(null==icon?void 0:null===(_icon_colors=icon.colors)||void 0===_icon_colors?void 0:_icon_colors.length)>0?{backgroundColor:"#".concat(icon.colors[0])}:{backgroundColor:"#000000"},styles=MerchantIcon_object_spread({WebkitMaskImage:"url(data:image/svg+xml;base64,".concat(icon.svg,")"),WebkitMaskRepeat:"no-repeat",height:"".concat(30,"px"),width:"".concat(30,"px")},colorStyles);return /*#__PURE__*/react.createElement("div",{className:classNames},/*#__PURE__*/react.createElement("div",{style:styles}))}var letter=(null==props?void 0:null===(_props_name=props.name)||void 0===_props_name?void 0:_props_name.toUpperCase().charAt(0))||"?";return /*#__PURE__*/react.createElement(Avatar,{className:"h-10 w-10"},/*#__PURE__*/react.createElement(AvatarFallback,{className:"dark:bg-dark-monetr-background-subtle dark:text-dark-monetr-content"},letter))}try{MerchantIcon.displayName="MerchantIcon",MerchantIcon.__docgenInfo={description:"",displayName:"MerchantIcon",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MerchantIcon.tsx#MerchantIcon"]={docgenInfo:MerchantIcon.__docgenInfo,name:"MerchantIcon",path:"../interface/src/components/MerchantIcon.tsx#MerchantIcon"})}catch(__react_docgen_typescript_loader_error){}var dist_esm=__webpack_require__("../node_modules/rrule/dist/esm/index.js");function ExpenseItem(param){var spending=param.spending,fundingSchedule=useFundingSchedule(spending.fundingScheduleId).data,navigate=(0,react_router_dist.Zp)(),rule=(0,dist_esm.YI)(spending.ruleset),amountClass=mergeTailwind({"text-green-500":spending.targetAmount<=spending.currentAmount,"text-blue-500":spending.targetAmount!==spending.currentAmount},"text-end","font-semibold");function openDetails(){navigate("/bank/".concat(spending.bankAccountId,"/expenses/").concat(spending.spendingId,"/details"))}return /*#__PURE__*/react.createElement("li",{className:"group relative w-full px-1 md:px-2"},/*#__PURE__*/react.createElement("div",{className:"absolute left-0 top-0 flex h-full w-full cursor-pointer md:hidden md:cursor-auto",onClick:openDetails}),/*#__PURE__*/react.createElement("div",{className:"w-full flex rounded-lg group-hover:bg-zinc-600 gap-2 items-center px-2 py-1 cursor-pointer md:cursor-auto"},/*#__PURE__*/react.createElement("div",{className:"flex items-center flex-1 w-full md:w-1/2 gap-4 min-w-0 pr-1"},/*#__PURE__*/react.createElement(MerchantIcon,{name:spending.name}),/*#__PURE__*/react.createElement("div",{className:"flex flex-col overflow-hidden min-w-0"},/*#__PURE__*/react.createElement("span",{className:"text-zinc-50 font-semibold text-base w-full overflow-hidden text-ellipsis whitespace-nowrap min-w-0"},spending.name),/*#__PURE__*/react.createElement("span",{className:"hidden md:block text-zinc-200 font-sm text-sm w-full overflow-hidden text-ellipsis whitespace-nowrap min-w-0"},rule.toText()),/*#__PURE__*/react.createElement("span",{className:"md:hidden text-zinc-200 text-sm w-full overflow-hidden text-ellipsis whitespace-nowrap min-w-0"},spending.getNextContributionAmountString()," / ",null==fundingSchedule?void 0:fundingSchedule.name))),/*#__PURE__*/react.createElement("div",{className:"hidden md:flex w-1/2 overflow-hidden flex-1 min-w-0 items-center"},/*#__PURE__*/react.createElement("span",{className:"text-zinc-50/75 font-medium text-base text-ellipsis whitespace-nowrap overflow-hidden min-w-0"},spending.getNextContributionAmountString()," / ",null==fundingSchedule?void 0:fundingSchedule.name)),/*#__PURE__*/react.createElement("div",{className:"flex md:hidden shrink-0 items-center gap-2"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col"},/*#__PURE__*/react.createElement("span",{className:amountClass},spending.getCurrentAmountString()),/*#__PURE__*/react.createElement("hr",{className:"w-full border-0 border-b-[thin] border-zinc-600"}),/*#__PURE__*/react.createElement("span",{className:"text-end text-zinc-400 group-hover:text-zinc-300 font-medium"},spending.getTargetAmountString())),/*#__PURE__*/react.createElement(KeyboardArrowRight.A,{className:"text-zinc-600 group-hover:text-zinc-50 flex-none md:cursor-pointer"})),/*#__PURE__*/react.createElement("div",{className:"hidden md:flex md:min-w-[12em] shrink-0 justify-end gap-2 items-center"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col"},/*#__PURE__*/react.createElement("div",{className:"flex justify-end"},/*#__PURE__*/react.createElement("span",{className:amountClass},spending.getCurrentAmountString()),"",/*#__PURE__*/react.createElement("span",{className:"text-end text-zinc-500 group-hover:text-zinc-400 font-medium"},"of"),"",/*#__PURE__*/react.createElement("span",{className:"text-end text-zinc-400 group-hover:text-zinc-300 font-medium"},spending.getTargetAmountString()))),/*#__PURE__*/react.createElement(KeyboardArrowRight.A,{className:"flex-none dark:text-dark-monetr-content-subtle dark:group-hover:text-dark-monetr-content-emphasis md:cursor-pointer",onClick:openDetails}))))}try{ExpenseItem.displayName="ExpenseItem",ExpenseItem.__docgenInfo={description:"",displayName:"ExpenseItem",props:{spending:{defaultValue:null,description:"",name:"spending",required:!0,type:{name:"Spending"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/expenses/ExpenseItem.tsx#ExpenseItem"]={docgenInfo:ExpenseItem.__docgenInfo,name:"ExpenseItem",path:"../interface/src/components/expenses/ExpenseItem.tsx#ExpenseItem"})}catch(__react_docgen_typescript_loader_error){}function MTopNavigation(props){var Icon=props.icon,navigate=(0,react_router_dist.Zp)(),onInitialClick=(0,react.useCallback)(function(){props.base&&navigate(props.base)},[props.base,navigate]),className=mergeTailwind({"dark:text-dark-monetr-content-emphasis":!props.breadcrumb,"dark:text-dark-monetr-content-subtle dark:hover:text-dark-monetr-content-emphasis":!!props.breadcrumb,"cursor-pointer":!!props.base},"w-auto order-1"),titleClassName=mergeTailwind({"hidden md:inline":!!props.breadcrumb},"w-auto text-center order-1"),iconClassName=mergeTailwind({"mr-0 md:mr-2":!!props.breadcrumb,"mr-2":!props.breadcrumb},"mb-1");function InitialCrumb(){return /*#__PURE__*/react.createElement(MSpan,{weight:"bold",size:"2xl",className:className,onClick:onInitialClick,ellipsis:!0},/*#__PURE__*/react.createElement(Icon,{className:iconClassName}),/*#__PURE__*/react.createElement("span",{className:titleClassName},props.title))}function BreadcrumbMaybe(){return props.breadcrumb?/*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement(MSpan,{weight:"bold",size:"2xl",color:"subtle",className:"hidden md:block order-2"},"/"),/*#__PURE__*/react.createElement(MSpan,{weight:"bold",size:"2xl",color:"emphasis",ellipsis:!0,className:"order-3"},props.breadcrumb)):null}return /*#__PURE__*/react.createElement("div",{className:"w-full h-auto md:h-12 flex flex-col md:flex-row md:items-center px-4 gap-x-4 justify-between"},/*#__PURE__*/react.createElement("div",{className:"flex gap-2 min-w-0 h-12 items-center flex-grow"},/*#__PURE__*/react.createElement(MSidebarToggle,{className:"mr-2",backButton:props.base}),/*#__PURE__*/react.createElement("span",{className:"flex gap-2 flex-grow min-w-0"},/*#__PURE__*/react.createElement(InitialCrumb,null),/*#__PURE__*/react.createElement(BreadcrumbMaybe,null))),props.children&&/*#__PURE__*/react.createElement("div",{className:"flex gap-x-2 md:p-0"},props.children))}try{MTopNavigation.displayName="MTopNavigation",MTopNavigation.__docgenInfo={description:"",displayName:"MTopNavigation",props:{icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"FC<{ className?: string; }>"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},base:{defaultValue:null,description:"",name:"base",required:!1,type:{name:"string"}},breadcrumb:{defaultValue:null,description:"",name:"breadcrumb",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MTopNavigation.tsx#MTopNavigation"]={docgenInfo:MTopNavigation.__docgenInfo,name:"MTopNavigation",path:"../interface/src/components/MTopNavigation.tsx#MTopNavigation"})}catch(__react_docgen_typescript_loader_error){}var isThisYear=__webpack_require__("../node_modules/date-fns/esm/isThisYear/index.js");function Spending_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function Spending_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Spending_create_class(Constructor,protoProps,staticProps){return protoProps&&Spending_defineProperties(Constructor.prototype,protoProps),staticProps&&Spending_defineProperties(Constructor,staticProps),Constructor}function Spending_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Spending_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){Spending_define_property(target,key,source[key])})}return target}function Spending_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function Spending_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Spending_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var SpendingType=/*#__PURE__*/function(SpendingType){return SpendingType[SpendingType.Expense=0]="Expense",SpendingType[SpendingType.Goal=1]="Goal",SpendingType}({}),Spending=/*#__PURE__*/function(){function Spending(data){Spending_class_call_check(this,Spending),Spending_define_property(this,"spendingId",void 0),Spending_define_property(this,"bankAccountId",void 0),Spending_define_property(this,"fundingScheduleId",void 0),Spending_define_property(this,"name",void 0),Spending_define_property(this,"description",void 0),Spending_define_property(this,"spendingType",void 0),Spending_define_property(this,"targetAmount",void 0),Spending_define_property(this,"currentAmount",void 0),Spending_define_property(this,"usedAmount",void 0),Spending_define_property(this,"ruleset",void 0),Spending_define_property(this,"lastRecurrence",void 0),Spending_define_property(this,"nextRecurrence",void 0),Spending_define_property(this,"nextContributionAmount",void 0),Spending_define_property(this,"isBehind",void 0),Spending_define_property(this,"isPaused",void 0),Spending_define_property(this,"dateCreated",void 0),data&&Object.assign(this,Spending_object_spread_props(Spending_object_spread({},data),{lastRecurrence:data.lastRecurrence&&(0,parseJSON.A)(data.lastRecurrence),nextRecurrence:data.nextRecurrence&&(0,parseJSON.A)(data.nextRecurrence),dateCreated:data.dateCreated&&(0,parseJSON.A)(data.dateCreated)}))}return Spending_create_class(Spending,[{key:"getNextOccurrenceString",value:function getNextOccurrenceString(){return(0,isThisYear.A)(this.nextRecurrence)?(0,format.A)(this.nextRecurrence,"MMM do"):(0,format.A)(this.nextRecurrence,"MMM do, yyyy")}},{key:"getTargetAmountString",value:function getTargetAmountString(){return formatAmount(this.targetAmount)}},{key:"getTargetAmountDollars",value:function getTargetAmountDollars(){return amountToFriendly(this.targetAmount)}},{key:"getCurrentAmountString",value:function getCurrentAmountString(){var locale=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en_US";return formatAmount(this.currentAmount,AmountType.Stored,locale)}},{key:"getUsedAmountString",value:function getUsedAmountString(){return formatAmount(this.usedAmount)}},{key:"getNextContributionAmountString",value:function getNextContributionAmountString(){return formatAmount(this.nextContributionAmount)}},{key:"getIsExpense",value:function getIsExpense(){return 0===this.spendingType}},{key:"getIsGoal",value:function getIsGoal(){return 1===this.spendingType}},{key:"getGoalIsInProgress",value:function getGoalIsInProgress(){return this.currentAmount+this.usedAmount<this.targetAmount}},{key:"getGoalSavedAmountString",value:function getGoalSavedAmountString(){return formatAmount(this.currentAmount+this.usedAmount)}}]),Spending}();function spending_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function spending_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){spending_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){spending_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function spending_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function spending_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){spending_define_property(target,key,source[key])})}return target}function spending_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function spending_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):spending_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function spending_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useSpendingSink(){var selectedBankAccountId=bankAccounts_useSelectedBankAccountId(),result=(0,lib_useQuery.I)(["/bank_accounts/".concat(selectedBankAccountId,"/spending")],{enabled:!!selectedBankAccountId});return spending_object_spread_props(spending_object_spread({},result),{result:((null==result?void 0:result.data)||[]).map(function(item){return new Spending(item)})})}function useSpending(spendingId){var selectedBankAccountId=bankAccounts_useSelectedBankAccountId();return(0,lib_useQuery.I)(["/bank_accounts/".concat(selectedBankAccountId,"/spending/").concat(spendingId)],{enabled:!!selectedBankAccountId,select:function(data){return new Spending(data)}})}function useSpendingOld(spendingId){var result=useSpendingSink().result;return spendingId&&result.find(function(item){return item.spendingId===spendingId})||null}function useSpendingFiltered(kind){var base=useSpendingSink();return spending_object_spread_props(spending_object_spread({},base),{result:base.result.filter(function(item){return item.spendingType===kind})})}function useRemoveSpending(){var _ref,queryClient=(0,QueryClientProvider.jE)(),selectedBankAccountId=bankAccounts_useSelectedBankAccountId();function removeSpending(spendingId){return _removeSpending.apply(this,arguments)}function _removeSpending(){return(_removeSpending=spending_async_to_generator(function(spendingId){return spending_ts_generator(this,function(_state){return[2,(0,util_request.A)().delete("/bank_accounts/".concat(selectedBankAccountId,"/spending/").concat(spendingId)).then(function(){return spendingId})]})})).apply(this,arguments)}var mutate=(0,useMutation.n)(removeSpending,{onSuccess:function(removedSpendingId){return Promise.all([queryClient.setQueriesData(["/bank_accounts/".concat(selectedBankAccountId,"/spending")],function(previous){return previous.filter(function(item){return item.spendingId!==removedSpendingId})}),queryClient.removeQueries(["/bank_accounts/".concat(selectedBankAccountId,"/spending/").concat(removedSpendingId)]),queryClient.invalidateQueries(["/bank_accounts/".concat(selectedBankAccountId,"/balances")]),queryClient.invalidateQueries(["/bank_accounts/".concat(selectedBankAccountId,"/forecast")]),queryClient.invalidateQueries(["/bank_accounts/".concat(selectedBankAccountId,"/forecast/next_funding")])])}}).mutate;return _ref=spending_async_to_generator(function(spendingId){return spending_ts_generator(this,function(_state){return[2,mutate(spendingId)]})}),function(spendingId){return _ref.apply(this,arguments)}}function useUpdateSpending(){var _ref,queryClient=(0,QueryClientProvider.jE)();function updateSpending(spending){return _updateSpending.apply(this,arguments)}function _updateSpending(){return(_updateSpending=spending_async_to_generator(function(spending){return spending_ts_generator(this,function(_state){return[2,(0,util_request.A)().put("/bank_accounts/".concat(spending.bankAccountId,"/spending/").concat(spending.spendingId),spending).then(function(result){return new Spending(null==result?void 0:result.data)})]})})).apply(this,arguments)}var mutate=(0,useMutation.n)(updateSpending,{onSuccess:function(updatedSpending){return Promise.all([queryClient.setQueriesData(["/bank_accounts/".concat(updatedSpending.bankAccountId,"/spending")],function(previous){return previous.map(function(item){return item.spendingId===updatedSpending.spendingId?updatedSpending:item})}),queryClient.setQueriesData(["/bank_accounts/".concat(updatedSpending.bankAccountId,"/spending/").concat(updatedSpending.spendingId)],updatedSpending),queryClient.invalidateQueries(["/bank_accounts/".concat(updatedSpending.bankAccountId,"/balances")]),queryClient.invalidateQueries(["/bank_accounts/".concat(updatedSpending.bankAccountId,"/forecast")]),queryClient.invalidateQueries(["/bank_accounts/".concat(updatedSpending.bankAccountId,"/forecast/next_funding")])])}}).mutate;return _ref=spending_async_to_generator(function(spending){return spending_ts_generator(this,function(_state){return[2,mutate(spending)]})}),function(spending){return _ref.apply(this,arguments)}}function useCreateSpending(){var _ref,queryClient=(0,QueryClientProvider.jE)();function createSpending(spending){return _createSpending.apply(this,arguments)}function _createSpending(){return(_createSpending=spending_async_to_generator(function(spending){return spending_ts_generator(this,function(_state){return[2,(0,util_request.A)().post("/bank_accounts/".concat(spending.bankAccountId,"/spending"),spending).then(function(result){return new Spending(null==result?void 0:result.data)})]})})).apply(this,arguments)}var mutation=(0,useMutation.n)(createSpending,{onSuccess:function(createdSpending){return Promise.all([queryClient.setQueriesData(["/bank_accounts/".concat(createdSpending.bankAccountId,"/spending")],function(previous){return(previous||[]).concat(createdSpending)}),queryClient.setQueriesData(["/bank_accounts/".concat(createdSpending.bankAccountId,"/spending/").concat(createdSpending.spendingId)],createdSpending),queryClient.invalidateQueries(["/bank_accounts/".concat(createdSpending.bankAccountId,"/balances")]),queryClient.invalidateQueries(["/bank_accounts/".concat(createdSpending.bankAccountId,"/forecast")]),queryClient.invalidateQueries(["/bank_accounts/".concat(createdSpending.bankAccountId,"/forecast/next_funding")])])}});return _ref=spending_async_to_generator(function(spending){return spending_ts_generator(this,function(_state){return[2,mutation.mutateAsync(spending)]})}),function(spending){return _ref.apply(this,arguments)}}function useTransfer(){var queryClient=(0,QueryClientProvider.jE)(),selectedBankAccountId=bankAccounts_useSelectedBankAccountId();function transfer(transferRequest){return _transfer.apply(this,arguments)}function _transfer(){return(_transfer=spending_async_to_generator(function(transferRequest){return spending_ts_generator(this,function(_state){return[2,(0,util_request.A)().post("/bank_accounts/".concat(selectedBankAccountId,"/spending/transfer"),transferRequest).then(function(result){return result.data})]})})).apply(this,arguments)}return(0,useMutation.n)(transfer,{onSuccess:function(result){return Promise.all([queryClient.setQueriesData(["/bank_accounts/".concat(selectedBankAccountId,"/spending")],function(previous){return previous.map(function(item){return result.spending.find(function(updated){return updated.spendingId===item.spendingId})||item})}),queryClient.setQueriesData(["/bank_accounts/".concat(selectedBankAccountId,"/balances")],function(previous){return new Balance_Balance(spending_object_spread({},previous,result.balance))}),queryClient.invalidateQueries(["/bank_accounts/".concat(selectedBankAccountId,"/forecast")]),queryClient.invalidateQueries(["/bank_accounts/".concat(selectedBankAccountId,"/forecast/next_funding")])])}}).mutateAsync}var startOfTomorrow=__webpack_require__("../node_modules/date-fns/esm/startOfTomorrow/index.js"),startOfDay=__webpack_require__("../node_modules/date-fns/esm/startOfDay/index.js");function FormButton_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function FormButton_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){FormButton_define_property(target,key,source[key])})}return target}function FormButton_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function FormButton_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):FormButton_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function FormButton(props){var formikContext=(0,formik_esm.j7)();return props=FormButton_object_spread_props(FormButton_object_spread({},props),{disabled:(null==formikContext?void 0:formikContext.isSubmitting)||(null==props?void 0:props.disabled),onSubmit:(null==props?void 0:props.onSubmit)||("submit"===props.type?null==formikContext?void 0:formikContext.submitForm:void 0)}),/*#__PURE__*/react.createElement(Button,props)}try{FormButton.displayName="FormButton",FormButton.__docgenInfo={description:"",displayName:"FormButton",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"md"'}]}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"primary"'},{value:'"secondary"'},{value:'"outlined"'},{value:'"destructive"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/FormButton.tsx#FormButton"]={docgenInfo:FormButton.__docgenInfo,name:"FormButton",path:"../interface/src/components/FormButton.tsx#FormButton"})}catch(__react_docgen_typescript_loader_error){}var react_number_format_es=__webpack_require__("../node_modules/react-number-format/dist/react-number-format.es.js");function MLabel(props){function MaybeLabel(){if(!props.label)return null;var labelClassNames=mergeTailwind("mb-1","block","text-sm","font-medium","leading-6",{"text-gray-900":!props.disabled,"text-gray-500":props.disabled,"dark:text-dark-monetr-content-emphasis":!props.disabled});return /*#__PURE__*/react.createElement("label",{htmlFor:props.htmlFor,className:labelClassNames},props.label)}function MaybeRequired(){return props.required?/*#__PURE__*/react.createElement("span",{className:"text-red-500"},"*"):null}return /*#__PURE__*/react.createElement("div",{className:"flex items-center justify-between"},/*#__PURE__*/react.createElement("div",{className:"flex items-center gap-0.5"},/*#__PURE__*/react.createElement(MaybeLabel,null),/*#__PURE__*/react.createElement(MaybeRequired,null)),props.children)}try{MLabel.displayName="MLabel",MLabel.__docgenInfo={description:"",displayName:"MLabel",props:{htmlFor:{defaultValue:null,description:"",name:"htmlFor",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MLabel.tsx#MLabel"]={docgenInfo:MLabel.__docgenInfo,name:"MLabel",path:"../interface/src/components/MLabel.tsx#MLabel"})}catch(__react_docgen_typescript_loader_error){}function MAmountField_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function MAmountField_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){MAmountField_define_property(target,key,source[key])})}return target}function MAmountField_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function MAmountField_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):MAmountField_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function MAmountField_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=MAmountField_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function MAmountField_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}var MAmountFieldPropsDefaults={label:null,labelDecorator:function(_){return null},disabled:!1};function MAmountField(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:MAmountFieldPropsDefaults,formikContext=(0,formik_esm.j7)(),labelDecorator=(props=MAmountField_object_spread_props(MAmountField_object_spread({},MAmountFieldPropsDefaults,props),{disabled:(null==props?void 0:props.disabled)||(null==formikContext?void 0:formikContext.isSubmitting),error:(null==props?void 0:props.error)||((null==formikContext?void 0:formikContext.touched[null==props?void 0:props.name])?null==formikContext?void 0:formikContext.errors[null==props?void 0:props.name]:null)})).labelDecorator,otherProps=MAmountField_object_without_properties(props,["labelDecorator"]),LabelDecorator=labelDecorator||MAmountFieldPropsDefaults.labelDecorator;function Error1(){return props.error?/*#__PURE__*/react.createElement("p",{className:"text-xs font-medium text-red-500 mt-0.5"},props.error):null}var classNames=mergeTailwind({"dark:focus:ring-dark-monetr-brand":!props.disabled&&!props.error,"dark:hover:ring-zinc-400":!props.disabled&&!props.error,"dark:ring-dark-monetr-border-string":!props.disabled&&!props.error,"dark:ring-red-500":!props.disabled&&!!props.error,"ring-gray-300":!props.disabled&&!props.error,"ring-red-300":!props.disabled&&!!props.error},{"focus:ring-purple-400":!props.error,"focus:ring-red-400":props.error},{"dark:bg-dark-monetr-background":!props.disabled,"dark:text-zinc-200":!props.disabled,"text-gray-900":!props.disabled},{"dark:bg-dark-monetr-background-subtle":props.disabled,"dark:ring-dark-monetr-background-emphasis":props.disabled,"ring-gray-200":props.disabled,"text-gray-500":props.disabled},"block","border-0","focus:ring-2","focus:ring-inset","placeholder:text-gray-400","px-3","py-1.5","ring-1","ring-inset","rounded-lg","shadow-sm","sm:leading-6","text-sm","w-full","dark:caret-zinc-50","min-h-[38px]"),wrapperClassNames=mergeTailwind({"pb-[18px]":!props.error},props.className),value=null==formikContext?void 0:formikContext.values[props.name],onChange=(0,react.useCallback)(function(values){formikContext&&formikContext.setFieldValue(props.name,values.floatValue)},[props.name,formikContext]);return /*#__PURE__*/react.createElement("div",{className:wrapperClassNames},/*#__PURE__*/react.createElement(MLabel,{label:props.label,disabled:props.disabled,htmlFor:props.id,required:props.required},/*#__PURE__*/react.createElement(LabelDecorator,{name:props.name,disabled:props.disabled})),/*#__PURE__*/react.createElement("div",null,/*#__PURE__*/react.createElement(react_number_format_es.HG,MAmountField_object_spread_props(MAmountField_object_spread({disabled:null==formikContext?void 0:formikContext.isSubmitting,onBlur:null==formikContext?void 0:formikContext.handleBlur,thousandSeparator:",",thousandsGroupStyle:"thousand",value:value},otherProps),{className:classNames,decimalScale:2,fixedDecimalScale:!0,onValueChange:onChange,prefix:"$ "}))),/*#__PURE__*/react.createElement(Error1,null))}try{MAmountField.displayName="MAmountField",MAmountField.__docgenInfo={description:"",displayName:"MAmountField",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},labelDecorator:{defaultValue:null,description:"",name:"labelDecorator",required:!1,type:{name:"MLabelDecorator"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number"}},inputMode:{defaultValue:null,description:"",name:"inputMode",required:!1,type:{name:"enum",value:[{value:'"search"'},{value:'"text"'},{value:'"none"'},{value:'"tel"'},{value:'"url"'},{value:'"email"'},{value:'"numeric"'},{value:'"decimal"'}]}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"KeyboardEventHandler<HTMLInputElement>"}},onMouseUp:{defaultValue:null,description:"",name:"onMouseUp",required:!1,type:{name:"MouseEventHandler<HTMLInputElement>"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | number"}},displayType:{defaultValue:null,description:"",name:"displayType",required:!1,type:{name:"enum",value:[{value:'"input"'},{value:'"text"'}]}},renderText:{defaultValue:null,description:"",name:"renderText",required:!1,type:{name:"(formattedValue: string, otherProps: Partial<NumberFormatBase>) => ReactNode"}},getInputRef:{defaultValue:null,description:"",name:"getInputRef",required:!1,type:{name:"((el: HTMLInputElement) => void) | Ref<any>"}},valueIsNumericString:{defaultValue:null,description:"",name:"valueIsNumericString",required:!1,type:{name:"boolean"}},isAllowed:{defaultValue:null,description:"",name:"isAllowed",required:!1,type:{name:"(values: NumberFormatValues) => boolean"}},thousandSeparator:{defaultValue:null,description:"",name:"thousandSeparator",required:!1,type:{name:"string | boolean"}},decimalSeparator:{defaultValue:null,description:"",name:"decimalSeparator",required:!1,type:{name:"string"}},allowedDecimalSeparators:{defaultValue:null,description:"",name:"allowedDecimalSeparators",required:!1,type:{name:"string[]"}},thousandsGroupStyle:{defaultValue:null,description:"",name:"thousandsGroupStyle",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"thousand"'},{value:'"lakh"'},{value:'"wan"'}]}},allowNegative:{defaultValue:null,description:"",name:"allowNegative",required:!1,type:{name:"boolean"}},allowLeadingZeros:{defaultValue:null,description:"",name:"allowLeadingZeros",required:!1,type:{name:"boolean"}},suffix:{defaultValue:null,description:"",name:"suffix",required:!1,type:{name:"string"}},customInput:{defaultValue:null,description:"",name:"customInput",required:!1,type:{name:"ComponentType<InputAttributes>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MAmountField.tsx#MAmountField"]={docgenInfo:MAmountField.__docgenInfo,name:"MAmountField",path:"../interface/src/components/MAmountField.tsx#MAmountField"})}catch(__react_docgen_typescript_loader_error){}var CloseOutlined=__webpack_require__("../node_modules/@mui/icons-material/CloseOutlined.js"),icons_material_TodayOutlined=__webpack_require__("../node_modules/@mui/icons-material/TodayOutlined.js"),startOfToday=__webpack_require__("../node_modules/date-fns/esm/startOfToday/index.js"),startOfMonth=__webpack_require__("../node_modules/date-fns/esm/startOfMonth/index.js"),isEqual=__webpack_require__("../node_modules/date-fns/esm/isEqual/index.js"),en_US=__webpack_require__("../node_modules/date-fns/esm/locale/en-US/index.js"),index_esm=__webpack_require__("../node_modules/react-day-picker/dist/index.esm.js"),ArrowLeftOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/ArrowLeftOutlined.js"),ArrowRightOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/ArrowRightOutlined.js"),FirstPage=__webpack_require__("../node_modules/@mui/icons-material/esm/FirstPage.js"),ChevronLeft=__webpack_require__("../node_modules/@mui/icons-material/esm/ChevronLeft.js"),ChevronRight=__webpack_require__("../node_modules/@mui/icons-material/esm/ChevronRight.js"),LastPage=__webpack_require__("../node_modules/@mui/icons-material/esm/LastPage.js"),addYears=__webpack_require__("../node_modules/date-fns/esm/addYears/index.js");function MCalendar_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _object_destructuring_empty(o){if(null==o)throw TypeError("Cannot destructure "+o);return o}function MCalendar_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){MCalendar_define_property(target,key,source[key])})}return target}function MCalendar_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=MCalendar_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function MCalendar_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function MCalendar(props){var mode=props.mode,defaultMonth=props.defaultMonth,selected=props.selected,onSelect=props.onSelect,locale=props.locale,disabled=props.disabled,enableYearNavigation=props.enableYearNavigation,classNames=props.classNames,remainingProps=MCalendar_object_without_properties(props,["mode","defaultMonth","selected","onSelect","locale","disabled","enableYearNavigation","classNames"]);return /*#__PURE__*/react.createElement(index_esm.hv,MCalendar_object_spread({showOutsideDays:!0,mode:mode,defaultMonth:defaultMonth,selected:selected,onSelect:onSelect,locale:locale,disabled:disabled,classNames:MCalendar_object_spread({months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-2 relative items-center",caption_label:"text-monetr-default text-monetr-content-emphasis dark:text-dark-monetr-content-emphasis font-medium",nav:"space-x-1 flex items-center",nav_button:"flex items-center justify-center p-1 h-7 w-7 outline-none focus:ring-2 transition duration-100 border border-monetr-border dark:border-dark-monetr-border hover:bg-tremor-background-muted dark:hover:bg-dark-tremor-background-muted rounded-tremor-small focus:border-tremor-brand-subtle dark:focus:border-dark-tremor-brand-subtle focus:ring-tremor-brand-muted dark:focus:ring-dark-tremor-brand-muted text-tremor-content-subtle dark:text-dark-tremor-content-subtle hover:text-tremor-content dark:hover:text-dark-tremor-content",nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"w-9 font-normal text-center text-monetr-content-subtle dark:text-dark-monetr-content-subtle",row:"flex w-full mt-0.5",cell:"text-center p-0 relative focus-within:relative text-monetr-default text-monetr-content-emphasis dark:text-dark-monetr-content-emphasis",day:"h-9 w-9 p-0 hover:bg-monetr-background-subtle dark:hover:bg-dark-monetr-background-subtle outline-monetr-brand dark:outline-dark-monetr-brand rounded-tremor-default",day_today:"dark:bg-dark-monetr-background-focused dark:text-dark-monetr-brand-muted",day_selected:"dark:aria-selected:bg-dark-monetr-brand dark:aria-selected:text-dark-monetr-content-emphasis",day_disabled:"dark:text-dark-monetr-content-subtle disabled:hover:bg-transparent",day_outside:"dark:text-dark-monetr-content-subtle"},classNames),components:{IconLeft:function(_param){var _$props=_extends({},_object_destructuring_empty(_param));return /*#__PURE__*/react.createElement(ArrowLeftOutlined.A,MCalendar_object_spread({className:"h-4 w-4"},_$props))},IconRight:function(_param){var _$props=_extends({},_object_destructuring_empty(_param));return /*#__PURE__*/react.createElement(ArrowRightOutlined.A,MCalendar_object_spread({className:"h-4 w-4"},_$props))},Caption:function(_param){var _$props=_extends({},_object_destructuring_empty(_param)),_useNavigation=(0,index_esm.cq)(),goToMonth=_useNavigation.goToMonth,nextMonth=_useNavigation.nextMonth,previousMonth=_useNavigation.previousMonth,currentMonth=_useNavigation.currentMonth;return /*#__PURE__*/react.createElement("div",MCalendar_object_spread({className:"flex justify-between items-center"},_$props),/*#__PURE__*/react.createElement("div",{className:"flex items-center space-x-1"},enableYearNavigation&&/*#__PURE__*/react.createElement(Button,{variant:"text",onClick:function(){return currentMonth&&goToMonth((0,addYears.A)(currentMonth,-1))}},/*#__PURE__*/react.createElement(FirstPage.A,{className:"text-lg"})),/*#__PURE__*/react.createElement(Button,{variant:"text",onClick:function(){return previousMonth&&goToMonth(previousMonth)}},/*#__PURE__*/react.createElement(ChevronLeft.A,{className:"text-lg"}))),/*#__PURE__*/react.createElement(MSpan,{className:"mx-1"},(0,format.A)(_$props.displayMonth,"LLLL yyy",{locale:locale})),/*#__PURE__*/react.createElement("div",{className:"flex items-center space-x-1"},/*#__PURE__*/react.createElement(Button,{variant:"text",onClick:function(){return nextMonth&&goToMonth(nextMonth)}},/*#__PURE__*/react.createElement(ChevronRight.A,{className:"text-lg"})),enableYearNavigation&&/*#__PURE__*/react.createElement(Button,{variant:"text",onClick:function(){return currentMonth&&goToMonth((0,addYears.A)(currentMonth,1))}},/*#__PURE__*/react.createElement(LastPage.A,{className:"text-lg"}))))}}},remainingProps))}try{MCalendar.displayName="MCalendar",MCalendar.__docgenInfo={description:"",displayName:"MCalendar",props:{enableYearNavigation:{defaultValue:null,description:"",name:"enableYearNavigation",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MCalendar.tsx#MCalendar"]={docgenInfo:MCalendar.__docgenInfo,name:"MCalendar",path:"../interface/src/components/MCalendar.tsx#MCalendar"})}catch(__react_docgen_typescript_loader_error){}function MDatePicker_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function MDatePicker_array_with_holes(arr){if(Array.isArray(arr))return arr}function MDatePicker_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function MDatePicker_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function MDatePicker_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function MDatePicker_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){MDatePicker_define_property(target,key,source[key])})}return target}function MDatePicker_sliced_to_array(arr,i){return MDatePicker_array_with_holes(arr)||MDatePicker_iterable_to_array_limit(arr,i)||MDatePicker_unsupported_iterable_to_array(arr,i)||MDatePicker_non_iterable_rest()}function MDatePicker_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return MDatePicker_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MDatePicker_array_like_to_array(o,minLen)}}function MDatePicker(props){var _ref,today=(0,startOfToday.A)(),formikContext=(0,formik_esm.j7)(),_props_value=(props=MDatePicker_object_spread({disabled:null==formikContext?void 0:formikContext.isSubmitting,error:(null==props?void 0:props.error)||((null==formikContext?void 0:formikContext.touched[null==props?void 0:props.name])?null==formikContext?void 0:formikContext.errors[null==props?void 0:props.name]:null)},props)).value,value=void 0===_props_value?null==formikContext?void 0:formikContext.values[props.name]:_props_value,minDate=props.min,maxDate=props.max,_props_placeholder=props.placeholder,_props_enableClear=props.enableClear,disabled=props.disabled,className=props.className,_props_enableYearNavigation=props.enableYearNavigation,_useState=MDatePicker_sliced_to_array((0,react.useState)(value),2),selectedValue=_useState[0],setSelectedValue=_useState[1],_React_useState=MDatePicker_sliced_to_array(react.useState(null),2),anchorEl=_React_useState[0],setAnchorEl=_React_useState[1];react.useEffect(function(){setSelectedValue(value)},[value]);var disabledDays=(0,react.useMemo)(function(){var disabledDays=[];return minDate&&disabledDays.push({before:minDate}),maxDate&&disabledDays.push({after:maxDate}),disabledDays},[minDate,maxDate]),hasValue=!!selectedValue,formattedSelection=hasValue?formatSelectedDates(selectedValue,void 0,en_US.A):void 0===_props_placeholder?"Select date":_props_placeholder,defaultMonth=(0,startOfMonth.A)(null!==(_ref=null!=selectedValue?selectedValue:maxDate)&&void 0!==_ref?_ref:today),isClearEnabled=void 0!==_props_enableClear&&_props_enableClear&&!disabled,handleClick=(0,react.useCallback)(function(event){setAnchorEl(event.currentTarget)},[setAnchorEl]),handleClose=(0,react.useCallback)(function(){return setAnchorEl(null)},[setAnchorEl]),handleReset=(0,react.useCallback)(function(){formikContext&&(formikContext.setFieldValue(props.name,null),formikContext.setFieldTouched(props.name,!0),formikContext.validateField(props.name)),setSelectedValue(void 0)},[setSelectedValue,formikContext,props.name]),handleSelect=(0,react.useCallback)(function(value){formikContext&&(formikContext.setFieldValue(props.name,value),formikContext.setFieldTouched(props.name,!0),formikContext.validateField(props.name)),setSelectedValue(value),handleClose()},[setSelectedValue,formikContext,props.name,handleClose]),classNames=mergeTailwind({"dark:focus:ring-dark-monetr-brand":!props.disabled&&!props.error,"dark:hover:ring-zinc-400":!props.disabled&&!props.error,"dark:ring-dark-monetr-border-string":!props.disabled&&!props.error,"dark:ring-red-500":!props.disabled&&!!props.error,"ring-gray-300":!props.disabled&&!props.error,"ring-red-300":!props.disabled&&!!props.error},{"focus:ring-purple-400":!props.error,"focus:ring-red-400":props.error},{"dark:bg-dark-monetr-background":!props.disabled,"dark:text-zinc-200":!props.disabled,"text-gray-900":!props.disabled},{"dark:text-gray-400":!hasValue},{"dark:bg-dark-monetr-background-subtle":props.disabled,"dark:ring-dark-monetr-background-emphasis":props.disabled,"ring-gray-200":props.disabled,"text-gray-500":props.disabled},"block","border-0","dark:caret-zinc-50","focus:ring-2","focus:ring-inset","min-h-[38px]","px-3","py-1.5","ring-1","ring-inset","rounded-lg","shadow-sm","sm:leading-6","text-left","text-sm","w-full","relative"),LabelDecorator=props.labelDecorator||function(){return null};function Error1(){return props.error?/*#__PURE__*/react.createElement("p",{className:"text-xs font-medium text-red-500 mt-0.5"},props.error):null}var wrapperClassNames=mergeTailwind({"pb-[18px]":!props.error},"relative",className);return /*#__PURE__*/react.createElement("div",{className:wrapperClassNames,"data-testid":props["data-testid"]},/*#__PURE__*/react.createElement(MLabel,{label:props.label,disabled:props.disabled,htmlFor:props.id,required:props.required},/*#__PURE__*/react.createElement(LabelDecorator,{name:props.name,disabled:props.disabled})),/*#__PURE__*/react.createElement("button",{type:"button",disabled:(null==formikContext?void 0:formikContext.isSubmitting)||disabled,className:classNames,onClick:handleClick,role:"none"},/*#__PURE__*/react.createElement(icons_material_TodayOutlined.A,{className:"text-lg mr-2"}),/*#__PURE__*/react.createElement("span",{className:"truncate"},formattedSelection),isClearEnabled&&selectedValue?/*#__PURE__*/react.createElement("button",{type:"button",className:mergeTailwind("absolute outline-none inset-y-0 right-2 flex items-center transition duration-100 dark:text-dark-monetr-content-subtle"),onClick:function(e){e.preventDefault(),handleReset()}},/*#__PURE__*/react.createElement(CloseOutlined.A,null)):null),/*#__PURE__*/react.createElement(Popover.Ay,{open:!!anchorEl,anchorEl:anchorEl,onClose:handleClose,transitionDuration:200},/*#__PURE__*/react.createElement(MCalendar,{showOutsideDays:!0,mode:"single",defaultMonth:defaultMonth,selected:selectedValue,onSelect:function(value){handleSelect(value),handleClose()},locale:en_US.A,disabled:disabledDays,enableYearNavigation:void 0===_props_enableYearNavigation||_props_enableYearNavigation,className:mergeTailwind("z-50 overflow-y-auto outline-none rounded-lg p-3 border","dark:bg-dark-monetr-background dark:border-dark-monetr-border-subtle dark:shadow-2xl")})),/*#__PURE__*/react.createElement(Error1,null))}function formatSelectedDates(startDate,endDate,locale){var localeCode=locale.code;if(!startDate&&!endDate)return"";if(startDate&&!endDate)return startDate.toLocaleDateString(localeCode,{year:"numeric",month:"short",day:"numeric"});if(startDate&&endDate){if((0,isEqual.A)(startDate,endDate))return startDate.toLocaleDateString(localeCode,{year:"numeric",month:"short",day:"numeric"});if(startDate.getMonth()===endDate.getMonth()&&startDate.getFullYear()===endDate.getFullYear())return"".concat(startDate.toLocaleDateString(localeCode,{month:"short",day:"numeric"})," - ").concat(endDate.getDate(),", ").concat(endDate.getFullYear());var options2={year:"numeric",month:"short",day:"numeric"};return"".concat(startDate.toLocaleDateString(localeCode,options2)," - ").concat(endDate.toLocaleDateString(localeCode,options2))}return""}try{MDatePicker.displayName="MDatePicker",MDatePicker.__docgenInfo={description:"",displayName:"MDatePicker",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"Date"}},min:{defaultValue:null,description:"",name:"min",required:!1,type:{name:"Date"}},max:{defaultValue:null,description:"",name:"max",required:!1,type:{name:"Date"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},enableClear:{defaultValue:null,description:"",name:"enableClear",required:!1,type:{name:"boolean"}},enableYearNavigation:{defaultValue:null,description:"",name:"enableYearNavigation",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},labelDecorator:{defaultValue:null,description:"",name:"labelDecorator",required:!1,type:{name:"MLabelDecorator"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MDatePicker.tsx#MDatePicker"]={docgenInfo:MDatePicker.__docgenInfo,name:"MDatePicker",path:"../interface/src/components/MDatePicker.tsx#MDatePicker"})}catch(__react_docgen_typescript_loader_error){}function MForm_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=MForm_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function MForm_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}let components_MForm=/*#__PURE__*/react.forwardRef(function MForm1(props,ref){var className=props.className,children=props.children,formikConfig=MForm_object_without_properties(props,["className","children"]);return /*#__PURE__*/react.createElement(formik_esm.l1,formikConfig,function(formik){return /*#__PURE__*/react.createElement("form",{onSubmit:formik.handleSubmit,className:className,"data-testid":props["data-testid"],ref:ref},"function"==typeof children?children(formik):children)})});try{MForm.displayName="MForm",MForm.__docgenInfo={description:"",displayName:"MForm",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"React children or child render callback",name:"children",required:!1,type:{name:"ReactNode | ((props: FormikProps<FormikValues>) => ReactNode)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MForm.tsx#MForm"]={docgenInfo:MForm.__docgenInfo,name:"MForm",path:"../interface/src/components/MForm.tsx#MForm"})}catch(__react_docgen_typescript_loader_error){}var react_select_esm=__webpack_require__("../node_modules/react-select/dist/react-select.esm.js"),CheckCircleOutline=__webpack_require__("../node_modules/@mui/icons-material/esm/CheckCircleOutline.js"),SwipeableDrawer=__webpack_require__("../node_modules/@mui/material/SwipeableDrawer/SwipeableDrawer.js");function MSelect_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function MSelect_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){MSelect_define_property(target,key,source[key])})}return target}function MSelect_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function MSelect_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):MSelect_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function MSelect_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=MSelect_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function MSelect_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function MSelect(props){var theme=useTheme();function Error1(){return props.error?/*#__PURE__*/react.createElement("p",{className:"text-xs font-medium text-red-500 mt-0.5"},props.error):null}var labelDecorator=props.labelDecorator,className=props.className,otherProps=MSelect_object_without_properties(props,["labelDecorator","className"]),wrapperClassNames=mergeTailwind({"pb-[18px]":!props.error},className),classNames=mergeTailwind({"dark:focus:ring-dark-monetr-brand":!props.disabled&&!props.error,"dark:hover:ring-zinc-400":!props.disabled&&!props.error,"dark:ring-dark-monetr-border-string":!props.disabled&&!props.error,"dark:ring-red-500":!props.disabled&&!!props.error,"ring-gray-300":!props.disabled&&!props.error,"ring-red-300":!props.disabled&&!!props.error},{"focus:ring-purple-400":!props.error,"focus:ring-red-400":props.error},{"dark:bg-dark-monetr-background":!props.disabled,"dark:text-zinc-200":!props.disabled,"text-gray-900":!props.disabled},{"dark:text-gray-400":!props.value},{"dark:bg-dark-monetr-background-subtle":props.disabled,"dark:ring-dark-monetr-background-emphasis":props.disabled,"ring-gray-200":props.disabled,"text-gray-500":props.disabled},"block","md:hidden","border-0","dark:caret-zinc-50","focus:ring-2","focus:ring-inset","min-h-[38px]","px-3","py-1.5","ring-1","ring-inset","rounded-lg","shadow-sm","sm:leading-6","text-left","text-sm","w-full","relative");function ValueContainer(){var _props_value,_props_value1;return(null===(_props_value=props.value)||void 0===_props_value?void 0:_props_value.label)?/*#__PURE__*/react.createElement("span",{className:"truncate"},null==props?void 0:null===(_props_value1=props.value)||void 0===_props_value1?void 0:_props_value1.label):/*#__PURE__*/react.createElement("span",{className:"truncate"},null==props?void 0:props.placeholder)}return /*#__PURE__*/react.createElement("div",{className:wrapperClassNames},/*#__PURE__*/react.createElement(MLabel,{label:props.label,htmlFor:props.id,required:props.required,disabled:props.disabled},/*#__PURE__*/react.createElement(null!=labelDecorator?labelDecorator:function(_){return null},{name:props.name,disabled:props.disabled})),/*#__PURE__*/react.createElement("button",{type:"button",disabled:props.disabled,className:classNames,onClick:function(){return showSelectModal({title:props.placeholder,options:props.options,value:props.value,onChange:props.onChange})},role:"none"},/*#__PURE__*/react.createElement(ValueContainer,null)),/*#__PURE__*/react.createElement(react_select_esm.Ay,MSelect_object_spread_props(MSelect_object_spread({theme:function(baseTheme){return MSelect_object_spread_props(MSelect_object_spread({},baseTheme),{borderRadius:8,colors:MSelect_object_spread_props(MSelect_object_spread({},baseTheme.colors),{neutral0:theme.tailwind.colors["dark-monetr"].background.DEFAULT,neutral5:theme.tailwind.colors["dark-monetr"].background.subtle,neutral10:theme.tailwind.colors["dark-monetr"].background.emphasis,neutral20:theme.tailwind.colors["dark-monetr"].border.string,neutral30:theme.tailwind.colors["dark-monetr"].content.DEFAULT,neutral60:theme.tailwind.colors["dark-monetr"].content.emphasis,neutral70:theme.tailwind.colors["dark-monetr"].content.emphasis,neutral80:theme.tailwind.colors["dark-monetr"].content.emphasis,neutral90:theme.tailwind.colors["dark-monetr"].content.emphasis,primary25:theme.tailwind.colors["dark-monetr"].background.emphasis,primary50:theme.tailwind.colors["dark-monetr"].brand.faint,primary:theme.tailwind.colors["dark-monetr"].brand.DEFAULT})})}},otherProps),{className:"hidden md:block",isDisabled:props.disabled,styles:{placeholder:function(base){return MSelect_object_spread_props(MSelect_object_spread({},base),{fontSize:"0.875rem",lineHeight:"1.5rem"})},valueContainer:function(base){return MSelect_object_spread_props(MSelect_object_spread({},base),{fontSize:"0.875rem",lineHeight:"1.5rem"})},option:function(base){return MSelect_object_spread_props(MSelect_object_spread({},base),{color:theme.tailwind.colors["dark-monetr"].content.emphasized})},menuPortal:function(base){return MSelect_object_spread_props(MSelect_object_spread({},base),{zIndex:9999})}}})),/*#__PURE__*/react.createElement(Error1,null))}function SelectModal(props){var modal=(0,lib_esm.hS)(),iOS="undefined"!=typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),options=props.options;return /*#__PURE__*/react.createElement(SwipeableDrawer.A,{disableBackdropTransition:!iOS,disableDiscovery:iOS,anchor:"bottom",open:modal.visible,onClose:modal.hide,onOpen:function(){return modal.show()},className:"backdrop-blur-sm backdrop-brightness-50"},/*#__PURE__*/react.createElement("div",{className:"h-full flex flex-col gap-4 bg-dark-monetr-background pb-8"},/*#__PURE__*/react.createElement(MSpan,{weight:"bold",size:"xl",className:"p-2"},props.title),/*#__PURE__*/react.createElement("ul",{className:"w-full flex flex-col gap-2"},options.map(function(item){var _props_value,_props_value1;return /*#__PURE__*/react.createElement("li",{key:item.value,className:"w-full flex items-center active:bg-dark-monetr-background-subtle py-2",onClick:function(){props.onChange(item,void 0),modal.hide()}},(null===(_props_value=props.value)||void 0===_props_value?void 0:_props_value.value)===item.value&&/*#__PURE__*/react.createElement(CheckCircleOutline.A,{className:"mx-2 w-6"}),(null===(_props_value1=props.value)||void 0===_props_value1?void 0:_props_value1.value)!==item.value&&/*#__PURE__*/react.createElement("div",{className:"mx-2 w-6"}),/*#__PURE__*/react.createElement(MSpan,{size:"lg",weight:"medium"},item.label))}))))}var selectModal=lib_esm.Ay.create(SelectModal);function showSelectModal(props){return lib_esm.Ay.show(selectModal,props)}try{MSelect.displayName="MSelect",MSelect.__docgenInfo={description:"",displayName:"MSelect",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},labelDecorator:{defaultValue:null,description:"",name:"labelDecorator",required:!1,type:{name:"MLabelDecorator"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"Marks the value-holding input as required for form validation",name:"required",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"The value of the select; reflected by the selected option",name:"value",required:!1,type:{name:"Value<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MSelect.tsx#MSelect"]={docgenInfo:MSelect.__docgenInfo,name:"MSelect",path:"../interface/src/components/MSelect.tsx#MSelect"})}catch(__react_docgen_typescript_loader_error){}var endOfMonth=__webpack_require__("../node_modules/date-fns/esm/endOfMonth/index.js"),getDate=__webpack_require__("../node_modules/date-fns/esm/getDate/index.js"),getMonth=__webpack_require__("../node_modules/date-fns/esm/getMonth/index.js");function Recurrence_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function Recurrence_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Recurrence_create_class(Constructor,protoProps,staticProps){return protoProps&&Recurrence_defineProperties(Constructor.prototype,protoProps),staticProps&&Recurrence_defineProperties(Constructor,staticProps),Constructor}function Recurrence_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Recurrence=/*#__PURE__*/function(){function Recurrence(recurrence){Recurrence_class_call_check(this,Recurrence),Recurrence_define_property(this,"name",void 0),Recurrence_define_property(this,"rule",void 0),recurrence&&Object.assign(this,recurrence)}return Recurrence_create_class(Recurrence,[{key:"ruleString",value:function ruleString(){return this.rule.toString()}},{key:"equalRule",value:function equalRule(input){try{var inputRule=(0,dist_esm.YI)(input);inputRule.options.dtstart=null,inputRule.options.byhour=null,inputRule.options.byminute=null,inputRule.options.bysecond=null,inputRule.options.tzid=null;var thisRule=this.rule.clone();thisRule.options.dtstart=null,thisRule.options.byhour=null,thisRule.options.byminute=null,thisRule.options.bysecond=null,inputRule.options.tzid=null;var a=JSON.stringify(inputRule.options),b=JSON.stringify(thisRule.options);return a===b}catch(e){return console.warn("cannot compare invalid rrules",input,this),!1}}}]),Recurrence}();function getRecurrencesForDate(inputDate){if("string"==typeof inputDate)date=(0,parseJSON.A)(inputDate);else{if(!inputDate)return[];date=inputDate}var date,input=(0,startOfDay.A)(date),endOfMonthDate=(0,startOfDay.A)((0,endOfMonth.A)(input)),startOfMonthDate=(0,startOfDay.A)((0,startOfMonth.A)(input)),isStartOfMonth=(0,isEqual.A)(input,startOfMonthDate),isEndOfMonth=(0,isEqual.A)(input,endOfMonthDate),weekdayString=(0,format.A)(input,"EEEE"),ruleWeekday=getRuleDayOfWeek(input),dayStr=isEndOfMonth?" last day of the month":ordinalSuffixOf((0,getDate.A)(input)),rules=[new Recurrence({name:"Every ".concat(weekdayString),rule:new dist_esm.p3({dtstart:input,freq:dist_esm.p3.WEEKLY,interval:1,byweekday:[ruleWeekday]})}),new Recurrence({name:"Every other ".concat(weekdayString),rule:new dist_esm.p3({dtstart:input,freq:dist_esm.p3.WEEKLY,interval:2,byweekday:[ruleWeekday]})}),new Recurrence({name:"Every month on the ".concat(dayStr),rule:new dist_esm.p3({dtstart:input,freq:dist_esm.p3.MONTHLY,interval:1,bymonthday:(0,getDate.A)(input)})}),new Recurrence({name:"Every other month on the ".concat(dayStr),rule:new dist_esm.p3({dtstart:input,freq:dist_esm.p3.MONTHLY,interval:2,bymonthday:(0,getDate.A)(input)})}),new Recurrence({name:"Every 3 months (quarter) on the ".concat(dayStr),rule:new dist_esm.p3({dtstart:input,freq:dist_esm.p3.MONTHLY,interval:3,bymonthday:(0,getDate.A)(input)})}),new Recurrence({name:"Every 6 months on the ".concat(dayStr),rule:new dist_esm.p3({dtstart:input,freq:dist_esm.p3.MONTHLY,interval:6,bymonthday:(0,getDate.A)(input)})}),new Recurrence({name:"Every year on the ".concat(ordinalSuffixOf((0,getDate.A)(input))," of ").concat((0,format.A)(input,"MMMM")),rule:new dist_esm.p3({dtstart:input,freq:dist_esm.p3.YEARLY,interval:1,bymonth:(0,getMonth.A)(input)+1,bymonthday:(0,getDate.A)(input)})})];return(isStartOfMonth||15===(0,getDate.A)(input))&&rules.push(new Recurrence({name:"1st and 15th of every month",rule:new dist_esm.p3({dtstart:input,freq:dist_esm.p3.MONTHLY,interval:1,bymonthday:[1,15]})})),(isEndOfMonth||15===(0,getDate.A)(input))&&rules.push(new Recurrence({name:"15th and last day of every month",rule:new dist_esm.p3({dtstart:input,freq:dist_esm.p3.MONTHLY,interval:1,bymonthday:[15,-1]})})),rules}function getRuleDayOfWeek(date){switch((0,format.A)(date,"EEEE")){case"Monday":return dist_esm.p3.MO;case"Tuesday":return dist_esm.p3.TU;case"Wednesday":return dist_esm.p3.WE;case"Thursday":return dist_esm.p3.TH;case"Friday":return dist_esm.p3.FR;case"Saturday":return dist_esm.p3.SA;default:return dist_esm.p3.SU}}function ordinalSuffixOf(i){var j=i%10,k=i%100;return 1===j&&11!==k?"".concat(i,"st"):2===j&&12!==k?"".concat(i,"nd"):3===j&&13!==k?"".concat(i,"rd"):"".concat(i,"th")}function MSelectFrequency_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function MSelectFrequency_array_with_holes(arr){if(Array.isArray(arr))return arr}function MSelectFrequency_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function MSelectFrequency_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function MSelectFrequency_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function MSelectFrequency_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){MSelectFrequency_define_property(target,key,source[key])})}return target}function MSelectFrequency_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function MSelectFrequency_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):MSelectFrequency_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function MSelectFrequency_sliced_to_array(arr,i){return MSelectFrequency_array_with_holes(arr)||MSelectFrequency_iterable_to_array_limit(arr,i)||MSelectFrequency_unsupported_iterable_to_array(arr,i)||MSelectFrequency_non_iterable_rest()}function MSelectFrequency_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return MSelectFrequency_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MSelectFrequency_array_like_to_array(o,minLen)}}function MSelectFrequency(props){var _useState=MSelectFrequency_sliced_to_array((0,react.useState)(null),2),selectedIndex=_useState[0],setSelectedIndex=_useState[1],formikContext=(0,formik_esm.j7)(),date=formikContext.values[props.dateFrom],rules=getRecurrencesForDate(date);(0,react.useEffect)(function(){console.debug("[MSelectFrequency]","date selection has changed and is no longer present in the rules");var currentValue=null==formikContext?void 0:formikContext.values[props.name],found=currentValue?rules.findIndex(function(item){return item.equalRule(currentValue)}):-1;if(found>=0){console.debug("[MSelectFrequency]","found existing recurrence with the specified value"),setSelectedIndex(found);return}setSelectedIndex(null),null==formikContext||formikContext.setFieldValue(props.name,null),null==formikContext||formikContext.validateField(props.name)},[date]);var options=rules.map(function(item,index){return{label:item.name,value:index}}),value=null!==selectedIndex&&selectedIndex>=0&&selectedIndex<options.length?options[selectedIndex]:null;function onChange(newValue,_){setSelectedIndex(newValue.value),null==formikContext||formikContext.setFieldValue(props.name,rules[newValue.value].ruleString()),null==formikContext||formikContext.setFieldTouched(props.name,!0),null==formikContext||formikContext.validateField(props.name)}return /*#__PURE__*/react.createElement(MSelect,MSelectFrequency_object_spread_props(MSelectFrequency_object_spread({},props),{placeholder:"Select a frequency...",disabled:null==formikContext?void 0:formikContext.isSubmitting,error:null==formikContext?void 0:formikContext.errors[props.name],isClearable:!1,label:props.label,name:props.name,onChange:onChange,options:options,value:value}))}try{MSelectFrequency.displayName="MSelectFrequency",MSelectFrequency.__docgenInfo={description:"",displayName:"MSelectFrequency",props:{name:{defaultValue:null,description:"Name of the HTML Input (optional - without this, no input will be rendered)",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},dateFrom:{defaultValue:null,description:"",name:"dateFrom",required:!0,type:{name:"string"}},labelDecorator:{defaultValue:null,description:"",name:"labelDecorator",required:!1,type:{name:"MLabelDecorator"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"Marks the value-holding input as required for form validation",name:"required",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"The value of the select; reflected by the selected option",name:"value",required:!1,type:{name:"Recurrence"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MSelectFrequency.tsx#MSelectFrequency"]={docgenInfo:MSelectFrequency.__docgenInfo,name:"MSelectFrequency",path:"../interface/src/components/MSelectFrequency.tsx#MSelectFrequency"})}catch(__react_docgen_typescript_loader_error){}function MTextField_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function MTextField_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){MTextField_define_property(target,key,source[key])})}return target}function MTextField_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function MTextField_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):MTextField_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function MTextField_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=MTextField_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function MTextField_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}var MTextFieldPropsDefaults={label:null,labelDecorator:function(_){return null},disabled:!1,uppercasetext:void 0};function MTextField(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:MTextFieldPropsDefaults,formikContext=(0,formik_esm.j7)(),labelDecorator=(props=MTextField_object_spread_props(MTextField_object_spread({},MTextFieldPropsDefaults,props),{disabled:(null==props?void 0:props.disabled)||(null==formikContext?void 0:formikContext.isSubmitting),error:(null==props?void 0:props.error)||((null==formikContext?void 0:formikContext.touched[null==props?void 0:props.name])?null==formikContext?void 0:formikContext.errors[null==props?void 0:props.name]:null)})).labelDecorator,otherProps=MTextField_object_without_properties(props,["labelDecorator"]),LabelDecorator=labelDecorator||MTextFieldPropsDefaults.labelDecorator;function Error1(){return props.error?/*#__PURE__*/react.createElement("p",{className:"text-xs font-medium text-red-500 mt-0.5"},props.error):null}var classNames=mergeTailwind({"dark:focus:ring-dark-monetr-brand":!props.disabled&&!props.error,"dark:hover:ring-zinc-400":!props.disabled&&!props.error,"dark:ring-dark-monetr-border-string":!props.disabled&&!props.error,"dark:ring-red-500":!props.disabled&&!!props.error,"ring-gray-300":!props.disabled&&!props.error,"ring-red-300":!props.disabled&&!!props.error,uppercase:props.uppercasetext},{"focus:ring-purple-400":!props.error,"focus:ring-red-400":props.error},{"dark:bg-transparent":!props.disabled,"dark:text-zinc-200":!props.disabled,"text-gray-900":!props.disabled},{"dark:bg-dark-monetr-background-subtle":props.disabled,"dark:ring-dark-monetr-background-emphasis":props.disabled,"ring-gray-200":props.disabled,"text-gray-500":props.disabled},"block","border-0","focus:ring-2","focus:ring-inset","placeholder:text-gray-400","px-3","py-1.5","ring-1","ring-inset","rounded-lg","shadow-sm","sm:leading-6","text-sm","w-full","dark:caret-zinc-50","min-h-[38px]"),wrapperClassNames=mergeTailwind({"pb-[18px]":!props.error},props.className),value=null==formikContext?void 0:formikContext.values[props.name];return /*#__PURE__*/react.createElement("div",{className:wrapperClassNames},/*#__PURE__*/react.createElement(MLabel,{label:props.label,disabled:props.disabled,htmlFor:props.id,required:props.required},/*#__PURE__*/react.createElement(LabelDecorator,{name:props.name,disabled:props.disabled})),/*#__PURE__*/react.createElement("div",null,/*#__PURE__*/react.createElement("input",MTextField_object_spread_props(MTextField_object_spread({value:value,onChange:null==formikContext?void 0:formikContext.handleChange,onBlur:null==formikContext?void 0:formikContext.handleBlur,disabled:(null==formikContext?void 0:formikContext.isSubmitting)||props.disabled},otherProps),{className:classNames}))),/*#__PURE__*/react.createElement(Error1,null))}try{MTextField.displayName="MTextField",MTextField.__docgenInfo={description:"",displayName:"MTextField",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},uppercasetext:{defaultValue:null,description:"",name:"uppercasetext",required:!1,type:{name:"boolean"}},labelDecorator:{defaultValue:null,description:"",name:"labelDecorator",required:!1,type:{name:"MLabelDecorator"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MTextField.tsx#MTextField"]={docgenInfo:MTextField.__docgenInfo,name:"MTextField",path:"../interface/src/components/MTextField.tsx#MTextField"})}catch(__react_docgen_typescript_loader_error){}function NewFundingModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function NewFundingModal_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){NewFundingModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){NewFundingModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function NewFundingModal_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var initialValues={name:"",nextOccurrence:(0,startOfTomorrow.A)(),ruleset:"",excludeWeekends:!1,estimatedDeposit:void 0};function NewFundingModal(){var modal=(0,lib_esm.hS)(),ref=(0,react.useRef)(null),enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,selectedBankAccountId=bankAccounts_useSelectedBankAccountId(),createFundingSchedule=useCreateFundingSchedule();function submit(values,helpers){return _submit.apply(this,arguments)}function _submit(){return(_submit=NewFundingModal_async_to_generator(function(values,helpers){return NewFundingModal_ts_generator(this,function(_state){return helpers.setSubmitting(!0),[2,createFundingSchedule(new FundingSchedule({bankAccountId:selectedBankAccountId,name:values.name,nextRecurrence:(0,startOfDay.A)(new Date(values.nextOccurrence)),ruleset:values.ruleset,estimatedDeposit:null,excludeWeekends:!1})).then(function(created){return modal.resolve(created)}).then(function(){return modal.remove()}).catch(function(error){enqueueSnackbar(error.response.data.error,{variant:"error",disableWindowBlurListener:!0})}).finally(function(){return helpers.setSubmitting(!1)})]})})).apply(this,arguments)}return /*#__PURE__*/react.createElement(MModal,{open:modal.visible,ref:ref,className:"md:max-w-sm"},/*#__PURE__*/react.createElement(components_MForm,{initialValues:initialValues,onSubmit:submit,className:"h-full flex flex-col gap-2 p-2 justify-between","data-testid":"new-funding-modal"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col"},/*#__PURE__*/react.createElement(MSpan,{className:"font-bold text-xl mb-2"},"Create A New Funding Schedule"),/*#__PURE__*/react.createElement(MTextField,{id:"funding-name-search",name:"name",label:"What do you want to call your funding schedule?",required:!0,autoComplete:"off",placeholder:"Example: Payday..."}),/*#__PURE__*/react.createElement(MDatePicker,{name:"nextOccurrence",label:"When do you get paid next?",required:!0,min:(0,startOfTomorrow.A)()}),/*#__PURE__*/react.createElement(MSelectFrequency,{dateFrom:"nextOccurrence",menuPosition:"fixed",menuShouldScrollIntoView:!1,menuShouldBlockScroll:!0,menuPortalTarget:document.body,menuPlacement:"bottom",label:"How often do you get paid?",placeholder:"Select a funding frequency...",required:!0,name:"ruleset"})),/*#__PURE__*/react.createElement("div",{className:"flex justify-end gap-2"},/*#__PURE__*/react.createElement(FormButton,{variant:"destructive",onClick:modal.remove,"data-testid":"close-new-funding-modal"},"Cancel"),/*#__PURE__*/react.createElement(FormButton,{variant:"primary",type:"submit"},"Create"))))}var newFundingModal=lib_esm.Ay.create(NewFundingModal);function showNewFundingModal(){return lib_esm.Ay.show(newFundingModal)}try{NewFundingModal.displayName="NewFundingModal",NewFundingModal.__docgenInfo={description:"",displayName:"NewFundingModal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/modals/NewFundingModal.tsx#NewFundingModal"]={docgenInfo:NewFundingModal.__docgenInfo,name:"NewFundingModal",path:"../interface/src/modals/NewFundingModal.tsx#NewFundingModal"})}catch(__react_docgen_typescript_loader_error){}function MSelectFunding(props){var _props_label,formikContext=(0,formik_esm.j7)(),_useFundingSchedulesSink=useFundingSchedulesSink(),funding=_useFundingSchedulesSink.data,fundingIsLoading=_useFundingSchedulesSink.isLoading,fundingIsError=_useFundingSchedulesSink.isError,label=null!==(_props_label=props.label)&&void 0!==_props_label?_props_label:"Select a funding schedule";if(fundingIsLoading)return /*#__PURE__*/react.createElement(MSelect,{className:null==props?void 0:props.className,disabled:!0,isLoading:!0,label:label,menuPortalTarget:props.menuPortalTarget,placeholder:"Select a funding schedule...",required:null==props?void 0:props.required});if(fundingIsError)return /*#__PURE__*/react.createElement(MSelect,{className:null==props?void 0:props.className,disabled:!0,isLoading:!0,label:label,menuPortalTarget:props.menuPortalTarget,placeholder:"Failed to load funding schedules...",required:null==props?void 0:props.required});function createAndSetFunding(){showNewFundingModal().then(function(result){return formikContext.setFieldValue(props.name,result.fundingScheduleId)})}if(0===funding.length)return /*#__PURE__*/react.createElement("div",{className:"h-[84px] w-full"},/*#__PURE__*/react.createElement(MLabel,{label:props.label,required:props.required}),/*#__PURE__*/react.createElement(MBaseButton,{color:"primary",variant:"solid",className:"w-full h-[38px] font-normal text-start justify-start gap-2",onClick:createAndSetFunding},/*#__PURE__*/react.createElement(TodayOutlined.A,null),"Create a new funding schedule..."));var options=Array.from(funding.values()).map(function(item){return{label:item.name,value:item.fundingScheduleId}}),value=options.find(function(option){return option.value===formikContext.values[props.name]});function onSelect(newValue){formikContext.setFieldValue(props.name,newValue.value)}return /*#__PURE__*/react.createElement(MSelect,{label:"When do you want to fund the expense?",menuPlacement:"auto",menuPortalTarget:props.menuPortalTarget,menuPosition:"fixed",name:"fundingScheduleId",onChange:onSelect,options:options,placeholder:"Select a funding schedule...",required:props.required,value:value,className:props.className})}try{MSelectFunding.displayName="MSelectFunding",MSelectFunding.__docgenInfo={description:"",displayName:"MSelectFunding",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},menuPortalTarget:{defaultValue:null,description:"",name:"menuPortalTarget",required:!1,type:{name:"HTMLElement"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MSelectFunding.tsx#MSelectFunding"]={docgenInfo:MSelectFunding.__docgenInfo,name:"MSelectFunding",path:"../interface/src/components/MSelectFunding.tsx#MSelectFunding"})}catch(__react_docgen_typescript_loader_error){}function NewExpenseModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function NewExpenseModal_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){NewExpenseModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){NewExpenseModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function NewExpenseModal_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var NewExpenseModal_initialValues={name:"",amount:0,nextOccurrence:(0,startOfTomorrow.A)(),ruleset:"",fundingScheduleId:""};function NewExpenseModal(){var modal=(0,lib_esm.hS)(),enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,selectedBankAccountId=bankAccounts_useSelectedBankAccountId(),createSpending=useCreateSpending(),ref=(0,react.useRef)(null);function submit(values,helper){return _submit.apply(this,arguments)}function _submit(){return(_submit=NewExpenseModal_async_to_generator(function(values,helper){var newSpending;return NewExpenseModal_ts_generator(this,function(_state){return newSpending=new Spending({bankAccountId:selectedBankAccountId,name:values.name.trim(),nextRecurrence:(0,startOfDay.A)(new Date(values.nextOccurrence)),spendingType:SpendingType.Expense,fundingScheduleId:values.fundingScheduleId,targetAmount:friendlyToAmount(values.amount),ruleset:values.ruleset}),helper.setSubmitting(!0),[2,createSpending(newSpending).then(function(created){return modal.resolve(created)}).then(function(){return modal.remove()}).catch(function(error){enqueueSnackbar(error.response.data.error,{variant:"error",disableWindowBlurListener:!0})}).finally(function(){return helper.setSubmitting(!1)})]})})).apply(this,arguments)}return /*#__PURE__*/react.createElement(MModal,{open:modal.visible,ref:ref,className:"sm:max-w-xl"},/*#__PURE__*/react.createElement(components_MForm,{onSubmit:submit,initialValues:NewExpenseModal_initialValues,className:"h-full flex flex-col gap-2 p-2 justify-between","data-testid":"new-expense-modal"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col"},/*#__PURE__*/react.createElement(MSpan,{className:"font-bold text-xl mb-2"},"Create A New Expense"),/*#__PURE__*/react.createElement(MTextField,{id:"expense-name-search",name:"name",label:"What are you budgeting for?",required:!0,autoComplete:"off",placeholder:"Amazon, Netflix..."}),/*#__PURE__*/react.createElement("div",{className:"flex gap-0 md:gap-4 flex-col md:flex-row"},/*#__PURE__*/react.createElement(MAmountField,{name:"amount",label:"How much do you need?",required:!0,className:"w-full md:w-1/2",allowNegative:!1}),/*#__PURE__*/react.createElement(MDatePicker,{className:"w-full md:w-1/2",label:"When do you need it next?",min:(0,startOfTomorrow.A)(),name:"nextOccurrence",required:!0})),/*#__PURE__*/react.createElement(MSelectFunding,{menuPortalTarget:document.body,label:"When do you want to fund the expense?",required:!0,name:"fundingScheduleId"}),/*#__PURE__*/react.createElement(MSelectFrequency,{dateFrom:"nextOccurrence",menuPosition:"fixed",menuShouldScrollIntoView:!1,menuShouldBlockScroll:!0,menuPortalTarget:document.body,menuPlacement:"bottom",label:"How frequently do you need this expense?",placeholder:"Select a spending frequency...",required:!0,name:"ruleset"})),/*#__PURE__*/react.createElement("div",{className:"flex justify-end gap-2"},/*#__PURE__*/react.createElement(FormButton,{variant:"destructive",onClick:modal.remove,"data-testid":"close-new-expense-modal"},"Cancel"),/*#__PURE__*/react.createElement(FormButton,{variant:"primary",type:"submit"},"Create"))))}var newExpenseModal=lib_esm.Ay.create(NewExpenseModal);function showNewExpenseModal(){return lib_esm.Ay.show(newExpenseModal)}try{NewExpenseModal.displayName="NewExpenseModal",NewExpenseModal.__docgenInfo={description:"",displayName:"NewExpenseModal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/modals/NewExpenseModal.tsx#NewExpenseModal"]={docgenInfo:NewExpenseModal.__docgenInfo,name:"NewExpenseModal",path:"../interface/src/modals/NewExpenseModal.tsx#NewExpenseModal"})}catch(__react_docgen_typescript_loader_error){}var evilScrollPosition=0;function expenses_Expenses(){var _useSpendingFiltered=useSpendingFiltered(SpendingType.Expense),expenses=_useSpendingFiltered.result,isError=_useSpendingFiltered.isError,isLoading=_useSpendingFiltered.isLoading,ref=(0,react.useRef)(null),navigationType=(0,react_router_dist.wQ)(),onScroll=(0,react.useCallback)(function(){evilScrollPosition=ref.current.scrollTop},[ref]);if((0,react.useEffect)(function(){if(ref.current){"POP"===navigationType&&(ref.current.scrollTop=evilScrollPosition);var current=ref.current;return ref.current.addEventListener("scroll",onScroll),function(){current.removeEventListener("scroll",onScroll)}}},[ref.current,navigationType,onScroll]),isLoading)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"One moment..."));if(isError)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(HeartBroken.A,{className:"dark:text-dark-monetr-content h-24 w-24"}),/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"Something isn't right..."),/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl"},"We weren't able to retrieve expenses at this time..."));function ListContent(){return 0===expenses.length?/*#__PURE__*/react.createElement(EmptyState,null):/*#__PURE__*/react.createElement("ul",{className:"w-full flex flex-col gap-2 py-2"},null==expenses?void 0:expenses.sort(function(a,b){return a.name.toLowerCase()>b.name.toLowerCase()?1:-1}).map(function(item){return /*#__PURE__*/react.createElement(ExpenseItem,{spending:item,key:item.spendingId})}))}return /*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement(MTopNavigation,{icon:PriceCheckOutlined.A,title:"Expenses"},/*#__PURE__*/react.createElement(MBaseButton,{color:"primary",className:"gap-1 py-1 px-2",onClick:showNewExpenseModal},/*#__PURE__*/react.createElement(AddOutlined.A,null),"New Expense")),/*#__PURE__*/react.createElement("div",{className:"w-full h-full overflow-y-auto min-w-0",ref:ref},/*#__PURE__*/react.createElement(ListContent,null)))}function EmptyState(){return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex justify-center items-center"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col gap-2 items-center max-w-md"},/*#__PURE__*/react.createElement("div",{className:"w-full flex justify-center space-x-4"},/*#__PURE__*/react.createElement(AccountBalance.A,{className:"h-full text-5xl dark:text-dark-monetr-content-muted"}),/*#__PURE__*/react.createElement(AutoModeOutlined.A,{className:"h-full text-5xl dark:text-dark-monetr-content-muted"}),/*#__PURE__*/react.createElement(PriceCheckOutlined.A,{className:"h-full text-5xl dark:text-dark-monetr-content-muted"})),/*#__PURE__*/react.createElement(MSpan,{size:"xl",color:"subtle",className:"text-center"},"You don't have any expenses yet..."),/*#__PURE__*/react.createElement(MSpan,{size:"lg",color:"subtle",className:"text-center"},"Expenses are budgets for recurring spending. Things like your streaming subscription, rent, or car payments.")))}var react_infinite_scroll_hook_esm=__webpack_require__("../node_modules/react-infinite-scroll-hook/dist/react-infinite-scroll-hook.esm.js"),UploadOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/UploadOutlined.js"),parse=__webpack_require__("../node_modules/date-fns/esm/parse/index.js"),getUnixTime=__webpack_require__("../node_modules/date-fns/esm/getUnixTime/index.js"),pipe=__webpack_require__("../interface/node_modules/ramda/es/pipe.js"),groupBy=__webpack_require__("../interface/node_modules/ramda/es/groupBy.js"),mapObjIndexed=__webpack_require__("../interface/node_modules/ramda/es/mapObjIndexed.js"),values=__webpack_require__("../interface/node_modules/ramda/es/values.js"),map=__webpack_require__("../interface/node_modules/ramda/es/map.js");function TransactionDateItem(param){var date=param.date,dateString=(0,isThisYear.A)(date)?(0,format.A)(date,"MMMM do"):(0,format.A)(date,"MMMM do, yyyy");return /*#__PURE__*/react.createElement("li",{className:"sticky top-0 z-10 h-10 flex items-center backdrop-blur-sm bg-gradient-to-t from-transparent dark:to-dark-monetr-background via-90% mr-4"},/*#__PURE__*/react.createElement("span",{className:"dark:text-dark-monetr-content-subtle font-semibold text-base z-10 px-3 md:px-4"},dateString))}try{TransactionDateItem.displayName="TransactionDateItem",TransactionDateItem.__docgenInfo={description:"",displayName:"TransactionDateItem",props:{date:{defaultValue:null,description:"",name:"date",required:!0,type:{name:"Date"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/transactions/TransactionDateItem.tsx#TransactionDateItem"]={docgenInfo:TransactionDateItem.__docgenInfo,name:"TransactionDateItem",path:"../interface/src/components/transactions/TransactionDateItem.tsx#TransactionDateItem"})}catch(__react_docgen_typescript_loader_error){}function ArrowLink(param){var redirect=param.redirect,navigate=(0,react_router_dist.Zp)();function go(){navigate(redirect)}return /*#__PURE__*/react.createElement("button",{className:"flex-none dark:text-dark-monetr-content-subtle dark:group-hover:text-dark-monetr-content-emphasis md:cursor-pointer",onClick:go},/*#__PURE__*/react.createElement(KeyboardArrowRight.A,null))}try{ArrowLink.displayName="ArrowLink",ArrowLink.__docgenInfo={description:"",displayName:"ArrowLink",props:{redirect:{defaultValue:null,description:"",name:"redirect",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/ArrowLink.tsx#ArrowLink"]={docgenInfo:ArrowLink.__docgenInfo,name:"ArrowLink",path:"../interface/src/components/ArrowLink.tsx#ArrowLink"})}catch(__react_docgen_typescript_loader_error){}var index_a301f526_esm=__webpack_require__("../node_modules/react-select/dist/index-a301f526.esm.js"),useInfiniteQuery=__webpack_require__("../node_modules/@tanstack/react-query/build/lib/useInfiniteQuery.mjs");function Transaction_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function Transaction_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Transaction_create_class(Constructor,protoProps,staticProps){return protoProps&&Transaction_defineProperties(Constructor.prototype,protoProps),staticProps&&Transaction_defineProperties(Constructor,staticProps),Constructor}function Transaction_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Transaction_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){Transaction_define_property(target,key,source[key])})}return target}function Transaction_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function Transaction_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Transaction_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var Transaction_Transaction=/*#__PURE__*/function(){function Transaction(data){if(Transaction_class_call_check(this,Transaction),Transaction_define_property(this,"transactionId",void 0),Transaction_define_property(this,"bankAccountId",void 0),Transaction_define_property(this,"amount",void 0),Transaction_define_property(this,"spendingId",void 0),Transaction_define_property(this,"spendingAmount",void 0),Transaction_define_property(this,"categories",void 0),Transaction_define_property(this,"date",void 0),Transaction_define_property(this,"authorizedDate",void 0),Transaction_define_property(this,"name",void 0),Transaction_define_property(this,"originalName",void 0),Transaction_define_property(this,"merchantName",void 0),Transaction_define_property(this,"originalMerchantName",void 0),Transaction_define_property(this,"isPending",void 0),Transaction_define_property(this,"currency",void 0),Transaction_define_property(this,"createdAt",void 0),data){var _data_authorizedDate;Object.assign(this,Transaction_object_spread_props(Transaction_object_spread({},data),{date:(0,parseJSON.A)(data.date),authorizedDate:null!==(_data_authorizedDate=data.authorizedDate)&&void 0!==_data_authorizedDate?_data_authorizedDate:(0,parseJSON.A)(data.authorizedDate),createdAt:(0,parseJSON.A)(data.createdAt)}))}}return Transaction_create_class(Transaction,[{key:"getAmountString",value:function getAmountString(){var locale=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en_US",amount=Math.abs(this.amount);return this.amount<0?"+ ".concat(formatAmount(amount,AmountType.Stored,locale,this.currency)):formatAmount(amount,AmountType.Stored,locale,this.currency)}},{key:"getIsAddition",value:function getIsAddition(){return this.amount<0}},{key:"getName",value:function getName(){return this.name?this.name:this.originalName}},{key:"getTitle",value:function getTitle(){return this.name?this.name:this.merchantName?this.merchantName:this.originalMerchantName?this.originalMerchantName:this.originalName}},{key:"getOriginalName",value:function getOriginalName(){return this.originalName}},{key:"getMerchantName",value:function getMerchantName(){return this.merchantName?this.merchantName:this.originalMerchantName}},{key:"getMainCategory",value:function getMainCategory(){return this.categories&&this.categories.length>0?this.categories[0]:"Other"}}]),Transaction}();function TransactionCluster_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function TransactionCluster_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function TransactionCluster_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){TransactionCluster_define_property(target,key,source[key])})}return target}function TransactionCluster_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function TransactionCluster_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):TransactionCluster_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var TransactionCluster=function TransactionCluster(data){if(TransactionCluster_class_call_check(this,TransactionCluster),TransactionCluster_define_property(this,"transactionClusterId",void 0),TransactionCluster_define_property(this,"bankAccountId",void 0),TransactionCluster_define_property(this,"name",void 0),TransactionCluster_define_property(this,"members",void 0),TransactionCluster_define_property(this,"createdAt",void 0),data){var _data_createdAt;Object.assign(this,TransactionCluster_object_spread_props(TransactionCluster_object_spread({},data),{createdAt:null!==(_data_createdAt=data.createdAt)&&void 0!==_data_createdAt?_data_createdAt:(0,parseJSON.A)(data.createdAt)}))}else Object.assign(this,{members:[]})};function transactions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function transactions_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){transactions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){transactions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function transactions_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function transactions_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){transactions_define_property(target,key,source[key])})}return target}function transactions_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function transactions_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):transactions_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function transactions_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useTransactions(){var _result_data,_result_data1,selectedBankAccountId=bankAccounts_useSelectedBankAccountId(),result=(0,useInfiniteQuery.q)(["/bank_accounts/".concat(selectedBankAccountId,"/transactions")],{getNextPageParam:function(_,pages){return 25*pages.length},enabled:!!selectedBankAccountId});return transactions_object_spread_props(transactions_object_spread({},result),{hasNextPage:!(null==result?void 0:null===(_result_data=result.data)||void 0===_result_data?void 0:_result_data.pages.some(function(page){return page.length<25})),result:(null==result?void 0:null===(_result_data1=result.data)||void 0===_result_data1?void 0:_result_data1.pages.flatMap(function(x){return x}).map(function(item){return new Transaction_Transaction(item)}))||[]})}function useTransaction(transactionId){var selectedBankAccountId=bankAccounts_useSelectedBankAccountId();return(0,lib_useQuery.I)(["/bank_accounts/".concat(selectedBankAccountId,"/transactions/").concat(transactionId)],{enabled:!!selectedBankAccountId&&!!transactionId,select:function(data){return new Transaction_Transaction(data)}})}function useSimilarTransactions(transaction){return(0,lib_useQuery.I)(["/bank_accounts/".concat(null==transaction?void 0:transaction.bankAccountId,"/transactions/").concat(null==transaction?void 0:transaction.transactionId,"/similar")],{enabled:!!transaction,select:function(data){return new TransactionCluster(data)},retry:!1})}function useUpdateTransaction(){var queryClient=(0,QueryClientProvider.jE)();function updateTransaction(transaction){return _updateTransaction.apply(this,arguments)}function _updateTransaction(){return(_updateTransaction=transactions_async_to_generator(function(transaction){return transactions_ts_generator(this,function(_state){return[2,(0,util_request.A)().put("/bank_accounts/".concat(transaction.bankAccountId,"/transactions/").concat(transaction.transactionId),transaction).then(function(result){return result.data})]})})).apply(this,arguments)}return(0,useMutation.n)(updateTransaction,{onSuccess:function(response){return Promise.all([queryClient.setQueriesData(["/bank_accounts/".concat(response.transaction.bankAccountId,"/transactions")],function(previous){return transactions_object_spread_props(transactions_object_spread({},previous),{pages:previous.pages.map(function(page){return page.map(function(item){return item.transactionId===response.transaction.transactionId?response.transaction:item})})})}),queryClient.setQueriesData(["/bank_accounts/".concat(response.transaction.bankAccountId,"/transactions/").concat(response.transaction.transactionId)],response.transaction),queryClient.setQueriesData(["/bank_accounts/".concat(response.transaction.bankAccountId,"/spending")],function(previous){return previous.map(function(item){return(response.spending||[]).find(function(updated){return updated.spendingId===item.spendingId})||item})}),(response.spending||[]).map(function(spending){return queryClient.setQueriesData(["/bank_accounts/".concat(response.transaction.bankAccountId,"/spending/").concat(spending.spendingId)],spending)}),queryClient.setQueriesData(["/bank_accounts/".concat(response.transaction.bankAccountId,"/balances")],function(previous){return new Balance_Balance(transactions_object_spread({},previous,response.balance))}),queryClient.invalidateQueries(["/bank_accounts/".concat(response.transaction.bankAccountId,"/forecast")]),queryClient.invalidateQueries(["/bank_accounts/".concat(response.transaction.bankAccountId,"/forecast/next_funding")])])}}).mutateAsync}var injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=/*#__PURE__*/__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=/*#__PURE__*/__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=/*#__PURE__*/__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=/*#__PURE__*/__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=/*#__PURE__*/__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=/*#__PURE__*/__webpack_require__.n(styleTagTransform),MSelectSpendingTransaction=__webpack_require__("./node_modules/css-loader/dist/cjs.js!../node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!../interface/src/components/MSelectSpendingTransaction.scss"),options={};function MSelectSpendingTransaction_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function MSelectSpendingTransaction_array_with_holes(arr){if(Array.isArray(arr))return arr}function _array_without_holes(arr){if(Array.isArray(arr))return MSelectSpendingTransaction_array_like_to_array(arr)}function MSelectSpendingTransaction_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function MSelectSpendingTransaction_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){MSelectSpendingTransaction_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){MSelectSpendingTransaction_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function MSelectSpendingTransaction_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function MSelectSpendingTransaction_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function MSelectSpendingTransaction_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function MSelectSpendingTransaction_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){MSelectSpendingTransaction_define_property(target,key,source[key])})}return target}function MSelectSpendingTransaction_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function MSelectSpendingTransaction_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):MSelectSpendingTransaction_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function MSelectSpendingTransaction_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=MSelectSpendingTransaction_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function MSelectSpendingTransaction_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function MSelectSpendingTransaction_sliced_to_array(arr,i){return MSelectSpendingTransaction_array_with_holes(arr)||MSelectSpendingTransaction_iterable_to_array_limit(arr,i)||MSelectSpendingTransaction_unsupported_iterable_to_array(arr,i)||MSelectSpendingTransaction_non_iterable_rest()}function _to_consumable_array(arr){return _array_without_holes(arr)||_iterable_to_array(arr)||MSelectSpendingTransaction_unsupported_iterable_to_array(arr)||_non_iterable_spread()}function MSelectSpendingTransaction_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return MSelectSpendingTransaction_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MSelectSpendingTransaction_array_like_to_array(o,minLen)}}function MSelectSpendingTransaction_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function MSelectSpendingTransaction_MSelectSpendingTransaction(props){var transaction=props.transaction,_useSpendingSink=useSpendingSink(),allSpending=_useSpendingSink.result,spendingIsLoading=_useSpendingSink.isLoading,balances=useCurrentBalance(),updateTransaction=useUpdateTransaction(),theme=useTheme(),_useState=MSelectSpendingTransaction_sliced_to_array((0,react.useState)(!1),2),isLoading=_useState[0],setIsLoading=_useState[1],id="txn-".concat(transaction.transactionId,"-spending-input");function updateSpentFrom(selection){return _updateSpentFrom.apply(this,arguments)}function _updateSpentFrom(){return(_updateSpentFrom=MSelectSpendingTransaction_async_to_generator(function(selection){var spendingId;return MSelectSpendingTransaction_ts_generator(this,function(_state){return(spendingId=selection?selection.spendingId:null)==transaction.spendingId?[2,Promise.resolve()]:(setIsLoading(!0),[2,updateTransaction(new Transaction_Transaction(MSelectSpendingTransaction_object_spread_props(MSelectSpendingTransaction_object_spread({},transaction),{spendingId:spendingId}))).finally(function(){setIsLoading(!1),setTimeout(function(){document.getElementById(id).focus()},0)})])})})).apply(this,arguments)}function handleSpentFromChange(newValue,_){return updateSpentFrom(newValue.spending)}var freeToUse={label:"Free-To-Use",value:null,spending:{currentAmount:null==balances?void 0:balances.free}},items=allSpending.map(function(item){return{label:item.name,value:item.spendingId,spending:item}}),options=[freeToUse].concat(_to_consumable_array(items.sort(function(a,b){return a.label.toLowerCase()>b.label.toLowerCase()?1:-1}))),selectedItem=transaction.spendingId?items.find(function(item){return item.value===transaction.spendingId}):freeToUse;function formatOptionsLabel(option,meta){return"value"===meta.context?/*#__PURE__*/react.createElement(react.Fragment,null,"Spent From ",/*#__PURE__*/react.createElement("span",{className:mergeTailwind({"font-bold dark:text-dark-monetr-content-emphasis":!!option.value})},option.label)):option.label}return /*#__PURE__*/react.createElement("div",{className:"hidden md:flex w-1/2 flex-1 items-center"},/*#__PURE__*/react.createElement(react_select_esm.Ay,{inputId:id,theme:function(baseTheme){return MSelectSpendingTransaction_object_spread_props(MSelectSpendingTransaction_object_spread({},baseTheme),{borderRadius:8,spacing:{controlHeight:32,baseUnit:3,menuGutter:15},colors:MSelectSpendingTransaction_object_spread_props(MSelectSpendingTransaction_object_spread({},baseTheme.colors),{neutral0:theme.tailwind.colors["dark-monetr"].background.DEFAULT,neutral5:theme.tailwind.colors["dark-monetr"].background.subtle,neutral10:theme.tailwind.colors["dark-monetr"].background.emphasis,neutral20:theme.tailwind.colors["dark-monetr"].border.string,neutral30:theme.tailwind.colors["dark-monetr"].content.DEFAULT,neutral60:theme.tailwind.colors["dark-monetr"].content.emphasis,neutral70:theme.tailwind.colors["dark-monetr"].content.emphasis,neutral80:theme.tailwind.colors["dark-monetr"].content.emphasis,neutral90:theme.tailwind.colors["dark-monetr"].content.emphasis,primary25:theme.tailwind.colors["dark-monetr"].background.emphasis,primary50:theme.tailwind.colors["dark-monetr"].brand.faint,primary:theme.tailwind.colors["dark-monetr"].brand.DEFAULT})})},menuPortalTarget:document.body,components:{Option:SpendingSelectOption},styles:{placeholder:function(base){return MSelectSpendingTransaction_object_spread_props(MSelectSpendingTransaction_object_spread({},base),{fontSize:"0.875rem",lineHeight:"1.5rem"})},valueContainer:function(base){return MSelectSpendingTransaction_object_spread_props(MSelectSpendingTransaction_object_spread({},base),{fontSize:"0.875rem",lineHeight:"1.5rem",padding:"0px 5px"})},option:function(base){return MSelectSpendingTransaction_object_spread_props(MSelectSpendingTransaction_object_spread({},base),{color:theme.tailwind.colors["dark-monetr"].content.emphasized})},menuPortal:function(base){return MSelectSpendingTransaction_object_spread_props(MSelectSpendingTransaction_object_spread({},base),{zIndex:9999})}},classNamePrefix:"m-select-spending-transaction",isLoading:isLoading||spendingIsLoading&&!!transaction.spendingId,onChange:handleSpentFromChange,formatOptionLabel:formatOptionsLabel,options:options,value:selectedItem,className:"w-full"}))}function SpendingSelectOption(_param){_param.children;var _props_data_spending,_props_data_spending1,_props_data_spending2,props=MSelectSpendingTransaction_object_without_properties(_param,["children"]),amount=(null===(_props_data_spending=props.data.spending)||void 0===_props_data_spending?void 0:_props_data_spending.currentAmount)===void 0?"N/A":formatAmount(props.data.spending.currentAmount);return /*#__PURE__*/react.createElement(index_a301f526_esm.c.Option,props,/*#__PURE__*/react.createElement("div",{className:"flex justify-between"},/*#__PURE__*/react.createElement(MSpan,{size:"md",color:"emphasis"},props.label),/*#__PURE__*/react.createElement("div",{className:"flex gap-2"},(null===(_props_data_spending1=props.data.spending)||void 0===_props_data_spending1?void 0:_props_data_spending1.spendingType)===SpendingType.Goal&&/*#__PURE__*/react.createElement(MBadge,{size:"sm",className:"dark:bg-dark-monetr-blue  max-h-[24px]"},/*#__PURE__*/react.createElement(SavingsOutlined.A,null)),(null===(_props_data_spending2=props.data.spending)||void 0===_props_data_spending2?void 0:_props_data_spending2.spendingType)===SpendingType.Expense&&/*#__PURE__*/react.createElement(MBadge,{size:"sm",className:"dark:bg-dark-monetr-green max-h-[24px]"},/*#__PURE__*/react.createElement(PriceCheckOutlined.A,null)),/*#__PURE__*/react.createElement(MBadge,{size:"sm"},amount))))}options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default(),injectStylesIntoStyleTag_default()(MSelectSpendingTransaction.A,options),MSelectSpendingTransaction.A&&MSelectSpendingTransaction.A.locals&&MSelectSpendingTransaction.A.locals;try{MSelectSpendingTransaction_MSelectSpendingTransaction.displayName="MSelectSpendingTransaction",MSelectSpendingTransaction_MSelectSpendingTransaction.__docgenInfo={description:"",displayName:"MSelectSpendingTransaction",props:{transaction:{defaultValue:null,description:"",name:"transaction",required:!0,type:{name:"Transaction"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MSelectSpendingTransaction.tsx#MSelectSpendingTransaction"]={docgenInfo:MSelectSpendingTransaction_MSelectSpendingTransaction.__docgenInfo,name:"MSelectSpendingTransaction",path:"../interface/src/components/MSelectSpendingTransaction.tsx#MSelectSpendingTransaction"})}catch(__react_docgen_typescript_loader_error){}try{SpendingSelectOption.displayName="SpendingSelectOption",SpendingSelectOption.__docgenInfo={description:"",displayName:"SpendingSelectOption",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MSelectSpendingTransaction.tsx#SpendingSelectOption"]={docgenInfo:SpendingSelectOption.__docgenInfo,name:"SpendingSelectOption",path:"../interface/src/components/MSelectSpendingTransaction.tsx#SpendingSelectOption"})}catch(__react_docgen_typescript_loader_error){}var styled=__webpack_require__("../node_modules/@mui/material/styles/styled.js");function TransactionMerchantIcon_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=TransactionMerchantIcon_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function TransactionMerchantIcon_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function TransactionMerchantIcon(props){var theme=useTheme(),pending=props.pending,merchantIconProps=TransactionMerchantIcon_object_without_properties(props,["pending"]),StyledBadge=(0,styled.Ay)(Badge.A)(function(){return{"& .MuiBadge-badge":{backgroundColor:theme.tailwind.colors.blue["500"],color:theme.tailwind.colors.blue["500"],boxShadow:"0 0 0 2px ".concat(theme.tailwind.colors["dark-monetr"].background.DEFAULT),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple-pending-txn 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple-pending-txn":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}});return pending?/*#__PURE__*/react.createElement(StyledBadge,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},/*#__PURE__*/react.createElement(MerchantIcon,merchantIconProps)):/*#__PURE__*/react.createElement(MerchantIcon,merchantIconProps)}try{TransactionMerchantIcon.displayName="TransactionMerchantIcon",TransactionMerchantIcon.__docgenInfo={description:"",displayName:"TransactionMerchantIcon",props:{pending:{defaultValue:null,description:"",name:"pending",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/transactions/TransactionMerchantIcon.tsx#TransactionMerchantIcon"]={docgenInfo:TransactionMerchantIcon.__docgenInfo,name:"TransactionMerchantIcon",path:"../interface/src/components/transactions/TransactionMerchantIcon.tsx#TransactionMerchantIcon"})}catch(__react_docgen_typescript_loader_error){}function TransactionItem(param){var transaction=param.transaction,user=useAuthentication(),spending=useSpendingOld(transaction.spendingId),navigate=(0,react_router_dist.Zp)(),detailsUrl="/bank/".concat(transaction.bankAccountId,"/transactions/").concat(transaction.transactionId,"/details"),amountClassnames=mergeTailwind({"dark:text-dark-monetr-green":transaction.getIsAddition(),"dark:text-dark-monetr-red":!transaction.getIsAddition()},"text-end","font-semibold");function BudgetingInfo(props){var className=mergeTailwind("overflow-hidden","text-ellipsis","whitespace-nowrap","min-w-0",props.className),spentFromClasses=mergeTailwind({"font-bold":!!transaction.spendingId,"dark:text-dark-monetr-content-emphasis":!!transaction.spendingId,"font-medium":!transaction.spendingId,"dark:text-dark-monetr-content":!transaction.spendingId},"md:text-base","min-w-0","overflow-hidden","text-ellipsis","text-sm","whitespace-nowrap");return transaction.getIsAddition()?/*#__PURE__*/react.createElement("span",{className:className},/*#__PURE__*/react.createElement("span",{className:"min-w-0 flex-none truncate font-medium dark:text-dark-monetr-content-subtle"},"Contribution")):/*#__PURE__*/react.createElement("span",{className:className},/*#__PURE__*/react.createElement("span",{className:"min-w-0 flex-none truncate font-medium dark:text-dark-monetr-content"},"Spent from"),"",/*#__PURE__*/react.createElement("span",{className:spentFromClasses},(null==spending?void 0:spending.name)||"Free-To-Use"))}return /*#__PURE__*/react.createElement("li",{className:"group relative w-full px-1 md:px-2"},/*#__PURE__*/react.createElement("div",{className:"absolute left-0 top-0 flex h-full w-full cursor-pointer md:hidden md:cursor-auto",onClick:function(){return navigate(detailsUrl)}}),/*#__PURE__*/react.createElement("div",{className:"group flex h-full gap-1 rounded-lg px-2 py-1 group-hover:bg-zinc-600 md:gap-4"},/*#__PURE__*/react.createElement("div",{className:"flex w-full min-w-0 flex-1 flex-row items-center gap-4 md:w-1/2"},/*#__PURE__*/react.createElement(TransactionMerchantIcon,{name:transaction.getName(),pending:transaction.isPending}),/*#__PURE__*/react.createElement("div",{className:"flex min-w-0 flex-col overflow-hidden"},/*#__PURE__*/react.createElement("span",{className:"w-full min-w-0 truncate text-base font-semibold dark:text-dark-monetr-content-emphasis"},transaction.getName()),/*#__PURE__*/react.createElement("span",{className:"hidden w-full min-w-0 truncate text-sm font-medium dark:text-dark-monetr-content md:block"},transaction.getMainCategory()),/*#__PURE__*/react.createElement(BudgetingInfo,{className:"flex w-full text-sm md:hidden"}))),!transaction.getIsAddition()&&/*#__PURE__*/react.createElement(MSelectSpendingTransaction_MSelectSpendingTransaction,{transaction:transaction}),transaction.getIsAddition()&&/*#__PURE__*/react.createElement(BudgetingInfo,{className:"hidden md:flex w-1/2 flex-1 items-center pl-6"}),/*#__PURE__*/react.createElement("div",{className:"flex shrink-0 items-center justify-end gap-2 md:min-w-[8em]"},/*#__PURE__*/react.createElement("span",{className:amountClassnames},transaction.getAmountString(user.account.locale)),/*#__PURE__*/react.createElement(ArrowLink,{redirect:detailsUrl}))))}try{TransactionItem.displayName="TransactionItem",TransactionItem.__docgenInfo={description:"",displayName:"TransactionItem",props:{transaction:{defaultValue:null,description:"",name:"transaction",required:!0,type:{name:"Transaction"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/transactions/TransactionItem.tsx#TransactionItem"]={docgenInfo:TransactionItem.__docgenInfo,name:"TransactionItem",path:"../interface/src/components/transactions/TransactionItem.tsx#TransactionItem"})}catch(__react_docgen_typescript_loader_error){}var es=__webpack_require__("../node_modules/react-dropzone/dist/es/index.js"),FilePresentOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/FilePresentOutlined.js"),Close=__webpack_require__("../node_modules/@mui/icons-material/esm/Close.js"),UploadFileOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/UploadFileOutlined.js"),axios=__webpack_require__("../node_modules/axios/lib/axios.js");function ErrorFileStage(props){return /*#__PURE__*/react.createElement("div",{className:"h-full flex flex-col gap-2 p-2 justify-between"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col gap-2 h-full"},/*#__PURE__*/react.createElement("div",{className:"flex justify-between"},/*#__PURE__*/react.createElement(MSpan,{weight:"bold",size:"xl"},"Upload Transactions"),/*#__PURE__*/react.createElement("div",null)),/*#__PURE__*/react.createElement("div",{className:"flex gap-2 items-center border rounded-md w-full p-2 border-dark-monetr-border"},/*#__PURE__*/react.createElement(FilePresentOutlined.A,{className:"text-6xl text-dark-monetr-content"}),/*#__PURE__*/react.createElement("div",{className:"flex flex-col py-1 w-full"},/*#__PURE__*/react.createElement(MSpan,{size:"lg"},props.error.filename),/*#__PURE__*/react.createElement(MSpan,null,"Failed to import data: ",props.error.message)))),/*#__PURE__*/react.createElement("div",{className:"flex justify-end gap-2 mt-2"},/*#__PURE__*/react.createElement(MBaseButton,{color:"secondary",onClick:props.close},"Close")))}try{ErrorFileStage.displayName="ErrorFileStage",ErrorFileStage.__docgenInfo={description:"",displayName:"ErrorFileStage",props:{close:{defaultValue:null,description:"",name:"close",required:!0,type:{name:"() => void"}},error:{defaultValue:null,description:"",name:"error",required:!0,type:{name:"{ message: string; filename: string; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/modals/UploadTransactions/ErrorFileStage.tsx#ErrorFileStage"]={docgenInfo:ErrorFileStage.__docgenInfo,name:"ErrorFileStage",path:"../interface/src/modals/UploadTransactions/ErrorFileStage.tsx#ErrorFileStage"})}catch(__react_docgen_typescript_loader_error){}function TransactionUpload_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function TransactionUpload_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function TransactionUpload_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){TransactionUpload_define_property(target,key,source[key])})}return target}function TransactionUpload_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function TransactionUpload_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):TransactionUpload_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var TransactionUpload=function TransactionUpload(data){TransactionUpload_class_call_check(this,TransactionUpload),TransactionUpload_define_property(this,"transactionUploadId",void 0),TransactionUpload_define_property(this,"bankAccountId",void 0),TransactionUpload_define_property(this,"fileId",void 0),TransactionUpload_define_property(this,"file",void 0),TransactionUpload_define_property(this,"status",void 0),TransactionUpload_define_property(this,"error",void 0),TransactionUpload_define_property(this,"createdAt",void 0),TransactionUpload_define_property(this,"createdBy",void 0),TransactionUpload_define_property(this,"processedAt",void 0),TransactionUpload_define_property(this,"completedAt",void 0),data&&Object.assign(this,TransactionUpload_object_spread_props(TransactionUpload_object_spread({},data),{createdAt:(null==data?void 0:data.createdAt)&&(0,parseJSON.A)(null==data?void 0:data.createdAt),processedAt:(null==data?void 0:data.processedAt)&&(0,parseJSON.A)(null==data?void 0:data.processedAt),completedAt:(null==data?void 0:data.completedAt)&&(0,parseJSON.A)(null==data?void 0:data.completedAt)}))};function ProcessingFileStage_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ProcessingFileStage_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){ProcessingFileStage_define_property(target,key,source[key])})}return target}function ProcessingFileStage(props){var data=useTransactionUploadProgress(props.upload.bankAccountId,props.upload.transactionUploadId).data;return /*#__PURE__*/react.createElement("div",{className:"h-full flex flex-col gap-2 p-2 justify-between"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col gap-2 h-full"},/*#__PURE__*/react.createElement("div",{className:"flex justify-between"},/*#__PURE__*/react.createElement(MSpan,{weight:"bold",size:"xl"},"Upload Transactions"),/*#__PURE__*/react.createElement("div",null)),/*#__PURE__*/react.createElement(MSpan,null,"Your upload is currently pending or processing, keep this window open to see its status. You can also safely close this window. Your upload will not be interuptted."),/*#__PURE__*/react.createElement("div",{className:"flex gap-2 items-center border rounded-md w-full p-2 border-dark-monetr-border"},/*#__PURE__*/react.createElement(FilePresentOutlined.A,{className:"text-6xl text-dark-monetr-content"}),/*#__PURE__*/react.createElement("div",{className:"flex flex-col py-1 w-full"},/*#__PURE__*/react.createElement(MSpan,{size:"lg"},props.upload.file.name),/*#__PURE__*/react.createElement(MSpan,null,"Import ",(null==data?void 0:data.status)||"processing","!")))),/*#__PURE__*/react.createElement("div",{className:"flex justify-end gap-2 mt-2"},/*#__PURE__*/react.createElement(MBaseButton,{color:"secondary",onClick:props.close},"Done")))}function useTransactionUploadProgress(bankAccountId,transactionUploadId){var queryClient=(0,QueryClientProvider.jE)();return(0,react.useEffect)(function(){var protocol="https:"===location.protocol?"wss":"ws",socket=new WebSocket("".concat(protocol,"://").concat(location.host,"/api/bank_accounts/").concat(bankAccountId,"/transactions/upload/").concat(transactionUploadId,"/progress"));return socket.onopen=function(){console.log("Listening for transaction upload progress messages for",{bankAccountId:bankAccountId,transactionUploadId:transactionUploadId})},socket.onmessage=function(event){if(event.data){var data=JSON.parse(event.data),queryKey=["/bank_accounts/".concat(bankAccountId,"/transactions/upload/").concat(transactionUploadId)];queryClient.setQueryData(queryKey,function(item){return ProcessingFileStage_object_spread({},null!=item?item:{},data)})}},function(){return socket.close()}},[bankAccountId,queryClient,transactionUploadId]),(0,lib_useQuery.I)(["/bank_accounts/".concat(bankAccountId,"/transactions/upload/").concat(transactionUploadId)],{initialData:function(){return null},select:function(data){return new TransactionUpload(data)}})}try{ProcessingFileStage.displayName="ProcessingFileStage",ProcessingFileStage.__docgenInfo={description:"",displayName:"ProcessingFileStage",props:{close:{defaultValue:null,description:"",name:"close",required:!0,type:{name:"() => void"}},upload:{defaultValue:null,description:"",name:"upload",required:!0,type:{name:"TransactionUpload"}},setStage:{defaultValue:null,description:"",name:"setStage",required:!0,type:{name:"(stage: UploadTransactionStage) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/modals/UploadTransactions/ProcessingFileStage.tsx#ProcessingFileStage"]={docgenInfo:ProcessingFileStage.__docgenInfo,name:"ProcessingFileStage",path:"../interface/src/modals/UploadTransactions/ProcessingFileStage.tsx#ProcessingFileStage"})}catch(__react_docgen_typescript_loader_error){}function fileSize(bytes){var si=arguments.length>1&&void 0!==arguments[1]&&arguments[1],dp=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,thresh=si?1e3:1024;if(Math.abs(bytes)<thresh)return"".concat(bytes," B");var units=si?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],x=-1,y=Math.pow(10,dp);do bytes/=thresh,++x;while(Math.round(Math.abs(bytes)*y)/y>=thresh&&x<units.length-1)return"".concat(bytes.toFixed(dp)," ").concat(units[x])}function UploadTransactionsModal_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function UploadTransactionsModal_array_with_holes(arr){if(Array.isArray(arr))return arr}function UploadTransactionsModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function UploadTransactionsModal_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){UploadTransactionsModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){UploadTransactionsModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function UploadTransactionsModal_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function UploadTransactionsModal_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function UploadTransactionsModal_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function UploadTransactionsModal_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){UploadTransactionsModal_define_property(target,key,source[key])})}return target}function UploadTransactionsModal_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function UploadTransactionsModal_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):UploadTransactionsModal_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function UploadTransactionsModal_sliced_to_array(arr,i){return UploadTransactionsModal_array_with_holes(arr)||UploadTransactionsModal_iterable_to_array_limit(arr,i)||UploadTransactionsModal_unsupported_iterable_to_array(arr,i)||UploadTransactionsModal_non_iterable_rest()}function UploadTransactionsModal_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return UploadTransactionsModal_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UploadTransactionsModal_array_like_to_array(o,minLen)}}function UploadTransactionsModal_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function UploadTransactionsModal(){var modal=(0,lib_esm.hS)(),ref=(0,react.useRef)(null),queryClient=(0,QueryClientProvider.jE)(),selectedBankAccountId=bankAccounts_useSelectedBankAccountId(),_useState=UploadTransactionsModal_sliced_to_array((0,react.useState)(1),2),stage=_useState[0],setStage=_useState[1],_useState1=UploadTransactionsModal_sliced_to_array((0,react.useState)(null),2),error=_useState1[0],setError=_useState1[1],_useState2=UploadTransactionsModal_sliced_to_array((0,react.useState)(null),2),monetrUpload=_useState2[0],setMonetrUpload=_useState2[1],onClose=(0,react.useCallback)(function(){return 4===stage&&(queryClient.invalidateQueries(["/bank_accounts/".concat(selectedBankAccountId,"/transactions")]),queryClient.invalidateQueries(["/bank_accounts/".concat(selectedBankAccountId,"/balances")])),modal.remove()},[stage,modal,queryClient,selectedBankAccountId]);function CurrentStage(){switch(stage){case 1:return /*#__PURE__*/react.createElement(UploadFileStage,{setResult:setMonetrUpload,setStage:setStage,setError:setError,close:modal.remove});case 4:return /*#__PURE__*/react.createElement(ProcessingFileStage,{upload:monetrUpload,setStage:setStage,close:onClose});case 5:default:return null;case 6:return /*#__PURE__*/react.createElement(ErrorFileStage,{error:error,close:onClose})}}return /*#__PURE__*/react.createElement(MModal,{open:modal.visible,ref:ref,className:"sm:max-w-xl"},/*#__PURE__*/react.createElement(CurrentStage,null))}function UploadFileStage(props){var selectedBankAccountId=bankAccounts_useSelectedBankAccountId(),_useState=UploadTransactionsModal_sliced_to_array((0,react.useState)(null),2),file=_useState[0],setFile=_useState[1],_useState1=UploadTransactionsModal_sliced_to_array((0,react.useState)(-1),2),uploadProgress=_useState1[0],setUploadProgress=_useState1[1],onDrop=(0,react.useCallback)(function(acceptedFiles){setFile(acceptedFiles[0])},[]),_useDropzone=(0,es.VB)({onDrop:onDrop}),getRootProps=_useDropzone.getRootProps,getInputProps=_useDropzone.getInputProps,isDragActive=_useDropzone.isDragActive;function handleSubmit(event){return _handleSubmit.apply(this,arguments)}function _handleSubmit(){return(_handleSubmit=UploadTransactionsModal_async_to_generator(function(event){var formData,config;return UploadTransactionsModal_ts_generator(this,function(_state){return event.preventDefault(),(formData=new FormData).append("data",file,file.name),config={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function onUploadProgress(progressEvent){setUploadProgress(Math.round(100*progressEvent.loaded/progressEvent.total))}},setUploadProgress(0),[2,axios.A.post("/api/bank_accounts/".concat(selectedBankAccountId,"/transactions/upload"),formData,config).then(function(result){props.setResult(new TransactionUpload(result.data)),props.setStage(4)}).catch(function(error){console.error("file upload failed",error);var message=error.response.data.error||"Unkown error";props.setError({message:message,filename:file.name}),props.setStage(6)})]})})).apply(this,arguments)}var uploadClassNames=mergeTailwind("border-dashed rounded-md w-full border p-8 flex justify-center flex-col items-center cursor-pointer",{"border-dark-monetr-border hover:border-dark-monetr-border-string":!isDragActive},{"border-dark-monetr-brand-subtle":isDragActive});return uploadProgress>=0?/*#__PURE__*/react.createElement("div",{className:"h-full flex flex-col gap-2 p-2 justify-between"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col gap-2 h-full"},/*#__PURE__*/react.createElement("div",{className:"flex justify-between"},/*#__PURE__*/react.createElement(MSpan,{weight:"bold",size:"xl"},"Upload Transactions"),/*#__PURE__*/react.createElement("div",null)),/*#__PURE__*/react.createElement("div",{className:"flex gap-2 items-center border rounded-md w-full p-2 border-dark-monetr-border"},/*#__PURE__*/react.createElement(FilePresentOutlined.A,{className:"text-6xl text-dark-monetr-content"}),/*#__PURE__*/react.createElement("div",{className:"flex flex-col py-1 w-full"},/*#__PURE__*/react.createElement(MSpan,{size:"lg"},file.name),/*#__PURE__*/react.createElement("div",{className:"w-full bg-gray-200 rounded-full h-1.5 my-2 dark:bg-gray-700 relative"},/*#__PURE__*/react.createElement("div",{className:"absolute top-0 bg-green-600 h-1.5 rounded-full dark:bg-green-600",style:{width:"".concat(uploadProgress,"%")}})))))):file?/*#__PURE__*/react.createElement("form",{onSubmit:handleSubmit,className:"h-full flex flex-col gap-2 p-2 justify-between"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col gap-2 h-full"},/*#__PURE__*/react.createElement("div",{className:"flex justify-between"},/*#__PURE__*/react.createElement(MSpan,{weight:"bold",size:"xl"},"Upload Transactions"),/*#__PURE__*/react.createElement("div",null)),/*#__PURE__*/react.createElement(MSpan,null,"Upload a QFX or OFX file to import transaction data manually into your account. Maximum of 5MB."),/*#__PURE__*/react.createElement("div",{className:"flex gap-2 items-center border rounded-md w-full p-2 border-dark-monetr-border"},/*#__PURE__*/react.createElement(FilePresentOutlined.A,{className:"text-6xl text-dark-monetr-content"}),/*#__PURE__*/react.createElement("div",{className:"flex flex-col py-1 w-full"},/*#__PURE__*/react.createElement(MSpan,{size:"lg"},file.name),/*#__PURE__*/react.createElement(MSpan,null,fileSize(file.size))),/*#__PURE__*/react.createElement(Close.A,{className:"mr-2 text-dark-monetr-content-subtle hover:text-dark-monetr-content cursor-pointer"}))),/*#__PURE__*/react.createElement("div",{className:"flex justify-end gap-2 mt-2"},/*#__PURE__*/react.createElement(MBaseButton,{color:"secondary",onClick:props.close},"Cancel"),/*#__PURE__*/react.createElement(MBaseButton,{color:"primary",type:"submit"},"Upload"))):/*#__PURE__*/react.createElement("form",{onSubmit:handleSubmit,className:"h-full flex flex-col gap-2 p-2 justify-between"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col gap-2 h-full"},/*#__PURE__*/react.createElement("div",{className:"flex justify-between"},/*#__PURE__*/react.createElement(MSpan,{weight:"bold",size:"xl"},"Upload Transactions"),/*#__PURE__*/react.createElement("div",null)),/*#__PURE__*/react.createElement(MSpan,null,"Upload a QFX or OFX file to import transaction data manually into your account. Maximum of 5MB."),/*#__PURE__*/react.createElement("div",UploadTransactionsModal_object_spread_props(UploadTransactionsModal_object_spread({},getRootProps()),{className:uploadClassNames}),/*#__PURE__*/react.createElement("input",getInputProps()),/*#__PURE__*/react.createElement(UploadFileOutlined.A,{className:"text-6xl text-dark-monetr-content"}),/*#__PURE__*/react.createElement(MSpan,{size:"lg",weight:"semibold"},"Drag QFX file here"),/*#__PURE__*/react.createElement(MSpan,null,"Or click to browse"))),/*#__PURE__*/react.createElement("div",{className:"flex justify-end gap-2 mt-2"},/*#__PURE__*/react.createElement(MBaseButton,{color:"secondary",onClick:props.close},"Cancel"),/*#__PURE__*/react.createElement(MBaseButton,{color:"primary",type:"submit"},"Upload")))}var uploadTransactionsModal=lib_esm.Ay.create(UploadTransactionsModal);function showUploadTransactionsModal(){return lib_esm.Ay.show(uploadTransactionsModal)}try{UploadTransactionsModal.displayName="UploadTransactionsModal",UploadTransactionsModal.__docgenInfo={description:"",displayName:"UploadTransactionsModal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/modals/UploadTransactions/UploadTransactionsModal.tsx#UploadTransactionsModal"]={docgenInfo:UploadTransactionsModal.__docgenInfo,name:"UploadTransactionsModal",path:"../interface/src/modals/UploadTransactions/UploadTransactionsModal.tsx#UploadTransactionsModal"})}catch(__react_docgen_typescript_loader_error){}function transactions_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function transactions_array_with_holes(arr){if(Array.isArray(arr))return arr}function transactions_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function transactions_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function transactions_sliced_to_array(arr,i){return transactions_array_with_holes(arr)||transactions_iterable_to_array_limit(arr,i)||transactions_unsupported_iterable_to_array(arr,i)||transactions_non_iterable_rest()}function transactions_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return transactions_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return transactions_array_like_to_array(o,minLen)}}var transactions_evilScrollPosition=0;function transactions_Transactions(){var config=useAppConfigurationSink().result,_useTransactions=useTransactions(),isLoading=_useTransactions.isLoading,isError=_useTransactions.isError,isFetching=_useTransactions.isFetching,fetchNextPage=_useTransactions.fetchNextPage,transactions=_useTransactions.result,hasNextPage=_useTransactions.hasNextPage,link=useCurrentLink().data,ref=(0,react.useRef)(null),navigationType=(0,react_router_dist.wQ)(),onScroll=(0,react.useCallback)(function(){transactions_evilScrollPosition=ref.current.scrollTop},[ref]);(0,react.useEffect)(function(){if(ref.current){"POP"===navigationType&&(ref.current.scrollTop=transactions_evilScrollPosition);var current=ref.current;return ref.current.addEventListener("scroll",onScroll),function(){current.removeEventListener("scroll",onScroll)}}},[ref.current,navigationType,onScroll]);var loading=isLoading||isFetching,sentryRef=transactions_sliced_to_array((0,react_infinite_scroll_hook_esm.A)({loading:loading,hasNextPage:hasNextPage,onLoadMore:fetchNextPage,disabled:isError,rootMargin:"0px 0px 0px 0px"}),1)[0];if(isLoading)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"One moment..."));if(isError)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(HeartBroken.A,{className:"dark:text-dark-monetr-content h-24 w-24"}),/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"Something isn't right..."),/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl"},"We weren't able to retrieve transactions at this time..."));function UploadButtonMaybe(){return(null==link?void 0:link.getIsManual())&&(null==config?void 0:config.manualEnabled)?/*#__PURE__*/react.createElement(MBaseButton,{color:"primary",className:"gap-1 py-1 px-2",onClick:showUploadTransactionsModal},/*#__PURE__*/react.createElement(UploadOutlined.A,null),"Upload"):null}function TransactionItems(){return pipe.A(groupBy.A(function(item){return(0,format.A)(item.date,"yyyy-MM-dd")}),mapObjIndexed.A(function(transactions,date){return{transactions:transactions,group:(0,parse.A)(date,"yyyy-MM-dd",new Date)}}),values.A,map.A(function(param){var transactions=param.transactions,group=param.group;return /*#__PURE__*/react.createElement("li",{key:(0,getUnixTime.A)(group)},/*#__PURE__*/react.createElement("ul",{className:"flex gap-2 flex-col"},/*#__PURE__*/react.createElement(TransactionDateItem,{date:group}),transactions.map(function(transaction){return /*#__PURE__*/react.createElement(TransactionItem,{key:transaction.transactionId,transaction:transaction})})))}))(transactions)}var message="No more transactions...";return(loading?message="Loading...":hasNextPage&&(message="Load more?"),isLoading||0!==transactions.length)?/*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement(MTopNavigation,{icon:ShoppingCartOutlined.A,title:"Transactions"},/*#__PURE__*/react.createElement(UploadButtonMaybe,null)),/*#__PURE__*/react.createElement("div",{className:"flex flex-grow min-w-0 min-h-0"},/*#__PURE__*/react.createElement("ul",{className:"w-full overflow-y-auto",ref:ref},/*#__PURE__*/react.createElement(TransactionItems,null),loading&&/*#__PURE__*/react.createElement("li",{ref:sentryRef},/*#__PURE__*/react.createElement("div",{className:"w-full flex justify-center p-5 opacity-70"},/*#__PURE__*/react.createElement("h1",null,message))),!loading&&hasNextPage&&/*#__PURE__*/react.createElement("li",{ref:sentryRef},/*#__PURE__*/react.createElement("div",{className:"w-full flex justify-center p-5 opacity-70"},/*#__PURE__*/react.createElement("h1",null,message))),!loading&&!hasNextPage&&/*#__PURE__*/react.createElement("li",null,/*#__PURE__*/react.createElement("div",{className:"w-full flex justify-center p-5 opacity-70"},/*#__PURE__*/react.createElement("h1",null,message)))))):/*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement(MTopNavigation,{icon:ShoppingCartOutlined.A,title:"Transactions"},/*#__PURE__*/react.createElement(UploadButtonMaybe,null)),/*#__PURE__*/react.createElement("div",{className:"w-full h-full flex justify-center items-center"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col gap-2 items-center max-w-md"},/*#__PURE__*/react.createElement("div",{className:"w-full flex justify-center space-x-4"},/*#__PURE__*/react.createElement(ShoppingCartOutlined.A,{className:"h-full text-5xl dark:text-dark-monetr-content-muted"})),/*#__PURE__*/react.createElement(MSpan,{size:"xl",color:"subtle",className:"text-center"},"You don't have any transactions yet..."),/*#__PURE__*/react.createElement(MSpan,{size:"lg",color:"subtle",className:"text-center"},"Transactions will show up here once we receive them from Plaid. Or the current account might not support transaction data from Plaid."))))}function MonetrWrapper(props){return /*#__PURE__*/react.createElement("div",{className:"w-full h-full bg-background flex"},/*#__PURE__*/react.createElement(BankSidebar,null),/*#__PURE__*/react.createElement("div",{className:"w-full h-full flex min-w-0"},props.children))}function BankView(props){return /*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(BudgetingSidebar,null),/*#__PURE__*/React.createElement("div",{className:"w-full h-full min-w-0 flex flex-col"},props.children))}try{app.displayName="app",app.__docgenInfo={description:"",displayName:"app",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/pages/app.tsx#app"]={docgenInfo:app.__docgenInfo,name:"app",path:"../interface/src/pages/app.tsx#app"})}catch(__react_docgen_typescript_loader_error){}try{BankView.displayName="BankView",BankView.__docgenInfo={description:"",displayName:"BankView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/pages/app.tsx#BankView"]={docgenInfo:BankView.__docgenInfo,name:"BankView",path:"../interface/src/pages/app.tsx#BankView"})}catch(__react_docgen_typescript_loader_error){}var api=__webpack_require__("../interface/src/api/api.ts");function MobileSidebar(){var _match_params,match=(0,react_router_dist.RQ)("/bank/:bankId/*"),isBankRoute=!!(null==match?void 0:null===(_match_params=match.params)||void 0===_match_params?void 0:_match_params.bankId),_useStore=useStore(),setMobileSidebarOpen=_useStore.setMobileSidebarOpen,mobileSidebarOpen=_useStore.mobileSidebarOpen,pathname=(0,react_router_dist.zy)().pathname;return((0,react.useEffect)(function(){setMobileSidebarOpen(!1)},[pathname,setMobileSidebarOpen]),mobileSidebarOpen)?/*#__PURE__*/react.createElement("div",{className:"fixed z-40 w-screen h-screen top-0 left-0 lg:hidden bg-background flex flex-row backdrop-blur-sm dark:bg-opacity-50 backdrop-brightness-50"},/*#__PURE__*/react.createElement(BankSidebar,null),isBankRoute&&/*#__PURE__*/react.createElement(BudgetingSidebar_BudgetingSidebar,{className:"w-auto flex-auto border-none overflow-y-auto"})):null}var SettingsOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/SettingsOutlined.js");function SettingsLayout(){var _config_data,config=useAppConfigurationSink();return /*#__PURE__*/react.createElement("div",{className:"w-full h-full min-w-0 flex flex-col"},/*#__PURE__*/react.createElement(MTopNavigation,{icon:SettingsOutlined.A,title:"Settings"}),/*#__PURE__*/react.createElement("div",{className:"w-full flex px-4 mt-4 gap-6"},/*#__PURE__*/react.createElement(SettingTab,{to:"/settings/overview"},"Overview"),/*#__PURE__*/react.createElement(SettingTab,{to:"/settings/security"},"Security"),(null==config?void 0:null===(_config_data=config.data)||void 0===_config_data?void 0:_config_data.billingEnabled)&&/*#__PURE__*/react.createElement(SettingTab,{to:"/settings/billing"},"Billing"),/*#__PURE__*/react.createElement(SettingTab,{to:"/settings/about"},"About")),/*#__PURE__*/react.createElement(MDivider,null),/*#__PURE__*/react.createElement(react_router_dist.sv,null))}function SettingTab(props){var className=MSpanDeriveClasses({className:"cursor-pointer pb-3",weight:(0,react_router_dist.zy)().pathname===props.to?"bold":"normal"});return /*#__PURE__*/react.createElement(dist.N_,{to:props.to,className:className},props.children)}function MLink_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function MLink_array_without_holes(arr){if(Array.isArray(arr))return MLink_array_like_to_array(arr)}function MLink_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function MLink_iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function MLink_non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function MLink_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){MLink_define_property(target,key,source[key])})}return target}function MLink_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function MLink_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):MLink_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function MLink_to_consumable_array(arr){return MLink_array_without_holes(arr)||MLink_iterable_to_array(arr)||MLink_unsupported_iterable_to_array(arr)||MLink_non_iterable_spread()}function MLink_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return MLink_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MLink_array_like_to_array(o,minLen)}}var MLinkPropsDefaults={size:"md",color:"primary"};function MLink(props){props=MLink_object_spread({},MLinkPropsDefaults,props);var classNames=mergeTailwind.apply(void 0,["font-semibold"].concat(MLink_to_consumable_array({primary:["dark:text-dark-monetr-brand-faint","dark:hover:text-dark-monetr-brand-bright","text-purple-500","hover:text-purple-600","rounded","focus:ring-1","focus:ring-purple-500"],secondary:["text-gray-400","hover:text-gray-500"]}[props.color]),["text-".concat(props.size),props.className]));return /*#__PURE__*/react.createElement(dist.N_,MLink_object_spread_props(MLink_object_spread({},props),{className:classNames}),props.children)}try{MLink.displayName="MLink",MLink.__docgenInfo={description:"",displayName:"MLink",props:{color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"secondary"'}]}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"2xl"'},{value:'"3xl"'},{value:'"4xl"'},{value:'"5xl"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MLink.tsx#MLink"]={docgenInfo:MLink.__docgenInfo,name:"MLink",path:"../interface/src/components/MLink.tsx#MLink"})}catch(__react_docgen_typescript_loader_error){}function MLogo_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function MLogo_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){MLogo_define_property(target,key,source[key])})}return target}function MLogo_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function MLogo_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):MLogo_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function MLogo(props){return /*#__PURE__*/react.createElement("img",MLogo_object_spread_props(MLogo_object_spread({},props),{src:logo_namespaceObject}))}try{MLogo.displayName="MLogo",MLogo.__docgenInfo={description:"",displayName:"MLogo",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MLogo.tsx#MLogo"]={docgenInfo:MLogo.__docgenInfo,name:"MLogo",path:"../interface/src/components/MLogo.tsx#MLogo"})}catch(__react_docgen_typescript_loader_error){}function MSpinner(props){var classNames=mergeTailwind("h-12","w-12",props.className,"animate-spin");return /*#__PURE__*/react.createElement("div",{"aria-label":"Loading...",role:"status"},/*#__PURE__*/react.createElement("svg",{className:classNames,viewBox:"3 3 18 18"},/*#__PURE__*/react.createElement("path",{className:"fill-dark-monetr-background-subtle",d:"M12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5ZM3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z"}),/*#__PURE__*/react.createElement("path",{className:"fill-dark-monetr-brand",d:"M16.9497 7.05015C14.2161 4.31648 9.78392 4.31648 7.05025 7.05015C6.65973 7.44067 6.02656 7.44067 5.63604 7.05015C5.24551 6.65962 5.24551 6.02646 5.63604 5.63593C9.15076 2.12121 14.8492 2.12121 18.364 5.63593C18.7545 6.02646 18.7545 6.65962 18.364 7.05015C17.9734 7.44067 17.3403 7.44067 16.9497 7.05015Z"})))}try{MSpinner.displayName="MSpinner",MSpinner.__docgenInfo={description:"",displayName:"MSpinner",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MSpinner.tsx#MSpinner"]={docgenInfo:MSpinner.__docgenInfo,name:"MSpinner",path:"../interface/src/components/MSpinner.tsx#MSpinner"})}catch(__react_docgen_typescript_loader_error){}function LogoutFooter(){return /*#__PURE__*/react.createElement("div",{className:"flex justify-center gap-1"},/*#__PURE__*/react.createElement(MSpan,{color:"subtle",className:"text-sm"},"Not ready to continue?"),/*#__PURE__*/react.createElement(MLink,{to:"/logout",size:"sm"},"Logout for now"))}function PlaidSetup_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function PlaidSetup_array_with_holes(arr){if(Array.isArray(arr))return arr}function PlaidSetup_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function PlaidSetup_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){PlaidSetup_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){PlaidSetup_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function PlaidSetup_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function PlaidSetup_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function PlaidSetup_sliced_to_array(arr,i){return PlaidSetup_array_with_holes(arr)||PlaidSetup_iterable_to_array_limit(arr,i)||PlaidSetup_unsupported_iterable_to_array(arr,i)||PlaidSetup_non_iterable_rest()}function PlaidSetup_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return PlaidSetup_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PlaidSetup_array_like_to_array(o,minLen)}}function PlaidSetup_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function PlaidSetup(props){var _useState=PlaidSetup_sliced_to_array((0,react.useState)({error:null,exited:!1,loading:!1,settingUp:!1,token:null}),2),_useState_=_useState[0],token=_useState_.token,loading=_useState_.loading,error=_useState_.error,exited=_useState_.exited,settingUp=_useState_.settingUp,setState=_useState[1],queryClient=(0,QueryClientProvider.jE)(),navigate=(0,react_router_dist.Zp)();function longPollSetup(recur,linkId){return _longPollSetup.apply(this,arguments)}function _longPollSetup(){return(_longPollSetup=PlaidSetup_async_to_generator(function(recur,linkId){return PlaidSetup_ts_generator(this,function(_state){return(setState({token:token,loading:loading,error:error,exited:exited,settingUp:!0}),recur>6)?[2,Promise.resolve()]:[2,void(0,util_request.A)().get("/plaid/link/setup/wait/".concat(linkId)).catch(function(error){if(408===error.response.status)return longPollSetup(recur+1,linkId);throw error})]})})).apply(this,arguments)}function onPlaidExit(error,metadata){error?(console.warn("Plaid link exited with error",{"plaid.request_id":metadata.request_id,"plaid.link_session_id":metadata.link_session_id,data:error}),esm_exports.r({message:"Plaid link exited with error",level:"error",tags:{"plaid.request_id":metadata.request_id,"plaid.link_session_id":metadata.link_session_id},breadcrumbs:[{type:"info",level:"info",message:"Error from Plaid link",data:error}]}),setState({token:token,loading:loading,exited:exited,error:"Plaid link exited with an error."})):setState({token:token,loading:loading,exited:!0})}function onPlaidSuccess(public_token,metadata){return _onPlaidSuccess.apply(this,arguments)}function _onPlaidSuccess(){return(_onPlaidSuccess=PlaidSetup_async_to_generator(function(public_token,metadata){return PlaidSetup_ts_generator(this,function(_state){var _ref;return[2,(0,util_request.A)().post("/plaid/link/token/callback",{publicToken:public_token,institutionId:metadata.institution.institution_id,institutionName:metadata.institution.name,accountIds:metadata.accounts.map(function(account){return account.id})}).then((_ref=PlaidSetup_async_to_generator(function(result){return PlaidSetup_ts_generator(this,function(_state){switch(_state.label){case 0:return[4,longPollSetup(0,result.data.linkId)];case 1:return _state.sent(),setTimeout(function(){queryClient.invalidateQueries(["/links"]),queryClient.invalidateQueries(["/bank_accounts"]),navigate("/")},8e3),[2]}})}),function(result){return _ref.apply(this,arguments)})).catch(function(error){setState({token:token,error:error,loading:!1,settingUp:!1})})]})})).apply(this,arguments)}var _usePlaidLink=(0,index_umd.usePlaidLink)({token:token,onSuccess:onPlaidSuccess,onExit:onPlaidExit,onLoad:null,onEvent:null}),plaidError=_usePlaidLink.error,plaidOpen=_usePlaidLink.open;(0,react.useEffect)(function(){(0,util_request.A)().get("/plaid/link/token/new?use_cache=true").then(function(result){return setTimeout(function(){setState({loading:!1,token:result.data.linkToken,error:null})},1e3)}).catch(function(error){return setTimeout(function(){var _error_response_data,_error_response;setState({loading:!1,token:null,error:(null==error?void 0:null===(_error_response=error.response)||void 0===_error_response?void 0:null===(_error_response_data=_error_response.data)||void 0===_error_response_data?void 0:_error_response_data.error)||"Could not connect to Plaid, an unknown error occurred."})},3e3)})},[]),(0,react.useEffect)(function(){token&&plaidOpen&&(plaidOpen(),setState({token:token,loading:!0}))},[token,plaidOpen]),(0,react.useEffect)(function(){plaidError&&esm_exports.Cp(plaidError)},[plaidError]);var inner=/*#__PURE__*/react.createElement("div",{className:"flex flex-col justify-center items-center"},/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl font-medium"},"Getting Plaid Ready!"),/*#__PURE__*/react.createElement(MSpan,{className:"text-lg",color:"subtle"},"One moment while we prepare your connection with Plaid."));if(settingUp&&(inner=/*#__PURE__*/react.createElement("div",{className:"flex flex-col justify-center items-center"},/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl font-medium"},"Successfully connected with Plaid!"),/*#__PURE__*/react.createElement(MSpan,{className:"text-lg",color:"subtle"},"Hold on a moment while we pull the initial data from Plaid into monetr."))),loading&&(inner=/*#__PURE__*/react.createElement("div",{className:"flex flex-col justify-center items-center"},/*#__PURE__*/react.createElement(MSpinner,null))),error&&(inner=/*#__PURE__*/react.createElement("div",{className:"flex flex-col justify-center items-center"},/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl font-medium"},"Something isn't quite right"),/*#__PURE__*/react.createElement(MSpan,{className:"text-lg",color:"subtle"},"We were not able to get Plaid ready for you at this time, please try again shortly."),/*#__PURE__*/react.createElement(MSpan,{className:"text-lg",color:"subtle"},"If the problem continues, please contact support@monetr.app"),/*#__PURE__*/react.createElement(MSpan,{className:"text-md",color:"muted"},"Error Message: ",error))),exited){var backUrl=props.alreadyOnboarded?"/link/create":"/setup";inner=/*#__PURE__*/react.createElement("div",{className:"flex flex-col justify-center items-center"},/*#__PURE__*/react.createElement(MSpan,{size:"2xl",weight:"medium"},"Something isn't quite right"),/*#__PURE__*/react.createElement(MSpan,{size:"lg",color:"subtle"},"Plaid exited, did you want to set it up later?"),/*#__PURE__*/react.createElement(MSpan,{size:"md",color:"subtle"},"Or ",/*#__PURE__*/react.createElement(MLink,{to:backUrl},"go back")," and pick another option?"))}function Footer(){return props.alreadyOnboarded?null:/*#__PURE__*/react.createElement(LogoutFooter,null)}return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex justify-center items-center gap-8 flex-col overflow-hidden text-center p-2"},/*#__PURE__*/react.createElement(MLogo,{className:"w-24 h-24"}),inner,/*#__PURE__*/react.createElement(Footer,null))}try{PlaidSetup.displayName="PlaidSetup",PlaidSetup.__docgenInfo={description:"",displayName:"PlaidSetup",props:{alreadyOnboarded:{defaultValue:null,description:"",name:"alreadyOnboarded",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/setup/PlaidSetup.tsx#PlaidSetup"]={docgenInfo:PlaidSetup.__docgenInfo,name:"PlaidSetup",path:"../interface/src/components/setup/PlaidSetup.tsx#PlaidSetup"})}catch(__react_docgen_typescript_loader_error){}var runtime_injectStylesIntoStyleTag=__webpack_require__("../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),runtime_injectStylesIntoStyleTag_default=/*#__PURE__*/__webpack_require__.n(runtime_injectStylesIntoStyleTag),runtime_styleDomAPI=__webpack_require__("../node_modules/style-loader/dist/runtime/styleDomAPI.js"),runtime_styleDomAPI_default=/*#__PURE__*/__webpack_require__.n(runtime_styleDomAPI),runtime_insertBySelector=__webpack_require__("../node_modules/style-loader/dist/runtime/insertBySelector.js"),runtime_insertBySelector_default=/*#__PURE__*/__webpack_require__.n(runtime_insertBySelector),runtime_setAttributesWithoutAttributes=__webpack_require__("../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),runtime_setAttributesWithoutAttributes_default=/*#__PURE__*/__webpack_require__.n(runtime_setAttributesWithoutAttributes),runtime_insertStyleElement=__webpack_require__("../node_modules/style-loader/dist/runtime/insertStyleElement.js"),runtime_insertStyleElement_default=/*#__PURE__*/__webpack_require__.n(runtime_insertStyleElement),runtime_styleTagTransform=__webpack_require__("../node_modules/style-loader/dist/runtime/styleTagTransform.js"),runtime_styleTagTransform_default=/*#__PURE__*/__webpack_require__.n(runtime_styleTagTransform),loading=__webpack_require__("../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[8].use[2]!../interface/src/loading.css"),loading_options={};function Loading(){return /*#__PURE__*/react.createElement("div",{className:"w-full h-full items-center justify-center flex flex-col gap-8"},/*#__PURE__*/react.createElement(MLogo,{className:"w-24 h-24"}),/*#__PURE__*/react.createElement("div",{className:"blobs flex items-center justify-center"},/*#__PURE__*/react.createElement("div",{className:"dot blob dark:bg-dark-monetr-brand"}),/*#__PURE__*/react.createElement("div",{className:"dots blob dark:bg-dark-monetr-brand"}),/*#__PURE__*/react.createElement("div",{className:"dots blob dark:bg-dark-monetr-brand"}),/*#__PURE__*/react.createElement("div",{className:"dots blob dark:bg-dark-monetr-brand"})),/*#__PURE__*/react.createElement(MSpan,{className:"text-3xl"},"Loading..."),/*#__PURE__*/react.createElement("svg",{className:"hidden",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},/*#__PURE__*/react.createElement("defs",null,/*#__PURE__*/react.createElement("filter",{id:"magic"},/*#__PURE__*/react.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur"}),/*#__PURE__*/react.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7",result:"goo"}),/*#__PURE__*/react.createElement("feBlend",{in:"SourceGraphic",in2:"goo"})))))}function subscribe_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function subscribe_array_with_holes(arr){if(Array.isArray(arr))return arr}function subscribe_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function subscribe_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function subscribe_sliced_to_array(arr,i){return subscribe_array_with_holes(arr)||subscribe_iterable_to_array_limit(arr,i)||subscribe_unsupported_iterable_to_array(arr,i)||subscribe_non_iterable_rest()}function subscribe_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return subscribe_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return subscribe_array_like_to_array(o,minLen)}}function SubscribePage(){var enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,initialPlan=useAppConfiguration().initialPlan,_useAuthenticationSink_result=useAuthenticationSink().result,hasSubscription=_useAuthenticationSink_result.hasSubscription,activeUntil=_useAuthenticationSink_result.activeUntil,_useState=subscribe_sliced_to_array((0,react.useState)(!1),2),loading=_useState[0],setLoading=_useState[1],handleContinue=(0,react.useCallback)(function(){var promise;setLoading(!0),initialPlan&&!hasSubscription?promise=(0,util_request.A)().post("/billing/create_checkout",{cancelPath:"/logout"}):hasSubscription&&(promise=(0,util_request.A)().get("/billing/portal")),promise.then(function(result){return window.location.assign(result.data.url)}).catch(function(error){var _error_response_data,_error_response;setLoading(!1),enqueueSnackbar((null==error?void 0:null===(_error_response=error.response)||void 0===_error_response?void 0:null===(_error_response_data=_error_response.data)||void 0===_error_response_data?void 0:_error_response_data.error)||"Failed to prepare Stripe billing session.",{variant:"error",disableWindowBlurListener:!0})})},[enqueueSnackbar,hasSubscription,initialPlan]);return activeUntil?/*#__PURE__*/react.createElement("div",{className:"flex items-center justify-center w-full h-full max-h-full p-4"},/*#__PURE__*/react.createElement("div",{className:"h-full flex flex-col max-w-md gap-4 items-center justify-between"},/*#__PURE__*/react.createElement("div",{className:"h-full flex flex-col justify-center items-center gap-4"},/*#__PURE__*/react.createElement(MLogo,{className:"max-h-24"}),/*#__PURE__*/react.createElement(MSpan,{size:"2xl",weight:"semibold",className:"text-center"},"Your subscription is no longer active"),/*#__PURE__*/react.createElement(MSpan,{size:"lg",className:"text-center"},"Thank you for having subscribed to monetr before! If you'd like to continue using monetr you will have to resubscribe below. Click continue to proceed to our billing portal."),/*#__PURE__*/react.createElement(MBaseButton,{color:"primary",disabled:loading,onClick:handleContinue},"Continue")),!loading&&/*#__PURE__*/react.createElement("div",{className:"flex justify-center gap-1"},/*#__PURE__*/react.createElement(MSpan,{color:"subtle",className:"text-sm"},"Not ready to continue?"),/*#__PURE__*/react.createElement(MLink,{to:"/logout",size:"sm"},"Logout for now")))):/*#__PURE__*/react.createElement("div",{className:"flex items-center justify-center w-full h-full max-h-full p-4"},/*#__PURE__*/react.createElement("div",{className:"h-full flex flex-col max-w-md gap-4 items-center justify-between"},/*#__PURE__*/react.createElement("div",{className:"h-full flex flex-col justify-center items-center gap-4"},/*#__PURE__*/react.createElement(MLogo,{className:"max-h-24"}),/*#__PURE__*/react.createElement(MSpan,{size:"2xl",weight:"semibold",className:"text-center"},"Your free trial has ended"),/*#__PURE__*/react.createElement(MSpan,{size:"lg",className:"text-center"},"Thank you for trying out monetr! We hope that you found our budgeting tools useful during your trial. If you'd like to continue using monetr you can easily subscribe below."),/*#__PURE__*/react.createElement(MBaseButton,{color:"primary",disabled:loading,onClick:handleContinue},"Continue")),!loading&&/*#__PURE__*/react.createElement("div",{className:"flex justify-center gap-1"},/*#__PURE__*/react.createElement(MSpan,{color:"subtle",className:"text-sm"},"Not ready to continue?"),/*#__PURE__*/react.createElement(MLink,{to:"/logout",size:"sm"},"Logout for now"))))}loading_options.styleTagTransform=runtime_styleTagTransform_default(),loading_options.setAttributes=runtime_setAttributesWithoutAttributes_default(),loading_options.insert=runtime_insertBySelector_default().bind(null,"head"),loading_options.domAPI=runtime_styleDomAPI_default(),loading_options.insertStyleElement=runtime_insertStyleElement_default(),runtime_injectStylesIntoStyleTag_default()(loading.A,loading_options),loading.A&&loading.A.locals&&loading.A.locals;var Typography=__webpack_require__("../node_modules/@mui/material/Typography/Typography.js"),CircularProgress=__webpack_require__("../node_modules/@mui/material/CircularProgress/CircularProgress.js");function AfterCheckoutPage(){var search=(0,react_router_dist.zy)().search,navigate=(0,react_router_dist.Zp)(),afterCheckout=useAfterCheckout();return(0,react.useEffect)(function(){afterCheckout(new URLSearchParams(search).get("session")).then(function(result){if(result.isActive)return navigate("/");alert((null==result?void 0:result.message)||"Subscription is not active")}).catch(function(){return alert("Unable to determine your subscription state, please contact support@monetr.app")})},[search,afterCheckout,navigate]),/*#__PURE__*/react.createElement("div",{className:"flex items-center justify-center w-full h-full max-h-full"},/*#__PURE__*/react.createElement("div",{className:"w-full p-10 xl:w-3/12 lg:w-5/12 md:w-2/3 sm:w-10/12 max-w-screen-sm sm:p-0"},/*#__PURE__*/react.createElement("div",{className:"flex justify-center w-full mb-5"},/*#__PURE__*/react.createElement("img",{src:logo_namespaceObject,className:"w-1/3"})),/*#__PURE__*/react.createElement("div",{className:"w-full pt-2.5 pb-2.5"},/*#__PURE__*/react.createElement(Typography.A,{variant:"h5",className:"w-full text-center"},"Getting your account setup...")),/*#__PURE__*/react.createElement("div",{className:"w-full pt-2.5 pb-2.5 flex justify-center"},/*#__PURE__*/react.createElement(CircularProgress.A,null))))}var HeartBrokenOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/HeartBrokenOutlined.js");function ConfigError(){return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col p-4"},/*#__PURE__*/react.createElement(MSpan,{className:"w-full h-full justify-center flex-col text-center gap-4"},/*#__PURE__*/react.createElement(HeartBrokenOutlined.A,{className:"text-9xl"}),/*#__PURE__*/react.createElement(MSpan,{size:"xl",weight:"medium"},"There was a problem loading the monetr application config, the API may be unavailable at this time."),/*#__PURE__*/react.createElement(MSpan,{size:"lg",className:"gap-1"},"You can try reloading this page, but if the problem persists please contact",/*#__PURE__*/react.createElement("a",{target:"_blank",className:"text-dark-monetr-blue hover:underline focus:ring-2 focus:ring-dark-monetr-blue focus:underline",href:"mailto:support@monetr.app"},"support@monetr.app"))))}var SwapVertOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/SwapVertOutlined.js"),SaveOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/SaveOutlined.js"),AirlineStopsOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/AirlineStopsOutlined.js"),SouthEast=__webpack_require__("../node_modules/@mui/icons-material/esm/SouthEast.js"),NorthEast=__webpack_require__("../node_modules/@mui/icons-material/esm/NorthEast.js");function forecast_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function forecast_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function forecast_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){forecast_define_property(target,key,source[key])})}return target}function forecast_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function forecast_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):forecast_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function useNextFundingForecast(fundingScheduleId){var selectedBankAccountId=bankAccounts_useSelectedBankAccountId();return(0,lib_useQuery.I)(["/bank_accounts/".concat(selectedBankAccountId,"/forecast/next_funding"),{fundingScheduleId:fundingScheduleId}],{enabled:!!selectedBankAccountId,select:function(data){return data.nextContribution}})}var Forecast=function Forecast(data){forecast_class_call_check(this,Forecast),forecast_define_property(this,"startingTime",void 0),forecast_define_property(this,"endingTime",void 0),forecast_define_property(this,"startingBalance",void 0),forecast_define_property(this,"endingBalance",void 0),forecast_define_property(this,"events",void 0),data&&Object.assign(this,forecast_object_spread_props(forecast_object_spread({},data),{startingTime:(0,parseJSON.A)(data.startingTime),endingTime:(0,parseJSON.A)(data.endingTime),events:((null==data?void 0:data.events)||[]).map(function(item){return new Event(item)})}))},Event=function Event(data){forecast_class_call_check(this,Event),forecast_define_property(this,"balance",void 0),forecast_define_property(this,"contribution",void 0),forecast_define_property(this,"date",void 0),forecast_define_property(this,"delta",void 0),forecast_define_property(this,"funding",void 0),forecast_define_property(this,"spending",void 0),forecast_define_property(this,"transaction",void 0),data&&Object.assign(this,forecast_object_spread_props(forecast_object_spread({},data),{date:(0,parseJSON.A)(data.date),funding:((null==data?void 0:data.funding)||[]).map(function(item){return new FundingEvent(item)}),spending:((null==data?void 0:data.spending)||[]).map(function(item){return new SpendingEvent(item)})}))},SpendingEvent=function SpendingEvent(data){forecast_class_call_check(this,SpendingEvent),forecast_define_property(this,"contributionAmount",void 0),forecast_define_property(this,"date",void 0),forecast_define_property(this,"funding",void 0),forecast_define_property(this,"rollingAllocation",void 0),forecast_define_property(this,"spendingId",void 0),forecast_define_property(this,"transactionAmount",void 0),data&&Object.assign(this,forecast_object_spread_props(forecast_object_spread({},data),{date:(0,parseJSON.A)(data.date),funding:((null==data?void 0:data.funding)||[]).map(function(item){return new FundingEvent(item)})}))},FundingEvent=function FundingEvent(data){forecast_class_call_check(this,FundingEvent),forecast_define_property(this,"date",void 0),forecast_define_property(this,"fundingScheduleId",void 0),forecast_define_property(this,"originalDate",void 0),forecast_define_property(this,"weekendAvoided",void 0),data&&Object.assign(this,forecast_object_spread_props(forecast_object_spread({},data),{date:(0,parseJSON.A)(data.date),originalDate:(0,parseJSON.A)(data.originalDate)}))};function useForecast(){var selectedBankAccountId=bankAccounts_useSelectedBankAccountId(),result=(0,lib_useQuery.I)(["/bank_accounts/".concat(selectedBankAccountId,"/forecast")],{enabled:!!selectedBankAccountId});return forecast_object_spread_props(forecast_object_spread({},result),{result:(null==result?void 0:result.data)?new Forecast(result.data):null})}function ExpenseTimeline_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ExpenseTimeline_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){ExpenseTimeline_define_property(target,key,source[key])})}return target}function ExpenseTimeline_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function ExpenseTimeline_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ExpenseTimeline_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function ExpenseTimeline(props){var spending=useSpending(props.spendingId).data,fundingSchedule=useFundingSchedule(null==spending?void 0:spending.fundingScheduleId).data,_useForecast=useForecast(),forecast=_useForecast.result,isLoading=_useForecast.isLoading,isError=_useForecast.isError;if(isLoading)return /*#__PURE__*/react.createElement(MSpan,null,"Loading...");if(isError||!spending)return /*#__PURE__*/react.createElement(MSpan,null,"Failed to load expense forecast!");var timelineItems=forecast.events.filter(function(event){return event.spending.some(function(spending){return spending.spendingId===props.spendingId})}).map(function(event){return ExpenseTimeline_object_spread_props(ExpenseTimeline_object_spread({},event),{spending:event.spending.filter(function(spending){return spending.spendingId===props.spendingId})})}).map(function(event){var item={date:event.date,totalContributedAmount:event.contribution,totalSpentAmount:event.transaction,spentAmount:0,contributedAmount:0,endingAllocation:0};return event.spending.forEach(function(spending){spending.spendingId===props.spendingId&&(item.spentAmount+=spending.transactionAmount,item.contributedAmount+=spending.contributionAmount,item.endingAllocation+=spending.rollingAllocation)}),item});function TimelineItem(props){var header="",body="",secondaryBody=null,icon=null;if(props.contributedAmount>0&&props.spentAmount>0)header="Contribution & Spending",icon=/*#__PURE__*/react.createElement(AirlineStopsOutlined.A,null),body=props.endingAllocation>0?"An estimated ".concat(formatAmount(props.spentAmount)," will be spent or be ready to spend, ").concat(formatAmount(props.contributedAmount)," was contributed to this budget at the same time. ").concat(formatAmount(props.endingAllocation)," is left over to use from this budget until the next contribution."):"An estimated ".concat(formatAmount(props.spentAmount)," will be spent or be ready to spend, included the ").concat(formatAmount(props.contributedAmount)," that was contributed to this budget at the same time to account for the spending.");else if(0===props.contributedAmount&&props.spentAmount>0)header="Spending",icon=/*#__PURE__*/react.createElement(SouthEast.A,null),body="An estimated ".concat(formatAmount(props.spentAmount)," will be spent or will be ready to spend, from your ").concat(spending.name," budget.");else{if(!(props.contributedAmount>0)||0!==props.spentAmount)return null;header="Contribution",icon=/*#__PURE__*/react.createElement(NorthEast.A,null),body="".concat(formatAmount(props.contributedAmount)," will be allocated towards ").concat(spending.name," from ").concat(fundingSchedule.name,", resulting in a total allocation of ").concat(formatAmount(props.endingAllocation),"."),props.totalContributedAmount>props.contributedAmount&&(secondaryBody="A total of ".concat(formatAmount(props.totalContributedAmount)," will be contributed to all budgets on this day."))}var rowClassNames=mergeTailwind({"mb-5":!props.last},"ml-4");return /*#__PURE__*/react.createElement("li",{className:rowClassNames},/*#__PURE__*/react.createElement("div",{className:"absolute w-3 h-3 bg-zinc-200 rounded-full mt-1.5 -left-1.5 border border-white dark:border-zinc-900 dark:bg-zinc-700"}),/*#__PURE__*/react.createElement("time",{className:"mb-1 text-sm font-normal leading-none text-zinc-400 dark:text-zinc-500"},(0,format.A)(props.date,"MMMM do")),/*#__PURE__*/react.createElement("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-white"},header," ",icon),/*#__PURE__*/react.createElement("p",{className:"text-base font-normal text-zinc-500 dark:text-zinc-400"},body),secondaryBody&&/*#__PURE__*/react.createElement("p",{className:"text-base font-normal text-zinc-500 dark:text-zinc-400"},secondaryBody))}return /*#__PURE__*/react.createElement("ol",{className:"relative border-l border-zinc-200 dark:border-zinc-700"},/*#__PURE__*/react.createElement("li",{className:"mb-5 ml-4"},/*#__PURE__*/react.createElement("div",{className:"absolute w-3 h-3 bg-zinc-200 rounded-full mt-1.5 -left-1.5 border border-white dark:border-zinc-900 dark:bg-zinc-700"}),/*#__PURE__*/react.createElement("time",{className:"mb-1 text-sm font-normal leading-none text-zinc-400 dark:text-zinc-500"},(0,format.A)(forecast.startingTime,"MMMM do")),/*#__PURE__*/react.createElement("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-white"},spending.name,/*#__PURE__*/react.createElement("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300 ml-3"},"Today")),/*#__PURE__*/react.createElement("p",{className:"text-base font-normal text-zinc-500 dark:text-zinc-400"},spending.name," currently has ",spending.getCurrentAmountString()," allocated towards it."),/*#__PURE__*/react.createElement("p",{className:"mb-4 text-base font-normal text-zinc-500 dark:text-zinc-400"},"Below is the timeline for this expense over the next month.")),timelineItems.map(function(item,index){return /*#__PURE__*/react.createElement(TimelineItem,ExpenseTimeline_object_spread_props(ExpenseTimeline_object_spread({key:(0,getUnixTime.A)(item.date)},item),{last:timelineItems.length-1===index}))}))}try{ExpenseTimeline.displayName="ExpenseTimeline",ExpenseTimeline.__docgenInfo={description:"",displayName:"ExpenseTimeline",props:{spendingId:{defaultValue:null,description:"",name:"spendingId",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/pages/expense/ExpenseTimeline.tsx#ExpenseTimeline"]={docgenInfo:ExpenseTimeline.__docgenInfo,name:"ExpenseTimeline",path:"../interface/src/pages/expense/ExpenseTimeline.tsx#ExpenseTimeline"})}catch(__react_docgen_typescript_loader_error){}function MSelectSpending_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function MSelectSpending_array_without_holes(arr){if(Array.isArray(arr))return MSelectSpending_array_like_to_array(arr)}function MSelectSpending_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function MSelectSpending_iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function MSelectSpending_non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function MSelectSpending_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){MSelectSpending_define_property(target,key,source[key])})}return target}function MSelectSpending_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function MSelectSpending_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):MSelectSpending_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function MSelectSpending_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=MSelectSpending_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function MSelectSpending_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function MSelectSpending_to_consumable_array(arr){return MSelectSpending_array_without_holes(arr)||MSelectSpending_iterable_to_array(arr)||MSelectSpending_unsupported_iterable_to_array(arr)||MSelectSpending_non_iterable_spread()}function MSelectSpending_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return MSelectSpending_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MSelectSpending_array_like_to_array(o,minLen)}}var FREE_TO_USE="spnd_freeToUse";function MSelectSpending(props){var formikContext=(0,formik_esm.j7)(),_useSpendingSink=useSpendingSink(),spending=_useSpendingSink.result,isLoading=_useSpendingSink.isLoading,isError=_useSpendingSink.isError,balances=useCurrentBalance();if(props=MSelectSpending_object_spread({label:"Spent From",placeholder:"Select a spending item...",disabled:null==formikContext?void 0:formikContext.isSubmitting},props),isLoading)return /*#__PURE__*/react.createElement(MSelect,MSelectSpending_object_spread_props(MSelectSpending_object_spread({},props),{isLoading:!0,disabled:!0,placeholder:"Loading..."}));if(isError)return /*#__PURE__*/react.createElement(MSelect,MSelectSpending_object_spread_props(MSelectSpending_object_spread({},props),{isLoading:!0,disabled:!0,placeholder:"Failed to load spending..."}));var freeToUse={label:"Free-To-Use",value:FREE_TO_USE,spending:new Spending({spendingId:FREE_TO_USE,currentAmount:null==balances?void 0:balances.free})},items=spending.map(function(item){return{label:item.name,value:item.spendingId,spending:item}}),excludedFrom=formikContext.values[props.excludeFrom],options=[freeToUse].concat(MSelectSpending_to_consumable_array(items.sort(function(a,b){return a.label.toLowerCase()>b.label.toLowerCase()?1:-1}))).filter(function(item){return props.excludeFrom&&excludedFrom?item.value!==excludedFrom:!props.excludeFrom||!!excludedFrom||item.value!==FREE_TO_USE}),value=formikContext.values[props.name],current=options.find(function(item){return item.value===(null!=value?value:FREE_TO_USE)});function onSelect(newValue){return newValue.value===FREE_TO_USE?formikContext.setFieldValue(props.name,null):formikContext.setFieldValue(props.name,newValue.value)}return /*#__PURE__*/react.createElement(MSelect,MSelectSpending_object_spread_props(MSelectSpending_object_spread({},props),{options:options,value:current,onChange:onSelect,components:{Option:MSelectSpendingOption},isClearable:!1}))}function MSelectSpendingOption(_param){_param.children;var _props_data_spending,_props_data_spending1,_props_data_spending2,props=MSelectSpending_object_without_properties(_param,["children"]),amount=(null===(_props_data_spending=props.data.spending)||void 0===_props_data_spending?void 0:_props_data_spending.currentAmount)===void 0?"N/A":formatAmount(props.data.spending.currentAmount);return /*#__PURE__*/react.createElement(index_a301f526_esm.c.Option,props,/*#__PURE__*/react.createElement("div",{className:"flex justify-between"},/*#__PURE__*/react.createElement(MSpan,{size:"md",color:"emphasis"},props.label),/*#__PURE__*/react.createElement("div",{className:"flex gap-2"},(null===(_props_data_spending1=props.data.spending)||void 0===_props_data_spending1?void 0:_props_data_spending1.spendingType)===SpendingType.Goal&&/*#__PURE__*/react.createElement(MBadge,{size:"sm",className:"dark:bg-dark-monetr-blue  max-h-[24px]"},/*#__PURE__*/react.createElement(SavingsOutlined.A,null)),(null===(_props_data_spending2=props.data.spending)||void 0===_props_data_spending2?void 0:_props_data_spending2.spendingType)===SpendingType.Expense&&/*#__PURE__*/react.createElement(MBadge,{size:"sm",className:"dark:bg-dark-monetr-green max-h-[24px]"},/*#__PURE__*/react.createElement(PriceCheckOutlined.A,null)),/*#__PURE__*/react.createElement(MBadge,{size:"sm"},amount))))}try{MSelectSpending.displayName="MSelectSpending",MSelectSpending.__docgenInfo={description:"",displayName:"MSelectSpending",props:{excludeFrom:{defaultValue:null,description:"",name:"excludeFrom",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"Marks the value-holding input as required for form validation",name:"required",required:!1,type:{name:"boolean"}},labelDecorator:{defaultValue:null,description:"",name:"labelDecorator",required:!1,type:{name:"MLabelDecorator"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MSelectSpending.tsx#MSelectSpending"]={docgenInfo:MSelectSpending.__docgenInfo,name:"MSelectSpending",path:"../interface/src/components/MSelectSpending.tsx#MSelectSpending"})}catch(__react_docgen_typescript_loader_error){}function TransferModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function TransferModal_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){TransferModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){TransferModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function TransferModal_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function TransferModal(props){var modal=(0,lib_esm.hS)(),ref=(0,react.useRef)(null),transfer=useTransfer(),enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,balance=useCurrentBalance(),spending=useSpendingSink().result,initialValues={fromSpendingId:props.initialFromSpendingId,toSpendingId:props.initialToSpendingId,amount:0};function validate(values){var errors={},amount=friendlyToAmount(values.amount);if(amount<=0&&(errors.amount="Amount must be greater than zero"),null===values.fromSpendingId)amount>(null==balance?void 0:balance.free)&&(errors.amount="Cannot move more than is available from Free-To-Use");else{var from=null==spending?void 0:spending.find(function(item){return item.spendingId===values.fromSpendingId});amount>(null==from?void 0:from.currentAmount)&&(errors.amount="Cannot move more than is available from ".concat(null==from?void 0:from.name))}return errors}function submit(values,helper){return _submit.apply(this,arguments)}function _submit(){return(_submit=TransferModal_async_to_generator(function(values,helper){var check;return TransferModal_ts_generator(this,function(_state){return null===values.toSpendingId&&null===values.fromSpendingId?(helper.setFieldError("toSpendingId","Must select a destination and a source"),[2,Promise.resolve()]):Object.keys(check=validate(values)).length>0?(helper.setErrors(check),[2,Promise.resolve()]):(helper.setSubmitting(!0),[2,transfer({fromSpendingId:values.fromSpendingId,toSpendingId:values.toSpendingId,amount:friendlyToAmount(values.amount)}).then(function(){return modal.remove()}).catch(function(error){enqueueSnackbar(error.response.data.error,{variant:"error",disableWindowBlurListener:!0})}).finally(function(){return helper.setSubmitting(!1)})])})})).apply(this,arguments)}return /*#__PURE__*/react.createElement(MModal,{open:modal.visible,ref:ref,className:"md:max-w-sm"},/*#__PURE__*/react.createElement(components_MForm,{onSubmit:submit,initialValues:initialValues,validate:validate,className:"h-full flex flex-col gap-2 p-2 justify-between","data-testid":"transfer-modal"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col gap-2"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col items-center"},/*#__PURE__*/react.createElement(MSpan,{size:"2xl",weight:"semibold"},"Transfer"),/*#__PURE__*/react.createElement(MSpan,{size:"lg",weight:"medium",color:"subtle"},"Move funds between your budgets")),/*#__PURE__*/react.createElement(MSelectSpending,{excludeFrom:"toSpendingId",label:"From",labelDecorator:TransferSelectDecorator,menuPortalTarget:document.body,name:"fromSpendingId"}),/*#__PURE__*/react.createElement(ReverseTargetsButton,null),/*#__PURE__*/react.createElement(MSelectSpending,{excludeFrom:"fromSpendingId",label:"To",labelDecorator:TransferSelectDecorator,menuPortalTarget:document.body,name:"toSpendingId"}),/*#__PURE__*/react.createElement(MAmountField,{name:"amount",label:"Amount",placeholder:"Amount to move...",step:"0.01",allowNegative:!1})),/*#__PURE__*/react.createElement("div",{className:"flex justify-end gap-2"},/*#__PURE__*/react.createElement(MFormButton,{color:"secondary",onClick:modal.remove,"data-testid":"close-new-expense-modal"},"Cancel"),/*#__PURE__*/react.createElement(MFormButton,{color:"primary",type:"submit"},"Transfer"))))}var transferModal=lib_esm.Ay.create(TransferModal);function showTransferModal(props){return lib_esm.Ay.show(transferModal,props)}function ReverseTargetsButton(){var formik=(0,formik_esm.j7)();function onClick(){if(!formik.isSubmitting){var _formik_values=formik.values,fromSpendingId=_formik_values.fromSpendingId,toSpendingId=_formik_values.toSpendingId,amount=_formik_values.amount;formik.setValues({fromSpendingId:toSpendingId,toSpendingId:fromSpendingId,amount:amount})}}return /*#__PURE__*/react.createElement("a",{className:"w-full flex justify-center mb-1"},/*#__PURE__*/react.createElement(SwapVertOutlined.A,{onClick:onClick,className:"cursor-pointer text-4xl dark:text-dark-monetr-content-subtle hover:dark:text-dark-monetr-content"}))}function TransferSelectDecorator(props){var value=(0,formik_esm.j7)().values[props.name],spending=useSpendingSink().result,balances=useCurrentBalance();if(!value||-1===value){var amount=null==balances?void 0:balances.free;return /*#__PURE__*/react.createElement(AmountButton,{amount:amount})}var spendingSubject=null==spending?void 0:spending.find(function(item){return item.spendingId===value});if(!spendingSubject)return null;var current=spendingSubject.currentAmount,target=spendingSubject.targetAmount,remaining=Math.max(spendingSubject.targetAmount-spendingSubject.currentAmount,0);return remaining>0&&remaining!=target?/*#__PURE__*/react.createElement(MSpan,{className:"gap-1"},/*#__PURE__*/react.createElement(AmountButton,{amount:current}),"of",/*#__PURE__*/react.createElement(AmountButton,{amount:target})," (",/*#__PURE__*/react.createElement(AmountButton,{amount:remaining}),")"):/*#__PURE__*/react.createElement(MSpan,{className:"gap-1",color:"subtle"},/*#__PURE__*/react.createElement(AmountButton,{amount:current}),"of",/*#__PURE__*/react.createElement(AmountButton,{amount:target}))}function AmountButton(param){var amount=param.amount,formik=(0,formik_esm.j7)(),onClick=(0,react.useCallback)(function(){"number"==typeof amount&&(null==formik||formik.setFieldValue("amount",amountToFriendly(amount)))},[formik,amount]);return /*#__PURE__*/react.createElement(MSpan,{size:"sm",weight:"medium",className:"cursor-pointer hover:dark:text-dark-monetr-content-emphasis",onClick:onClick},"number"==typeof amount&&formatAmount(amount))}try{showTransferModal.displayName="showTransferModal",showTransferModal.__docgenInfo={description:"",displayName:"showTransferModal",props:{initialFromSpendingId:{defaultValue:null,description:"",name:"initialFromSpendingId",required:!1,type:{name:"string"}},initialToSpendingId:{defaultValue:null,description:"",name:"initialToSpendingId",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/modals/TransferModal.tsx#showTransferModal"]={docgenInfo:showTransferModal.__docgenInfo,name:"showTransferModal",path:"../interface/src/modals/TransferModal.tsx#showTransferModal"})}catch(__react_docgen_typescript_loader_error){}try{TransferModal.displayName="TransferModal",TransferModal.__docgenInfo={description:"",displayName:"TransferModal",props:{initialFromSpendingId:{defaultValue:null,description:"",name:"initialFromSpendingId",required:!1,type:{name:"string"}},initialToSpendingId:{defaultValue:null,description:"",name:"initialToSpendingId",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/modals/TransferModal.tsx#TransferModal"]={docgenInfo:TransferModal.__docgenInfo,name:"TransferModal",path:"../interface/src/modals/TransferModal.tsx#TransferModal"})}catch(__react_docgen_typescript_loader_error){}function details_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function details_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){details_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){details_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function details_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function details_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){details_define_property(target,key,source[key])})}return target}function details_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function details_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):details_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function details_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function ExpenseDetails(){var removeSpending=useRemoveSpending(),updateSpending=useUpdateSpending(),navigate=(0,react_router_dist.Zp)(),spendingId=(0,react_router_dist.g)().spendingId,enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,_useSpending=useSpending(spendingId),spending=_useSpending.data,isLoading=_useSpending.isLoading,isError=_useSpending.isError;if(!spendingId)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(HeartBroken.A,{className:"dark:text-dark-monetr-content h-24 w-24"}),/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"Something isn't right..."),/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl"},"There wasn't an expense specified..."));if(isLoading)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"One moment..."));if(isError)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(HeartBroken.A,{className:"dark:text-dark-monetr-content h-24 w-24"}),/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"Something isn't right..."),/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl"},"Couldn't find the expense you specified..."));if(!spending)return null;if(spending.spendingType!==SpendingType.Expense)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(HeartBroken.A,{className:"dark:text-dark-monetr-content h-24 w-24"}),/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"Something isn't right..."),/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl"},"This spending object is not an expense..."));function backToExpenses(){navigate("/bank/".concat(spending.bankAccountId,"/expenses"))}function deleteExpense(){return _deleteExpense.apply(this,arguments)}function _deleteExpense(){return(_deleteExpense=details_async_to_generator(function(){return details_ts_generator(this,function(_state){return spending&&window.confirm("Are you sure you want to delete expense: ".concat(spending.name))?[2,removeSpending(spending.spendingId).then(function(){return backToExpenses()})]:[2,Promise.resolve()]})})).apply(this,arguments)}function submit(values,helpers){return _submit.apply(this,arguments)}function _submit(){return(_submit=details_async_to_generator(function(values,helpers){return details_ts_generator(this,function(_state){return helpers.setSubmitting(!0),[2,updateSpending(new Spending(details_object_spread_props(details_object_spread({},spending),{name:values.name,description:null,nextRecurrence:(0,startOfDay.A)(values.nextRecurrence),fundingScheduleId:values.fundingScheduleId,ruleset:values.recurrenceRule,targetAmount:friendlyToAmount(values.amount)}))).catch(function(error){enqueueSnackbar(error.response.data.error||"Failed to update expense.",{variant:"error",disableWindowBlurListener:!0})}).finally(function(){return helpers.setSubmitting(!1)})]})})).apply(this,arguments)}var initialValues={name:spending.name,amount:amountToFriendly(spending.targetAmount),nextRecurrence:spending.nextRecurrence,fundingScheduleId:spending.fundingScheduleId,recurrenceRule:spending.ruleset};return /*#__PURE__*/react.createElement(components_MForm,{initialValues:initialValues,onSubmit:submit,className:"flex w-full h-full flex-col"},/*#__PURE__*/react.createElement(MTopNavigation,{icon:PriceCheckOutlined.A,title:"Expenses",base:"/bank/".concat(spending.bankAccountId,"/expenses"),breadcrumb:null==spending?void 0:spending.name},/*#__PURE__*/react.createElement(MBaseButton,{color:"secondary",className:"gap-1 py-1 px-2",onClick:function(){return showTransferModal({initialToSpendingId:null==spending?void 0:spending.spendingId})}},/*#__PURE__*/react.createElement(SwapVertOutlined.A,null),"Transfer"),/*#__PURE__*/react.createElement(MBaseButton,{color:"cancel",className:"gap-1 py-1 px-2",onClick:deleteExpense},/*#__PURE__*/react.createElement(DeleteOutlined.A,null),"Remove"),/*#__PURE__*/react.createElement(MFormButton,{color:"primary",className:"gap-1 py-1 px-2",type:"submit",role:"form"},/*#__PURE__*/react.createElement(SaveOutlined.A,null),"Save")),/*#__PURE__*/react.createElement("div",{className:"w-full h-full overflow-y-auto min-w-0 p-4"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col md:flex-row w-full gap-8 items-center md:items-stretch"},/*#__PURE__*/react.createElement("div",{className:"w-full md:w-1/2 flex flex-col items-center"},/*#__PURE__*/react.createElement("div",{className:"w-full flex justify-center mb-2"},/*#__PURE__*/react.createElement(MerchantIcon,{name:null==spending?void 0:spending.name})),/*#__PURE__*/react.createElement(MTextField,{className:"w-full",label:"Expense",name:"name",required:!0}),/*#__PURE__*/react.createElement(MAmountField,{allowNegative:!1,className:"w-full",label:"Amount",name:"amount",required:!0}),/*#__PURE__*/react.createElement(MDatePicker,{label:"Next Occurrence",name:"nextRecurrence",className:"w-full",required:!0,min:(0,startOfToday.A)()}),/*#__PURE__*/react.createElement(MSelectFunding,{className:"w-full",label:"When do you want to fund the expense?",menuPortalTarget:document.body,name:"fundingScheduleId",required:!0}),/*#__PURE__*/react.createElement(MSelectFrequency,{className:"w-full",dateFrom:"nextRecurrence",label:"How often do you need this expense?",name:"recurrenceRule",placeholder:"Select a spending frequency...",required:!0})),/*#__PURE__*/react.createElement(MDivider,{className:"block md:hidden w-1/2"}),/*#__PURE__*/react.createElement("div",{className:"w-full md:w-1/2 flex flex-col gap-2"},/*#__PURE__*/react.createElement(MSpan,{className:"text-xl my-2"},"Expense Timeline"),/*#__PURE__*/react.createElement(ExpenseTimeline,{spendingId:spending.spendingId})))))}var Today=__webpack_require__("../node_modules/@mui/icons-material/esm/Today.js"),ArrowForward=__webpack_require__("../node_modules/@mui/icons-material/esm/ArrowForward.js");function capitalize(input){return input.charAt(0).toUpperCase()+input.slice(1)}function FundingItem(props){var navigate=(0,react_router_dist.Zp)(),funding=props.funding,contributionForecast=useNextFundingForecast(funding.fundingScheduleId),rule=(0,dist_esm.YI)(funding.ruleset),letter=funding.name.toUpperCase().charAt(0)||"?",ruleDescription=capitalize(rule.toText()),next=funding.nextRecurrence,dateFormatString=(0,isThisYear.A)(next)?"EEEE LLLL do":"EEEE LLLL do, yyyy",nextOccurrenceString="".concat((0,format.A)(next,dateFormatString));function openDetails(){navigate("/bank/".concat(funding.bankAccountId,"/funding/").concat(funding.fundingScheduleId,"/details"))}return /*#__PURE__*/react.createElement("li",{className:"group relative w-full px-1 md:px-2"},/*#__PURE__*/react.createElement("div",{className:"absolute left-0 top-0 flex h-full w-full cursor-pointer md:hidden md:cursor-auto",onClick:openDetails}),/*#__PURE__*/react.createElement("div",{className:"flex items-center rounded-lg group-hover:bg-zinc-600 gap-2 md:gap-4 px-2 py-1 h-full cursor-pointer md:cursor-auto"},/*#__PURE__*/react.createElement(Avatar,{className:"h-10 w-10"},/*#__PURE__*/react.createElement(AvatarFallback,{className:"dark:bg-dark-monetr-background-subtle dark:text-dark-monetr-content"},letter)),/*#__PURE__*/react.createElement("div",{className:"w-full md:w-1/2 flex flex-col flex-1 min-w-0 overflow-hidden"},/*#__PURE__*/react.createElement(MSpan,{weight:"semibold",color:"emphasis",ellipsis:!0},funding.name),/*#__PURE__*/react.createElement(MSpan,{size:"sm",weight:"medium",ellipsis:!0},ruleDescription),/*#__PURE__*/react.createElement(MSpan,{size:"sm",weight:"medium",ellipsis:!0},nextOccurrenceString)),/*#__PURE__*/react.createElement("div",{className:"flex md:min-w-[14em] shrink-0 justify-end gap-2 items-center"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col"},/*#__PURE__*/react.createElement("div",{className:"flex justify-end"},/*#__PURE__*/react.createElement("span",{className:"hidden sm:block text-end text-zinc-400 group-hover:text-zinc-300 font-medium"},"Estimated Contribution"),/*#__PURE__*/react.createElement("span",{className:"block sm:hidden text-end text-zinc-400 group-hover:text-zinc-300 font-medium"},"Est."),"",/*#__PURE__*/react.createElement("span",{className:"text-end text-zinc-400 group-hover:text-zinc-300 font-medium"},formatAmount(contributionForecast.data)))),/*#__PURE__*/react.createElement(KeyboardArrowRight.A,{className:"dark:text-dark-monetr-content-subtle dark:group-hover:text-dark-monetr-content-emphasis flex-none md:cursor-pointer",onClick:openDetails}))))}try{FundingItem.displayName="FundingItem",FundingItem.__docgenInfo={description:"",displayName:"FundingItem",props:{funding:{defaultValue:null,description:"",name:"funding",required:!0,type:{name:"FundingSchedule"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/funding/FundingItem.tsx#FundingItem"]={docgenInfo:FundingItem.__docgenInfo,name:"FundingItem",path:"../interface/src/components/funding/FundingItem.tsx#FundingItem"})}catch(__react_docgen_typescript_loader_error){}function Funding(){var _useFundingSchedulesSink=useFundingSchedulesSink(),fundingIsError=_useFundingSchedulesSink.isError,fundingIsLoading=_useFundingSchedulesSink.isLoading,funding=_useFundingSchedulesSink.data;if(fundingIsLoading)return /*#__PURE__*/react.createElement(MSpan,null,"Loading...");if(fundingIsError)return /*#__PURE__*/react.createElement(MSpan,null,"Error...");function ListContent(){return 0===funding.length?/*#__PURE__*/react.createElement(funding_EmptyState,null):/*#__PURE__*/react.createElement("ul",{className:"w-full flex flex-col gap-2 py-2"},null==funding?void 0:funding.sort(function(a,b){return a.name.toLowerCase()>b.name.toLowerCase()?1:-1}).map(function(item){return /*#__PURE__*/react.createElement(FundingItem,{funding:item,key:item.fundingScheduleId})}))}return /*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement(MTopNavigation,{icon:TodayOutlined.A,title:"Funding Schedules"},/*#__PURE__*/react.createElement(MBaseButton,{color:"primary",className:"gap-1 py-1 px-2",onClick:showNewFundingModal},/*#__PURE__*/react.createElement(AddOutlined.A,null),"New Funding Schedule")),/*#__PURE__*/react.createElement("div",{className:"w-full h-full overflow-y-auto min-w-0"},/*#__PURE__*/react.createElement(ListContent,null)))}function funding_EmptyState(){return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex justify-center items-center"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col gap-2 items-center max-w-md"},/*#__PURE__*/react.createElement("div",{className:"w-full flex justify-center space-x-4"},/*#__PURE__*/react.createElement(Today.A,{className:"h-full text-5xl dark:text-dark-monetr-content-muted"}),/*#__PURE__*/react.createElement(ArrowForward.A,{className:"h-full text-5xl dark:text-dark-monetr-content-muted"}),/*#__PURE__*/react.createElement(AccountBalance.A,{className:"h-full text-5xl dark:text-dark-monetr-content-muted"})),/*#__PURE__*/react.createElement(MSpan,{size:"xl",color:"subtle",className:"text-center"},"You don't have any funding schedules yet..."),/*#__PURE__*/react.createElement(MSpan,{size:"lg",color:"subtle",className:"text-center"},"Funding schedules tell monetr when to allocate funds towards your expenses and goals.")))}var icons_material_DeleteOutlined=__webpack_require__("../node_modules/@mui/icons-material/DeleteOutlined.js"),icons_material_HeartBroken=__webpack_require__("../node_modules/@mui/icons-material/HeartBroken.js"),icons_material_SaveOutlined=__webpack_require__("../node_modules/@mui/icons-material/SaveOutlined.js"),icons_material_NorthEast=__webpack_require__("../node_modules/@mui/icons-material/NorthEast.js");function FundingTimeline_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function FundingTimeline_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){FundingTimeline_define_property(target,key,source[key])})}return target}function FundingTimeline_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function FundingTimeline_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):FundingTimeline_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function FundingTimeline(props){var funding=useFundingSchedule(props.fundingScheduleId).data,_useForecast=useForecast(),forecast=_useForecast.result,isLoading=_useForecast.isLoading,isError=_useForecast.isError;if(isLoading)return /*#__PURE__*/react.createElement(MSpan,null,"Loading...");if(isError||!funding)return /*#__PURE__*/react.createElement(MSpan,null,"Failed to load funding forecast!");var timelineItems=forecast.events.filter(function(event){return event.funding.some(function(funding){return funding.fundingScheduleId===props.fundingScheduleId})}).map(function(event){return FundingTimeline_object_spread_props(FundingTimeline_object_spread({},event),{funding:event.funding.filter(function(funding){return funding.fundingScheduleId===props.fundingScheduleId})})}).map(function(event){var item={date:event.date,originalDate:event.funding.find(function(funding){return funding.fundingScheduleId===props.fundingScheduleId}).originalDate,totalContributedAmount:event.contribution,contributedAmount:0,endingAllocation:event.balance,spendingCount:0};return event.spending.forEach(function(spending){spending.funding.find(function(funding){return funding.fundingScheduleId===props.fundingScheduleId})&&(item.contributedAmount+=spending.contributionAmount,item.spendingCount++)}),item});function TimelineItem(props){var header="",body="",dateExtra="",icon=null;header="Contribution",icon=/*#__PURE__*/react.createElement(icons_material_NorthEast.A,null),body="".concat(funding.name," will contribute ").concat(formatAmount(props.contributedAmount)," to ").concat(props.spendingCount," budget(s), resulting in a total allocation of ").concat(formatAmount(props.endingAllocation),"."),funding.estimatedDeposit&&(body+=" ",body+="An estimated ".concat(formatAmount(funding.estimatedDeposit-props.contributedAmount)," will be left over for Free-to-Use after this contribution.")),props.date.getDate()!=props.originalDate.getDate()&&(dateExtra="(Avoided weekend or holiday on ".concat((0,format.A)(props.originalDate,"MMMM do"),")"));var rowClassNames=mergeTailwind({"mb-5":!props.last},"ml-4");return /*#__PURE__*/react.createElement("li",{className:rowClassNames},/*#__PURE__*/react.createElement("div",{className:"absolute w-3 h-3 bg-zinc-200 rounded-full mt-1.5 -left-1.5 border border-white dark:border-zinc-900 dark:bg-zinc-700"}),/*#__PURE__*/react.createElement("time",{className:"mb-1 text-sm font-normal leading-none text-zinc-400 dark:text-zinc-500"},(0,format.A)(props.date,"MMMM do")," ",/*#__PURE__*/react.createElement("br",null)," ",dateExtra),/*#__PURE__*/react.createElement("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-white"},header," ",icon),/*#__PURE__*/react.createElement("p",{className:"text-base font-normal text-zinc-500 dark:text-zinc-400"},body),null)}return /*#__PURE__*/react.createElement("ol",{className:"relative border-l border-zinc-200 dark:border-zinc-700"},timelineItems.map(function(item,index){return /*#__PURE__*/react.createElement(TimelineItem,FundingTimeline_object_spread_props(FundingTimeline_object_spread({key:(0,getUnixTime.A)(item.date)},item),{last:timelineItems.length-1===index}))}))}try{FundingTimeline.displayName="FundingTimeline",FundingTimeline.__docgenInfo={description:"",displayName:"FundingTimeline",props:{fundingScheduleId:{defaultValue:null,description:"",name:"fundingScheduleId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/funding/FundingTimeline.tsx#FundingTimeline"]={docgenInfo:FundingTimeline.__docgenInfo,name:"FundingTimeline",path:"../interface/src/components/funding/FundingTimeline.tsx#FundingTimeline"})}catch(__react_docgen_typescript_loader_error){}function MCheckbox_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function MCheckbox_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){MCheckbox_define_property(target,key,source[key])})}return target}function MCheckbox_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function MCheckbox_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):MCheckbox_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function MCheckbox(props){var formikContext=(0,formik_esm.j7)(),theme=useTheme(),borderColor="dark"===theme.mediaColorSchema?theme.tailwind.colors["dark-monetr"].border.subtle:theme.tailwind.colors.gray["300"],Checkbox=(0,emotion_styled_browser_esm.A)("input")(function(){return{MozAppearance:"none",WebkitAppearance:"none",appearance:"none",padding:"0",WebkitPrintColorAdjust:"exact",colorAdjust:"exact",display:"inline-block",verticalAlign:"middle",backgroundOrigin:"border-box",WebkitUserSelect:"none",MozUserSelect:"none",userSelect:"none",flexShrink:"0",height:"1rem",width:"1rem",backgroundColor:props.disabled?theme.tailwind.colors.gray["500"]:["white"],borderColor:borderColor,borderWidth:"1px",backgroundSize:"100% 100%",cursor:props.disabled?"default":"pointer",borderRadius:"0.25rem","&:checked":{backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M12 5c-.28 0-.53.11-.71.29L7 9.59l-2.29-2.3a1.003 1.003 0 00-1.42 1.42l3 3c.18.18.43.29.71.29s.53-.11.71-.29l5-5A1.003 1.003 0 0012 5z' fill='%23fff'/%3E%3C/svg%3E\")",backgroundColor:props.disabled?theme.tailwind.colors.purple["300"]:theme.tailwind.colors.purple["500"]}}});function Label(){if(!props.label)return null;var labelClasses=mergeTailwind("font-medium",{"dark:text-dark-monetr-content-emphasis":!props.disabled,"text-gray-900":!props.disabled,"text-gray-500":props.disabled,"cursor-pointer":!props.disabled});return /*#__PURE__*/react.createElement("label",{htmlFor:props.id,className:labelClasses},props.label)}function Description(){return props.description?/*#__PURE__*/react.createElement("p",{className:"text-gray-500 dark:text-dark-monetr-content"},props.description):null}var className=mergeTailwind("flex","gap-x-3","pb-3",(props=MCheckbox_object_spread_props(MCheckbox_object_spread({},props),{disabled:(null==props?void 0:props.disabled)||(null==formikContext?void 0:formikContext.isSubmitting),onChange:(null==props?void 0:props.onChange)||(null==formikContext?void 0:formikContext.handleChange),checked:(null==props?void 0:props.checked)||formikContext.values[props.name]})).className);return /*#__PURE__*/react.createElement("div",{className:className},/*#__PURE__*/react.createElement("div",{className:"flex h-6 items-center"},/*#__PURE__*/react.createElement(Checkbox,{id:props.id,name:props.name,type:"checkbox",disabled:props.disabled,checked:props.checked,onChange:props.onChange,onBlur:null==formikContext?void 0:formikContext.handleBlur})),/*#__PURE__*/react.createElement("div",{className:"text-sm leading-6"},/*#__PURE__*/react.createElement(Label,null),/*#__PURE__*/react.createElement(Description,null)))}try{MCheckbox.displayName="MCheckbox",MCheckbox.__docgenInfo={description:"",displayName:"MCheckbox",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactElement"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"ReactElement"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},checked:{defaultValue:null,description:"",name:"checked",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(e: ChangeEvent<any>) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MCheckbox.tsx#MCheckbox"]={docgenInfo:MCheckbox.__docgenInfo,name:"MCheckbox",path:"../interface/src/components/MCheckbox.tsx#MCheckbox"})}catch(__react_docgen_typescript_loader_error){}function funding_details_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function funding_details_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){funding_details_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){funding_details_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function funding_details_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function funding_details_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){funding_details_define_property(target,key,source[key])})}return target}function funding_details_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function funding_details_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):funding_details_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function funding_details_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function FundingDetails(){var _match_params,match=(0,react_router_dist.RQ)("/bank/:bankId/funding/:fundingId/details"),fundingId=(null==match?void 0:null===(_match_params=match.params)||void 0===_match_params?void 0:_match_params.fundingId)||null,funding=useFundingSchedule(fundingId).data,navigate=(0,react_router_dist.Zp)(),updateFundingSchedule=useUpdateFundingSchedule(),removeFundingSchedule=useRemoveFundingSchedule(),enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar;if(!fundingId)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(icons_material_HeartBroken.A,{className:"dark:text-dark-monetr-content h-24 w-24"}),/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"Something isn't right..."),/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl"},"There wasn't a funding schedule specified..."));if(!funding)return null;function validate(values){var errors={};return""!==values.rule&&values.rule||(errors.rule="Frequency is required for funding schedules."),errors}function submit(values,helpers){return _submit.apply(this,arguments)}function _submit(){return(_submit=funding_details_async_to_generator(function(values,helpers){return funding_details_ts_generator(this,function(_state){return helpers.setSubmitting(!0),[2,updateFundingSchedule(new FundingSchedule(funding_details_object_spread_props(funding_details_object_spread({},funding),{name:values.name,nextRecurrence:(0,startOfDay.A)(values.nextRecurrence),ruleset:values.rule,excludeWeekends:values.excludeWeekends,estimatedDeposit:friendlyToAmount(values.estimatedDeposit)}))).catch(function(error){enqueueSnackbar(error.response.data.error||"Failed to update funding schedule.",{variant:"error",disableWindowBlurListener:!0})}).finally(function(){return helpers.setSubmitting(!1)})]})})).apply(this,arguments)}function backToFunding(){navigate("/bank/".concat(funding.bankAccountId,"/funding"))}function removeFunding(){return _removeFunding.apply(this,arguments)}function _removeFunding(){return(_removeFunding=funding_details_async_to_generator(function(){return funding_details_ts_generator(this,function(_state){return funding&&window.confirm("Are you sure you want to delete funding schedule: ".concat(funding.name))?[2,removeFundingSchedule(funding).then(function(){return backToFunding()}).catch(function(error){enqueueSnackbar(error.response.data.error,{variant:"error",disableWindowBlurListener:!0})})]:[2,Promise.resolve()]})})).apply(this,arguments)}var initialValues={name:funding.name,nextRecurrence:funding.nextRecurrenceOriginal,rule:funding.ruleset,excludeWeekends:funding.excludeWeekends,estimatedDeposit:amountToFriendly(funding.estimatedDeposit)};return /*#__PURE__*/react.createElement(components_MForm,{className:"flex w-full h-full flex-col",initialValues:initialValues,onSubmit:submit,validate:validate},/*#__PURE__*/react.createElement(MTopNavigation,{title:"Funding Schedules",icon:icons_material_TodayOutlined.A,breadcrumb:funding.name,base:"/bank/".concat(funding.bankAccountId,"/funding")},/*#__PURE__*/react.createElement(MBaseButton,{color:"cancel",className:"gap-1 py-1 px-2",onClick:removeFunding},/*#__PURE__*/react.createElement(icons_material_DeleteOutlined.A,null),"Remove"),/*#__PURE__*/react.createElement(MFormButton,{color:"primary",className:"gap-1 py-1 px-2",type:"submit",role:"form"},/*#__PURE__*/react.createElement(icons_material_SaveOutlined.A,null),"Save")),/*#__PURE__*/react.createElement("div",{className:"w-full h-full overflow-y-auto min-w-0 p-4"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col md:flex-row w-full gap-8 items-center md:items-stretch"},/*#__PURE__*/react.createElement("div",{className:"w-full md:w-1/2 flex flex-col"},/*#__PURE__*/react.createElement(MTextField,{className:"w-full",label:"Name",name:"name",id:"funding-name-search",required:!0}),/*#__PURE__*/react.createElement(MDatePicker,{className:"w-full",label:"Next Recurrence",name:"nextRecurrence",labelDecorator:function(){return(0,isEqual.A)(funding.nextRecurrence,funding.nextRecurrenceOriginal)?null:/*#__PURE__*/react.createElement(MSpan,{"data-testid":"funding-schedule-weekend-notice",size:"sm",weight:"medium"},"Actual occurrence avoids weekend (",(0,format.A)(funding.nextRecurrence,"M/dd"),")")},required:!0,"data-testid":"funding-details-date-picker"}),/*#__PURE__*/react.createElement(MSelectFrequency,{className:"w-full",dateFrom:"nextRecurrence",label:"How often does this funding happen?",name:"rule",placeholder:"Select a funding frequency...",required:!0}),/*#__PURE__*/react.createElement(MCheckbox,{id:"funding-details-exclude-weekends","data-testid":"funding-details-exclude-weekends",name:"excludeWeekends",label:"Exclude weekends",description:"If it were to land on a weekend, it is adjusted to the previous weekday instead."}),/*#__PURE__*/react.createElement(MAmountField,{allowNegative:!1,label:"Estimated Deposit",name:"estimatedDeposit",placeholder:"Example: $ 1,000.00"})),/*#__PURE__*/react.createElement(MDivider,{className:"block md:hidden w-1/2"}),/*#__PURE__*/react.createElement("div",{className:"w-full md:w-1/2 flex flex-col gap-2"},/*#__PURE__*/react.createElement(MSpan,{className:"text-xl my-2"},"Funding Timeline"),/*#__PURE__*/react.createElement(FundingTimeline,{fundingScheduleId:funding.fundingScheduleId})))))}function GoalItem(param){var spending=param.spending,fundingSchedule=useFundingSchedule(spending.fundingScheduleId).data,navigate=(0,react_router_dist.Zp)();function openDetails(){navigate("/bank/".concat(spending.bankAccountId,"/goals/").concat(spending.spendingId,"/details"))}var contributionString="".concat(spending.getNextContributionAmountString()," / ").concat(null==fundingSchedule?void 0:fundingSchedule.name);return spending.getGoalIsInProgress()?spending.isPaused&&(contributionString="Paused"):contributionString="Complete",/*#__PURE__*/react.createElement("li",{className:"group relative w-full px-1 md:px-2"},/*#__PURE__*/react.createElement("div",{className:"absolute left-0 top-0 flex h-full w-full cursor-pointer md:hidden md:cursor-auto",onClick:openDetails}),/*#__PURE__*/react.createElement("div",{className:"w-full flex rounded-lg group-hover:bg-zinc-600 gap-2 md:gap-4 items-center px-2 py-1 cursor-pointer md:cursor-auto"},/*#__PURE__*/react.createElement(MerchantIcon,{name:spending.name}),/*#__PURE__*/react.createElement("div",{className:"w-full flex flex-col min-w-0"},/*#__PURE__*/react.createElement("div",{className:"w-full flex gap-2 items-center min-w-0 justify-between md:justify-normal"},/*#__PURE__*/react.createElement("div",{className:"flex items-center md:w-1/2 gap-4 min-w-0 pr-1"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col overflow-hidden min-w-0"},/*#__PURE__*/react.createElement("span",{className:"block w-full text-zinc-50 font-semibold text-base overflow-hidden whitespace-nowrap truncate"},spending.name,/*#__PURE__*/react.createElement("span",{className:"md:hidden text-zinc-200 font-sm text-sm overflow-hidden whitespace-nowrap truncate"}," ",spending.getNextOccurrenceString())),/*#__PURE__*/react.createElement("span",{className:"hidden md:block text-zinc-200 font-sm text-sm overflow-hidden text-ellipsis whitespace-nowrap min-w-0"},spending.getNextOccurrenceString()),/*#__PURE__*/react.createElement("span",{className:"md:hidden text-zinc-200 text-sm overflow-hidden text-ellipsis whitespace-nowrap min-w-0"},contributionString))),/*#__PURE__*/react.createElement("div",{className:"hidden md:flex w-1/2 overflow-hidden flex-1 min-w-0 items-center"},/*#__PURE__*/react.createElement("span",{className:"text-zinc-50/75 font-medium text-base text-ellipsis whitespace-nowrap overflow-hidden min-w-0"},contributionString)),/*#__PURE__*/react.createElement(GoalAmount,{spending:spending})),/*#__PURE__*/react.createElement(GoalProgressBar,{spending:spending})),/*#__PURE__*/react.createElement(KeyboardArrowRight.A,{className:"dark:text-dark-monetr-content-subtle dark:group-hover:text-dark-monetr-content-emphasis md:cursor-pointer",onClick:openDetails})))}function GoalAmount(param){var spending=param.spending,amountClass=mergeTailwind({"text-green-500":spending.targetAmount<=spending.currentAmount,"text-blue-500":spending.targetAmount!==spending.currentAmount},"text-end","font-semibold");return spending.getGoalIsInProgress()?/*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement("div",{className:"flex md:hidden shrink-0 items-center gap-2"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col"},/*#__PURE__*/react.createElement("span",{className:amountClass},spending.getCurrentAmountString()),/*#__PURE__*/react.createElement("hr",{className:"w-full border-0 border-b-[thin] border-zinc-600"}),/*#__PURE__*/react.createElement("span",{className:"text-end text-zinc-400 group-hover:text-zinc-300 font-medium"},spending.getTargetAmountString()))),/*#__PURE__*/react.createElement("div",{className:"hidden md:flex md:min-w-[12em] shrink-0 justify-end gap-2 items-center"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col"},/*#__PURE__*/react.createElement("div",{className:"flex justify-end"},/*#__PURE__*/react.createElement("span",{className:amountClass},spending.getCurrentAmountString()),"",/*#__PURE__*/react.createElement("span",{className:"text-end text-zinc-500 group-hover:text-zinc-400 font-medium"},"of"),"",/*#__PURE__*/react.createElement("span",{className:"text-end text-zinc-400 group-hover:text-zinc-300 font-medium"},spending.getTargetAmountString()))))):/*#__PURE__*/react.createElement("div",{className:"flex md:min-w-[12em] shrink-0 justify-end gap-2 items-center"},/*#__PURE__*/react.createElement(MBadge,{className:"w-fit justify-end dark:bg-green-600",weight:"medium"},spending.getCurrentAmountString()))}function GoalProgressBar(param){var spending=param.spending,usedAmount=spending.usedAmount,currentAmount=spending.currentAmount,targetAmount=spending.targetAmount,usedProgress=(Math.min(usedAmount,targetAmount)/targetAmount*100).toFixed(0),allocatedProgress=(Math.min(currentAmount+usedAmount,targetAmount)/targetAmount*100).toFixed(0);return /*#__PURE__*/react.createElement("div",{className:"w-full bg-gray-200 rounded-full h-1.5 my-2 dark:bg-gray-700 relative"},/*#__PURE__*/react.createElement("div",{className:"absolute top-0 bg-green-600 h-1.5 rounded-full dark:bg-green-600",style:{width:"".concat(allocatedProgress,"%")}}),/*#__PURE__*/react.createElement("div",{className:"absolute top-0 bg-blue-600 h-1.5 rounded-full dark:bg-blue-600",style:{width:"".concat(usedProgress,"%")}}))}try{GoalItem.displayName="GoalItem",GoalItem.__docgenInfo={description:"",displayName:"GoalItem",props:{spending:{defaultValue:null,description:"",name:"spending",required:!0,type:{name:"Spending"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/goals/GoalItem.tsx#GoalItem"]={docgenInfo:GoalItem.__docgenInfo,name:"GoalItem",path:"../interface/src/components/goals/GoalItem.tsx#GoalItem"})}catch(__react_docgen_typescript_loader_error){}function NewGoalModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function NewGoalModal_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){NewGoalModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){NewGoalModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function NewGoalModal_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var NewGoalModal_initialValues={name:"",amount:0,nextOccurrence:(0,startOfTomorrow.A)(),fundingScheduleId:""};function NewGoalModal(){var modal=(0,lib_esm.hS)(),enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,selectedBankAccountId=bankAccounts_useSelectedBankAccountId(),createSpending=useCreateSpending(),ref=(0,react.useRef)(null);function submit(values,helper){return _submit.apply(this,arguments)}function _submit(){return(_submit=NewGoalModal_async_to_generator(function(values,helper){var newSpending;return NewGoalModal_ts_generator(this,function(_state){return newSpending=new Spending({bankAccountId:selectedBankAccountId,name:values.name.trim(),nextRecurrence:(0,startOfDay.A)(new Date(values.nextOccurrence)),spendingType:SpendingType.Goal,fundingScheduleId:values.fundingScheduleId,targetAmount:friendlyToAmount(values.amount),ruleset:null}),helper.setSubmitting(!0),[2,createSpending(newSpending).then(function(created){return modal.resolve(created)}).then(function(){return modal.remove()}).catch(function(error){enqueueSnackbar(error.response.data.error,{variant:"error",disableWindowBlurListener:!0})}).finally(function(){return helper.setSubmitting(!1)})]})})).apply(this,arguments)}return /*#__PURE__*/react.createElement(MModal,{open:modal.visible,ref:ref,className:"sm:max-w-xl"},/*#__PURE__*/react.createElement(components_MForm,{onSubmit:submit,initialValues:NewGoalModal_initialValues,className:"h-full flex flex-col gap-2 p-2 justify-between","data-testid":"new-goal-modal"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col"},/*#__PURE__*/react.createElement(MSpan,{className:"font-bold text-xl mb-2"},"Create A New Goal"),/*#__PURE__*/react.createElement(MTextField,{id:"goal-name-search",name:"name",label:"What are you budgeting for?",required:!0,autoComplete:"off",placeholder:"Vacation, Furniture, Car..."}),/*#__PURE__*/react.createElement("div",{className:"flex gap-0 md:gap-4 flex-col md:flex-row"},/*#__PURE__*/react.createElement(MAmountField,{name:"amount",label:"How much do you need?",required:!0,className:"w-full md:w-1/2",allowNegative:!1}),/*#__PURE__*/react.createElement(MDatePicker,{className:"w-full md:w-1/2",label:"How soon will you need it?",min:(0,startOfTomorrow.A)(),name:"nextOccurrence",required:!0})),/*#__PURE__*/react.createElement(MSelectFunding,{menuPortalTarget:document.body,label:"When do you want to fund the goal?",required:!0,name:"fundingScheduleId"})),/*#__PURE__*/react.createElement("div",{className:"flex justify-end gap-2"},/*#__PURE__*/react.createElement(FormButton,{variant:"destructive",onClick:modal.remove,"data-testid":"close-new-goal-modal"},"Cancel"),/*#__PURE__*/react.createElement(FormButton,{variant:"primary",type:"submit"},"Create"))))}var newGoalModal=lib_esm.Ay.create(NewGoalModal);function showNewGoalModal(){return lib_esm.Ay.show(newGoalModal)}try{NewGoalModal.displayName="NewGoalModal",NewGoalModal.__docgenInfo={description:"",displayName:"NewGoalModal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/modals/NewGoalModal.tsx#NewGoalModal"]={docgenInfo:NewGoalModal.__docgenInfo,name:"NewGoalModal",path:"../interface/src/modals/NewGoalModal.tsx#NewGoalModal"})}catch(__react_docgen_typescript_loader_error){}var goals_evilScrollPosition=0;function Goals(){var _useSpendingFiltered=useSpendingFiltered(SpendingType.Goal),goals=_useSpendingFiltered.result,isError=_useSpendingFiltered.isError,isLoading=_useSpendingFiltered.isLoading,ref=(0,react.useRef)(null),navigationType=(0,react_router_dist.wQ)(),onScroll=(0,react.useCallback)(function(){goals_evilScrollPosition=ref.current.scrollTop},[ref]);if((0,react.useEffect)(function(){if(ref.current){"POP"===navigationType&&(ref.current.scrollTop=goals_evilScrollPosition);var current=ref.current;return ref.current.addEventListener("scroll",onScroll),function(){current.removeEventListener("scroll",onScroll)}}},[ref.current,navigationType,onScroll]),isLoading)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"One moment..."));if(isError)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(HeartBroken.A,{className:"dark:text-dark-monetr-content h-24 w-24"}),/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"Something isn't right..."),/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl"},"We weren't able to retrieve goals at this time..."));function ListContent(){return 0===goals.length?/*#__PURE__*/react.createElement(goals_EmptyState,null):/*#__PURE__*/react.createElement("ul",{className:"w-full flex flex-col gap-2 py-2"},null==goals?void 0:goals.sort(function(a,b){return a.name.toLowerCase()>b.name.toLowerCase()?1:-1}).map(function(item){return /*#__PURE__*/react.createElement(GoalItem,{spending:item,key:item.spendingId})}))}return /*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement(MTopNavigation,{icon:SavingsOutlined.A,title:"Goals"},/*#__PURE__*/react.createElement(MBaseButton,{color:"primary",className:"gap-1 py-1 px-2",onClick:showNewGoalModal},/*#__PURE__*/react.createElement(AddOutlined.A,null),"New Goal")),/*#__PURE__*/react.createElement("div",{className:"w-full h-full overflow-y-auto min-w-0",ref:ref},/*#__PURE__*/react.createElement(ListContent,null)))}function goals_EmptyState(){return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex justify-center items-center"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col gap-2 items-center max-w-md"},/*#__PURE__*/react.createElement("div",{className:"w-full flex justify-center space-x-4"},/*#__PURE__*/react.createElement(SavingsOutlined.A,{className:"h-full text-5xl dark:text-dark-monetr-content-muted"})),/*#__PURE__*/react.createElement(MSpan,{size:"xl",color:"subtle",className:"text-center"},"You don't have any goals yet..."),/*#__PURE__*/react.createElement(MSpan,{size:"lg",color:"subtle",className:"text-center"},"Goals are longer budgets that don't recur. They are meant to be used to put money aside for something like saving up for a vaction, or paying off a loan.")))}function GoalTimeline_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function GoalTimeline_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){GoalTimeline_define_property(target,key,source[key])})}return target}function GoalTimeline_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function GoalTimeline_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):GoalTimeline_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function GoalTimeline(props){var spending=useSpending(props.spendingId).data,fundingSchedule=useFundingSchedule(null==spending?void 0:spending.fundingScheduleId).data,_useForecast=useForecast(),forecast=_useForecast.result,isLoading=_useForecast.isLoading,isError=_useForecast.isError;if(isLoading)return /*#__PURE__*/react.createElement(MSpan,null,"Loading...");if(isError||!spending)return /*#__PURE__*/react.createElement(MSpan,null,"Failed to load goal forecast!");var timelineItems=forecast.events.filter(function(event){return event.spending.some(function(spending){return spending.spendingId===props.spendingId})}).map(function(event){return GoalTimeline_object_spread_props(GoalTimeline_object_spread({},event),{spending:event.spending.filter(function(spending){return spending.spendingId===props.spendingId})})}).map(function(event){var item={date:event.date,totalContributedAmount:event.contribution,totalSpentAmount:event.transaction,spentAmount:0,contributedAmount:0,endingAllocation:0};return event.spending.forEach(function(spending){spending.spendingId===props.spendingId&&(item.spentAmount+=spending.transactionAmount,item.contributedAmount+=spending.contributionAmount,item.endingAllocation+=spending.rollingAllocation)}),item});function TimelineItem(props){var header="",body="",secondaryBody=null,icon=null;if(props.contributedAmount>0&&props.spentAmount>0)header="Contribution & Completion",icon=/*#__PURE__*/react.createElement(AirlineStopsOutlined.A,null),body=props.endingAllocation>0?"An estimated ".concat(formatAmount(props.spentAmount)," will be spent or be ready to spend, ").concat(formatAmount(props.contributedAmount)," was contributed to this goal at the same time. ").concat(formatAmount(props.endingAllocation)," is left over to use from this goal until the next contribution."):"An estimated ".concat(formatAmount(props.spentAmount)," will be spent or be ready to spend, included the ").concat(formatAmount(props.contributedAmount)," that was contributed to this goal at the same time to account for the spending.");else if(0===props.contributedAmount&&props.spentAmount>0)header="Spending",icon=/*#__PURE__*/react.createElement(SouthEast.A,null),body="An estimated ".concat(formatAmount(props.spentAmount)," will be spent or will be ready to spend, from your ").concat(spending.name," goal.");else{if(!(props.contributedAmount>0)||0!==props.spentAmount)return null;header="Contribution",icon=/*#__PURE__*/react.createElement(NorthEast.A,null),body="".concat(formatAmount(props.contributedAmount)," will be allocated towards ").concat(spending.name," from ").concat(fundingSchedule.name,", resulting in a total allocation of ").concat(formatAmount(props.endingAllocation),"."),props.totalContributedAmount>props.contributedAmount&&(secondaryBody="A total of ".concat(formatAmount(props.totalContributedAmount)," will be contributed to all budgets on this day."))}var rowClassNames=mergeTailwind({"mb-5":!props.last},"ml-4");return /*#__PURE__*/react.createElement("li",{className:rowClassNames},/*#__PURE__*/react.createElement("div",{className:"absolute w-3 h-3 bg-zinc-200 rounded-full mt-1.5 -left-1.5 border border-white dark:border-zinc-900 dark:bg-zinc-700"}),/*#__PURE__*/react.createElement("time",{className:"mb-1 text-sm font-normal leading-none text-zinc-400 dark:text-zinc-500"},(0,format.A)(props.date,"MMMM do")),/*#__PURE__*/react.createElement("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-white"},header," ",icon),/*#__PURE__*/react.createElement("p",{className:"text-base font-normal text-zinc-500 dark:text-zinc-400"},body),secondaryBody&&/*#__PURE__*/react.createElement("p",{className:"text-base font-normal text-zinc-500 dark:text-zinc-400"},secondaryBody))}return /*#__PURE__*/react.createElement("ol",{className:"relative border-l border-zinc-200 dark:border-zinc-700"},/*#__PURE__*/react.createElement("li",{className:"mb-5 ml-4"},/*#__PURE__*/react.createElement("div",{className:"absolute w-3 h-3 bg-zinc-200 rounded-full mt-1.5 -left-1.5 border border-white dark:border-zinc-900 dark:bg-zinc-700"}),/*#__PURE__*/react.createElement("time",{className:"mb-1 text-sm font-normal leading-none text-zinc-400 dark:text-zinc-500"},(0,format.A)(forecast.startingTime,"MMMM do")),/*#__PURE__*/react.createElement("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-white"},spending.name,/*#__PURE__*/react.createElement("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300 ml-3"},"Today")),/*#__PURE__*/react.createElement("p",{className:"text-base font-normal text-zinc-500 dark:text-zinc-400"},spending.name," currently has ",spending.getCurrentAmountString()," allocated towards it."),/*#__PURE__*/react.createElement("p",{className:"mb-4 text-base font-normal text-zinc-500 dark:text-zinc-400"},"Below is the timeline for this goal over the next month.")),timelineItems.map(function(item,index){return /*#__PURE__*/react.createElement(TimelineItem,GoalTimeline_object_spread_props(GoalTimeline_object_spread({key:(0,getUnixTime.A)(item.date)},item),{last:timelineItems.length-1===index}))}))}try{GoalTimeline.displayName="GoalTimeline",GoalTimeline.__docgenInfo={description:"",displayName:"GoalTimeline",props:{spendingId:{defaultValue:null,description:"",name:"spendingId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/goals/GoalTimeline.tsx#GoalTimeline"]={docgenInfo:GoalTimeline.__docgenInfo,name:"GoalTimeline",path:"../interface/src/components/goals/GoalTimeline.tsx#GoalTimeline"})}catch(__react_docgen_typescript_loader_error){}function goals_details_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function goals_details_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){goals_details_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){goals_details_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function goals_details_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function goals_details_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){goals_details_define_property(target,key,source[key])})}return target}function goals_details_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function goals_details_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):goals_details_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function goals_details_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function GoalDetails(){var removeSpending=useRemoveSpending(),updateSpending=useUpdateSpending(),navigate=(0,react_router_dist.Zp)(),spendingId=(0,react_router_dist.g)().spendingId,enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,_useSpending=useSpending(spendingId),spending=_useSpending.data,isLoading=_useSpending.isLoading,isError=_useSpending.isError;if(!spendingId)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(HeartBroken.A,{className:"dark:text-dark-monetr-content h-24 w-24"}),/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"Something isn't right..."),/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl"},"There wasn't a goal specified..."));if(isLoading)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"One moment..."));if(isError)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(HeartBroken.A,{className:"dark:text-dark-monetr-content h-24 w-24"}),/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"Something isn't right..."),/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl"},"Couldn't find the goal you specified..."));if(!spending)return null;if(spending.spendingType!==SpendingType.Goal)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(HeartBroken.A,{className:"dark:text-dark-monetr-content h-24 w-24"}),/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"Something isn't right..."),/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl"},"This spending object is not a goal..."));function backToGoals(){navigate("/bank/".concat(spending.bankAccountId,"/goals"))}function deleteGoal(){return _deleteGoal.apply(this,arguments)}function _deleteGoal(){return(_deleteGoal=goals_details_async_to_generator(function(){return goals_details_ts_generator(this,function(_state){return spending&&window.confirm("Are you sure you want to delete goal: ".concat(spending.name))?[2,removeSpending(spending.spendingId).then(function(){return backToGoals()})]:[2,Promise.resolve()]})})).apply(this,arguments)}function submit(values,helpers){return _submit.apply(this,arguments)}function _submit(){return(_submit=goals_details_async_to_generator(function(values,helpers){return goals_details_ts_generator(this,function(_state){return helpers.setSubmitting(!0),[2,updateSpending(new Spending(goals_details_object_spread_props(goals_details_object_spread({},spending),{name:values.name,description:null,nextRecurrence:(0,startOfDay.A)(values.nextRecurrence),fundingScheduleId:values.fundingScheduleId,ruleset:null,targetAmount:friendlyToAmount(values.amount),isPaused:values.isPaused}))).catch(function(error){enqueueSnackbar(error.response.data.error||"Failed to update expense.",{variant:"error",disableWindowBlurListener:!0})}).finally(function(){return helpers.setSubmitting(!1)})]})})).apply(this,arguments)}var initialValues={name:spending.name,amount:amountToFriendly(spending.targetAmount),nextRecurrence:spending.nextRecurrence,fundingScheduleId:spending.fundingScheduleId,isPaused:spending.isPaused};return /*#__PURE__*/react.createElement(components_MForm,{initialValues:initialValues,onSubmit:submit,className:"flex w-full h-full flex-col"},/*#__PURE__*/react.createElement(MTopNavigation,{icon:SavingsOutlined.A,title:"Goals",base:"/bank/".concat(spending.bankAccountId,"/goals"),breadcrumb:null==spending?void 0:spending.name},/*#__PURE__*/react.createElement(MBaseButton,{color:"secondary",className:"gap-1 py-1 px-2",onClick:function(){return showTransferModal({initialToSpendingId:null==spending?void 0:spending.spendingId})}},/*#__PURE__*/react.createElement(SwapVertOutlined.A,null),"Transfer"),/*#__PURE__*/react.createElement(MBaseButton,{color:"cancel",className:"gap-1 py-1 px-2",onClick:deleteGoal},/*#__PURE__*/react.createElement(DeleteOutlined.A,null),"Remove"),/*#__PURE__*/react.createElement(MFormButton,{color:"primary",className:"gap-1 py-1 px-2",type:"submit",role:"form"},/*#__PURE__*/react.createElement(SaveOutlined.A,null),"Save")),/*#__PURE__*/react.createElement("div",{className:"w-full h-full overflow-y-auto min-w-0 p-4"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col md:flex-row w-full gap-8 items-center md:items-stretch"},/*#__PURE__*/react.createElement("div",{className:"w-full md:w-1/2 flex flex-col"},/*#__PURE__*/react.createElement("div",{className:"w-full flex justify-center mb-2"},/*#__PURE__*/react.createElement(MerchantIcon,{name:null==spending?void 0:spending.name})),/*#__PURE__*/react.createElement(MTextField,{className:"w-full",label:"Expense",name:"name",required:!0}),/*#__PURE__*/react.createElement(MAmountField,{allowNegative:!1,className:"w-full",label:"Amount",name:"amount",required:!0}),/*#__PURE__*/react.createElement(MDatePicker,{label:"Target Date",name:"nextRecurrence",className:"w-full",required:!0,min:(0,startOfToday.A)()}),/*#__PURE__*/react.createElement(MSelectFunding,{className:"w-full",label:"When do you want to fund the expense?",menuPortalTarget:document.body,name:"fundingScheduleId",required:!0}),/*#__PURE__*/react.createElement(MCheckbox,{id:"goal-details-paused","data-testid":"goal-details-paused",name:"isPaused",label:"Paused?",description:"Pause this goal to temporarily stop contributions to it."})),/*#__PURE__*/react.createElement(MDivider,{className:"block md:hidden w-1/2"}),/*#__PURE__*/react.createElement("div",{className:"w-full md:w-1/2 flex flex-col gap-2"},/*#__PURE__*/react.createElement(MSpan,{className:"text-xl my-2"},"Goal Timeline"),/*#__PURE__*/react.createElement(GoalTimeline,{spendingId:spending.spendingId})))))}var PowerOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/PowerOutlined.js"),CheckCircle=__webpack_require__("../node_modules/@mui/icons-material/CheckCircle.js"),EditOutlined=__webpack_require__("../node_modules/@mui/icons-material/EditOutlined.js");function PlaidLogo(props){var className=mergeTailwind("w-28",props.className);return /*#__PURE__*/react.createElement("div",null,/*#__PURE__*/react.createElement("svg",{className:className,viewBox:"0 0 126 48",xmlns:"http://www.w3.org/2000/svg"},/*#__PURE__*/react.createElement("g",{fillRule:"evenodd"},/*#__PURE__*/react.createElement("path",{className:"fill-white text-white",d:"M66.248 16.268c-1.057-.889-2.861-1.333-5.413-1.333h-5.756v17.788h4.304v-5.575h1.928c2.34 0 4.056-.515 5.148-1.546 1.23-1.155 1.849-2.693 1.849-4.613 0-1.991-.687-3.565-2.06-4.721m-5.044 6.855h-1.821V18.96h1.636c1.99 0 2.985.698 2.985 2.094 0 1.378-.934 2.068-2.8 2.068M75.673 14.934h-4.488v17.788h9.69v-4.026h-5.202zM89.668 14.934l-7.05 17.788h4.832l.924-2.586H94.5l.845 2.586h4.886l-7-17.788zm-.053 11.601l1.849-6.08 1.82 6.08z"}),/*#__PURE__*/react.createElement("path",{className:"fill-white text-white",d:"M102.473 32.722h4.489V14.934h-4.489zM124.39 18.268a7.376 7.376 0 00-2.14-2.053c-1.355-.854-3.204-1.28-5.545-1.28h-5.914v17.787h6.918c2.5 0 4.506-.817 6.02-2.453 1.514-1.635 2.27-3.805 2.27-6.508 0-2.15-.537-3.981-1.61-5.493m-7.182 10.427h-1.927v-9.734h1.954c1.373 0 2.428.43 3.168 1.287.74.857 1.11 2.073 1.11 3.647 0 3.2-1.435 4.8-4.305 4.8M18.637 0L4.09 3.81.081 18.439l5.014 5.148L0 28.65l3.773 14.693 14.484 4.047 5.096-5.064 5.014 5.147 14.547-3.81 4.008-14.63-5.013-5.146 5.095-5.063L43.231 4.13 28.745.083l-5.094 5.063zM9.71 6.624l7.663-2.008 3.351 3.44-4.887 4.856zm16.822 1.478l3.405-3.383 7.63 2.132-6.227 6.187zM4.672 17.238l2.111-7.705 6.125 6.288-4.886 4.856zm29.547-1.243l6.227-6.189 1.986 7.74-3.404 3.384zm-15.502-.127l4.887-4.856 4.807 4.936-4.886 4.856zm-7.814 7.765l4.886-4.856 4.81 4.936-4.888 4.856zm15.503.127l4.886-4.856L36.1 23.84l-4.887 4.856zM4.57 29.927l3.406-3.385 4.807 4.937-6.225 6.186zm14.021 1.598l4.887-4.856 4.808 4.936-4.886 4.856zm15.502.128l4.887-4.856 3.351 3.439-2.11 7.705zm-24.656 8.97l6.226-6.189 4.81 4.936-3.406 3.385zm16.843-1.206l4.886-4.856 6.126 6.289-7.662 2.007z"}))))}try{PlaidLogo.displayName="PlaidLogo",PlaidLogo.__docgenInfo={description:"",displayName:"PlaidLogo",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Logo/PlaidLogo.tsx#PlaidLogo"]={docgenInfo:PlaidLogo.__docgenInfo,name:"PlaidLogo",path:"../interface/src/components/Logo/PlaidLogo.tsx#PlaidLogo"})}catch(__react_docgen_typescript_loader_error){}function SetupBillingButton_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function SetupBillingButton_array_with_holes(arr){if(Array.isArray(arr))return arr}function SetupBillingButton_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function SetupBillingButton_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function SetupBillingButton_sliced_to_array(arr,i){return SetupBillingButton_array_with_holes(arr)||SetupBillingButton_iterable_to_array_limit(arr,i)||SetupBillingButton_unsupported_iterable_to_array(arr,i)||SetupBillingButton_non_iterable_rest()}function SetupBillingButton_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return SetupBillingButton_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SetupBillingButton_array_like_to_array(o,minLen)}}function SetupBillingButton(){var hasSubscription=useAuthenticationSink().result.hasSubscription,enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,_useState=SetupBillingButton_sliced_to_array((0,react.useState)(!1),2),loading=_useState[0],setLoading=_useState[1],handleManageSubscription=(0,react.useCallback)(function(){setLoading(!0),axios.A.get("/api/billing/portal").then(function(result){return window.location.assign(result.data.url)}).catch(function(error){var _error_response_data,_error_response;setLoading(!1),enqueueSnackbar((null==error?void 0:null===(_error_response=error.response)||void 0===_error_response?void 0:null===(_error_response_data=_error_response.data)||void 0===_error_response_data?void 0:_error_response_data.error)||"Failed to prepare Stripe billing session.",{variant:"error",disableWindowBlurListener:!0})})},[enqueueSnackbar]);return hasSubscription?/*#__PURE__*/react.createElement(MBaseButton,{className:"max-w-xs",color:"secondary",disabled:loading,onClick:handleManageSubscription},/*#__PURE__*/react.createElement(CreditCard.A,{className:"mr-2"}),"Manage Your Subscription"):null}try{SetupBillingButton.displayName="SetupBillingButton",SetupBillingButton.__docgenInfo={description:"The SetupBillingButton should only be used on the setup page, it is intended to be a way to manage your billing\nsettings if you do not have an active link for some reason.",displayName:"SetupBillingButton",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/setup/SetupBillingButton.tsx#SetupBillingButton"]={docgenInfo:SetupBillingButton.__docgenInfo,name:"SetupBillingButton",path:"../interface/src/components/setup/SetupBillingButton.tsx#SetupBillingButton"})}catch(__react_docgen_typescript_loader_error){}function setup_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function setup_array_with_holes(arr){if(Array.isArray(arr))return arr}function setup_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function setup_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function setup_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function setup_sliced_to_array(arr,i){return setup_array_with_holes(arr)||setup_iterable_to_array_limit(arr,i)||setup_unsupported_iterable_to_array(arr,i)||setup_non_iterable_rest()}function setup_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return setup_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return setup_array_like_to_array(o,minLen)}}function SetupPage(props){var _useState=setup_sliced_to_array((0,react.useState)("greeting"),2),step=_useState[0],setStep=_useState[1],plaidPath=props.alreadyOnboarded?"/link/create/plaid":"/setup/plaid",manualPath=props.alreadyOnboarded?"/link/create/manual":"/setup/manual";switch(step){case"greeting":return /*#__PURE__*/react.createElement(Greeting,{onContinue:setStep,manualEnabled:props.manualEnabled,alreadyOnboarded:props.alreadyOnboarded});case"plaid":return /*#__PURE__*/react.createElement(react_router_dist.C5,{to:plaidPath});case"manual":return /*#__PURE__*/react.createElement(react_router_dist.C5,{to:manualPath});default:return /*#__PURE__*/react.createElement("h1",null,"Something went wrong...")}}function Greeting(props){var config=useAppConfiguration(),_useState=setup_sliced_to_array((0,react.useState)(null),2),active=_useState[0],setActive=_useState[1];function Banner(){return props.alreadyOnboarded?/*#__PURE__*/react.createElement("div",{className:"flex flex-col justify-center items-center text-center"},/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl font-medium"},"Adding another bank?"),/*#__PURE__*/react.createElement(MSpan,{className:"text-lg",color:"subtle"},"Please select what type of bank you want to setup below.")):/*#__PURE__*/react.createElement("div",{className:"flex flex-col justify-center items-center text-center"},/*#__PURE__*/react.createElement(MSpan,{size:"2xl",weight:"medium"},"Welcome to monetr!"),/*#__PURE__*/react.createElement(MSpan,{size:"lg",color:"subtle"},"Before we get started, please select how you would like to continue."))}function Footer(){return props.alreadyOnboarded?null:/*#__PURE__*/react.createElement(LogoutFooter,null)}return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex lg:justify-center items-center gap-4 md:gap-8 flex-col overflow-y-auto py-4"},/*#__PURE__*/react.createElement(MLogo,{className:"w-16 h-16 md:w-24 md:h-24"}),/*#__PURE__*/react.createElement(Banner,null),/*#__PURE__*/react.createElement("div",{className:"flex gap-4 flex-col md:flex-row p-2"},/*#__PURE__*/react.createElement(OnboardingTile,{icon:/*#__PURE__*/react.createElement(PlaidLogo,null),name:"Plaid",description:"Plaid makes connecting your monetr account to your bank easy.",active:"plaid"===active,onClick:function(){return setActive("plaid")},disabled:!(null==config?void 0:config.plaidEnabled)}),/*#__PURE__*/react.createElement(OnboardingTile,{icon:/*#__PURE__*/react.createElement(EditOutlined.A,null),name:"Manual",description:"Manage your transactions and budget manually with monetr.",active:"manual"===active,onClick:function(){return setActive("manual")},disabled:!props.manualEnabled})),/*#__PURE__*/react.createElement(MBaseButton,{color:active?"primary":"secondary",disabled:!active,onClick:function(){return props.onContinue(active)}},"Continue"),!props.alreadyOnboarded&&/*#__PURE__*/react.createElement(SetupBillingButton,null),/*#__PURE__*/react.createElement(Footer,null))}function OnboardingTile(props){var nonDisabled=mergeTailwind({"dark:border-dark-monetr-brand":props.active,"dark:hover:border-dark-monetr-brand-subtle":props.active,"border-monetr-brand":props.active,"hover:border-monetr-brand-subtle":props.active},{"dark:border-dark-monetr-border":!props.active,"dark:hover:border-dark-monetr-border-string":!props.active,"border-monetr-border":!props.active,"hover:border-monetr-border-string":!props.active},"cursor-pointer","border"),disabled=mergeTailwind("cursor-not-allowed","dark:ring-dark-monetr-border-subtle","ring-monetr-border-subtle","ring-1","ring-inset","dark:text-dark-monetr-content-muted","text-monetr-content-muted","opacity-50"),disabledState=props.comingSoon||props.disabled,wrapperClasses=mergeTailwind(setup_define_property({},nonDisabled,!disabledState),setup_define_property({},disabled,disabledState),"text-center","flex","flex-row","md:flex-col","gap-4","group","md:h-72","md:w-56","items-center","p-2","py-4","md:p-4","relative","rounded-lg","h-36");function handleClick(){!props.comingSoon&&(props.disabled||props.onClick())}return props.disabled?null:/*#__PURE__*/react.createElement("a",{className:wrapperClasses,onClick:handleClick},props.active&&/*#__PURE__*/react.createElement(CheckCircle.A,{className:"absolute dark:text-dark-monetr-brand-subtle top-2 right-2"}),/*#__PURE__*/react.cloneElement(props.icon,{className:"w-16 h-12 md:w-20 md:h-12 ml-4 md:ml-0 md:mt-6"}),/*#__PURE__*/react.createElement("div",{className:"flex flex-col gap-2 items-center h-full md:mt-4 text-center w-full md:w-auto"},/*#__PURE__*/react.createElement(MSpan,{className:"text-lg font-medium"},props.name),/*#__PURE__*/react.createElement(MSpan,{color:"subtle"},props.description),!props.comingSoon&&/*#__PURE__*/react.createElement(MSpan,{className:"md:block hidden"},""),props.comingSoon&&/*#__PURE__*/react.createElement(MSpan,{className:"md:mt-5 font-medium"},"Coming Soon"),props.disabled&&/*#__PURE__*/react.createElement(MSpan,{className:"md:mt-5 font-medium"},"Unavailable")))}try{setup.displayName="setup",setup.__docgenInfo={description:"",displayName:"setup",props:{alreadyOnboarded:{defaultValue:null,description:"",name:"alreadyOnboarded",required:!1,type:{name:"boolean"}},manualEnabled:{defaultValue:null,description:"",name:"manualEnabled",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/pages/setup.tsx#setup"]={docgenInfo:setup.__docgenInfo,name:"setup",path:"../interface/src/pages/setup.tsx#setup"})}catch(__react_docgen_typescript_loader_error){}function LinkCreatePage(){var config=useAppConfigurationSink().result;return /*#__PURE__*/react.createElement("div",{className:"flex flex-col w-full"},/*#__PURE__*/react.createElement(MTopNavigation,{icon:PowerOutlined.A,title:"Add another connection"}),/*#__PURE__*/react.createElement(SetupPage,{alreadyOnboarded:!0,manualEnabled:null==config?void 0:config.manualEnabled}))}var react_google_recaptcha_lib_esm=__webpack_require__("../node_modules/react-google-recaptcha/lib/esm/index.js");function MCaptcha(props){var formikContext=(0,formik_esm.j7)(),config=useAppConfiguration();if(!props.show||!(null==config?void 0:config.ReCAPTCHAKey))return null;function onVerify(verification){(null==formikContext?void 0:formikContext.setFieldValue)&&props.name&&formikContext.setFieldValue(props.name,verification,!1)}var loading=!!(null==formikContext?void 0:formikContext.isSubmitting),classes=mergeTailwind(["flex","items-center","justify-center","w-full"],props.className);return /*#__PURE__*/react.createElement("div",{className:classes},!loading&&/*#__PURE__*/react.createElement(react_google_recaptcha_lib_esm.A,{"data-testid":props["data-testid"],sitekey:config.ReCAPTCHAKey,onChange:onVerify}),loading&&/*#__PURE__*/react.createElement(CircularProgress.A,null))}try{MCaptcha.displayName="MCaptcha",MCaptcha.__docgenInfo={description:"",displayName:"MCaptcha",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},show:{defaultValue:null,description:"",name:"show",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"",name:"data-testid",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MCaptcha.tsx#MCaptcha"]={docgenInfo:MCaptcha.__docgenInfo,name:"MCaptcha",path:"../interface/src/components/MCaptcha.tsx#MCaptcha"})}catch(__react_docgen_typescript_loader_error){}function useLogin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function useLogin_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){useLogin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){useLogin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function useLogin_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useLogin(){var _ref,navigate=(0,react_router_dist.Zp)(),queryClient=(0,QueryClientProvider.jE)();return _ref=useLogin_async_to_generator(function(loginArgs){return useLogin_ts_generator(this,function(_state){var _ref,_ref1;return[2,(0,util_request.A)().post("/authentication/login",loginArgs).then((_ref=useLogin_async_to_generator(function(result){return useLogin_ts_generator(this,function(_state){return[2,queryClient.invalidateQueries(["/users/me"]).then(function(){var _result_data;return navigate((null==result?void 0:null===(_result_data=result.data)||void 0===_result_data?void 0:_result_data.nextUrl)||"/")})]})}),function(result){return _ref.apply(this,arguments)})).catch((_ref1=useLogin_async_to_generator(function(error){var _error_response,_error_response_data,_error_response1,_error_response_data1,_error_response2;return useLogin_ts_generator(this,function(_state){if((null==error?void 0:null===(_error_response=error.response)||void 0===_error_response?void 0:_error_response.status)===428)switch(null==error?void 0:null===(_error_response1=error.response)||void 0===_error_response1?void 0:null===(_error_response_data=_error_response1.data)||void 0===_error_response_data?void 0:_error_response_data.code){case"PASSWORD_CHANGE_REQUIRED":return[2,navigate("/password/reset",{state:{message:"You are required to change your password before authenticating.",token:null==error?void 0:null===(_error_response2=error.response)||void 0===_error_response2?void 0:null===(_error_response_data1=_error_response2.data)||void 0===_error_response_data1?void 0:_error_response_data1.resetToken}})];case"MFA_REQUIRED":return[2,queryClient.invalidateQueries(["/users/me"]).then(function(){return navigate("/login/multifactor")})];case"EMAIL_NOT_VERIFIED":return[2,navigate("/verify/email/resend",{state:{emailAddress:loginArgs.email}})]}throw error})}),function(error){return _ref1.apply(this,arguments)}))]})}),function(loginArgs){return _ref.apply(this,arguments)}}var emailRegex=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function verifyEmailAddress(emailAddress){return emailRegex.test(emailAddress.toLowerCase())}function login_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function login_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){login_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){login_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function login_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var login_initialValues={email:"",password:"",captcha:null};function validator(values){var errors={};return(null==values?void 0:values.email.length)===0&&(errors.email="Email must be provided."),(null==values?void 0:values.email)&&!verifyEmailAddress(null==values?void 0:values.email)&&(errors.email="Email must be valid."),(null==values?void 0:values.password.length)<8&&(errors.password="Password must be at least 8 characters long."),errors}function login_Login(){var enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,config=useAppConfiguration(),login=useLogin();function ForgotPasswordButton(){return(null==config?void 0:config.allowForgotPassword)?/*#__PURE__*/react.createElement(MLink,{to:"/password/forgot",size:"sm","data-testid":"login-forgot",tabIndex:5},"Forgot password?"):null}function SignUpButton(){return(null==config?void 0:config.allowSignUp)?/*#__PURE__*/react.createElement("div",{className:"w-full lg:w-1/4 sm:w-1/3 mt-1 flex justify-center gap-1"},/*#__PURE__*/react.createElement(MSpan,{color:"subtle",className:"text-sm"},"Not a user?"),/*#__PURE__*/react.createElement(MLink,{to:"/register",size:"sm","data-testid":"login-signup",tabIndex:4},"Sign up now")):null}function submit(values,helpers){return _submit.apply(this,arguments)}function _submit(){return(_submit=login_async_to_generator(function(values,helpers){return login_ts_generator(this,function(_state){return helpers.setSubmitting(!0),[2,login({captcha:values.captcha,email:values.email,password:values.password}).catch(function(error){var _error_response_data,_error_response;return enqueueSnackbar((null==error?void 0:null===(_error_response=error.response)||void 0===_error_response?void 0:null===(_error_response_data=_error_response.data)||void 0===_error_response_data?void 0:_error_response_data.error)||"Failed to authenticate.",{variant:"error",disableWindowBlurListener:!0})}).finally(function(){return helpers.setSubmitting(!1)})]})})).apply(this,arguments)}return /*#__PURE__*/react.createElement(components_MForm,{initialValues:login_initialValues,validate:validator,onSubmit:submit,className:"w-full h-full flex pt-10 md:pt-0 md:pb-10 md:justify-center items-center flex-col gap-1 px-5"},/*#__PURE__*/react.createElement("div",{className:"max-w-[128px] w-full"},/*#__PURE__*/react.createElement(MLogo,null)),/*#__PURE__*/react.createElement(MSpan,null,"Sign into your monetr account"),/*#__PURE__*/react.createElement(MTextField,{"data-testid":"login-email",autoFocus:!0,label:"Email Address",name:"email",type:"email",required:!0,className:"w-full xl:w-1/5 lg:w-1/4 md:w-1/3 sm:w-1/2",tabIndex:1}),/*#__PURE__*/react.createElement(MTextField,{autoComplete:"current-password",className:"w-full xl:w-1/5 lg:w-1/4 md:w-1/3 sm:w-1/2","data-testid":"login-password",label:"Password",labelDecorator:ForgotPasswordButton,name:"password",required:!0,type:"password",tabIndex:2}),/*#__PURE__*/react.createElement(MCaptcha,{name:"captcha",show:!!(null==config?void 0:config.verifyLogin)}),/*#__PURE__*/react.createElement("div",{className:"w-full xl:w-1/5 lg:w-1/4 md:w-1/3 sm:w-1/2 mt-1"},/*#__PURE__*/react.createElement(FormButton,{"data-testid":"login-submit",variant:"primary",role:"form",type:"submit",className:"w-full",tabIndex:3},"Sign In")),/*#__PURE__*/react.createElement(SignUpButton,null))}var input_otp_dist=__webpack_require__("../node_modules/input-otp/dist/index.mjs"),dot=__webpack_require__("../node_modules/lucide-react/dist/esm/icons/dot.js");function InputOTP_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function InputOTP_extends(){return(InputOTP_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function InputOTP_object_destructuring_empty(o){if(null==o)throw TypeError("Cannot destructure "+o);return o}function InputOTP_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){InputOTP_define_property(target,key,source[key])})}return target}function InputOTP_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=InputOTP_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function InputOTP_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}var InputOTP=/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,containerClassName=_param.containerClassName,props=InputOTP_object_without_properties(_param,["className","containerClassName"]);return /*#__PURE__*/react.createElement(input_otp_dist.wE,InputOTP_object_spread({ref:ref,containerClassName:mergeTailwind("flex items-center gap-2 has-[:disabled]:opacity-50",containerClassName),className:mergeTailwind("disabled:cursor-not-allowed",className)},props))});InputOTP.displayName="InputOTP";var InputOTPGroup=/*#__PURE__*/react.forwardRef(function(_param,ref){var className=_param.className,props=InputOTP_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement("div",InputOTP_object_spread({ref:ref,className:mergeTailwind("flex items-center",className)},props))});InputOTPGroup.displayName="InputOTPGroup";var InputOTPSlot=/*#__PURE__*/react.forwardRef(function(_param,ref){var index=_param.index,className=_param.className,props=InputOTP_object_without_properties(_param,["index","className"]),_inputOTPContext_slots_index=react.useContext(input_otp_dist.dK).slots[index],char=_inputOTPContext_slots_index.char,hasFakeCaret=_inputOTPContext_slots_index.hasFakeCaret,finalClassName=mergeTailwind("relative flex h-10 w-10 items-center justify-center","border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",{"z-10 ring-2 ring-ring ring-offset-background":_inputOTPContext_slots_index.isActive},className);return /*#__PURE__*/react.createElement("div",InputOTP_object_spread({ref:ref,className:finalClassName},props),char,hasFakeCaret&&/*#__PURE__*/react.createElement("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center"},/*#__PURE__*/react.createElement("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})))});InputOTPSlot.displayName="InputOTPSlot";var InputOTPSeparator=/*#__PURE__*/react.forwardRef(function(_param,ref){var props=InputOTP_extends({},InputOTP_object_destructuring_empty(_param));return /*#__PURE__*/react.createElement("div",InputOTP_object_spread({ref:ref,role:"separator"},props),/*#__PURE__*/react.createElement(dot.A,null))});InputOTPSeparator.displayName="InputOTPSeparator";try{InputOTP.displayName="InputOTP",InputOTP.__docgenInfo={description:"",displayName:"InputOTP",props:{render:{defaultValue:null,description:"",name:"render",required:!1,type:{name:"InputOTPRenderFn"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(newValue: string) => unknown"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},textAlign:{defaultValue:null,description:"",name:"textAlign",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"left"'},{value:'"right"'}]}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!0,type:{name:"number"}},onComplete:{defaultValue:null,description:"",name:"onComplete",required:!1,type:{name:"(...args: any[]) => unknown"}},pushPasswordManagerStrategy:{defaultValue:null,description:"",name:"pushPasswordManagerStrategy",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"increase-width"'}]}},containerClassName:{defaultValue:null,description:"",name:"containerClassName",required:!1,type:{name:"string"}},noScriptCSSFallback:{defaultValue:null,description:"",name:"noScriptCSSFallback",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/InputOTP.tsx#InputOTP"]={docgenInfo:InputOTP.__docgenInfo,name:"InputOTP",path:"../interface/src/components/InputOTP.tsx#InputOTP"})}catch(__react_docgen_typescript_loader_error){}function multifactor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function multifactor_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){multifactor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){multifactor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function multifactor_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var multifactor_initialValues={totp:""};function MultifactorAuthenticationPage(){var enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,queryClient=(0,QueryClientProvider.jE)();function submit(values,helpers){return _submit.apply(this,arguments)}function _submit(){return(_submit=multifactor_async_to_generator(function(values,helpers){return multifactor_ts_generator(this,function(_state){return helpers.setSubmitting(!0),[2,(0,util_request.A)().post("/authentication/multifactor",{totp:values.totp}).then(function(){return queryClient.invalidateQueries(["/users/me"])}).catch(function(error){var _error_response_data,_error_response;return enqueueSnackbar((null==error?void 0:null===(_error_response=error.response)||void 0===_error_response?void 0:null===(_error_response_data=_error_response.data)||void 0===_error_response_data?void 0:_error_response_data.error)||"Failed to validate TOTP code.",{variant:"error",disableWindowBlurListener:!0})})]})})).apply(this,arguments)}function validate(values){var errors={};return 6!=values.totp.length&&(errors.totp="TOTP code must be 6 digits"),errors}function formatContinueButton(values){var length=values.totp.length;return length<6?"".concat(6-length," digits left"):"Continue"}return /*#__PURE__*/react.createElement(components_MForm,{initialValues:multifactor_initialValues,onSubmit:submit,validate:validate,validateOnMount:!0,className:"w-full h-full flex pt-10 md:pt-0 md:pb-10 md:justify-center items-center flex-col gap-2 px-5"},function(formik){return /*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement("div",{className:"max-w-[128px] w-full"},/*#__PURE__*/react.createElement(MLogo,null)),/*#__PURE__*/react.createElement(MSpan,{className:"w-full xl:w-1/5 lg:w-1/4 md:w-1/3 sm:w-1/2 mt-1 text-center"},"Please provide the 6-digit code from your authenticator app"),/*#__PURE__*/react.createElement(InputOTP,{name:"totp",maxLength:6,required:!0,onChange:function(value){return formik.setFieldValue("totp",value)},disabled:formik.isSubmitting,autoFocus:!0},/*#__PURE__*/react.createElement(InputOTPGroup,null,/*#__PURE__*/react.createElement(InputOTPSlot,{index:0}),/*#__PURE__*/react.createElement(InputOTPSlot,{index:1}),/*#__PURE__*/react.createElement(InputOTPSlot,{index:2})),/*#__PURE__*/react.createElement(InputOTPSeparator,null),/*#__PURE__*/react.createElement(InputOTPGroup,null,/*#__PURE__*/react.createElement(InputOTPSlot,{index:3}),/*#__PURE__*/react.createElement(InputOTPSlot,{index:4}),/*#__PURE__*/react.createElement(InputOTPSlot,{index:5}))),/*#__PURE__*/react.createElement("div",{className:"w-full xl:w-1/5 lg:w-1/4 md:w-1/3 sm:w-1/2 mt-1"},/*#__PURE__*/react.createElement(MFormButton,{disabled:!formik.isValid,"data-testid":"multifactor-submit",color:"primary",variant:"solid",role:"form",type:"submit",className:"w-full",tabIndex:3},formatContinueButton(formik.values))),/*#__PURE__*/react.createElement(LogoutFooter,null))})}var Backdrop=__webpack_require__("../node_modules/@mui/material/Backdrop/Backdrop.js");function useLogout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function useLogout_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){useLogout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){useLogout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function useLogout_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useLogout(){var queryClient=(0,QueryClientProvider.jE)();return /*#__PURE__*/useLogout_async_to_generator(function(){return useLogout_ts_generator(this,function(_state){return[2,(0,util_request.A)().get("/authentication/logout").then(function(){return queryClient.invalidateQueries(["/users/me"])})]})})}function useMountEffect(callback){(0,react.useEffect)(callback,[])}function LogoutPage(){var logout=useLogout();return useMountEffect(function(){logout().finally(function(){return window.location.replace("/login")})}),/*#__PURE__*/react.createElement(Backdrop.A,{open:!0},/*#__PURE__*/react.createElement(CircularProgress.A,{color:"inherit"}))}function useSendForgotPassword_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function useSendForgotPassword_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){useSendForgotPassword_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){useSendForgotPassword_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function useSendForgotPassword_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useSendForgotPassword(){var _ref,enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar;return _ref=useSendForgotPassword_async_to_generator(function(email,ReCAPTCHA){return useSendForgotPassword_ts_generator(this,function(_state){return[2,(0,util_request.A)().post("/authentication/forgot",{email:email,captcha:ReCAPTCHA}).then(function(){enqueueSnackbar("Successfully sent password reset link.",{variant:"success",disableWindowBlurListener:!0})}).catch(function(error){var _error_response,message=error.response.data.error||"Failed to send password reset email.",variant="error";(null==error?void 0:null===(_error_response=error.response)||void 0===_error_response?void 0:_error_response.status)===428&&(variant="warning"),enqueueSnackbar(message,{variant:variant,disableWindowBlurListener:!0})})]})}),function(email,ReCAPTCHA){return _ref.apply(this,arguments)}}function forgot_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function forgot_array_with_holes(arr){if(Array.isArray(arr))return arr}function forgot_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function forgot_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){forgot_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){forgot_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function forgot_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function forgot_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function forgot_sliced_to_array(arr,i){return forgot_array_with_holes(arr)||forgot_iterable_to_array_limit(arr,i)||forgot_unsupported_iterable_to_array(arr,i)||forgot_non_iterable_rest()}function forgot_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return forgot_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return forgot_array_like_to_array(o,minLen)}}function forgot_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var forgot_initialValues={email:"",captcha:null};function ForgotPasswordComplete(){return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex pt-10 md:pt-0 md:pb-10 md:justify-center items-center flex-col gap-1 px-5"},/*#__PURE__*/react.createElement("div",{className:"max-w-[128px] w-full"},/*#__PURE__*/react.createElement(MLogo,null)),/*#__PURE__*/react.createElement("div",{className:"flex flex-col items-center"},/*#__PURE__*/react.createElement(MSpan,null,"Check your email"),/*#__PURE__*/react.createElement(MSpan,{color:"subtle",className:"max-w-[248px] text-center text-sm"},"If a user was found with the email provided, then you should receive an email with instructions on how to reset your password.")),/*#__PURE__*/react.createElement("div",{className:"w-full lg:w-1/4 sm:w-1/3 mt-1 flex justify-center gap-1"},/*#__PURE__*/react.createElement(MSpan,{color:"subtle",className:"text-sm"},"Return to"),/*#__PURE__*/react.createElement(MLink,{to:"/login",size:"sm"},"Sign in")))}function ForgotPasswordNew(){var config=useAppConfiguration(),sendForgotPassword=useSendForgotPassword(),_useState=forgot_sliced_to_array((0,react.useState)(!1),2),isComplete=_useState[0],setIsComplete=_useState[1];function validate(values){var errors={};return values.email&&!verifyEmailAddress(values.email)&&(errors.email="Please provide a valid email address."),errors}function submit(values,helpers){return _submit.apply(this,arguments)}function _submit(){return(_submit=forgot_async_to_generator(function(values,helpers){return forgot_ts_generator(this,function(_state){return helpers.setSubmitting(!0),[2,sendForgotPassword(values.email,values.captcha).then(function(){return setIsComplete(!0)}).finally(function(){return helpers.setSubmitting(!1)})]})})).apply(this,arguments)}return isComplete?/*#__PURE__*/react.createElement(ForgotPasswordComplete,null):/*#__PURE__*/react.createElement(components_MForm,{initialValues:forgot_initialValues,validate:validate,onSubmit:submit,className:"w-full h-full flex pt-10 md:pt-0 md:pb-10 md:justify-center items-center flex-col gap-1 px-5"},/*#__PURE__*/react.createElement("div",{className:"max-w-[128px] w-full"},/*#__PURE__*/react.createElement(MLogo,null)),/*#__PURE__*/react.createElement("div",{className:"flex flex-col items-center"},/*#__PURE__*/react.createElement(MSpan,null,"Forgot your password?"),/*#__PURE__*/react.createElement(MSpan,{color:"subtle",className:"text-sm"},"We can email you a link to reset it.")),/*#__PURE__*/react.createElement(MTextField,{autoFocus:!0,autoComplete:"username",label:"Email Address",name:"email",type:"email",required:!0,className:"w-full xl:w-1/5 lg:w-1/4 md:w-1/3 sm:w-1/2"}),/*#__PURE__*/react.createElement(MCaptcha,{className:"mb-1",name:"captcha",show:!!(null==config?void 0:config.verifyForgotPassword)}),/*#__PURE__*/react.createElement("div",{className:"w-full xl:w-1/5 lg:w-1/4 md:w-1/3 sm:w-1/2 mt-1"},/*#__PURE__*/react.createElement(MFormButton,{color:"primary",variant:"solid",role:"form",type:"submit",className:"w-full"},"Reset Password")),/*#__PURE__*/react.createElement("div",{className:"w-full lg:w-1/4 sm:w-1/3 mt-1 flex justify-center gap-1"},/*#__PURE__*/react.createElement(MSpan,{color:"subtle",className:"text-sm"},"Remembered your password?"),/*#__PURE__*/react.createElement(MLink,{to:"/login",size:"sm"},"Sign in")))}function useResetPassword_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function useResetPassword_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){useResetPassword_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){useResetPassword_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function useResetPassword_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useResetPassword(){var _ref,enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,navigate=(0,react_router_dist.Zp)();return _ref=useResetPassword_async_to_generator(function(newPassword,token){return useResetPassword_ts_generator(this,function(_state){return[2,(0,util_request.A)().post("/authentication/reset",{token:token,password:newPassword}).then(function(){enqueueSnackbar("Password has been reset, please login with your new credentials.",{variant:"success",disableWindowBlurListener:!0}),navigate("/login")}).catch(function(error){throw enqueueSnackbar(error.response.data.error||"Failed to reset password.",{variant:"error",disableWindowBlurListener:!0}),error})]})}),function(newPassword,token){return _ref.apply(this,arguments)}}function reset_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function reset_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){reset_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){reset_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function reset_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var reset_initialValues={password:"",verifyPassword:""};function PasswordResetNew(){var enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,location1=(0,react_router_dist.zy)(),navigate=(0,react_router_dist.Zp)(),resetPassword=useResetPassword(),routeState=(0,react_router_dist.zy)().state,message=routeState&&routeState.message||"Enter the new password you would like to use.",token=new URLSearchParams(location1.search).get("token")||routeState&&routeState.token;function submit(values,helpers){return _submit.apply(this,arguments)}function _submit(){return(_submit=reset_async_to_generator(function(values,helpers){return reset_ts_generator(this,function(_state){return helpers.setSubmitting(!0),[2,resetPassword(values.password,token).catch(function(){return helpers.setSubmitting(!1)})]})})).apply(this,arguments)}function validate(values){var errors={};return values.password&&values.password.trim().length<8&&(errors.password="Password must be at least 8 characters long."),values.verifyPassword&&values.password!==values.verifyPassword&&(errors.verifyPassword="Passwords must match."),errors}return(0,react.useEffect)(function(){token||(navigate("/login"),enqueueSnackbar("You must get a password reset link to change your password.",{variant:"warning",disableWindowBlurListener:!0})),window.history.replaceState({},document.title,token?location1.pathname:"/login")},[token,enqueueSnackbar,navigate,location1.pathname]),/*#__PURE__*/react.createElement(components_MForm,{onSubmit:submit,initialValues:reset_initialValues,validate:validate,className:"w-full h-full flex flex-col pt-10 md:pt-0 mb:pb-10 md:justify-center items-center px-5 gap-1"},/*#__PURE__*/react.createElement("div",{className:"flex items-center flex-col gap-1 w-full xl:w-1/5 lg:w-1/4 md:w-1/3 sm:w-1/2"},/*#__PURE__*/react.createElement("div",{className:"max-w-[128px] w-full"},/*#__PURE__*/react.createElement(MLogo,null)),/*#__PURE__*/react.createElement(MSpan,{className:"flex items-center text-center"},message),/*#__PURE__*/react.createElement(MTextField,{autoFocus:!0,autoComplete:"current-password",label:"Password",name:"password",type:"password",required:!0,className:"w-full"}),/*#__PURE__*/react.createElement(MTextField,{autoComplete:"current-password",label:"Verify Password",name:"verifyPassword",type:"password",required:!0,className:"w-full"}),/*#__PURE__*/react.createElement(MFormButton,{color:"primary",variant:"solid",role:"form",type:"submit",className:"w-full"},"Reset Password")),/*#__PURE__*/react.createElement("div",{className:"w-full lg:w-1/4 sm:w-1/3 mt-1 flex justify-center gap-1"},/*#__PURE__*/react.createElement(MSpan,{color:"subtle",className:"text-sm"},"Remembered your password?"),/*#__PURE__*/react.createElement(MLink,{to:"/login",size:"sm"},"Sign in")))}var Card=__webpack_require__("../node_modules/@mui/material/Card/Card.js"),CardContent=__webpack_require__("../node_modules/@mui/material/CardContent/CardContent.js"),OAuthRedirectPlaidLink=function(props){var _usePlaidLink=(0,index_umd.usePlaidLink)({token:props.linkToken,receivedRedirectUri:window.location.href,onSuccess:props.plaidOnSuccess,onExit:props.plaidOnExit,onEvent:props.plaidOnEvent,onLoad:props.plaidOnLoad}),open=_usePlaidLink.open,ready=_usePlaidLink.ready;return(0,react.useEffect)(function(){ready&&open()},[ready,open]),null};try{OAuthRedirectPlaidLink.displayName="OAuthRedirectPlaidLink",OAuthRedirectPlaidLink.__docgenInfo={description:"",displayName:"OAuthRedirectPlaidLink",props:{linkToken:{defaultValue:null,description:"",name:"linkToken",required:!0,type:{name:"string"}},plaidOnSuccess:{defaultValue:null,description:"",name:"plaidOnSuccess",required:!0,type:{name:"PlaidLinkOnSuccess"}},plaidOnExit:{defaultValue:null,description:"",name:"plaidOnExit",required:!1,type:{name:"PlaidLinkOnExit"}},plaidOnLoad:{defaultValue:null,description:"",name:"plaidOnLoad",required:!1,type:{name:"PlaidLinkOnLoad"}},plaidOnEvent:{defaultValue:null,description:"",name:"plaidOnEvent",required:!1,type:{name:"PlaidLinkOnEvent"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Plaid/OAuthRedirectPlaidLink.tsx#OAuthRedirectPlaidLink"]={docgenInfo:OAuthRedirectPlaidLink.__docgenInfo,name:"OAuthRedirectPlaidLink",path:"../interface/src/components/Plaid/OAuthRedirectPlaidLink.tsx#OAuthRedirectPlaidLink"})}catch(__react_docgen_typescript_loader_error){}function oauth_return_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function oauth_return_array_with_holes(arr){if(Array.isArray(arr))return arr}function oauth_return_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function oauth_return_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){oauth_return_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){oauth_return_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function oauth_return_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function oauth_return_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oauth_return_sliced_to_array(arr,i){return oauth_return_array_with_holes(arr)||oauth_return_iterable_to_array_limit(arr,i)||oauth_return_unsupported_iterable_to_array(arr,i)||oauth_return_non_iterable_rest()}function oauth_return_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return oauth_return_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oauth_return_array_like_to_array(o,minLen)}}function oauth_return_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function OauthReturn(){var queryClient=(0,QueryClientProvider.jE)(),_useState=oauth_return_sliced_to_array((0,react.useState)({loading:!0}),2),state=_useState[0],setState=_useState[1];(0,react.useEffect)(function(){(0,util_request.A)().get("/plaid/link/token/new?use_cache=true").then(function(result){return setState({loading:!1,linkToken:result.data.linkToken})}).catch(function(error){return setState({loading:!1,error:error})})},[]);var navigate=(0,react_router_dist.Zp)();function longPollSetup(){return _longPollSetup.apply(this,arguments)}function _longPollSetup(){return(_longPollSetup=oauth_return_async_to_generator(function(){var longPollAttempts,linkId;return oauth_return_ts_generator(this,function(_state){return(setState(function(prevState){return{longPollAttempts:prevState.longPollAttempts+1}}),longPollAttempts=state.longPollAttempts,linkId=state.linkId,longPollAttempts>6)?[2,Promise.resolve()]:[2,(0,util_request.A)().get("/plaid/link/setup/wait/".concat(linkId)).then(function(){return Promise.resolve()}).catch(function(error){if(408===error.response.status)return longPollSetup();throw error})]})})).apply(this,arguments)}function plaidLinkExit(error,metadata){return error&&esm_exports.r({message:"Plaid link exited with error",level:"error",tags:{"plaid.request_id":metadata.request_id,"plaid.link_session_id":metadata.link_session_id},breadcrumbs:[{type:"info",level:"info",message:"Error from Plaid link",data:error}]}),navigate("/")}function plaidLinkSuccess(public_token,metadata){return _plaidLinkSuccess.apply(this,arguments)}function _plaidLinkSuccess(){return(_plaidLinkSuccess=oauth_return_async_to_generator(function(public_token,metadata){return oauth_return_ts_generator(this,function(_state){return setState({loading:!0}),[2,void(0,util_request.A)().post("/plaid/link/token/callback",{publicToken:public_token,institutionId:metadata.institution.institution_id,institutionName:metadata.institution.name,accountIds:metadata.accounts.map(function(account){return account.id})}).then(function(result){return setState({linkId:result.data.linkId}),longPollSetup().then(function(){return Promise.all([queryClient.invalidateQueries(["/links"]),queryClient.invalidateQueries(["/bank_accounts"])])})})]})})).apply(this,arguments)}function renderContents(){return state.loading||!state.linkToken?/*#__PURE__*/react.createElement("div",null,/*#__PURE__*/react.createElement(Typography.A,{variant:"h5"},"One moment..."),/*#__PURE__*/react.createElement("div",{className:"flex justify-center items-center p-5 m-5"},/*#__PURE__*/react.createElement(CircularProgress.A,null))):/*#__PURE__*/react.createElement("div",null,/*#__PURE__*/react.createElement(OAuthRedirectPlaidLink,{linkToken:state.linkToken,plaidOnSuccess:plaidLinkSuccess,plaidOnExit:plaidLinkExit}))}return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex justify-center items-center p-10"},/*#__PURE__*/react.createElement("div",null,/*#__PURE__*/react.createElement(Card.A,null,/*#__PURE__*/react.createElement(CardContent.A,null,renderContents()))))}function useSignUp_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function useSignUp_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){useSignUp_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){useSignUp_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function useSignUp_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useSignUp(){var _ref;return _ref=useSignUp_async_to_generator(function(args){return useSignUp_ts_generator(this,function(_state){return[2,(0,util_request.A)().post("/authentication/register",args).then(function(result){return result.data})]})}),function(args){return _ref.apply(this,arguments)}}function getLocale(){var locale=Intl.DateTimeFormat().resolvedOptions().locale;return locale||void 0==navigator.languages||(locale=navigator.languages[0]),locale||(locale=navigator.language),locale.replace("-","_")}function getTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function register_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function register_array_with_holes(arr){if(Array.isArray(arr))return arr}function register_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function register_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){register_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){register_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function register_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function register_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function register_sliced_to_array(arr,i){return register_array_with_holes(arr)||register_iterable_to_array_limit(arr,i)||register_unsupported_iterable_to_array(arr,i)||register_non_iterable_rest()}function register_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return register_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return register_array_like_to_array(o,minLen)}}function register_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var register_initialValues={firstName:"",lastName:"",email:"",password:"",confirmPassword:""};function register_validator(values){var errors={};return(null==values?void 0:values.firstName.length)<2&&(errors.firstName="First name must have at least 2 characters."),(null==values?void 0:values.lastName.length)<2&&(errors.lastName="Last name must have at least 2 characters."),(null==values?void 0:values.email.length)===0&&(errors.email="Email must be provided."),(null==values?void 0:values.email)&&!verifyEmailAddress(null==values?void 0:values.email)&&(errors.email="Email must be valid."),(null==values?void 0:values.password.length)<8&&(errors.password="Password must be at least 8 characters long."),(null==values?void 0:values.confirmPassword)!==(null==values?void 0:values.password)&&(errors.confirmPassword="Password confirmation must match."),errors}function RegisterSuccessful(){return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex justify-center items-center flex-col"},/*#__PURE__*/react.createElement(MLogo,{className:"h-24 w-24"}),/*#__PURE__*/react.createElement(MSpan,{size:"xl",weight:"medium",className:"max-w-md text-center"},"A verification message has been sent to your email address, please verify your email."))}function Register(){var enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,config=useAppConfiguration(),signUp=useSignUp(),navigate=(0,react_router_dist.Zp)(),queryClient=(0,QueryClientProvider.jE)(),_useState=register_sliced_to_array((0,react.useState)(!1),2),successful=_useState[0],setSuccessful=_useState[1];function BetaCodeInput(){return(null==config?void 0:config.requireBetaCode)?/*#__PURE__*/react.createElement(MTextField,{label:"Beta Code",name:"betaCode",type:"text",required:!0,uppercasetext:!0,className:"w-full md:w-1/2 lg:w-1/3 xl:w-1/4"}):null}function submit(values,helpers){return _submit.apply(this,arguments)}function _submit(){return(_submit=register_async_to_generator(function(values,helpers){return register_ts_generator(this,function(_state){return helpers.setSubmitting(!0),[2,signUp({betaCode:values.betaCode,captcha:values.captcha,email:values.email,firstName:values.firstName,lastName:values.lastName,password:values.password,timezone:getTimezone(),locale:getLocale()}).then(function(result){return result.requireVerification?setSuccessful(!0):queryClient.invalidateQueries(["/users/me"]).then(function(){return result.nextUrl?navigate(result.nextUrl):navigate("/")})}).catch(function(error){enqueueSnackbar(error.response.data.error||"Failed to sign up.",{variant:"error",disableWindowBlurListener:!0})}).finally(function(){return helpers.setSubmitting(!1)})]})})).apply(this,arguments)}return successful?/*#__PURE__*/react.createElement(RegisterSuccessful,null):/*#__PURE__*/react.createElement("div",{className:"w-full h-full flex pt-10 md:pt-0 md:pb-10 md:justify-center items-center flex-col gap-1 px-5 overflow-y-auto py-4"},/*#__PURE__*/react.createElement(components_MForm,{initialValues:register_initialValues,validate:register_validator,onSubmit:submit,className:"flex flex-col md:w-1/2 lg:w-1/3 xl:w-1/4 items-center"},/*#__PURE__*/react.createElement("div",{className:"max-w-[96px] w-full"},/*#__PURE__*/react.createElement(MLogo,null)),/*#__PURE__*/react.createElement("div",{className:"flex flex-col items-center text-center"},/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"Get Started"),/*#__PURE__*/react.createElement(MSpan,{color:"subtle",className:"text-lg"},"Create your monetr account now")),/*#__PURE__*/react.createElement("div",{className:"flex flex-col sm:flex-row gap-2.5 w-full"},/*#__PURE__*/react.createElement(MTextField,{"data-testid":"register-first-name",autoFocus:!0,label:"First Name",name:"firstName",type:"text",required:!0,className:"w-full"}),/*#__PURE__*/react.createElement(MTextField,{"data-testid":"register-last-name",label:"Last Name",name:"lastName",type:"text",required:!0,className:"w-full"})),/*#__PURE__*/react.createElement(MTextField,{"data-testid":"register-email",label:"Email Address",name:"email",type:"email",required:!0,className:"w-full"}),/*#__PURE__*/react.createElement(MTextField,{autoComplete:"new-password",className:"w-full","data-testid":"register-password",label:"Password",name:"password",required:!0,type:"password"}),/*#__PURE__*/react.createElement(MTextField,{autoComplete:"new-password",className:"w-full","data-testid":"register-confirm-password",label:"Confirm Password",name:"confirmPassword",required:!0,type:"password"}),/*#__PURE__*/react.createElement(BetaCodeInput,null),/*#__PURE__*/react.createElement(MCaptcha,{className:"mb-1",name:"captcha",show:!!(null==config?void 0:config.verifyRegister)}),/*#__PURE__*/react.createElement(FormButton,{"data-testid":"register-submit",className:"w-full mt-1",role:"form",type:"submit",variant:"primary"},"Sign Up"),/*#__PURE__*/react.createElement("div",{className:"mt-1 flex justify-center gap-1 flex-col md:flex-row items-center"},/*#__PURE__*/react.createElement(MSpan,{className:"gap-1 inline-block text-center",size:"sm",color:"subtle",component:"p"},"By signing up you agree to monetr's",/*#__PURE__*/react.createElement("a",{target:"_blank",className:"text-dark-monetr-blue hover:underline focus:ring-2 focus:ring-dark-monetr-blue focus:underline",href:"https://monetr.app/policy/terms"},"Terms & Conditions")," and",/*#__PURE__*/react.createElement("a",{target:"_blank",className:"text-dark-monetr-blue hover:underline focus:ring-2 focus:ring-dark-monetr-blue focus:underline",href:"https://monetr.app/policy/privacy"},"Privacy Policy"))),/*#__PURE__*/react.createElement("div",{className:"mt-1 flex justify-center gap-1 flex-col md:flex-row items-center"},/*#__PURE__*/react.createElement(MSpan,{color:"subtle",className:"text-sm"},"Already have an account?"),/*#__PURE__*/react.createElement(MLink,{to:"/login",size:"sm"},"Sign in instead"))))}function SettingsAbout(){var _useAppConfiguration=useAppConfiguration(),release=_useAppConfiguration.release,revision=_useAppConfiguration.revision,buildType=_useAppConfiguration.buildType,buildTime=_useAppConfiguration.buildTime;return /*#__PURE__*/react.createElement("div",{className:"w-full flex flex-col p-4 gap-8"},/*#__PURE__*/react.createElement("div",{className:"w-full flex flex-col max-w-2xl"},/*#__PURE__*/react.createElement(MSpan,{size:"2xl",weight:"bold",color:"emphasis",className:"mb-4"},"About monetr"),/*#__PURE__*/react.createElement(MDivider,null),/*#__PURE__*/react.createElement("div",{className:"flex p-4"},/*#__PURE__*/react.createElement(MSpan,{className:"w-1/3",size:"lg",weight:"semibold"},"Version"),/*#__PURE__*/react.createElement(MSpan,{component:"code",size:"lg"},release||"Unknown")),/*#__PURE__*/react.createElement(MDivider,null),/*#__PURE__*/react.createElement("div",{className:"flex p-4"},/*#__PURE__*/react.createElement(MSpan,{className:"w-1/3",size:"lg",weight:"semibold"},"Revision"),/*#__PURE__*/react.createElement(MSpan,{component:"code",size:"lg"},revision?revision.slice(0,7):"Unknown")),/*#__PURE__*/react.createElement(MDivider,null),/*#__PURE__*/react.createElement("div",{className:"flex p-4"},/*#__PURE__*/react.createElement(MSpan,{className:"w-1/3",size:"lg",weight:"semibold"},"Build Type"),/*#__PURE__*/react.createElement(MSpan,{component:"code",size:"lg"},buildType||"Unknown")),/*#__PURE__*/react.createElement(MDivider,null),/*#__PURE__*/react.createElement("div",{className:"flex p-4"},/*#__PURE__*/react.createElement(MSpan,{className:"w-1/3",size:"lg",weight:"semibold"},"Build Time"),/*#__PURE__*/react.createElement(MSpan,{component:"code",size:"lg"},(0,format.A)(buildTime,"LLLL do yyyy, h:mmaaa OOOO"))),/*#__PURE__*/react.createElement(MDivider,null)),/*#__PURE__*/react.createElement("div",{className:"w-full flex flex-col max-w-2xl"},/*#__PURE__*/react.createElement(MSpan,{size:"2xl",weight:"bold",color:"emphasis",className:"mb-4"},"Need Help?"),/*#__PURE__*/react.createElement(MDivider,null),/*#__PURE__*/react.createElement("div",{className:"flex p-4"},/*#__PURE__*/react.createElement(MSpan,{className:"w-1/3",size:"lg",weight:"semibold"},"Source Code"),/*#__PURE__*/react.createElement(AboutHyperlink,{href:"https://github.com/monetr/monetr"},"https://github.com/monetr/monetr")),/*#__PURE__*/react.createElement(MDivider,null),/*#__PURE__*/react.createElement("div",{className:"flex p-4"},/*#__PURE__*/react.createElement(MSpan,{className:"w-1/3",size:"lg",weight:"semibold"},"Email"),/*#__PURE__*/react.createElement(AboutHyperlink,{href:"mailto:support@monetr.app"},"support@monetr.app")),/*#__PURE__*/react.createElement(MDivider,null),/*#__PURE__*/react.createElement("div",{className:"flex p-4"},/*#__PURE__*/react.createElement(MSpan,{className:"w-1/3",size:"lg",weight:"semibold"},"Github Discussions"),/*#__PURE__*/react.createElement(AboutHyperlink,{href:"https://github.com/monetr/monetr/discussions"},"https://github.com/monetr/monetr/discussions")),/*#__PURE__*/react.createElement(MDivider,null),/*#__PURE__*/react.createElement("div",{className:"flex p-4"},/*#__PURE__*/react.createElement(MSpan,{className:"w-1/3",size:"lg",weight:"semibold"},"Discord"),/*#__PURE__*/react.createElement(AboutHyperlink,{href:"https://discord.gg/68wTCXrhuq"},"Join Discord Server")),/*#__PURE__*/react.createElement(MDivider,null),/*#__PURE__*/react.createElement("div",{className:"flex p-4"},/*#__PURE__*/react.createElement(MSpan,{className:"w-1/3",size:"lg",weight:"semibold"},"Terms & Conditions"),/*#__PURE__*/react.createElement(AboutHyperlink,{href:"https://monetr.app/policy/terms"},"https://monetr.app/policy/terms")),/*#__PURE__*/react.createElement(MDivider,null),/*#__PURE__*/react.createElement("div",{className:"flex p-4"},/*#__PURE__*/react.createElement(MSpan,{className:"w-1/3",size:"lg",weight:"semibold"},"Privacy Policy"),/*#__PURE__*/react.createElement(AboutHyperlink,{href:"https://monetr.app/policy/privacy"},"https://monetr.app/policy/privacy")),/*#__PURE__*/react.createElement(MDivider,null)))}function AboutHyperlink(props){var className=MSpanDeriveClasses({size:"lg",className:"dark:text-dark-monetr-blue hover:underline focus:ring-2 focus:ring-dark-monetr-blue focus:underline"});return /*#__PURE__*/react.createElement("a",{className:className,target:"_blank",href:props.href},props.children)}var AccessTimeOutlined=__webpack_require__("../node_modules/@mui/icons-material/esm/AccessTimeOutlined.js"),isPast=__webpack_require__("../node_modules/date-fns/esm/isPast/index.js");function billing_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function billing_array_with_holes(arr){if(Array.isArray(arr))return arr}function billing_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function billing_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function billing_sliced_to_array(arr,i){return billing_array_with_holes(arr)||billing_iterable_to_array_limit(arr,i)||billing_unsupported_iterable_to_array(arr,i)||billing_non_iterable_rest()}function billing_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return billing_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return billing_array_like_to_array(o,minLen)}}function SettingsBilling(){var trialingUntil=useAuthenticationSink().result.trialingUntil;return /*#__PURE__*/react.createElement("div",{className:"w-full flex flex-col p-4 max-w-xl"},/*#__PURE__*/react.createElement(MSpan,{size:"2xl",weight:"bold",color:"emphasis",className:"mb-4"},"Billing"),/*#__PURE__*/react.createElement(MDivider,null),/*#__PURE__*/react.createElement(TrialingRow,{trialingUntil:trialingUntil}),/*#__PURE__*/react.createElement(ActiveSubscriptionRow,null))}function ActiveSubscriptionRow(){var enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,_useState=billing_sliced_to_array((0,react.useState)(!1),2),loading=_useState[0],setLoading=_useState[1],hasSubscription=useAuthenticationSink().result.hasSubscription,handleManageSubscription=(0,react.useCallback)(function(){setLoading(!0),(0,util_request.A)().get("/billing/portal").then(function(result){return window.location.assign(result.data.url)}).catch(function(error){var _error_response_data,_error_response;setLoading(!1),enqueueSnackbar((null==error?void 0:null===(_error_response=error.response)||void 0===_error_response?void 0:null===(_error_response_data=_error_response.data)||void 0===_error_response_data?void 0:_error_response_data.error)||"Failed to prepare Stripe billing session.",{variant:"error",disableWindowBlurListener:!0})})},[enqueueSnackbar]);return hasSubscription?/*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement("div",{className:"flex justify-between py-4"},/*#__PURE__*/react.createElement(MSpan,null,"Subscription Status"),/*#__PURE__*/react.createElement(MBadge,{className:"bg-green-600"},"Active")),/*#__PURE__*/react.createElement(MDivider,null),/*#__PURE__*/react.createElement(MBaseButton,{className:"ml-auto mt-4 max-w-xs",color:"primary",disabled:loading,onClick:handleManageSubscription},"Manage Your Subscription")):null}function TrialingRow(props){if(!props.trialingUntil||(0,isPast.A)(props.trialingUntil))return null;var trialEndDate=(0,isThisYear.A)(props.trialingUntil)?(0,format.A)(props.trialingUntil,"MMMM do"):(0,format.A)(props.trialingUntil,"MMMM do, yyyy");return /*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement("div",{className:"flex justify-between py-4"},/*#__PURE__*/react.createElement(MSpan,null,"Subscription Status"),/*#__PURE__*/react.createElement(MBadge,{className:"bg-yellow-600"},/*#__PURE__*/react.createElement(AccessTimeOutlined.A,null),"Trialing Until ",trialEndDate)),/*#__PURE__*/react.createElement(MDivider,null),/*#__PURE__*/react.createElement("div",{className:"flex justify-between py-4"},/*#__PURE__*/react.createElement(MSpan,null,"You can upgrade to a paid subscription at the end of your trial.")),/*#__PURE__*/react.createElement(MDivider,null))}function SettingsOverview(){var _me_user_account,_me_user,_me_user_login,_me_user1,_me_user_login1,_me_user2,_me_user3,me=useAuthenticationSink().result,timezone={label:null==me?void 0:null===(_me_user=me.user)||void 0===_me_user?void 0:null===(_me_user_account=_me_user.account)||void 0===_me_user_account?void 0:_me_user_account.timezone,value:0};return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex flex-col justify-between pb-4"},/*#__PURE__*/react.createElement("div",{className:"w-full flex p-4 flex-col"},/*#__PURE__*/react.createElement(MTextField,{label:"First Name",name:"firstName",className:"max-w-[24rem] w-full",value:null==me?void 0:null===(_me_user1=me.user)||void 0===_me_user1?void 0:null===(_me_user_login=_me_user1.login)||void 0===_me_user_login?void 0:_me_user_login.firstName,disabled:!0}),/*#__PURE__*/react.createElement(MTextField,{label:"Last Name",name:"lastName",className:"max-w-[24rem] w-full",value:null==me?void 0:null===(_me_user2=me.user)||void 0===_me_user2?void 0:null===(_me_user_login1=_me_user2.login)||void 0===_me_user_login1?void 0:_me_user_login1.lastName,disabled:!0}),/*#__PURE__*/react.createElement(MTextField,{label:"Email Address",name:"email",className:"max-w-[24rem] w-full",value:null==me?void 0:null===(_me_user3=me.user)||void 0===_me_user3?void 0:_me_user3.login.email,disabled:!0}),/*#__PURE__*/react.createElement(MSelect,{label:"Timezone",name:"timezone",className:"max-w-[24rem] w-full",options:[timezone],value:timezone,disabled:!0})),/*#__PURE__*/react.createElement("div",{className:"w-full flex justify-end px-4"},/*#__PURE__*/react.createElement(MBaseButton,{color:"primary",disabled:!0},"Save Settings")))}function Card_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Card_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){Card_define_property(target,key,source[key])})}return target}function Card_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=Card_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function Card_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function Card_Card(_param){var className=_param.className,props=Card_object_without_properties(_param,["className"]);return /*#__PURE__*/react.createElement("div",Card_object_spread({className:(0,tw_merge.Q)("border-dark-monetr-border rounded border p-4 space-y-2",className)},props))}__webpack_require__("../node_modules/@mui/icons-material/esm/PasswordOutlined.js");try{Card_Card.displayName="Card",Card_Card.__docgenInfo={description:"",displayName:"Card",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/Card.tsx#Card"]={docgenInfo:Card_Card.__docgenInfo,name:"Card",path:"../interface/src/components/Card.tsx#Card"})}catch(__react_docgen_typescript_loader_error){}var rectangle_ellipsis=__webpack_require__("../node_modules/lucide-react/dist/esm/icons/rectangle-ellipsis.js");function ChangePasswordModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ChangePasswordModal_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){ChangePasswordModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ChangePasswordModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function ChangePasswordModal_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var ChangePasswordModal_initialValues={currentPassword:"",newPassword:"",repeatPassword:""};function ChangePasswordModal(){var modal=(0,lib_esm.hS)(),enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,ref=(0,react.useRef)(null);function updatePassword(values,helpers){return _updatePassword.apply(this,arguments)}function _updatePassword(){return(_updatePassword=ChangePasswordModal_async_to_generator(function(values,helpers){return ChangePasswordModal_ts_generator(this,function(_state){return helpers.setSubmitting(!0),[2,(0,util_request.A)().put("/users/security/password",{currentPassword:values.currentPassword,newPassword:values.newPassword}).then(function(){return enqueueSnackbar("Successfully updated password.",{variant:"success",disableWindowBlurListener:!0})}).then(function(){return modal.remove()}).catch(function(error){var _error_response_data,_error_response;return enqueueSnackbar((null==error?void 0:null===(_error_response=error.response)||void 0===_error_response?void 0:null===(_error_response_data=_error_response.data)||void 0===_error_response_data?void 0:_error_response_data.error)||"Failed to change password.",{variant:"error",disableWindowBlurListener:!0})}).finally(function(){return helpers.setSubmitting(!1)})]})})).apply(this,arguments)}function validate(values){var errors={};return values.currentPassword?(values.newPassword.length<8&&(errors.newPassword="New Password must be at least 8 characters long."),0===values.repeatPassword.length&&(errors.repeatPassword="You must repeat your password."),values.repeatPassword!==values.newPassword&&(errors.repeatPassword="New Passwords must match.")):errors.currentPassword="Your current password must be provided in order to change your password.",errors}return /*#__PURE__*/react.createElement(MModal,{open:modal.visible,ref:ref,className:"sm:max-w-sm"},/*#__PURE__*/react.createElement(components_MForm,{onSubmit:updatePassword,initialValues:ChangePasswordModal_initialValues,validate:validate,className:"h-full flex flex-col gap-2 p-2 justify-between"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col"},/*#__PURE__*/react.createElement(MSpan,{weight:"bold",size:"xl",className:"mb-2"},"Change Your Password"),/*#__PURE__*/react.createElement(MTextField,{autoFocus:!0,autoComplete:"current-password",className:"w-full",label:"Current Password",name:"currentPassword",type:"password",placeholder:"********"}),/*#__PURE__*/react.createElement(MTextField,{autoComplete:"new-password",className:"w-full",label:"New Password",name:"newPassword",type:"password",placeholder:"********"}),/*#__PURE__*/react.createElement(MTextField,{autoComplete:"new-password",className:"w-full",label:"Repeat Password",name:"repeatPassword",type:"password",placeholder:"********"})),/*#__PURE__*/react.createElement("div",{className:"flex justify-end gap-2"},/*#__PURE__*/react.createElement(MFormButton,{color:"cancel",onClick:modal.remove,"data-testid":"close-change-password-modal"},"Cancel"),/*#__PURE__*/react.createElement(MFormButton,{color:"primary",type:"submit"},/*#__PURE__*/react.createElement(rectangle_ellipsis.A,{className:"mr-1"}),"Update Password"))))}var changePasswordModal=lib_esm.Ay.create(ChangePasswordModal);function showChangePasswordModal(){return lib_esm.Ay.show(changePasswordModal)}try{ChangePasswordModal.displayName="ChangePasswordModal",ChangePasswordModal.__docgenInfo={description:"",displayName:"ChangePasswordModal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/settings/security/ChangePasswordModal.tsx#ChangePasswordModal"]={docgenInfo:ChangePasswordModal.__docgenInfo,name:"ChangePasswordModal",path:"../interface/src/components/settings/security/ChangePasswordModal.tsx#ChangePasswordModal"})}catch(__react_docgen_typescript_loader_error){}var lib=__webpack_require__("../node_modules/react-qr-code/lib/index.js"),shield=__webpack_require__("../node_modules/lucide-react/dist/esm/icons/shield.js");function EnableTOTPMModal_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function EnableTOTPMModal_array_with_holes(arr){if(Array.isArray(arr))return arr}function EnableTOTPMModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function EnableTOTPMModal_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){EnableTOTPMModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){EnableTOTPMModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function EnableTOTPMModal_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function EnableTOTPMModal_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function EnableTOTPMModal_sliced_to_array(arr,i){return EnableTOTPMModal_array_with_holes(arr)||EnableTOTPMModal_iterable_to_array_limit(arr,i)||EnableTOTPMModal_unsupported_iterable_to_array(arr,i)||EnableTOTPMModal_non_iterable_rest()}function EnableTOTPMModal_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return EnableTOTPMModal_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EnableTOTPMModal_array_like_to_array(o,minLen)}}function EnableTOTPMModal_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var EnableTOTPMModal_initialValues={totp:""};function EnableTOTPModal(){var modal=(0,lib_esm.hS)(),ref=(0,react.useRef)(null),enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,queryClient=(0,QueryClientProvider.jE)(),_useState=EnableTOTPMModal_sliced_to_array((0,react.useState)(null),2),totpState=_useState[0],setTotpState=_useState[1];function submit(values,helpers){return _submit.apply(this,arguments)}function _submit(){return(_submit=EnableTOTPMModal_async_to_generator(function(values,helpers){return EnableTOTPMModal_ts_generator(this,function(_state){return helpers.setSubmitting(!0),[2,(0,util_request.A)().post("/users/security/totp/confirm",{totp:values.totp}).then(function(){return queryClient.invalidateQueries(["/users/me"])}).then(function(){return enqueueSnackbar("Multifactor authentication enabled.",{variant:"success",disableWindowBlurListener:!0})}).then(function(){return modal.remove()}).catch(function(error){var _error_response_data,_error_response;return enqueueSnackbar((null==error?void 0:null===(_error_response=error.response)||void 0===_error_response?void 0:null===(_error_response_data=_error_response.data)||void 0===_error_response_data?void 0:_error_response_data.error)||"Failed to enable TOTP.",{variant:"error",disableWindowBlurListener:!0})})]})})).apply(this,arguments)}return(0,react.useEffect)(function(){null===totpState&&(0,util_request.A)().post("/users/security/totp/setup").then(function(result){return setTotpState(result.data)}).catch(function(error){console.error("failed to get totp state",error)})},[totpState,setTotpState]),/*#__PURE__*/react.createElement(MModal,{open:modal.visible,ref:ref,className:"sm:max-w-sm",onClose:function(){return setTotpState(null)}},/*#__PURE__*/react.createElement(components_MForm,{onSubmit:submit,initialValues:EnableTOTPMModal_initialValues,className:"h-full flex flex-col gap-2 p-2 justify-between"},function(param){var setFieldValue=param.setFieldValue,isSubmitting=param.isSubmitting;return /*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement("div",{className:"flex flex-col"},/*#__PURE__*/react.createElement(MSpan,{weight:"bold",size:"xl",className:"mb-2"},"Enable Multifactor Authentication"),/*#__PURE__*/react.createElement("div",{className:"flex flex-col items-center gap-4 py-4"},/*#__PURE__*/react.createElement(MSpan,{size:"md"},"Scan the following QR code with your preferred authenticator app"),/*#__PURE__*/react.createElement("div",null,/*#__PURE__*/react.createElement("div",{className:"bg-white p-2 max-w-fit rounded-md"},/*#__PURE__*/react.createElement(lib.Ay,{value:(null==totpState?void 0:totpState.uri)||""}))),/*#__PURE__*/react.createElement(MSpan,{size:"md"},"Or enter the secret manually"),/*#__PURE__*/react.createElement(MSpan,{component:"code",size:"lg",className:"py-2 px-4"},!!(null==totpState?void 0:totpState.uri)&&new URL(totpState.uri).searchParams.get("secret")),/*#__PURE__*/react.createElement(MDivider,{className:"w-full"}),/*#__PURE__*/react.createElement(MSpan,{size:"md"},"Enter the 6-digit code generated by your app"),/*#__PURE__*/react.createElement(InputOTP,{name:"totp",maxLength:6,disabled:isSubmitting,onChange:function(value){return setFieldValue("totp",value)}},/*#__PURE__*/react.createElement(InputOTPGroup,null,/*#__PURE__*/react.createElement(InputOTPSlot,{index:0}),/*#__PURE__*/react.createElement(InputOTPSlot,{index:1}),/*#__PURE__*/react.createElement(InputOTPSlot,{index:2})),/*#__PURE__*/react.createElement(InputOTPSeparator,null),/*#__PURE__*/react.createElement(InputOTPGroup,null,/*#__PURE__*/react.createElement(InputOTPSlot,{index:3}),/*#__PURE__*/react.createElement(InputOTPSlot,{index:4}),/*#__PURE__*/react.createElement(InputOTPSlot,{index:5}))))),/*#__PURE__*/react.createElement("div",{className:"flex justify-end gap-2"},/*#__PURE__*/react.createElement(MFormButton,{color:"cancel",onClick:modal.remove,"data-testid":"close-change-password-modal"},"Cancel"),/*#__PURE__*/react.createElement(MFormButton,{color:"primary",type:"submit"},/*#__PURE__*/react.createElement(shield.A,{className:"mr-1"}),"Enable TOTP")))}))}var enableTOTPModal=lib_esm.Ay.create(EnableTOTPModal);function showEnableTOTPModal(){return lib_esm.Ay.show(enableTOTPModal)}try{EnableTOTPMModal.displayName="EnableTOTPMModal",EnableTOTPMModal.__docgenInfo={description:"",displayName:"EnableTOTPMModal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/settings/security/EnableTOTPMModal.tsx#EnableTOTPMModal"]={docgenInfo:EnableTOTPMModal.__docgenInfo,name:"EnableTOTPMModal",path:"../interface/src/components/settings/security/EnableTOTPMModal.tsx#EnableTOTPMModal"})}catch(__react_docgen_typescript_loader_error){}function TOTPCard(){var login=useAuthentication().login;return /*#__PURE__*/react.createElement(Card_Card,{className:"md:w-1/3"},/*#__PURE__*/react.createElement("div",{className:"flex justify-between items-center"},/*#__PURE__*/react.createElement("div",{className:"border-dark-monetr-border rounded border w-fit p-2 bg-dark-monetr-background-subtle"},/*#__PURE__*/react.createElement(shield.A,null)),/*#__PURE__*/react.createElement(MBaseButton,{variant:"solid",color:"primary",disabled:!!login.totpEnabledAt,onClick:showEnableTOTPModal},login.totpEnabledAt?"Already Enabled":"Enable TOTP")),/*#__PURE__*/react.createElement(MSpan,{size:"md",weight:"medium",color:"emphasis"},"Authenticator App (TOTP)"),/*#__PURE__*/react.createElement(MSpan,{component:"p"},"Get verification codes from an authenticator app such as 1Password or Google Authenticator. It works even if your phone is offline."))}var mail=__webpack_require__("../node_modules/lucide-react/dist/esm/icons/mail.js");function security_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function SettingsSecurity(){return(0,notistack_esm.dh)().enqueueSnackbar,/*#__PURE__*/react.createElement("div",{className:"p-4 flex flex-col gap-4"},/*#__PURE__*/react.createElement("div",null,/*#__PURE__*/react.createElement(MSpan,{size:"3xl",weight:"semibold",color:"emphasis",component:"h1"},"Security Settings"),/*#__PURE__*/react.createElement(MSpan,{size:"md",weight:"normal"},"Manage your password and multi-factor authentication.")),/*#__PURE__*/react.createElement("div",{className:"mt-4 flex gap-4 flex-col md:flex-row"},/*#__PURE__*/react.createElement(Card_Card,{className:"md:w-1/3"},/*#__PURE__*/react.createElement("div",{className:"flex justify-between items-center"},/*#__PURE__*/react.createElement("div",{className:"border-dark-monetr-border rounded border w-fit p-2 bg-dark-monetr-background-subtle"},/*#__PURE__*/react.createElement(rectangle_ellipsis.A,null)),/*#__PURE__*/react.createElement(MBaseButton,{variant:"solid",color:"primary",onClick:showChangePasswordModal},"Change Password")),/*#__PURE__*/react.createElement(MSpan,{size:"md",weight:"medium",color:"emphasis"},"Account Password"),/*#__PURE__*/react.createElement(MSpan,{component:"p"},"Set a secure and unique password to make sure your account stays protected.")),/*#__PURE__*/react.createElement(Card_Card,{className:"md:w-1/3"},/*#__PURE__*/react.createElement("div",{className:"flex justify-between items-center"},/*#__PURE__*/react.createElement("div",{className:"border-dark-monetr-border rounded border w-fit p-2 bg-dark-monetr-background-subtle"},/*#__PURE__*/react.createElement(mail.A,null)),/*#__PURE__*/react.createElement(MBaseButton,{variant:"solid",color:"primary",disabled:!0},"Update Email")),/*#__PURE__*/react.createElement(MSpan,{size:"md",weight:"medium",color:"emphasis"},"Email Address"),/*#__PURE__*/react.createElement(MSpan,{component:"p"},"Change your primary email address, this is what you'll use to login to monetr and can be used to recover your acount.")),/*#__PURE__*/react.createElement(TOTPCard,null)))}function MStepper_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function MStepper(props){var steps=props.steps,activeIndex=props.activeIndex,states=[0,1,2],items=steps.map(function(name,index){var state=states[[index>activeIndex,index===activeIndex,index<activeIndex].indexOf(!0)],divider=index!=steps.length-1;return /*#__PURE__*/react.createElement(MStep,{key:index,state:state,name:name,currentIndex:activeIndex,index:index,divider:divider})});return /*#__PURE__*/react.createElement("div",{className:"w-full flex gap-2 items-center bg-dark-monetr-background-focused p-2 rounded-xl"},items)}var MStepState=/*#__PURE__*/function(MStepState){return MStepState[MStepState.Inactive=0]="Inactive",MStepState[MStepState.Active=1]="Active",MStepState[MStepState.Complete=2]="Complete",MStepState}(MStepState||{});function MStep(props){var _obj,_obj1,_obj2,lineClass=mergeTailwind((MStepper_define_property(_obj={},0,["dark:border-dark-monetr-background-emphasis","border-dashed"]),MStepper_define_property(_obj,1,["dark:border-dark-monetr-background-emphasis","border-dashed"]),MStepper_define_property(_obj,2,["dark:border-green-600"]),_obj)[props.state],"flex-grow"),numberClass=mergeTailwind((MStepper_define_property(_obj1={},0,["dark:bg-dark-monetr-background-emphasis"]),MStepper_define_property(_obj1,1,["dark:bg-dark-monetr-brand-bright","dark:text-black"]),MStepper_define_property(_obj1,2,["dark:bg-green-600","dark:text-white"]),_obj1)[props.state],"rounded-full","w-5","h-5","flex","text-center","align-middle","items-center","justify-center"),textClass=mergeTailwind({"sm:inline hidden":![props.currentIndex,props.currentIndex+1].includes(props.index)},(MStepper_define_property(_obj2={},0,[]),MStepper_define_property(_obj2,1,["dark:text-dark-monetr-brand-bright"]),MStepper_define_property(_obj2,2,["dark:text-green-600"]),_obj2)[props.state]);return /*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement(MSpan,{className:"flex gap-1 items-center h-6"},/*#__PURE__*/react.createElement(MSpan,{className:numberClass},props.index+1),/*#__PURE__*/react.createElement(MSpan,{className:textClass},props.name)),props.divider&&/*#__PURE__*/react.createElement(MDivider,{className:lineClass}))}try{MStepper.displayName="MStepper",MStepper.__docgenInfo={description:"",displayName:"MStepper",props:{steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"string[]"}},activeIndex:{defaultValue:null,description:"",name:"activeIndex",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/MStepper.tsx#MStepper"]={docgenInfo:MStepper.__docgenInfo,name:"MStepper",path:"../interface/src/components/MStepper.tsx#MStepper"})}catch(__react_docgen_typescript_loader_error){}function manual_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function manual_array_with_holes(arr){if(Array.isArray(arr))return arr}function manual_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function manual_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){manual_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){manual_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function manual_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function manual_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function manual_sliced_to_array(arr,i){return manual_array_with_holes(arr)||manual_iterable_to_array_limit(arr,i)||manual_unsupported_iterable_to_array(arr,i)||manual_non_iterable_rest()}function manual_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return manual_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return manual_array_like_to_array(o,minLen)}}function manual_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var manual_initialValues={budgetName:"",accountName:"",startingBalance:0,nextPayday:(0,startOfTomorrow.A)(),ruleset:"",paydayAmount:0};function SetupManual(props){var _ref,createLink=useCreateLink(),createBankAccount=useCreateBankAccount(),createFundingSchedule=useCreateFundingSchedule(),navigate=(0,react_router_dist.Zp)(),_useState=manual_sliced_to_array((0,react.useState)(0),2),step=_useState[0],setStep=_useState[1],nextStep=(0,react.useCallback)(function(){setStep(function(step){return Math.min(step+1,3)})},[setStep]),previousStep=(0,react.useCallback)(function(){setStep(function(step){return Math.max(step-1,0)})},[setStep]),validate=(0,react.useCallback)(function(values){var errors={};return""===values.budgetName.trim()&&(errors.budgetName="You must provide a name for your budget."),""===values.accountName.trim()&&(errors.accountName="You must provide a name for your account."),values.nextPayday||(errors.nextPayday="You must provide a date."),errors},[]),submit=(0,react.useCallback)((_ref=manual_async_to_generator(function(values,helper){return manual_ts_generator(this,function(_state){return step<3?(nextStep(),[2]):(helper.setSubmitting(!0),[2,createLink({institutionName:values.budgetName,customInstitutionName:values.budgetName}).then(function(link){return createBankAccount({linkId:link.linkId,name:values.accountName,availableBalance:friendlyToAmount(values.startingBalance),currentBalance:friendlyToAmount(values.startingBalance),accountType:"depository",accountSubType:"checking"})}).then(function(bankAccount){return createFundingSchedule(new FundingSchedule({bankAccountId:bankAccount.bankAccountId,name:"Payday",nextRecurrence:(0,startOfDay.A)(values.nextPayday),ruleset:values.ruleset,estimatedDeposit:friendlyToAmount(values.paydayAmount),excludeWeekends:!1}))}).then(function(fundingSchedule){return navigate("/bank/".concat(fundingSchedule.bankAccountId,"/transactions"))}).catch(function(error){throw error})])})}),function(values,helper){return _ref.apply(this,arguments)}),[createLink,createBankAccount,createFundingSchedule,navigate,step,nextStep]);function CurrentStep(){switch(step){case 0:return /*#__PURE__*/react.createElement(IntroAndName,null);case 1:return /*#__PURE__*/react.createElement(AccountSetup,null);case 2:return /*#__PURE__*/react.createElement(BalancesSetup,null);case 3:return /*#__PURE__*/react.createElement(IncomeSetup,null);default:return null}}function SetupButtons(){switch(step){case 0:return /*#__PURE__*/react.createElement(MFormButton,{color:"primary",onClick:nextStep},"Next");case 3:return /*#__PURE__*/react.createElement("div",{className:"flex gap-4"},/*#__PURE__*/react.createElement(MFormButton,{color:"primary",onClick:previousStep},"Back"),/*#__PURE__*/react.createElement(MFormButton,{color:"primary",type:"submit"},"Finish"));default:return /*#__PURE__*/react.createElement("div",{className:"flex gap-4"},/*#__PURE__*/react.createElement(MFormButton,{color:"primary",onClick:previousStep},"Back"),/*#__PURE__*/react.createElement(MFormButton,{color:"primary",onClick:nextStep},"Next"))}}function Footer(){return props.alreadyOnboarded?null:/*#__PURE__*/react.createElement(manual_LogoutFooter,null)}return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex justify-between items-center gap-8 flex-col p-4 md:p-2 overflow-auto"},/*#__PURE__*/react.createElement("div",{className:"p-0 md:p-8 w-full"},/*#__PURE__*/react.createElement(MStepper,{steps:["Intro","Account","Balances","Income"],activeIndex:step})),/*#__PURE__*/react.createElement(components_MForm,{initialValues:manual_initialValues,validate:validate,onSubmit:submit,className:"flex flex-col md:justify-center items-center max-w-sm h-full"},/*#__PURE__*/react.createElement(MLogo,{className:"w-24 h-24"}),/*#__PURE__*/react.createElement("div",{className:"w-full flex flex-col justify-center items-center gap-2"},/*#__PURE__*/react.createElement(CurrentStep,null),/*#__PURE__*/react.createElement(SetupButtons,null)),/*#__PURE__*/react.createElement(Footer,null)),/*#__PURE__*/react.createElement("div",{className:"md:h-28"}))}function IntroAndName(){return /*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement(MSpan,{size:"2xl",weight:"medium"},"Welcome to monetr!"),/*#__PURE__*/react.createElement(MSpan,{size:"lg",color:"subtle",className:"text-center"},"Let's create a new budget to get started. What do you want to call this budget?"),/*#__PURE__*/react.createElement(MTextField,{name:"budgetName",label:"Budget Name",className:"w-full",placeholder:"My Primary Bank",required:!0}))}function AccountSetup(){return /*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement(MSpan,{size:"lg",color:"subtle",className:"text-center"},"What do you want to call the primary account you want to use for budgeting? For example; your checking account?"),/*#__PURE__*/react.createElement(MTextField,{name:"accountName",label:"Account Name",className:"w-full",placeholder:"My Checking Account",required:!0}))}function BalancesSetup(){return /*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement(MSpan,{size:"lg",color:"subtle",className:"text-center"},"What is your current available balance? monetr will use this as a starting point, you can modify this at any time later on."),/*#__PURE__*/react.createElement(MAmountField,{name:"startingBalance",label:"Starting Balance",className:"w-full",required:!0,allowNegative:!1}))}function IncomeSetup(){return /*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement(MSpan,{size:"lg",color:"subtle",className:"text-center"},"How often do you get paid and how much do you get paid typically? monetr uses this to forecast balances based on the budgets you create."),/*#__PURE__*/react.createElement(MDatePicker,{name:"nextPayday",label:"When do you get paid next?",className:"w-full",required:!0,min:(0,startOfTomorrow.A)()}),/*#__PURE__*/react.createElement(MSelectFrequency,{dateFrom:"nextPayday",menuPosition:"fixed",menuShouldScrollIntoView:!1,menuShouldBlockScroll:!0,menuPortalTarget:document.body,menuPlacement:"bottom",label:"How often do you get paid?",placeholder:"Select a funding frequency...",required:!0,className:"w-full text-start",name:"ruleset"}),/*#__PURE__*/react.createElement(MAmountField,{name:"paydayAmount",label:"How much do you usually get paid?",className:"w-full",required:!0,allowNegative:!1}))}function manual_LogoutFooter(){return /*#__PURE__*/react.createElement("div",{className:"flex justify-center gap-1 mt-4"},/*#__PURE__*/react.createElement(MSpan,{color:"subtle",size:"sm"},"Not ready to continue?"),/*#__PURE__*/react.createElement(MLink,{to:"/logout",size:"sm"},"Logout for now"))}try{manual.displayName="manual",manual.__docgenInfo={description:"",displayName:"manual",props:{alreadyOnboarded:{defaultValue:null,description:"",name:"alreadyOnboarded",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/pages/setup/manual.tsx#manual"]={docgenInfo:manual.__docgenInfo,name:"manual",path:"../interface/src/pages/setup/manual.tsx#manual"})}catch(__react_docgen_typescript_loader_error){}function CenteredLogo(){return /*#__PURE__*/react.createElement("div",{className:"flex justify-center w-full mt-5 mb-5"},/*#__PURE__*/react.createElement("img",{src:logo_namespaceObject,className:"w-1/3"}))}function SubscriptionPage(){var enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,navigate=(0,react_router_dist.Zp)();return useMountEffect(function(){(0,util_request.A)().get("/billing/portal").then(function(result){return window.location.assign(result.data.url)}).catch(function(error){var _error_response_data,_error_response;enqueueSnackbar((null==error?void 0:null===(_error_response=error.response)||void 0===_error_response?void 0:null===(_error_response_data=_error_response.data)||void 0===_error_response_data?void 0:_error_response_data.error)||"Failed to navigate to billing portal.",{variant:"error",disableWindowBlurListener:!0}),navigate("/")})}),/*#__PURE__*/react.createElement("div",{className:"flex items-center justify-center w-full h-full max-h-full"},/*#__PURE__*/react.createElement("div",{className:"w-full p-10 xl:w-3/12 lg:w-5/12 md:w-2/3 sm:w-10/12 max-w-screen-sm sm:p-0"},/*#__PURE__*/react.createElement(CenteredLogo,null),/*#__PURE__*/react.createElement("div",{className:"w-full pt-2.5 pb-2.5"},/*#__PURE__*/react.createElement(Typography.A,{variant:"h5",className:"w-full text-center"},"Loading the billing portal...")),/*#__PURE__*/react.createElement("div",{className:"w-full pt-2.5 pb-2.5 flex justify-center"},/*#__PURE__*/react.createElement(CircularProgress.A,null))))}function SimilarTransactionItem(props){var user=useAuthentication(),_useTransaction=useTransaction(props.transactionId),transaction=_useTransaction.data,isLoading=_useTransaction.isLoading,isError=_useTransaction.isError;if(isLoading)return /*#__PURE__*/react.createElement("li",{className:"group relative w-full px-1 md:px-2"},/*#__PURE__*/react.createElement("div",{className:"group animate-pulse flex h-full gap-1 rounded-lg px-2 py-1 group-hover:bg-zinc-600 md:gap-4"},/*#__PURE__*/react.createElement("div",{className:"flex w-full min-w-0 flex-1 flex-row items-center gap-4 md:w-1/2"},/*#__PURE__*/react.createElement("div",{className:"h-10 w-10 rounded-full dark:bg-dark-monetr-background-subtle","aria-label":"Transaction Avatar"}),/*#__PURE__*/react.createElement("div",{className:"flex min-w-0 grow flex-col overflow-hidden"},/*#__PURE__*/react.createElement("div",{className:"w-full rounded-xl h-4 my-1 dark:bg-dark-monetr-background-subtle","aria-label":"Transaction Name"}),/*#__PURE__*/react.createElement("div",{className:"w-1/2 rounded-xl h-3 my-1 dark:bg-dark-monetr-background-subtle opacity-70","aria-label":"Transaction Date"}))),/*#__PURE__*/react.createElement("div",{className:"flex shrink-0 items-center justify-end gap-2 md:min-w-[8em]"},/*#__PURE__*/react.createElement("div",{className:"w-1/3 rounded-xl h-4 dark:bg-dark-monetr-background-subtle","aria-label":"Transaction Amount"}))));if(isError)return null;var amountClassnames=mergeTailwind({"dark:text-dark-monetr-green":transaction.getIsAddition(),"dark:text-dark-monetr-red":!transaction.getIsAddition()},"text-end","font-semibold"),redirectUrl="/bank/".concat(transaction.bankAccountId,"/transactions/").concat(transaction.transactionId,"/details"),dateString=(0,isThisYear.A)(transaction.date)?(0,format.A)(transaction.date,"MMMM do"):(0,format.A)(transaction.date,"MMMM do, yyyy");return /*#__PURE__*/react.createElement("li",{className:"group relative w-full px-1 md:px-2"},/*#__PURE__*/react.createElement("div",{className:"group flex h-full gap-1 rounded-lg px-2 py-1 group-hover:bg-zinc-600 md:gap-4"},/*#__PURE__*/react.createElement("div",{className:"flex w-full min-w-0 flex-1 flex-row items-center gap-4 md:w-1/2"},/*#__PURE__*/react.createElement(TransactionMerchantIcon,{name:transaction.getName(),pending:transaction.isPending}),/*#__PURE__*/react.createElement("div",{className:"flex min-w-0 flex-col overflow-hidden"},/*#__PURE__*/react.createElement("span",{className:"w-full min-w-0 truncate text-base font-semibold dark:text-dark-monetr-content-emphasis"},transaction.getName()),/*#__PURE__*/react.createElement("span",{className:"w-full min-w-0 truncate text-sm font-medium dark:text-dark-monetr-content"},dateString))),/*#__PURE__*/react.createElement("div",{className:"flex shrink-0 items-center justify-end gap-2 md:min-w-[8em]"},/*#__PURE__*/react.createElement("span",{className:amountClassnames},transaction.getAmountString(user.account.locale)),/*#__PURE__*/react.createElement(ArrowLink,{redirect:redirectUrl}))))}try{SimilarTransactionItem.displayName="SimilarTransactionItem",SimilarTransactionItem.__docgenInfo={description:"",displayName:"SimilarTransactionItem",props:{transactionId:{defaultValue:null,description:"",name:"transactionId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/transactions/SimilarTransactionItem.tsx#SimilarTransactionItem"]={docgenInfo:SimilarTransactionItem.__docgenInfo,name:"SimilarTransactionItem",path:"../interface/src/components/transactions/SimilarTransactionItem.tsx#SimilarTransactionItem"})}catch(__react_docgen_typescript_loader_error){}function SimilarTransactions(props){var _similarData_members,_useSimilarTransactions=useSimilarTransactions(props.transaction),similarData=_useSimilarTransactions.data,isLoading=_useSimilarTransactions.isLoading,isError=_useSimilarTransactions.isError;if(isLoading||isError||(null==similarData?void 0:null===(_similarData_members=similarData.members)||void 0===_similarData_members?void 0:_similarData_members.length)===0)return null;var items=similarData.members.filter(function(item){return item!==props.transaction.transactionId}).slice(0,Math.min(10,similarData.members.length)-1).map(function(item){return /*#__PURE__*/react.createElement(SimilarTransactionItem,{key:item,transactionId:item})});return /*#__PURE__*/react.createElement("div",{className:"w-full flex flex-col gap-2"},/*#__PURE__*/react.createElement(MSpan,{size:"xl",weight:"semibold",className:"pl-4"},"Similar Transactions"),/*#__PURE__*/react.createElement("ul",{className:"w-full flex gap-2 flex-col"},items))}try{SimilarTransactions.displayName="SimilarTransactions",SimilarTransactions.__docgenInfo={description:"",displayName:"SimilarTransactions",props:{transaction:{defaultValue:null,description:"",name:"transaction",required:!0,type:{name:"Transaction"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../interface/src/components/transactions/SimilarTransactions.tsx#SimilarTransactions"]={docgenInfo:SimilarTransactions.__docgenInfo,name:"SimilarTransactions",path:"../interface/src/components/transactions/SimilarTransactions.tsx#SimilarTransactions"})}catch(__react_docgen_typescript_loader_error){}function transaction_details_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function transaction_details_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){transaction_details_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){transaction_details_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function transaction_details_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function transaction_details_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){transaction_details_define_property(target,key,source[key])})}return target}function transaction_details_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function transaction_details_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):transaction_details_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function transaction_details_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function TransactionDetails(){var user=useAuthentication(),id=(0,react_router_dist.g)().transactionId,updateTransaction=useUpdateTransaction(),transactionId=id||null,_useTransaction=useTransaction(transactionId),transaction=_useTransaction.data,isLoading=_useTransaction.isLoading,isError=_useTransaction.isError;if(isLoading)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"One moment..."));if(!transactionId&&!isLoading)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(HeartBroken.A,{className:"dark:text-dark-monetr-content h-24 w-24"}),/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"Something isn't right..."),/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl"},"There wasn't an expense specified..."));if((isError||!transaction)&&!isLoading)return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2"},/*#__PURE__*/react.createElement(HeartBroken.A,{className:"dark:text-dark-monetr-content h-24 w-24"}),/*#__PURE__*/react.createElement(MSpan,{className:"text-5xl"},"Something isn't right..."),/*#__PURE__*/react.createElement(MSpan,{className:"text-2xl"},"We weren't able to load details for the transaction specified..."));function submit(values,helpers){return _submit.apply(this,arguments)}function _submit(){return(_submit=transaction_details_async_to_generator(function(values,helpers){var updatedTransaction;return transaction_details_ts_generator(this,function(_state){return updatedTransaction=new Transaction_Transaction(transaction_details_object_spread_props(transaction_details_object_spread({},transaction),{name:values.name,spendingId:values.spendingId})),helpers.setSubmitting(!0),[2,updateTransaction(updatedTransaction).finally(function(){return helpers.setSubmitting(!1)})]})})).apply(this,arguments)}var initialValues={name:transaction.name,originalName:transaction.originalName,date:transaction.date,spendingId:transaction.spendingId,isPending:transaction.isPending,amount:amountToFriendly(transaction.amount,user.account.locale,transaction.currency)};return /*#__PURE__*/react.createElement(components_MForm,{initialValues:initialValues,enableReinitialize:!0,onSubmit:submit,className:"flex w-full h-full flex-col"},/*#__PURE__*/react.createElement(MTopNavigation,{icon:ShoppingCartOutlined.A,title:"Transactions",base:"/bank/".concat(transaction.bankAccountId,"/transactions"),breadcrumb:null==transaction?void 0:transaction.name},/*#__PURE__*/react.createElement(MFormButton,{color:"primary",className:"gap-1 py-1 px-2",type:"submit"},/*#__PURE__*/react.createElement(SaveOutlined.A,null),"Save Changes")),/*#__PURE__*/react.createElement("div",{className:"w-full h-full overflow-y-auto min-w-0 p-4"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col md:flex-row w-full gap-8 items-center md:items-stretch"},/*#__PURE__*/react.createElement("div",{className:"w-full md:w-1/2 flex flex-col items-center"},/*#__PURE__*/react.createElement("div",{className:"w-full flex justify-center mb-2"},/*#__PURE__*/react.createElement(MerchantIcon,{name:null==transaction?void 0:transaction.name})),/*#__PURE__*/react.createElement(MTextField,{id:"transaction-name-search",label:"Name",placeholder:"Transaction name...",name:"name",className:"w-full"}),/*#__PURE__*/react.createElement(MTextField,{label:"Original Name",placeholder:"No original name...?",name:"originalName",className:"w-full",disabled:!0}),/*#__PURE__*/react.createElement(MAmountField,{className:"w-full",disabled:!0,label:"Amount",name:"amount"}),/*#__PURE__*/react.createElement(MDatePicker,{label:"Date",name:"date",className:"w-full",disabled:!0}),/*#__PURE__*/react.createElement(MCheckbox,{id:"transaction-details-pending","data-testid":"transaction-details-pending",name:"isPending",label:"Is Pending",description:"Transaction has not yet cleared, the name or amount may change.",className:"w-full",disabled:!0}),!transaction.getIsAddition()&&/*#__PURE__*/react.createElement(MSelectSpending,{className:"w-full",name:"spendingId"})),/*#__PURE__*/react.createElement("div",{className:"w-full md:w-1/2 flex flex-col items-center"},/*#__PURE__*/react.createElement(SimilarTransactions,{transaction:transaction})))))}function VerifyEmail(){var location1=(0,react_router_dist.zy)(),navigate=(0,react_router_dist.Zp)();function errorRedirect(message){var nextUrl=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/login";window.alert(message),navigate(nextUrl)}var token=new URLSearchParams(location1.search).get("token");return(0,react.useEffect)(function(){if(!token){errorRedirect("Email verification link is not valid.");return}(0,util_request.A)().post("/authentication/verify",{token:token}).then(function(result){var _result_data,_result_data1;return errorRedirect((null==result?void 0:null===(_result_data=result.data)||void 0===_result_data?void 0:_result_data.message)||"Your email has been verified, please login.",(null==result?void 0:null===(_result_data1=result.data)||void 0===_result_data1?void 0:_result_data1.nextUrl)||"/login")}).catch(function(error){var _error_response_data,_error_response,_error_response_data1,_error_response1;return errorRedirect((null==error?void 0:null===(_error_response=error.response)||void 0===_error_response?void 0:null===(_error_response_data=_error_response.data)||void 0===_error_response_data?void 0:_error_response_data.error)||"Failed to verify email address.",null==error?void 0:null===(_error_response1=error.response)||void 0===_error_response1?void 0:null===(_error_response_data1=_error_response1.data)||void 0===_error_response_data1?void 0:_error_response_data1.nextUrl)})},[token]),/*#__PURE__*/react.createElement(VerifyEmailView,null)}function VerifyEmailView(){return /*#__PURE__*/react.createElement("div",{className:"w-full h-full flex flex-col justify-center items-center gap-2 p-4"},/*#__PURE__*/react.createElement(MLogo,{className:"h-24 w-24"}),/*#__PURE__*/react.createElement(MSpan,{size:"2xl",weight:"bold"},"Email Verification"),/*#__PURE__*/react.createElement(MSpan,{size:"xl",className:"text-center"},"Your email is being verified, one moment..."))}function resend_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function resend_array_with_holes(arr){if(Array.isArray(arr))return arr}function resend_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function resend_async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){resend_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){resend_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function resend_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function resend_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function resend_sliced_to_array(arr,i){return resend_array_with_holes(arr)||resend_iterable_to_array_limit(arr,i)||resend_unsupported_iterable_to_array(arr,i)||resend_non_iterable_rest()}function resend_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return resend_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return resend_array_like_to_array(o,minLen)}}function resend_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function ResendVerificationPage(){var enqueueSnackbar=(0,notistack_esm.dh)().enqueueSnackbar,config=useAppConfiguration(),routeState=(0,react_router_dist.zy)().state,initialValues={email:routeState&&routeState.emailAddress||void 0,captcha:null},_useState=resend_sliced_to_array((0,react.useState)(!1),2),done=_useState[0],setDone=_useState[1];function resendVerification(values){return _resendVerification.apply(this,arguments)}function _resendVerification(){return(_resendVerification=resend_async_to_generator(function(values){return resend_ts_generator(this,function(_state){return[2,(0,util_request.A)().post("/authentication/verify/resend",{email:values.email,captcha:values.captcha}).then(function(){return setDone(!0)}).catch(function(error){var _error_response_data,_error_response;enqueueSnackbar((null==error?void 0:null===(_error_response=error.response)||void 0===_error_response?void 0:null===(_error_response_data=_error_response.data)||void 0===_error_response_data?void 0:_error_response_data.error)||"Failed to resend verification link",{variant:"error",disableWindowBlurListener:!0})})]})})).apply(this,arguments)}function validateInput(values){var errors={};return values.email&&!verifyEmailAddress(values.email)&&(errors.email="Please provide a valid email address."),errors}function submit(values,helpers){return _submit.apply(this,arguments)}function _submit(){return(_submit=resend_async_to_generator(function(values,helpers){return resend_ts_generator(this,function(_state){return helpers.setSubmitting(!0),[2,resendVerification(values).finally(function(){return helpers.setSubmitting(!1)})]})})).apply(this,arguments)}if(done)return /*#__PURE__*/react.createElement(AfterEmailVerificationSent,null);function RouteStateMessage(){return routeState?/*#__PURE__*/react.createElement(MSpan,{className:"text-center",size:"sm","data-testid":"resend-email-included"},"It looks like your email address has not been verified. Do you want to resend the email verification link?"):/*#__PURE__*/react.createElement(MSpan,{className:"text-center",size:"sm","data-testid":"resend-email-excluded"},"If your email verification link has expired, or you never got one. You can enter your email address below and another verification link will be sent to you.")}return /*#__PURE__*/react.createElement(components_MForm,{initialValues:initialValues,onSubmit:submit,validate:validateInput,className:"w-full h-full flex flex-col justify-center items-center gap-2 p-4"},/*#__PURE__*/react.createElement("div",{className:"max-w-xs flex flex-col items-center gap-2"},/*#__PURE__*/react.createElement(MLogo,{className:"h-24 w-24"}),/*#__PURE__*/react.createElement(RouteStateMessage,null),/*#__PURE__*/react.createElement(MTextField,{name:"email",autoComplete:"username",autoFocus:!0,label:"Email",className:"w-full","data-testid":"resend-email"}),/*#__PURE__*/react.createElement(MCaptcha,{name:"captcha",show:!!(null==config?void 0:config.ReCAPTCHAKey),"data-testid":"resend-captcha"}),/*#__PURE__*/react.createElement(MFormButton,{type:"submit",color:"primary",className:"w-full"},"Resend Verification"),/*#__PURE__*/react.createElement("div",{className:"mt-1 flex justify-center gap-1"},/*#__PURE__*/react.createElement(MSpan,{color:"subtle",className:"text-sm"},"Don't need to resend?"),/*#__PURE__*/react.createElement(MLink,{to:"/login",size:"sm","data-testid":"login-signup"},"Return to login"))))}function AfterEmailVerificationSent(){return /*#__PURE__*/react.createElement("div",{className:"h-full w-full flex flex-col items-center justify-center"},/*#__PURE__*/react.createElement("div",{className:"flex flex-col gap-2 max-w-xs items-center"},/*#__PURE__*/react.createElement(MLogo,{className:"h-24 w-24"}),/*#__PURE__*/react.createElement(MSpan,{className:"text-center",size:"lg"},"A new verification link was sent to your email address..."),/*#__PURE__*/react.createElement("div",{className:"mt-1 flex justify-center gap-1"},/*#__PURE__*/react.createElement(MLink,{to:"/login",size:"sm","data-testid":"login-signup"},"Return to login"))))}function Monetr(){var _useAppConfigurationSink=useAppConfigurationSink(),config=_useAppConfigurationSink.result,configIsLoading=_useAppConfigurationSink.isLoading,configIsError=_useAppConfigurationSink.isError,_useAuthenticationSink=useAuthenticationSink(),authIsLoading=_useAuthenticationSink.isLoading,_useAuthenticationSink_result=_useAuthenticationSink.result,user=_useAuthenticationSink_result.user,isActive=_useAuthenticationSink_result.isActive,mfaPending=_useAuthenticationSink_result.mfaPending,_useLinks=useLinks(),linksIsLoading=_useLinks.isLoading,links=_useLinks.data;return configIsLoading||authIsLoading||linksIsLoading&&isActive&&!mfaPending?/*#__PURE__*/react.createElement(Loading,null):configIsError?/*#__PURE__*/react.createElement(ConfigError,null):user?mfaPending?/*#__PURE__*/react.createElement(react_router_dist.BV,null,/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/login/multifactor",element:/*#__PURE__*/react.createElement(MultifactorAuthenticationPage,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/logout",element:/*#__PURE__*/react.createElement(LogoutPage,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"*",element:/*#__PURE__*/react.createElement(react_router_dist.C5,{replace:!0,to:"/login/multifactor"})})):isActive?(null==links?void 0:links.length)>0?/*#__PURE__*/react.createElement("div",{className:"max-w-screen max-h-screen h-full w-full bg-background flex"},/*#__PURE__*/react.createElement(BankSidebar,{className:"hidden lg:flex"}),/*#__PURE__*/react.createElement(MobileSidebar,null),/*#__PURE__*/react.createElement("div",{className:"w-full h-full flex min-w-0 overflow-y-auto"},/*#__PURE__*/react.createElement(react_router_dist.BV,null,/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/bank/:bankAccountId",element:/*#__PURE__*/react.createElement(BudgetingLayout,null)},/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"transactions",element:/*#__PURE__*/react.createElement(transactions_Transactions,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"transactions/:transactionId/details",element:/*#__PURE__*/react.createElement(TransactionDetails,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"expenses",element:/*#__PURE__*/react.createElement(expenses_Expenses,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"expenses/:spendingId/details",element:/*#__PURE__*/react.createElement(ExpenseDetails,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"goals",element:/*#__PURE__*/react.createElement(Goals,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"goals/:spendingId/details",element:/*#__PURE__*/react.createElement(GoalDetails,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"funding",element:/*#__PURE__*/react.createElement(Funding,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"funding/:fundingId/details",element:/*#__PURE__*/react.createElement(FundingDetails,null)})),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/settings",element:/*#__PURE__*/react.createElement(SettingsLayout,null)},/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"",element:/*#__PURE__*/react.createElement(react_router_dist.C5,{replace:!0,to:"/settings/overview"})}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"overview",element:/*#__PURE__*/react.createElement(SettingsOverview,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"security",element:/*#__PURE__*/react.createElement(SettingsSecurity,null)}),(null==config?void 0:config.billingEnabled)&&/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"billing",element:/*#__PURE__*/react.createElement(SettingsBilling,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"about",element:/*#__PURE__*/react.createElement(SettingsAbout,null)})),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/link/create",element:/*#__PURE__*/react.createElement(LinkCreatePage,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/link/create/plaid",element:/*#__PURE__*/react.createElement(PlaidSetup,{alreadyOnboarded:!0})}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/link/create/manual",element:/*#__PURE__*/react.createElement(SetupManual,{alreadyOnboarded:!0})}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/logout",element:/*#__PURE__*/react.createElement(LogoutPage,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/plaid/oauth-return",element:/*#__PURE__*/react.createElement(OauthReturn,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/subscription",element:/*#__PURE__*/react.createElement(SubscriptionPage,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/account/subscribe",element:/*#__PURE__*/react.createElement(react_router_dist.C5,{replace:!0,to:"/"})}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/account/subscribe/after",element:/*#__PURE__*/react.createElement(react_router_dist.C5,{replace:!0,to:"/"})}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/setup",element:/*#__PURE__*/react.createElement(react_router_dist.C5,{replace:!0,to:"/"})}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/password/reset",element:/*#__PURE__*/react.createElement(react_router_dist.C5,{replace:!0,to:"/"})}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/login",element:/*#__PURE__*/react.createElement(react_router_dist.C5,{replace:!0,to:"/"})}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/login/multifactor",element:/*#__PURE__*/react.createElement(react_router_dist.C5,{replace:!0,to:"/"})}),/*#__PURE__*/react.createElement(react_router_dist.qh,{index:!0,path:"/",element:/*#__PURE__*/react.createElement(RedirectToBank,null)})))):/*#__PURE__*/react.createElement(react_router_dist.BV,null,/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/logout",element:/*#__PURE__*/react.createElement(LogoutPage,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/setup",element:/*#__PURE__*/react.createElement(SetupPage,{manualEnabled:null==config?void 0:config.manualEnabled})}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/setup/plaid",element:/*#__PURE__*/react.createElement(PlaidSetup,{alreadyOnboarded:!0})}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/setup/manual",element:/*#__PURE__*/react.createElement(SetupManual,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/plaid/oauth-return",element:/*#__PURE__*/react.createElement(OauthReturn,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/account/subscribe/after",element:/*#__PURE__*/react.createElement(react_router_dist.C5,{replace:!0,to:"/setup"})}),/*#__PURE__*/react.createElement(react_router_dist.qh,{index:!0,path:"*",element:/*#__PURE__*/react.createElement(react_router_dist.C5,{replace:!0,to:"/setup"})})):/*#__PURE__*/react.createElement(react_router_dist.BV,null,/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/logout",element:/*#__PURE__*/react.createElement(LogoutPage,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/account/subscribe",element:/*#__PURE__*/react.createElement(SubscribePage,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/account/subscribe/after",element:/*#__PURE__*/react.createElement(AfterCheckoutPage,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"*",element:/*#__PURE__*/react.createElement(react_router_dist.C5,{replace:!0,to:"/account/subscribe"})})):/*#__PURE__*/react.createElement(react_router_dist.BV,null,/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/login",element:/*#__PURE__*/react.createElement(login_Login,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/logout",element:/*#__PURE__*/react.createElement(LogoutPage,null)}),(null==config?void 0:config.allowSignUp)&&/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/register",element:/*#__PURE__*/react.createElement(Register,null)}),(null==config?void 0:config.allowForgotPassword)&&/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/password/forgot",element:/*#__PURE__*/react.createElement(ForgotPasswordNew,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/password/reset",element:/*#__PURE__*/react.createElement(PasswordResetNew,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/verify/email",element:/*#__PURE__*/react.createElement(VerifyEmail,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/verify/email/resend",element:/*#__PURE__*/react.createElement(ResendVerificationPage,null)}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"/",element:/*#__PURE__*/react.createElement(react_router_dist.C5,{replace:!0,to:"/login"})}),/*#__PURE__*/react.createElement(react_router_dist.qh,{path:"*",element:/*#__PURE__*/react.createElement(react_router_dist.C5,{replace:!0,to:"/login"})}))}function BudgetingLayout(){return /*#__PURE__*/react.createElement(react.Fragment,null,/*#__PURE__*/react.createElement(BudgetingSidebar_BudgetingSidebar,{className:"hidden lg:flex"}),/*#__PURE__*/react.createElement("div",{className:"w-full h-full min-w-0 flex flex-col"},/*#__PURE__*/react.createElement(react_router_dist.sv,null)))}function RedirectToBank(){var _useLinks=useLinks(),links=_useLinks.data,linksIsLoading=_useLinks.isLoading,_useBankAccounts=bankAccounts_useBankAccounts(),bankAccounts=_useBankAccounts.data,bankAccountsIsLoading=_useBankAccounts.isLoading;if(linksIsLoading||bankAccountsIsLoading||0===links.length)return null;var link=links.sort(function(a,b){var nameA=a.getName().toUpperCase(),nameB=b.getName().toUpperCase();return nameA<nameB?-1:nameA>nameB?1:0})[0],accounts=sortAccounts(Array.from(bankAccounts.values()).filter(function(account){return account.linkId===link.linkId}));if(0===accounts.length)return null;var account=accounts[0];return /*#__PURE__*/react.createElement(react_router_dist.C5,{replace:!0,to:"/bank/".concat(account.bankAccountId,"/transactions")})}function app_stories_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function app_stories_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){app_stories_define_property(target,key,source[key])})}return target}function app_stories_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function app_stories_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):app_stories_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}let app_stories={title:"New UI",component:MonetrWrapper};var app_stories_Transactions={name:"Transactions",decorators:[function(Story,_){var mockAxios=new(src_default())(api.A);return mockAxios.onGet("/api/config").reply(200,{requireLegalName:!0,requirePhoneNumber:!0,verifyLogin:!1,verifyRegister:!1,verifyEmailAddress:!0,verifyForgotPassword:!1,allowSignUp:!0,allowForgotPassword:!0,longPollPlaidSetup:!0,requireBetaCode:!0,initialPlan:{price:199},billingEnabled:!0,iconsEnabled:!0,plaidEnabled:!0,manualEnabled:!1,release:"0.17.16",revision:"8df5505b7e5273f061d90ddf19e4c1cfca2b4f4f",buildType:"binary",buildTime:"2024-08-28T02:42:56Z"}),mockAxios.onGet("/api/users/me").reply(200,{activeUntil:"2024-09-26T00:31:38Z",hasSubscription:!0,isActive:!0,isSetup:!0,isTrialing:!1,trialingUntil:null,user:{userId:"user_01hym36e8ewaq0hxssb1m3k4ha",loginId:"lgn_01hym36d96ze86vz5g7883vcwg",login:{loginId:"lgn_01hym36d96ze86vz5g7883vcwg",email:"me@elliotcourant.dev",firstName:"Elliot",lastName:"Courant",passwordResetAt:null,isEmailVerified:!0,emailVerifiedAt:"2022-09-25T00:24:25.976514Z",totpEnabledAt:null},accountId:"acct_01hk84dchvxvjgp7cgap818c82",account:{accountId:"acct_01hk84dchvxvjgp7cgap818c82",timezone:"America/Chicago",locale:"en_US",subscriptionActiveUntil:"2024-09-26T00:31:38Z",subscriptionStatus:"active",trialEndsAt:null,createdAt:"2024-01-03T17:02:23.290914Z"}}}),mockAxios.onGet("/api/links").reply(200,[{linkId:"link_01gds6eqsqacg48p0azb3wcpsq",linkType:1,plaidLink:{products:["transactions"],status:2,expirationDate:null,newAccountsAvailable:!1,institutionId:"ins_116794",institutionName:"Mercury",lastManualSync:"2024-07-06T12:59:09.51222Z",lastSuccessfulUpdate:"2024-08-29T12:00:01.176597Z",lastAttemptedUpdate:"2024-08-29T12:00:01.17665Z",updatedAt:"2024-03-19T06:17:32.335106Z",createdAt:"2022-09-25T02:08:40.758642Z",createdBy:"user_01hym36e8ewaq0hxssb1m3k4ha"},institutionName:"Mercury",description:null,createdAt:"2022-09-25T02:08:40.758642Z",createdBy:"user_01hym36e8ewaq0hxssb1m3k4ha",updatedAt:"2024-03-19T06:17:32.335106Z",deletedAt:null}]),mockAxios.onGet("/api/institutions/ins_116794").reply(200,{institutionId:"ins_116794",name:"Mercury",products:["assets","auth","balance","transactions","identity"],countryCodes:["US"],url:"https://mercury.com/",primaryColor:"#5e6cd4",logo:"iVBORw0KGgoAAAANSUhEUgAAAJgAAACYCAMAAAAvHNATAAAAdVBMVEVHcEz///////////////////////////////////////////////8AAAD///9ra2v19fX9/f0jIyMVFRUyMjLs7OysrKwMDAy3t7c9PT3R0dGLi4uhoaF/f39OTk7Dw8OVlZVHR0fj4+Pb29tVVVXLy8tcXFzoRFGvAAAADXRSTlMAQoGXwesjpdoUaS9X3qEOLQAACyRJREFUeNrNXOmCsjoM/cZl1JmBUvZVQMD3f8TbBdqA0KKgF345I0JITk6Wpvz7t/C4/P7tTqfD4Xw+Ynw8nw+H02n393v59z8e3z/7w9mcOM6H/c/3/yLU6Whqj+Pps8J97c/m7OO8//qQrnZPSNXKtnu73i4/B/Ol4/DzTnf43mPz5QPv36W279MCsZhop3eI9nsyVzhOv2tjaxWxmGirYu3naK52HH/Wo62zuepx/lrLithc+VjDnl9H8w3HcbHSduabjt0yMx7Mtx2Hy9bMuNycO/PNx4vm3JtvP/avyHUyP3CcNgX7JS5wOX9GLhOfL5uUiwaoyzblekqywyflMvFhU/74gm/uzY8f+03w/Ysx4Ovpi1pNmtWRazuG4dhudM/S2Hr6Itq4eXkubnshco2Rw0Xhc8IdLys6pFVEQpKA6Kq+ujYQLkqfke2wFsBwWPP7O3USVkKEm3+VogX3cCWYzQYYTrlu3KRif8Kq4IboN3duYtfHK8BsLsBaseysGv8+JkI5TZXxs1K8GGYzmTVnyrg2CvTdiR1j02yYXd1mIc/OM6R3Z2LF6rOIOW0KvJiJhrxFxpwVun1nhljE2sQ1ELcrFc2Z5QXniT7AHHRRYDv+jBMtArAGPEs2B2k/ryL/RtF1H9rFygtUUuZ3IiRVGRpGCa0f3V7E/wzkN86jupos6nF+LcSOhMq40pz4Jfz/6n8VBsTDes99SwDVB+WV/mXfpMpQT9dBrr/H7wsKS8ldSxhl4roLjFSekIIot1tvpIdj2MDeJTnJf15l37PkQgDBnAgC5FuUGzqJ6f2z9gyCrHzgN3rJvp9VWGjIO1IBMsbqhUUdMDCcDlnYC4yg/aOgPwEqpj/Jn1TZt86Zm6AnV86wReIg5rpM5FeJ0EvMZM97kgU6D8DfT6XTlQORbCEOLk+wPLh7JZ7A42chC8YDR8cavTT7olEYJj5VinM8ShCIQAwLLAGDWYTp2l+REEEfIRIMggkCI929Lk+QPrm8K1Mum4UYBDUGONeDGkNm6AAGMS23hwgt/WvyVh9agLIs1QEBTCVA7vdOLqBRqX4dwbQ38utwdi6r4QrPAXemXnClvliIOxCQuxhavRKOTEW0iNGDBj6kN5cxNAn1XaCGPzFns1waJQL2IYqs5ce8YzCp8Tt0I02Src53cvCMni0uiwMjMiUvcN+j/ioYITICLLMzD+i/mZf9fGk9skOFRXRz7axWCpuxqOCgtEA0wQklb3TpBSbWjCxpTBfPShj36vyeyAK8U1yf3kDYxA9ELLd9S5wskEmfSJxMpExnUZnSkpgYLx4xKvsmuMnSyJFpRk2VVgWGjXsOlEvL23iGLb91sbtTGE1KoasX0lZUzjhMi6zmeVDUUEsXsAwFacdVF82/9ewKFZYN/ImirxicTnRXsCLKHSIJSdel/DKDY0+apOIqDWmUKCtycb94IpGJS6Y2Ea9xXmQ0hIn/XDUsy1MMZa5ft77dIBukqm157RtTKRbLPvg32C+FZ3TP2ABmHM39dRDDJCLTLLQpB90cu8CtXP3ssZ+A+DRAwD6LUBnxG0sHMiXECgoMnuXY97TysFeFvPpwYypXktCPo2ah3/gxw1uUhfSnfi8opDqQKVmMyFDF9JmvOQB4hVrjkPwwpzQR+d64ZCz5rtqfUUe6CfKNdEymyiws2ngI+mkop62ylYt85H2nCCUpaEcJycpbT/9dquv2crjRDOOs6oERkBKN3Eeu4Uru6Kol3pfyeoIVPcQGom5K1H5JKPaiSRAn0J0DvjS9nm90HZT80WWRiN+VJse4qAtdBl00AT5hXgazoM7SNKsp+Jy8S5D8x4wzE0Wnqy58/9QQm8jRQWOCsYbd9VuttGOw68gjWRLztRpkf8oksaGCVaBFnd2zomovCyI7LIQ4ueT9tNasEnRHqQcwn6izsp0yIKWwyLWyliPq2CQodkHakDzwhOPVAN1tiDKCRFZ6oZrJTkrBMlk7stqoC0mhLDgontFIE60ERJWCxsugUlEIdlAHyjvIqYOksjyfOoRkSg96pwnyI4l8nzWvPatKAuBLWB0uD0rBInl1ImPJlYd510KaLR3HQKtr2szo2omMVkrhlpFSsLOaLTyZdFqQ3Wpxylg0JhgUt4W2pqp0xS9dJcOqBLOFYmB7AluOwIclRRyCoDOZYziWTMykriPYPRsRTJWNSW33r4K0EM6Eq8Z957ANRxRZjjIjU1UFUh2OrJR4ME7VTp9OnUFo9+HTaJieKZjREywVHJVOCzZ+xhVoTC2Y2pTlWDuVmpLzPk6mTSk7Ln1TRgL8alOqwe+KT6A3R8DvyNp/CvyWEFGCn8YvNPqsz3mlK37rDugCSaaboAtXiijOZsslbYy9GRq6UBNsIAEBCbZr/7Jm5jjBJlLXPYKt5SnRy8wvDYJ4DO5CEow2EyHJE4qxYUgSTZ/rBAiEYJogXj3EYaijiEVrNJL4Isksfgg6Ll0FcDN0QVyT9viCsVHSXr+MQbpYT6U9MGR1RUGQ9cKaOu3RJIpIlkuml5JsL6l6vYt4KlEUvM8MVhUkxwQ1HlsCUCeKf+o6XMakx0wYcdqdSK07pxkrhixWTKhTa00x0jUrs9HKgndWx4uRlraiCa8ydMWIrnyLh1aFNUgrgYega5Qe9M4Re+G2KlSXb0qGDSEf9Zm06FWz7SiDKArkusWIHQlTOHdtwasiMmzJKye9qhq0CLqGnRfnYZpdmeteb6MtAv6wDm37z2gRaJsqkim7TAQ2VQb9RNMKyxZmg6ZKKxZtFdnxnKaKvg0lAOs/tqFGu3b0hOKxDRUXd6ddjssemqSPbShlb9iSqXA82rhDYwbh9cpY447atuERVNu4m9fq5NGt3+rEvjHSoWImBU1Q2Oo0bNS0Pq4KlPj4VHOYquz60ByGIWpAJo/N4fyp5vCidjpvnRe3sX4ibKfjQTtdvQLxs8ICRM7nQew6K9IwlrfDUR/fgwWIdMYCxNIlm7CWGHKQ0F0F1YJfWbLRrNTPWOSyfNBx8cHJCxe5lMuCmCLJB9cfWxYMmbKKlK10pVIxC5cFly+kBnAhVVjenVxIVY+FnFdber7SjzI/iiTNji8939X32y1arDflYn01XKyPhYEXLtZ/eLxBM3l0WG0gJBsOhCDw6XEgRDND0BsIeXGExhKosXo5nHKExn1mhEY7dHQbHTqqhuVnvz2xwtDRi2NaoUBVf0wrNUXy8TCmpRvWHYxpvTbY1g0XyVk25sKsOLB4IjYcbNPOw54WjwKC0iwTo4DYYi0Dy+fJNxzkxbri+4ErXh2elFkoTTuYyXBI1dTtPahhosaGJ/VynVYYN5UtYr5sYl9BqmrYSX8wlY6bzphr/l1hQLcB2YtX9/L6KBtgnA3ozhhSP60y0ixnUYh8MYocupmlREU+rDPYSLP76kjzE0PgoVBZMONujPzHhyBUpL9kbL4XqaYOPjbvz7n2ea2NBtQbS6wX63GgXZMgLt6aQTPESHHTdmtGPu+6pxU3s1A/tSdYYMXNLC9s/5naQFIlnGVni6XZZfbChikuYCFKSlyFSd2O39Xh/NcY7N6zxYxvMosiV04ERsWKW8ye3ZRnfWxT3pPbGFmrrr+Nsc7SxhrsOlsIsBc3fuJZ/1oEsG1vld3u5uJPb8c2Z2/H3u4G9s1u+f+kZOdnX9+w0ddKbPdFHBt+dcl2X/ay3dfjbPeFQtt9BdOGX1q15svaAEus89q2jb4YbcOvkmOvKtyYFTf/usINv+Bxw6/E3PBLRDnYNvna1S2/qHbLr/YVwm3wZcjSHd70+uj/AGgmIsLJi31VAAAAAElFTkSuQmCC",status:{auth:{breakdown:{error_institution:0,error_plaid:0,success:1},last_status_change:"2023-06-25T13:10:18Z",status:"HEALTHY"},item_logins:{breakdown:{error_institution:0,error_plaid:.014,success:.986},last_status_change:"2023-06-28T20:15:18Z",status:"DEGRADED"},transactions_updates:{breakdown:{error_institution:0,error_plaid:0,refresh_interval:"NORMAL",success:1},last_status_change:"2023-06-14T17:05:18Z",status:"HEALTHY"}}}),mockAxios.onGet("/api/bank_accounts").reply(200,[{bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",linkId:"link_01gds6eqsqacg48p0azb3wcpsq",availableBalance:47986,currentBalance:47986,mask:"2982",name:"Mercury Checking",originalName:"Mercury Checking",accountType:"depository",accountSubType:"checking",status:"active",lastUpdated:"2024-08-27T08:53:48.555368Z",createdAt:"2022-09-25T02:08:40.758642Z",updatedAt:"2024-03-19T06:17:32.335106Z"}]),mockAxios.onGet("/api/bank_accounts/bac_01gds6eqsq7h5mgevwtmw3cyxb").reply(200,{bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",linkId:"link_01gds6eqsqacg48p0azb3wcpsq",plaidBankAccount:{name:"Mercury Checking",officialName:"Mercury Checking",mask:"2982",availableBalance:47986,currentBalance:47986,limitBalance:null,createdAt:"2024-03-19T15:15:10.31132Z",createdBy:"user_01hym36e8ewaq0hxssb1m3k4ha"},availableBalance:47986,currentBalance:47986,mask:"2982",name:"Mercury Checking",originalName:"Mercury Checking",accountType:"depository",accountSubType:"checking",status:"active",lastUpdated:"2024-08-27T08:53:48.555368Z",createdAt:"2022-09-25T02:08:40.758642Z",updatedAt:"2024-03-19T06:17:32.335106Z"}),mockAxios.onGet("/api/bank_accounts/bac_01gds6eqsq7h5mgevwtmw3cyxb/funding_schedules").reply(200,[{fundingScheduleId:"fund_01hym37k3kj4ghv67nfx7vkvr0",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",name:"Elliot's Contribution",description:"15th and last day of every month",ruleset:"DTSTART:20230228T060000Z\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=15,-1",excludeWeekends:!0,waitForDeposit:!1,estimatedDeposit:22e3,lastRecurrence:"2024-08-15T05:00:00Z",nextRecurrence:"2024-08-30T05:00:00Z",nextRecurrenceOriginal:"2024-08-31T05:00:00Z"}]),mockAxios.onGet("/api/bank_accounts/bac_01gds6eqsq7h5mgevwtmw3cyxb/balances").reply(200,{bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",current:47986,available:47986,free:7724,expenses:30262,goals:1e4}),mockAxios.onGet("/api/bank_accounts/bac_01gds6eqsq7h5mgevwtmw3cyxb/spending").reply(200,[{spendingId:"spnd_01h264znvxkghmxp5s0wmdbr9j",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",fundingScheduleId:"fund_01hym37k3kj4ghv67nfx7vkvr0",spendingType:0,name:"GitLab",description:"Every year on the 16th of June",targetAmount:34800,currentAmount:5800,usedAmount:0,ruleset:"DTSTART:20230606T050000Z\nRRULE:FREQ=YEARLY;INTERVAL=1;BYMONTH=6;BYMONTHDAY=16",lastSpentFrom:null,lastRecurrence:"2024-06-16T05:00:00Z",nextRecurrence:"2025-06-16T05:00:00Z",nextContributionAmount:1450,isBehind:!1,isPaused:!1,createdAt:"2023-06-05T16:07:02.780623Z"},{spendingId:"spnd_01fpwx2qng9gbt32kdh2mdk7df",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",fundingScheduleId:"fund_01hym37k3kj4ghv67nfx7vkvr0",spendingType:0,name:"Freshbooks",targetAmount:1900,currentAmount:950,usedAmount:0,ruleset:"DTSTART:20230310T060000Z\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=10",lastSpentFrom:null,lastRecurrence:"2024-08-10T06:00:00Z",nextRecurrence:"2024-09-10T06:00:00Z",nextContributionAmount:950,isBehind:!1,isPaused:!1,createdAt:"2021-12-14T16:40:46Z"},{spendingId:"spnd_01gk23r0mgcekdf8bzkvf55f26",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",fundingScheduleId:"fund_01hym37k3kj4ghv67nfx7vkvr0",spendingType:1,name:"Rainy Day",targetAmount:100,currentAmount:17724,usedAmount:58900,ruleset:null,lastSpentFrom:null,lastRecurrence:"2023-12-31T06:00:00Z",nextRecurrence:"2023-12-31T06:00:00Z",nextContributionAmount:0,isBehind:!1,isPaused:!1,createdAt:"2022-11-29T16:32:58Z"},{spendingId:"spnd_01ggwaxcq0y6eazf56a4sq3f02",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",fundingScheduleId:"fund_01hym37k3kj4ghv67nfx7vkvr0",spendingType:0,name:"Google Voice",targetAmount:1292,currentAmount:646,usedAmount:0,ruleset:"DTSTART:20230301T060000Z\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=1",lastSpentFrom:null,lastRecurrence:"2024-08-01T06:00:00Z",nextRecurrence:"2024-09-01T06:00:00Z",nextContributionAmount:646,isBehind:!1,isPaused:!1,createdAt:"2022-11-02T14:11:24Z"},{spendingId:"spnd_01g6ngke5g9mgrn9kt7pjdcqr8",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",fundingScheduleId:"fund_01hym37k3kj4ghv67nfx7vkvr0",spendingType:0,name:"ngrok",description:"Every year on the 26th of June",targetAmount:6e3,currentAmount:780,usedAmount:0,ruleset:"DTSTART:20230625T050000Z\nRRULE:FREQ=YEARLY;INTERVAL=1;BYMONTH=6;BYMONTHDAY=26",lastSpentFrom:null,lastRecurrence:"2024-06-26T05:00:00Z",nextRecurrence:"2025-06-26T05:00:00Z",nextContributionAmount:261,isBehind:!1,isPaused:!1,createdAt:"2022-06-28T15:59:10Z"},{spendingId:"spnd_01h0jgggcdng3ztx90zwh6nb6f",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",fundingScheduleId:"fund_01hym37k3kj4ghv67nfx7vkvr0",spendingType:0,name:"Domains",description:"Every year on the 1st of April",targetAmount:14e3,currentAmount:2331,usedAmount:0,ruleset:"DTSTART:20240401T050000Z\nRRULE:FREQ=YEARLY;INTERVAL=1;BYMONTH=4;BYMONTHDAY=1",lastSpentFrom:null,lastRecurrence:"2024-04-01T05:00:00Z",nextRecurrence:"2025-04-01T05:00:00Z",nextContributionAmount:777,isBehind:!1,isPaused:!1,createdAt:"2023-05-16T14:47:58.09301Z"},{spendingId:"spnd_01h0dxnp2nm9q90pdqemp1z5m1",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",fundingScheduleId:"fund_01hym37k3kj4ghv67nfx7vkvr0",spendingType:0,name:"Plaid",description:"Every month on the 10th",targetAmount:500,currentAmount:365,usedAmount:0,ruleset:"DTSTART:20230610T050000Z\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=10",lastSpentFrom:null,lastRecurrence:"2024-08-10T05:00:00Z",nextRecurrence:"2024-09-10T05:00:00Z",nextContributionAmount:135,isBehind:!1,isPaused:!1,createdAt:"2023-05-14T20:01:47.09268Z"},{spendingId:"spnd_01fpwx3pxg6yaspkx0wn3fptkf",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",fundingScheduleId:"fund_01hym37k3kj4ghv67nfx7vkvr0",spendingType:0,name:"Google G-Suite",targetAmount:1440,currentAmount:720,usedAmount:0,ruleset:"DTSTART:20230301T060000Z\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=1",lastSpentFrom:null,lastRecurrence:"2024-08-01T06:00:00Z",nextRecurrence:"2024-09-01T06:00:00Z",nextContributionAmount:720,isBehind:!1,isPaused:!1,createdAt:"2021-12-14T16:41:18Z"},{spendingId:"spnd_01gh9a6yb0weejnxk5y0e66s7s",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",fundingScheduleId:"fund_01hym37k3kj4ghv67nfx7vkvr0",spendingType:0,name:"Google Cloud Production",targetAmount:25e3,currentAmount:12588,usedAmount:0,ruleset:"DTSTART:20230301T060000Z\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=1",lastSpentFrom:null,lastRecurrence:"2024-08-01T06:00:00Z",nextRecurrence:"2024-09-01T06:00:00Z",nextContributionAmount:12412,isBehind:!1,isPaused:!1,createdAt:"2022-11-07T15:09:16Z"},{spendingId:"spnd_01hcjv04tytz5xatf3dhers5kg",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",fundingScheduleId:"fund_01hym37k3kj4ghv67nfx7vkvr0",spendingType:0,name:"P.O. Box",description:"Every year on the 13th of October",targetAmount:7e3,currentAmount:6082,usedAmount:0,ruleset:"DTSTART:20231013T050000Z\nRRULE:FREQ=YEARLY;INTERVAL=1;BYMONTH=10;BYMONTHDAY=13",lastSpentFrom:null,lastRecurrence:"2023-10-13T05:00:00Z",nextRecurrence:"2024-10-13T05:00:00Z",nextContributionAmount:306,isBehind:!1,isPaused:!1,createdAt:"2023-10-12T20:59:38.206294Z"},{spendingId:"spnd_01fpwx6ye0kehpverathqakm9x",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",fundingScheduleId:"fund_01hym37k3kj4ghv67nfx7vkvr0",spendingType:0,name:"GitHub",targetAmount:800,currentAmount:0,usedAmount:0,ruleset:"DTSTART:20230319T050000Z\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=19",lastSpentFrom:null,lastRecurrence:"2024-08-19T05:00:00Z",nextRecurrence:"2024-09-19T05:00:00Z",nextContributionAmount:400,isBehind:!1,isPaused:!1,createdAt:"2021-12-14T16:43:04Z"},{spendingId:"spnd_01fpwx67z8djhb8bqcy17mrzfe",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",fundingScheduleId:"fund_01hym37k3kj4ghv67nfx7vkvr0",spendingType:0,name:"Sentry",targetAmount:3446,currentAmount:0,usedAmount:0,ruleset:"DTSTART:20230325T050000Z\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=25",lastSpentFrom:null,lastRecurrence:"2024-08-25T05:00:00Z",nextRecurrence:"2024-09-25T05:00:00Z",nextContributionAmount:1723,isBehind:!1,isPaused:!1,createdAt:"2021-12-14T16:42:41Z"}]),mockAxios.onGet("/api/bank_accounts/bac_01gds6eqsq7h5mgevwtmw3cyxb/transactions").reply(200,[{transactionId:"txn_01j68vszqeq30t7jz7atk9yd9r",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:3446,spendingId:"spnd_01fpwx67z8djhb8bqcy17mrzfe",spendingAmount:2900,categories:["Shops","Digital Purchase"],category:"FOOD_AND_DRINK_GROCERIES",date:"2024-08-27T05:00:00Z",name:"Sentry.",originalName:"SENTRY. Merchant name: Sentry",merchantName:"Sentry.",originalMerchantName:"Sentry.",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-08-27T02:49:28.059Z",deletedAt:null},{transactionId:"txn_01j5m4enxf50k3d2h2c9dtst4z",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:803,spendingId:"spnd_01fpwx6ye0kehpverathqakm9x",spendingAmount:800,categories:["Service","Computers","Software Development"],category:"GENERAL_SERVICES_OTHER_GENERAL_SERVICES",date:"2024-08-19T05:00:00Z",name:"GitHub",originalName:"GITHUB, INC.. Merchant name: Github",merchantName:"GitHub",originalMerchantName:"GitHub",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-08-19T01:36:31.663Z",deletedAt:null},{transactionId:"txn_01j59tnczpyqwq7sxw4gzbmkvx",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:270,spendingId:"spnd_01h0dxnp2nm9q90pdqemp1z5m1",spendingAmount:270,categories:["Service","Business Services"],category:"GENERAL_SERVICES_OTHER_GENERAL_SERVICES",date:"2024-08-16T05:00:00Z",name:"Plaid",originalName:"Plaid",merchantName:"Plaid Technologies Inc.",originalMerchantName:"Plaid Technologies Inc.",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-08-15T01:33:01.814Z",deletedAt:null},{transactionId:"txn_01j5b3p0waxq4894dgteb58s6e",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:-22e3,spendingId:null,categories:["Transfer","Payroll"],category:"INCOME_WAGES",date:"2024-08-15T05:00:00Z",name:"Elliot's Contribution",originalName:"5176 TREASURY PR; DEPOSIT; COURANT ELLIOT. Merchant name: 5176 TREASURY PR",originalMerchantName:"",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-08-15T13:29:53.802Z",deletedAt:null},{transactionId:"txn_01j4vn659athnneb4jd6yf2twa",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:1900,spendingId:"spnd_01fpwx2qng9gbt32kdh2mdk7df",spendingAmount:1900,categories:["Service","Financial","Accounting and Bookkeeping"],category:"GENERAL_SERVICES_ACCOUNTING_AND_FINANCIAL_PLANNING",date:"2024-08-10T05:00:00Z",name:"FreshBooks",originalName:"FRESHBOOKS. Merchant name: Freshbooks",merchantName:"FreshBooks",originalMerchantName:"FreshBooks",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-08-09T13:27:57.482Z",deletedAt:null},{transactionId:"txn_01j47xct43472gtrv6dkp8s9s8",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:1440,spendingId:"spnd_01fpwx3pxg6yaspkx0wn3fptkf",spendingAmount:1440,categories:["Shops","Digital Purchase"],category:"GENERAL_SERVICES_OTHER_GENERAL_SERVICES",date:"2024-08-02T05:00:00Z",name:"Gsuite Monetr.a.",originalName:"GSUITE MONETR.A. Merchant name: Gsuite",merchantName:"Gsuite Monetr.a.",originalMerchantName:"Gsuite Monetr.a.",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-08-01T21:26:35.396Z",deletedAt:null},{transactionId:"txn_01j47xct4230fpdj4gt8trf021",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:24824,spendingId:"spnd_01gh9a6yb0weejnxk5y0e66s7s",spendingAmount:24824,categories:["Shops","Digital Purchase"],category:"GENERAL_MERCHANDISE_OTHER_GENERAL_MERCHANDISE",date:"2024-08-02T05:00:00Z",name:"Cloud",originalName:"Google CLOUD 2xHT9W. Merchant name: Google Cloud",merchantName:"Cloud",originalMerchantName:"Cloud",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-08-01T21:26:35.396Z",deletedAt:null},{transactionId:"txn_01j47xct40x2vwfhst88k4j9zs",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:1294,spendingId:"spnd_01ggwaxcq0y6eazf56a4sq3f02",spendingAmount:1292,categories:["Shops","Digital Purchase"],category:"TRANSFER_OUT_ACCOUNT_TRANSFER",date:"2024-08-02T05:00:00Z",name:"Svcsmonetr.app.",originalName:"SVCSMONETR.APP. Merchant name: Google",merchantName:"Svcsmonetr.app.",originalMerchantName:"Svcsmonetr.app.",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-08-01T21:26:35.396Z",deletedAt:null},{transactionId:"txn_01j45asp0shxbda8abgmqsa6mz",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:-22e3,spendingId:null,categories:["Transfer","Payroll"],category:"INCOME_WAGES",date:"2024-07-31T05:00:00Z",name:"Elliot's Contribution",originalName:"5176 TREASURY PR; DEPOSIT; COURANT ELLIOT. Merchant name: 5176 TREASURY PR",originalMerchantName:"",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-07-31T21:23:05.369Z",deletedAt:null},{transactionId:"txn_01j3s2r562navpr3y1y27rn95j",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:3914,spendingId:"spnd_01fpwx67z8djhb8bqcy17mrzfe",spendingAmount:2900,categories:["Shops","Digital Purchase"],category:"FOOD_AND_DRINK_GROCERIES",date:"2024-07-27T05:00:00Z",name:"Sentry.",originalName:"SENTRY. Merchant name: Sentry",merchantName:"Sentry.",originalMerchantName:"Sentry.",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-07-27T03:11:33.57Z",deletedAt:null},{transactionId:"txn_01j33sp41a5b2s3nnkddjw1grc",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:800,spendingId:"spnd_01fpwx6ye0kehpverathqakm9x",spendingAmount:800,categories:["Service","Computers","Software Development"],category:"GENERAL_SERVICES_OTHER_GENERAL_SERVICES",date:"2024-07-19T05:00:00Z",name:"GitHub",originalName:"GITHUB, INC.. Merchant name: Github",merchantName:"GitHub",originalMerchantName:"GitHub",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-07-18T20:49:06.602Z",deletedAt:null},{transactionId:"txn_01j2r4mbwb1d56d5be9h5y6jxq",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:210,spendingId:"spnd_01h0dxnp2nm9q90pdqemp1z5m1",spendingAmount:210,categories:["Service","Business Services"],category:"GENERAL_SERVICES_OTHER_GENERAL_SERVICES",date:"2024-07-16T05:00:00Z",name:"Plaid",originalName:"Plaid",merchantName:"Plaid Technologies Inc.",originalMerchantName:"Plaid Technologies Inc.",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-07-14T08:09:30.251Z",deletedAt:null},{transactionId:"txn_01j2vc5pkhbmjp7kmj7ede9vbe",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:-22e3,spendingId:null,categories:["Transfer","Payroll"],category:"INCOME_WAGES",date:"2024-07-15T05:00:00Z",name:"Elliot's Contribution",originalName:"5176 TREASURY PR; DEPOSIT; COURANT ELLIOT. Merchant name: 5176 TREASURY PR",originalMerchantName:"",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-07-15T14:19:01.617Z",deletedAt:null},{transactionId:"txn_01j2bt5rjem60dgvf6ymm8zrvw",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:1900,spendingId:"spnd_01fpwx2qng9gbt32kdh2mdk7df",spendingAmount:1900,categories:["Service","Financial","Accounting and Bookkeeping"],category:"GENERAL_SERVICES_ACCOUNTING_AND_FINANCIAL_PLANNING",date:"2024-07-10T05:00:00Z",name:"FreshBooks",originalName:"FRESHBOOKS. Merchant name: Freshbooks",merchantName:"FreshBooks",originalMerchantName:"FreshBooks",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-07-09T13:15:52.782Z",deletedAt:null},{transactionId:"txn_01j27xtf159hx1j8ajzev4whtb",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:4e3,spendingId:"spnd_01h0jgggcdng3ztx90zwh6nb6f",spendingAmount:3040,categories:["Transfer","Debit"],category:"TRANSFER_OUT_ACCOUNT_TRANSFER",date:"2024-07-08T05:00:00Z",name:"Square Space Domains",originalName:"SQSP* INV140023242. Merchant name: Sqsp",merchantName:"INV",originalMerchantName:"INV",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-07-08T01:02:39.141Z",deletedAt:null},{transactionId:"txn_01j1tzj5snpm0c2zx47f1bma2d",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:6e3,spendingId:"spnd_01g6ngke5g9mgrn9kt7pjdcqr8",spendingAmount:6e3,categories:["Transfer","Debit"],category:"FOOD_AND_DRINK_GROCERIES",date:"2024-07-03T05:00:00Z",name:"Ngrok",originalName:"NGROK 6RWWW7NJFQD-0004. Merchant name: Ngrok 6rwww7njfqd 0004",merchantName:"Ngrok",originalMerchantName:"Ngrok",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-07-03T00:22:57.078Z",deletedAt:null},{transactionId:"txn_01j1qqt56ngf8paqzp4k8vwnvq",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:20775,spendingId:"spnd_01gh9a6yb0weejnxk5y0e66s7s",spendingAmount:20775,categories:["Shops","Digital Purchase"],category:"GENERAL_SERVICES_OTHER_GENERAL_SERVICES",date:"2024-07-02T05:00:00Z",name:"Cloud Vb",originalName:"Google CLOUD vB57xH. Merchant name: Google Cloud",merchantName:"Cloud Vb",originalMerchantName:"Cloud Vb",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-07-01T18:09:46.709Z",deletedAt:null},{transactionId:"txn_01j1qqt56k7ytp6ynqz7q82yzn",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:1287,spendingId:"spnd_01ggwaxcq0y6eazf56a4sq3f02",spendingAmount:1287,categories:["Shops","Digital Purchase"],category:"TRANSFER_OUT_ACCOUNT_TRANSFER",date:"2024-07-02T05:00:00Z",name:"Svcsmonetr.app.",originalName:"SVCSMONETR.APP. Merchant name: Google",merchantName:"Svcsmonetr.app.",originalMerchantName:"Svcsmonetr.app.",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-07-01T18:09:46.709Z",deletedAt:null},{transactionId:"txn_01j1q2sqwwbmvecxd50t453x40",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:1440,spendingId:"spnd_01fpwx3pxg6yaspkx0wn3fptkf",spendingAmount:1440,categories:["Shops","Digital Purchase"],category:"GENERAL_SERVICES_OTHER_GENERAL_SERVICES",date:"2024-07-02T05:00:00Z",name:"Gsuite Monetr.a.",originalName:"GSUITE MONETR.A. Merchant name: Gsuite",merchantName:"Gsuite Monetr.a.",originalMerchantName:"Gsuite Monetr.a.",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-07-01T12:02:32.988Z",deletedAt:null},{transactionId:"txn_01j1fzxja9mcy0tj6wb62b5n0p",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:-22e3,spendingId:null,categories:["Transfer","Payroll"],category:"INCOME_WAGES",date:"2024-06-28T05:00:00Z",name:"Elliot's Contribution",originalName:"5176 TREASURY PR; DEPOSIT; COURANT ELLIOT. Merchant name: 5176 TREASURY PR",originalMerchantName:"",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-06-28T17:57:31.593Z",deletedAt:null},{transactionId:"txn_01j1e1d9p7qb41prh6jne7dtw7",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:34800,spendingId:"spnd_01h264znvxkghmxp5s0wmdbr9j",spendingAmount:34800,categories:["Service"],category:"TRANSFER_OUT_ACCOUNT_TRANSFER",date:"2024-06-28T05:00:00Z",name:"Gitlab Inc..",originalName:"GITLAB INC.. Merchant name: Gitlab",merchantName:"Gitlab Inc..",originalMerchantName:"Gitlab Inc..",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-06-27T23:45:06.759Z",deletedAt:null},{transactionId:"txn_01j1c2cq8dwdpjyvs8fxpkeh5q",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:2900,spendingId:"spnd_01fpwx67z8djhb8bqcy17mrzfe",spendingAmount:2900,categories:["Shops","Digital Purchase"],category:"FOOD_AND_DRINK_GROCERIES",date:"2024-06-27T05:00:00Z",name:"Sentry.",originalName:"SENTRY. Merchant name: Sentry",merchantName:"Sentry.",originalMerchantName:"Sentry.",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-06-27T05:23:47.597Z",deletedAt:null},{transactionId:"txn_01j0psb1fgb1zcc696h7psm9c8",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:800,spendingId:"spnd_01fpwx6ye0kehpverathqakm9x",spendingAmount:800,categories:["Service","Computers","Software Development"],category:"GENERAL_SERVICES_OTHER_GENERAL_SERVICES",date:"2024-06-19T05:00:00Z",name:"GitHub",originalName:"GITHUB, INC.. Merchant name: Github",merchantName:"GitHub",originalMerchantName:"GitHub",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-06-18T23:01:32.273Z",deletedAt:null},{transactionId:"txn_01j0cfj0ajsrqx2c0b41ewyhnj",bankAccountId:"bac_01gds6eqsq7h5mgevwtmw3cyxb",plaidTransaction:null,pendingPlaidTransaction:null,amount:-2e4,spendingId:null,categories:["Transfer","Payroll"],category:"INCOME_WAGES",date:"2024-06-14T05:00:00Z",name:"Elliot's Contribution",originalName:"5176 TREASURY PR; DEPOSIT; COURANT ELLIOT. Merchant name: 5176 TREASURY PR",originalMerchantName:"",currency:"USD",isPending:!1,uploadIdentifier:null,createdAt:"2024-06-14T22:58:10.386Z",deletedAt:null}]),/*#__PURE__*/react.createElement(Story,null)}],render:function(){return /*#__PURE__*/react.createElement(Monetr,null)},parameters:{reactRouter:{routePath:"/*",browserPath:"/bank/bac_01gds6eqsq7h5mgevwtmw3cyxb/transactions"}}};app_stories_Transactions.parameters=app_stories_object_spread_props(app_stories_object_spread({},app_stories_Transactions.parameters),{docs:app_stories_object_spread_props(app_stories_object_spread({},null===(_Transactions_parameters=app_stories_Transactions.parameters)||void 0===_Transactions_parameters?void 0:_Transactions_parameters.docs),{source:app_stories_object_spread({originalSource:"{\n  name: 'Transactions',\n  decorators: [(Story, _) => {\n    const mockAxios = new MockAdapter(monetrClient);\n    mockAxios.onGet('/api/config').reply(200, {\n      'requireLegalName': true,\n      'requirePhoneNumber': true,\n      'verifyLogin': false,\n      'verifyRegister': false,\n      'verifyEmailAddress': true,\n      'verifyForgotPassword': false,\n      'allowSignUp': true,\n      'allowForgotPassword': true,\n      'longPollPlaidSetup': true,\n      'requireBetaCode': true,\n      'initialPlan': {\n        'price': 199\n      },\n      'billingEnabled': true,\n      'iconsEnabled': true,\n      'plaidEnabled': true,\n      'manualEnabled': false,\n      'release': '0.17.16',\n      'revision': '8df5505b7e5273f061d90ddf19e4c1cfca2b4f4f',\n      'buildType': 'binary',\n      'buildTime': '2024-08-28T02:42:56Z'\n    });\n    mockAxios.onGet('/api/users/me').reply(200, {\n      'activeUntil': '2024-09-26T00:31:38Z',\n      'hasSubscription': true,\n      'isActive': true,\n      'isSetup': true,\n      'isTrialing': false,\n      'trialingUntil': null,\n      'user': {\n        'userId': 'user_01hym36e8ewaq0hxssb1m3k4ha',\n        'loginId': 'lgn_01hym36d96ze86vz5g7883vcwg',\n        'login': {\n          'loginId': 'lgn_01hym36d96ze86vz5g7883vcwg',\n          'email': 'me@elliotcourant.dev',\n          'firstName': 'Elliot',\n          'lastName': 'Courant',\n          'passwordResetAt': null,\n          'isEmailVerified': true,\n          'emailVerifiedAt': '2022-09-25T00:24:25.976514Z',\n          'totpEnabledAt': null\n        },\n        'accountId': 'acct_01hk84dchvxvjgp7cgap818c82',\n        'account': {\n          'accountId': 'acct_01hk84dchvxvjgp7cgap818c82',\n          'timezone': 'America/Chicago',\n          'locale': 'en_US',\n          'subscriptionActiveUntil': '2024-09-26T00:31:38Z',\n          'subscriptionStatus': 'active',\n          'trialEndsAt': null,\n          'createdAt': '2024-01-03T17:02:23.290914Z'\n        }\n      }\n    });\n    mockAxios.onGet('/api/links').reply(200, [{\n      'linkId': 'link_01gds6eqsqacg48p0azb3wcpsq',\n      'linkType': 1,\n      'plaidLink': {\n        'products': ['transactions'],\n        'status': 2,\n        'expirationDate': null,\n        'newAccountsAvailable': false,\n        'institutionId': 'ins_116794',\n        'institutionName': 'Mercury',\n        'lastManualSync': '2024-07-06T12:59:09.51222Z',\n        'lastSuccessfulUpdate': '2024-08-29T12:00:01.176597Z',\n        'lastAttemptedUpdate': '2024-08-29T12:00:01.17665Z',\n        'updatedAt': '2024-03-19T06:17:32.335106Z',\n        'createdAt': '2022-09-25T02:08:40.758642Z',\n        'createdBy': 'user_01hym36e8ewaq0hxssb1m3k4ha'\n      },\n      'institutionName': 'Mercury',\n      'description': null,\n      'createdAt': '2022-09-25T02:08:40.758642Z',\n      'createdBy': 'user_01hym36e8ewaq0hxssb1m3k4ha',\n      'updatedAt': '2024-03-19T06:17:32.335106Z',\n      'deletedAt': null\n    }]);\n    mockAxios.onGet('/api/institutions/ins_116794').reply(200, {\n      'institutionId': 'ins_116794',\n      'name': 'Mercury',\n      'products': ['assets', 'auth', 'balance', 'transactions', 'identity'],\n      'countryCodes': ['US'],\n      'url': 'https://mercury.com/',\n      'primaryColor': '#5e6cd4',\n      'logo': 'iVBORw0KGgoAAAANSUhEUgAAAJgAAACYCAMAAAAvHNATAAAAdVBMVEVHcEz///////////////////////////////////////////////8AAAD///9ra2v19fX9/f0jIyMVFRUyMjLs7OysrKwMDAy3t7c9PT3R0dGLi4uhoaF/f39OTk7Dw8OVlZVHR0fj4+Pb29tVVVXLy8tcXFzoRFGvAAAADXRSTlMAQoGXwesjpdoUaS9X3qEOLQAACyRJREFUeNrNXOmCsjoM/cZl1JmBUvZVQMD3f8TbBdqA0KKgF345I0JITk6Wpvz7t/C4/P7tTqfD4Xw+Ynw8nw+H02n393v59z8e3z/7w9mcOM6H/c/3/yLU6Whqj+Pps8J97c/m7OO8//qQrnZPSNXKtnu73i4/B/Ol4/DzTnf43mPz5QPv36W279MCsZhop3eI9nsyVzhOv2tjaxWxmGirYu3naK52HH/Wo62zuepx/lrLithc+VjDnl9H8w3HcbHSduabjt0yMx7Mtx2Hy9bMuNycO/PNx4vm3JtvP/avyHUyP3CcNgX7JS5wOX9GLhOfL5uUiwaoyzblekqywyflMvFhU/74gm/uzY8f+03w/Ysx4Ovpi1pNmtWRazuG4dhudM/S2Hr6Itq4eXkubnshco2Rw0Xhc8IdLys6pFVEQpKA6Kq+ujYQLkqfke2wFsBwWPP7O3USVkKEm3+VogX3cCWYzQYYTrlu3KRif8Kq4IboN3duYtfHK8BsLsBaseysGv8+JkI5TZXxs1K8GGYzmTVnyrg2CvTdiR1j02yYXd1mIc/OM6R3Z2LF6rOIOW0KvJiJhrxFxpwVun1nhljE2sQ1ELcrFc2Z5QXniT7AHHRRYDv+jBMtArAGPEs2B2k/ryL/RtF1H9rFygtUUuZ3IiRVGRpGCa0f3V7E/wzkN86jupos6nF+LcSOhMq40pz4Jfz/6n8VBsTDes99SwDVB+WV/mXfpMpQT9dBrr/H7wsKS8ldSxhl4roLjFSekIIot1tvpIdj2MDeJTnJf15l37PkQgDBnAgC5FuUGzqJ6f2z9gyCrHzgN3rJvp9VWGjIO1IBMsbqhUUdMDCcDlnYC4yg/aOgPwEqpj/Jn1TZt86Zm6AnV86wReIg5rpM5FeJ0EvMZM97kgU6D8DfT6XTlQORbCEOLk+wPLh7JZ7A42chC8YDR8cavTT7olEYJj5VinM8ShCIQAwLLAGDWYTp2l+REEEfIRIMggkCI929Lk+QPrm8K1Mum4UYBDUGONeDGkNm6AAGMS23hwgt/WvyVh9agLIs1QEBTCVA7vdOLqBRqX4dwbQ38utwdi6r4QrPAXemXnClvliIOxCQuxhavRKOTEW0iNGDBj6kN5cxNAn1XaCGPzFns1waJQL2IYqs5ce8YzCp8Tt0I02Src53cvCMni0uiwMjMiUvcN+j/ioYITICLLMzD+i/mZf9fGk9skOFRXRz7axWCpuxqOCgtEA0wQklb3TpBSbWjCxpTBfPShj36vyeyAK8U1yf3kDYxA9ELLd9S5wskEmfSJxMpExnUZnSkpgYLx4xKvsmuMnSyJFpRk2VVgWGjXsOlEvL23iGLb91sbtTGE1KoasX0lZUzjhMi6zmeVDUUEsXsAwFacdVF82/9ewKFZYN/ImirxicTnRXsCLKHSIJSdel/DKDY0+apOIqDWmUKCtycb94IpGJS6Y2Ea9xXmQ0hIn/XDUsy1MMZa5ft77dIBukqm157RtTKRbLPvg32C+FZ3TP2ABmHM39dRDDJCLTLLQpB90cu8CtXP3ssZ+A+DRAwD6LUBnxG0sHMiXECgoMnuXY97TysFeFvPpwYypXktCPo2ah3/gxw1uUhfSnfi8opDqQKVmMyFDF9JmvOQB4hVrjkPwwpzQR+d64ZCz5rtqfUUe6CfKNdEymyiws2ngI+mkop62ylYt85H2nCCUpaEcJycpbT/9dquv2crjRDOOs6oERkBKN3Eeu4Uru6Kol3pfyeoIVPcQGom5K1H5JKPaiSRAn0J0DvjS9nm90HZT80WWRiN+VJse4qAtdBl00AT5hXgazoM7SNKsp+Jy8S5D8x4wzE0Wnqy58/9QQm8jRQWOCsYbd9VuttGOw68gjWRLztRpkf8oksaGCVaBFnd2zomovCyI7LIQ4ueT9tNasEnRHqQcwn6izsp0yIKWwyLWyliPq2CQodkHakDzwhOPVAN1tiDKCRFZ6oZrJTkrBMlk7stqoC0mhLDgontFIE60ERJWCxsugUlEIdlAHyjvIqYOksjyfOoRkSg96pwnyI4l8nzWvPatKAuBLWB0uD0rBInl1ImPJlYd510KaLR3HQKtr2szo2omMVkrhlpFSsLOaLTyZdFqQ3Wpxylg0JhgUt4W2pqp0xS9dJcOqBLOFYmB7AluOwIclRRyCoDOZYziWTMykriPYPRsRTJWNSW33r4K0EM6Eq8Z957ANRxRZjjIjU1UFUh2OrJR4ME7VTp9OnUFo9+HTaJieKZjREywVHJVOCzZ+xhVoTC2Y2pTlWDuVmpLzPk6mTSk7Ln1TRgL8alOqwe+KT6A3R8DvyNp/CvyWEFGCn8YvNPqsz3mlK37rDugCSaaboAtXiijOZsslbYy9GRq6UBNsIAEBCbZr/7Jm5jjBJlLXPYKt5SnRy8wvDYJ4DO5CEow2EyHJE4qxYUgSTZ/rBAiEYJogXj3EYaijiEVrNJL4Isksfgg6Ll0FcDN0QVyT9viCsVHSXr+MQbpYT6U9MGR1RUGQ9cKaOu3RJIpIlkuml5JsL6l6vYt4KlEUvM8MVhUkxwQ1HlsCUCeKf+o6XMakx0wYcdqdSK07pxkrhixWTKhTa00x0jUrs9HKgndWx4uRlraiCa8ydMWIrnyLh1aFNUgrgYega5Qe9M4Re+G2KlSXb0qGDSEf9Zm06FWz7SiDKArkusWIHQlTOHdtwasiMmzJKye9qhq0CLqGnRfnYZpdmeteb6MtAv6wDm37z2gRaJsqkim7TAQ2VQb9RNMKyxZmg6ZKKxZtFdnxnKaKvg0lAOs/tqFGu3b0hOKxDRUXd6ddjssemqSPbShlb9iSqXA82rhDYwbh9cpY447atuERVNu4m9fq5NGt3+rEvjHSoWImBU1Q2Oo0bNS0Pq4KlPj4VHOYquz60ByGIWpAJo/N4fyp5vCidjpvnRe3sX4ibKfjQTtdvQLxs8ICRM7nQew6K9IwlrfDUR/fgwWIdMYCxNIlm7CWGHKQ0F0F1YJfWbLRrNTPWOSyfNBx8cHJCxe5lMuCmCLJB9cfWxYMmbKKlK10pVIxC5cFly+kBnAhVVjenVxIVY+FnFdber7SjzI/iiTNji8939X32y1arDflYn01XKyPhYEXLtZ/eLxBM3l0WG0gJBsOhCDw6XEgRDND0BsIeXGExhKosXo5nHKExn1mhEY7dHQbHTqqhuVnvz2xwtDRi2NaoUBVf0wrNUXy8TCmpRvWHYxpvTbY1g0XyVk25sKsOLB4IjYcbNPOw54WjwKC0iwTo4DYYi0Dy+fJNxzkxbri+4ErXh2elFkoTTuYyXBI1dTtPahhosaGJ/VynVYYN5UtYr5sYl9BqmrYSX8wlY6bzphr/l1hQLcB2YtX9/L6KBtgnA3ozhhSP60y0ixnUYh8MYocupmlREU+rDPYSLP76kjzE0PgoVBZMONujPzHhyBUpL9kbL4XqaYOPjbvz7n2ea2NBtQbS6wX63GgXZMgLt6aQTPESHHTdmtGPu+6pxU3s1A/tSdYYMXNLC9s/5naQFIlnGVni6XZZfbChikuYCFKSlyFSd2O39Xh/NcY7N6zxYxvMosiV04ERsWKW8ye3ZRnfWxT3pPbGFmrrr+Nsc7SxhrsOlsIsBc3fuJZ/1oEsG1vld3u5uJPb8c2Z2/H3u4G9s1u+f+kZOdnX9+w0ddKbPdFHBt+dcl2X/ay3dfjbPeFQtt9BdOGX1q15svaAEus89q2jb4YbcOvkmOvKtyYFTf/usINv+Bxw6/E3PBLRDnYNvna1S2/qHbLr/YVwm3wZcjSHd70+uj/AGgmIsLJi31VAAAAAElFTkSuQmCC',\n      'status': {\n        'auth': {\n          'breakdown': {\n            'error_institution': 0,\n            'error_plaid': 0,\n            'success': 1\n          },\n          'last_status_change': '2023-06-25T13:10:18Z',\n          'status': 'HEALTHY'\n        },\n        'item_logins': {\n          'breakdown': {\n            'error_institution': 0,\n            'error_plaid': 0.014,\n            'success': 0.986\n          },\n          'last_status_change': '2023-06-28T20:15:18Z',\n          'status': 'DEGRADED'\n        },\n        'transactions_updates': {\n          'breakdown': {\n            'error_institution': 0,\n            'error_plaid': 0,\n            'refresh_interval': 'NORMAL',\n            'success': 1\n          },\n          'last_status_change': '2023-06-14T17:05:18Z',\n          'status': 'HEALTHY'\n        }\n      }\n    });\n    mockAxios.onGet('/api/bank_accounts').reply(200, [{\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'linkId': 'link_01gds6eqsqacg48p0azb3wcpsq',\n      'availableBalance': 47986,\n      'currentBalance': 47986,\n      'mask': '2982',\n      'name': 'Mercury Checking',\n      'originalName': 'Mercury Checking',\n      'accountType': 'depository',\n      'accountSubType': 'checking',\n      'status': 'active',\n      'lastUpdated': '2024-08-27T08:53:48.555368Z',\n      'createdAt': '2022-09-25T02:08:40.758642Z',\n      'updatedAt': '2024-03-19T06:17:32.335106Z'\n    }]);\n    mockAxios.onGet('/api/bank_accounts/bac_01gds6eqsq7h5mgevwtmw3cyxb').reply(200, {\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'linkId': 'link_01gds6eqsqacg48p0azb3wcpsq',\n      'plaidBankAccount': {\n        'name': 'Mercury Checking',\n        'officialName': 'Mercury Checking',\n        'mask': '2982',\n        'availableBalance': 47986,\n        'currentBalance': 47986,\n        'limitBalance': null,\n        'createdAt': '2024-03-19T15:15:10.31132Z',\n        'createdBy': 'user_01hym36e8ewaq0hxssb1m3k4ha'\n      },\n      'availableBalance': 47986,\n      'currentBalance': 47986,\n      'mask': '2982',\n      'name': 'Mercury Checking',\n      'originalName': 'Mercury Checking',\n      'accountType': 'depository',\n      'accountSubType': 'checking',\n      'status': 'active',\n      'lastUpdated': '2024-08-27T08:53:48.555368Z',\n      'createdAt': '2022-09-25T02:08:40.758642Z',\n      'updatedAt': '2024-03-19T06:17:32.335106Z'\n    });\n    mockAxios.onGet('/api/bank_accounts/bac_01gds6eqsq7h5mgevwtmw3cyxb/funding_schedules').reply(200, [{\n      'fundingScheduleId': 'fund_01hym37k3kj4ghv67nfx7vkvr0',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'name': 'Elliot\\'s Contribution',\n      'description': '15th and last day of every month',\n      'ruleset': 'DTSTART:20230228T060000Z\\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=15,-1',\n      'excludeWeekends': true,\n      'waitForDeposit': false,\n      'estimatedDeposit': 22000,\n      'lastRecurrence': '2024-08-15T05:00:00Z',\n      'nextRecurrence': '2024-08-30T05:00:00Z',\n      'nextRecurrenceOriginal': '2024-08-31T05:00:00Z'\n    }]);\n    mockAxios.onGet('/api/bank_accounts/bac_01gds6eqsq7h5mgevwtmw3cyxb/balances').reply(200, {\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'current': 47986,\n      'available': 47986,\n      'free': 7724,\n      'expenses': 30262,\n      'goals': 10000\n    });\n    mockAxios.onGet('/api/bank_accounts/bac_01gds6eqsq7h5mgevwtmw3cyxb/spending').reply(200, [{\n      'spendingId': 'spnd_01h264znvxkghmxp5s0wmdbr9j',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'fundingScheduleId': 'fund_01hym37k3kj4ghv67nfx7vkvr0',\n      'spendingType': 0,\n      'name': 'GitLab',\n      'description': 'Every year on the 16th of June',\n      'targetAmount': 34800,\n      'currentAmount': 5800,\n      'usedAmount': 0,\n      'ruleset': 'DTSTART:20230606T050000Z\\nRRULE:FREQ=YEARLY;INTERVAL=1;BYMONTH=6;BYMONTHDAY=16',\n      'lastSpentFrom': null,\n      'lastRecurrence': '2024-06-16T05:00:00Z',\n      'nextRecurrence': '2025-06-16T05:00:00Z',\n      'nextContributionAmount': 1450,\n      'isBehind': false,\n      'isPaused': false,\n      'createdAt': '2023-06-05T16:07:02.780623Z'\n    }, {\n      'spendingId': 'spnd_01fpwx2qng9gbt32kdh2mdk7df',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'fundingScheduleId': 'fund_01hym37k3kj4ghv67nfx7vkvr0',\n      'spendingType': 0,\n      'name': 'Freshbooks',\n      'targetAmount': 1900,\n      'currentAmount': 950,\n      'usedAmount': 0,\n      'ruleset': 'DTSTART:20230310T060000Z\\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=10',\n      'lastSpentFrom': null,\n      'lastRecurrence': '2024-08-10T06:00:00Z',\n      'nextRecurrence': '2024-09-10T06:00:00Z',\n      'nextContributionAmount': 950,\n      'isBehind': false,\n      'isPaused': false,\n      'createdAt': '2021-12-14T16:40:46Z'\n    }, {\n      'spendingId': 'spnd_01gk23r0mgcekdf8bzkvf55f26',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'fundingScheduleId': 'fund_01hym37k3kj4ghv67nfx7vkvr0',\n      'spendingType': 1,\n      'name': 'Rainy Day',\n      'targetAmount': 100,\n      'currentAmount': 17724,\n      'usedAmount': 58900,\n      'ruleset': null,\n      'lastSpentFrom': null,\n      'lastRecurrence': '2023-12-31T06:00:00Z',\n      'nextRecurrence': '2023-12-31T06:00:00Z',\n      'nextContributionAmount': 0,\n      'isBehind': false,\n      'isPaused': false,\n      'createdAt': '2022-11-29T16:32:58Z'\n    }, {\n      'spendingId': 'spnd_01ggwaxcq0y6eazf56a4sq3f02',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'fundingScheduleId': 'fund_01hym37k3kj4ghv67nfx7vkvr0',\n      'spendingType': 0,\n      'name': 'Google Voice',\n      'targetAmount': 1292,\n      'currentAmount': 646,\n      'usedAmount': 0,\n      'ruleset': 'DTSTART:20230301T060000Z\\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=1',\n      'lastSpentFrom': null,\n      'lastRecurrence': '2024-08-01T06:00:00Z',\n      'nextRecurrence': '2024-09-01T06:00:00Z',\n      'nextContributionAmount': 646,\n      'isBehind': false,\n      'isPaused': false,\n      'createdAt': '2022-11-02T14:11:24Z'\n    }, {\n      'spendingId': 'spnd_01g6ngke5g9mgrn9kt7pjdcqr8',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'fundingScheduleId': 'fund_01hym37k3kj4ghv67nfx7vkvr0',\n      'spendingType': 0,\n      'name': 'ngrok',\n      'description': 'Every year on the 26th of June',\n      'targetAmount': 6000,\n      'currentAmount': 780,\n      'usedAmount': 0,\n      'ruleset': 'DTSTART:20230625T050000Z\\nRRULE:FREQ=YEARLY;INTERVAL=1;BYMONTH=6;BYMONTHDAY=26',\n      'lastSpentFrom': null,\n      'lastRecurrence': '2024-06-26T05:00:00Z',\n      'nextRecurrence': '2025-06-26T05:00:00Z',\n      'nextContributionAmount': 261,\n      'isBehind': false,\n      'isPaused': false,\n      'createdAt': '2022-06-28T15:59:10Z'\n    }, {\n      'spendingId': 'spnd_01h0jgggcdng3ztx90zwh6nb6f',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'fundingScheduleId': 'fund_01hym37k3kj4ghv67nfx7vkvr0',\n      'spendingType': 0,\n      'name': 'Domains',\n      'description': 'Every year on the 1st of April',\n      'targetAmount': 14000,\n      'currentAmount': 2331,\n      'usedAmount': 0,\n      'ruleset': 'DTSTART:20240401T050000Z\\nRRULE:FREQ=YEARLY;INTERVAL=1;BYMONTH=4;BYMONTHDAY=1',\n      'lastSpentFrom': null,\n      'lastRecurrence': '2024-04-01T05:00:00Z',\n      'nextRecurrence': '2025-04-01T05:00:00Z',\n      'nextContributionAmount': 777,\n      'isBehind': false,\n      'isPaused': false,\n      'createdAt': '2023-05-16T14:47:58.09301Z'\n    }, {\n      'spendingId': 'spnd_01h0dxnp2nm9q90pdqemp1z5m1',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'fundingScheduleId': 'fund_01hym37k3kj4ghv67nfx7vkvr0',\n      'spendingType': 0,\n      'name': 'Plaid',\n      'description': 'Every month on the 10th',\n      'targetAmount': 500,\n      'currentAmount': 365,\n      'usedAmount': 0,\n      'ruleset': 'DTSTART:20230610T050000Z\\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=10',\n      'lastSpentFrom': null,\n      'lastRecurrence': '2024-08-10T05:00:00Z',\n      'nextRecurrence': '2024-09-10T05:00:00Z',\n      'nextContributionAmount': 135,\n      'isBehind': false,\n      'isPaused': false,\n      'createdAt': '2023-05-14T20:01:47.09268Z'\n    }, {\n      'spendingId': 'spnd_01fpwx3pxg6yaspkx0wn3fptkf',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'fundingScheduleId': 'fund_01hym37k3kj4ghv67nfx7vkvr0',\n      'spendingType': 0,\n      'name': 'Google G-Suite',\n      'targetAmount': 1440,\n      'currentAmount': 720,\n      'usedAmount': 0,\n      'ruleset': 'DTSTART:20230301T060000Z\\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=1',\n      'lastSpentFrom': null,\n      'lastRecurrence': '2024-08-01T06:00:00Z',\n      'nextRecurrence': '2024-09-01T06:00:00Z',\n      'nextContributionAmount': 720,\n      'isBehind': false,\n      'isPaused': false,\n      'createdAt': '2021-12-14T16:41:18Z'\n    }, {\n      'spendingId': 'spnd_01gh9a6yb0weejnxk5y0e66s7s',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'fundingScheduleId': 'fund_01hym37k3kj4ghv67nfx7vkvr0',\n      'spendingType': 0,\n      'name': 'Google Cloud Production',\n      'targetAmount': 25000,\n      'currentAmount': 12588,\n      'usedAmount': 0,\n      'ruleset': 'DTSTART:20230301T060000Z\\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=1',\n      'lastSpentFrom': null,\n      'lastRecurrence': '2024-08-01T06:00:00Z',\n      'nextRecurrence': '2024-09-01T06:00:00Z',\n      'nextContributionAmount': 12412,\n      'isBehind': false,\n      'isPaused': false,\n      'createdAt': '2022-11-07T15:09:16Z'\n    }, {\n      'spendingId': 'spnd_01hcjv04tytz5xatf3dhers5kg',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'fundingScheduleId': 'fund_01hym37k3kj4ghv67nfx7vkvr0',\n      'spendingType': 0,\n      'name': 'P.O. Box',\n      'description': 'Every year on the 13th of October',\n      'targetAmount': 7000,\n      'currentAmount': 6082,\n      'usedAmount': 0,\n      'ruleset': 'DTSTART:20231013T050000Z\\nRRULE:FREQ=YEARLY;INTERVAL=1;BYMONTH=10;BYMONTHDAY=13',\n      'lastSpentFrom': null,\n      'lastRecurrence': '2023-10-13T05:00:00Z',\n      'nextRecurrence': '2024-10-13T05:00:00Z',\n      'nextContributionAmount': 306,\n      'isBehind': false,\n      'isPaused': false,\n      'createdAt': '2023-10-12T20:59:38.206294Z'\n    }, {\n      'spendingId': 'spnd_01fpwx6ye0kehpverathqakm9x',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'fundingScheduleId': 'fund_01hym37k3kj4ghv67nfx7vkvr0',\n      'spendingType': 0,\n      'name': 'GitHub',\n      'targetAmount': 800,\n      'currentAmount': 0,\n      'usedAmount': 0,\n      'ruleset': 'DTSTART:20230319T050000Z\\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=19',\n      'lastSpentFrom': null,\n      'lastRecurrence': '2024-08-19T05:00:00Z',\n      'nextRecurrence': '2024-09-19T05:00:00Z',\n      'nextContributionAmount': 400,\n      'isBehind': false,\n      'isPaused': false,\n      'createdAt': '2021-12-14T16:43:04Z'\n    }, {\n      'spendingId': 'spnd_01fpwx67z8djhb8bqcy17mrzfe',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'fundingScheduleId': 'fund_01hym37k3kj4ghv67nfx7vkvr0',\n      'spendingType': 0,\n      'name': 'Sentry',\n      'targetAmount': 3446,\n      'currentAmount': 0,\n      'usedAmount': 0,\n      'ruleset': 'DTSTART:20230325T050000Z\\nRRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=25',\n      'lastSpentFrom': null,\n      'lastRecurrence': '2024-08-25T05:00:00Z',\n      'nextRecurrence': '2024-09-25T05:00:00Z',\n      'nextContributionAmount': 1723,\n      'isBehind': false,\n      'isPaused': false,\n      'createdAt': '2021-12-14T16:42:41Z'\n    }]);\n    mockAxios.onGet('/api/bank_accounts/bac_01gds6eqsq7h5mgevwtmw3cyxb/transactions').reply(200, [{\n      'transactionId': 'txn_01j68vszqeq30t7jz7atk9yd9r',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 3446,\n      'spendingId': 'spnd_01fpwx67z8djhb8bqcy17mrzfe',\n      'spendingAmount': 2900,\n      'categories': ['Shops', 'Digital Purchase'],\n      'category': 'FOOD_AND_DRINK_GROCERIES',\n      'date': '2024-08-27T05:00:00Z',\n      'name': 'Sentry.',\n      'originalName': 'SENTRY. Merchant name: Sentry',\n      'merchantName': 'Sentry.',\n      'originalMerchantName': 'Sentry.',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-08-27T02:49:28.059Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j5m4enxf50k3d2h2c9dtst4z',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 803,\n      'spendingId': 'spnd_01fpwx6ye0kehpverathqakm9x',\n      'spendingAmount': 800,\n      'categories': ['Service', 'Computers', 'Software Development'],\n      'category': 'GENERAL_SERVICES_OTHER_GENERAL_SERVICES',\n      'date': '2024-08-19T05:00:00Z',\n      'name': 'GitHub',\n      'originalName': 'GITHUB, INC.. Merchant name: Github',\n      'merchantName': 'GitHub',\n      'originalMerchantName': 'GitHub',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-08-19T01:36:31.663Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j59tnczpyqwq7sxw4gzbmkvx',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 270,\n      'spendingId': 'spnd_01h0dxnp2nm9q90pdqemp1z5m1',\n      'spendingAmount': 270,\n      'categories': ['Service', 'Business Services'],\n      'category': 'GENERAL_SERVICES_OTHER_GENERAL_SERVICES',\n      'date': '2024-08-16T05:00:00Z',\n      'name': 'Plaid',\n      'originalName': 'Plaid',\n      'merchantName': 'Plaid Technologies Inc.',\n      'originalMerchantName': 'Plaid Technologies Inc.',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-08-15T01:33:01.814Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j5b3p0waxq4894dgteb58s6e',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': -22000,\n      'spendingId': null,\n      'categories': ['Transfer', 'Payroll'],\n      'category': 'INCOME_WAGES',\n      'date': '2024-08-15T05:00:00Z',\n      'name': 'Elliot\\'s Contribution',\n      'originalName': '5176 TREASURY PR; DEPOSIT; COURANT ELLIOT. Merchant name: 5176 TREASURY PR',\n      'originalMerchantName': '',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-08-15T13:29:53.802Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j4vn659athnneb4jd6yf2twa',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 1900,\n      'spendingId': 'spnd_01fpwx2qng9gbt32kdh2mdk7df',\n      'spendingAmount': 1900,\n      'categories': ['Service', 'Financial', 'Accounting and Bookkeeping'],\n      'category': 'GENERAL_SERVICES_ACCOUNTING_AND_FINANCIAL_PLANNING',\n      'date': '2024-08-10T05:00:00Z',\n      'name': 'FreshBooks',\n      'originalName': 'FRESHBOOKS. Merchant name: Freshbooks',\n      'merchantName': 'FreshBooks',\n      'originalMerchantName': 'FreshBooks',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-08-09T13:27:57.482Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j47xct43472gtrv6dkp8s9s8',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 1440,\n      'spendingId': 'spnd_01fpwx3pxg6yaspkx0wn3fptkf',\n      'spendingAmount': 1440,\n      'categories': ['Shops', 'Digital Purchase'],\n      'category': 'GENERAL_SERVICES_OTHER_GENERAL_SERVICES',\n      'date': '2024-08-02T05:00:00Z',\n      'name': 'Gsuite Monetr.a.',\n      'originalName': 'GSUITE MONETR.A. Merchant name: Gsuite',\n      'merchantName': 'Gsuite Monetr.a.',\n      'originalMerchantName': 'Gsuite Monetr.a.',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-08-01T21:26:35.396Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j47xct4230fpdj4gt8trf021',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 24824,\n      'spendingId': 'spnd_01gh9a6yb0weejnxk5y0e66s7s',\n      'spendingAmount': 24824,\n      'categories': ['Shops', 'Digital Purchase'],\n      'category': 'GENERAL_MERCHANDISE_OTHER_GENERAL_MERCHANDISE',\n      'date': '2024-08-02T05:00:00Z',\n      'name': 'Cloud',\n      'originalName': 'Google CLOUD 2xHT9W. Merchant name: Google Cloud',\n      'merchantName': 'Cloud',\n      'originalMerchantName': 'Cloud',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-08-01T21:26:35.396Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j47xct40x2vwfhst88k4j9zs',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 1294,\n      'spendingId': 'spnd_01ggwaxcq0y6eazf56a4sq3f02',\n      'spendingAmount': 1292,\n      'categories': ['Shops', 'Digital Purchase'],\n      'category': 'TRANSFER_OUT_ACCOUNT_TRANSFER',\n      'date': '2024-08-02T05:00:00Z',\n      'name': 'Svcsmonetr.app.',\n      'originalName': 'SVCSMONETR.APP. Merchant name: Google',\n      'merchantName': 'Svcsmonetr.app.',\n      'originalMerchantName': 'Svcsmonetr.app.',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-08-01T21:26:35.396Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j45asp0shxbda8abgmqsa6mz',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': -22000,\n      'spendingId': null,\n      'categories': ['Transfer', 'Payroll'],\n      'category': 'INCOME_WAGES',\n      'date': '2024-07-31T05:00:00Z',\n      'name': 'Elliot\\'s Contribution',\n      'originalName': '5176 TREASURY PR; DEPOSIT; COURANT ELLIOT. Merchant name: 5176 TREASURY PR',\n      'originalMerchantName': '',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-07-31T21:23:05.369Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j3s2r562navpr3y1y27rn95j',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 3914,\n      'spendingId': 'spnd_01fpwx67z8djhb8bqcy17mrzfe',\n      'spendingAmount': 2900,\n      'categories': ['Shops', 'Digital Purchase'],\n      'category': 'FOOD_AND_DRINK_GROCERIES',\n      'date': '2024-07-27T05:00:00Z',\n      'name': 'Sentry.',\n      'originalName': 'SENTRY. Merchant name: Sentry',\n      'merchantName': 'Sentry.',\n      'originalMerchantName': 'Sentry.',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-07-27T03:11:33.57Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j33sp41a5b2s3nnkddjw1grc',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 800,\n      'spendingId': 'spnd_01fpwx6ye0kehpverathqakm9x',\n      'spendingAmount': 800,\n      'categories': ['Service', 'Computers', 'Software Development'],\n      'category': 'GENERAL_SERVICES_OTHER_GENERAL_SERVICES',\n      'date': '2024-07-19T05:00:00Z',\n      'name': 'GitHub',\n      'originalName': 'GITHUB, INC.. Merchant name: Github',\n      'merchantName': 'GitHub',\n      'originalMerchantName': 'GitHub',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-07-18T20:49:06.602Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j2r4mbwb1d56d5be9h5y6jxq',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 210,\n      'spendingId': 'spnd_01h0dxnp2nm9q90pdqemp1z5m1',\n      'spendingAmount': 210,\n      'categories': ['Service', 'Business Services'],\n      'category': 'GENERAL_SERVICES_OTHER_GENERAL_SERVICES',\n      'date': '2024-07-16T05:00:00Z',\n      'name': 'Plaid',\n      'originalName': 'Plaid',\n      'merchantName': 'Plaid Technologies Inc.',\n      'originalMerchantName': 'Plaid Technologies Inc.',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-07-14T08:09:30.251Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j2vc5pkhbmjp7kmj7ede9vbe',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': -22000,\n      'spendingId': null,\n      'categories': ['Transfer', 'Payroll'],\n      'category': 'INCOME_WAGES',\n      'date': '2024-07-15T05:00:00Z',\n      'name': 'Elliot\\'s Contribution',\n      'originalName': '5176 TREASURY PR; DEPOSIT; COURANT ELLIOT. Merchant name: 5176 TREASURY PR',\n      'originalMerchantName': '',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-07-15T14:19:01.617Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j2bt5rjem60dgvf6ymm8zrvw',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 1900,\n      'spendingId': 'spnd_01fpwx2qng9gbt32kdh2mdk7df',\n      'spendingAmount': 1900,\n      'categories': ['Service', 'Financial', 'Accounting and Bookkeeping'],\n      'category': 'GENERAL_SERVICES_ACCOUNTING_AND_FINANCIAL_PLANNING',\n      'date': '2024-07-10T05:00:00Z',\n      'name': 'FreshBooks',\n      'originalName': 'FRESHBOOKS. Merchant name: Freshbooks',\n      'merchantName': 'FreshBooks',\n      'originalMerchantName': 'FreshBooks',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-07-09T13:15:52.782Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j27xtf159hx1j8ajzev4whtb',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 4000,\n      'spendingId': 'spnd_01h0jgggcdng3ztx90zwh6nb6f',\n      'spendingAmount': 3040,\n      'categories': ['Transfer', 'Debit'],\n      'category': 'TRANSFER_OUT_ACCOUNT_TRANSFER',\n      'date': '2024-07-08T05:00:00Z',\n      'name': 'Square Space Domains',\n      'originalName': 'SQSP* INV140023242. Merchant name: Sqsp',\n      'merchantName': 'INV',\n      'originalMerchantName': 'INV',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-07-08T01:02:39.141Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j1tzj5snpm0c2zx47f1bma2d',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 6000,\n      'spendingId': 'spnd_01g6ngke5g9mgrn9kt7pjdcqr8',\n      'spendingAmount': 6000,\n      'categories': ['Transfer', 'Debit'],\n      'category': 'FOOD_AND_DRINK_GROCERIES',\n      'date': '2024-07-03T05:00:00Z',\n      'name': 'Ngrok',\n      'originalName': 'NGROK 6RWWW7NJFQD-0004. Merchant name: Ngrok 6rwww7njfqd 0004',\n      'merchantName': 'Ngrok',\n      'originalMerchantName': 'Ngrok',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-07-03T00:22:57.078Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j1qqt56ngf8paqzp4k8vwnvq',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 20775,\n      'spendingId': 'spnd_01gh9a6yb0weejnxk5y0e66s7s',\n      'spendingAmount': 20775,\n      'categories': ['Shops', 'Digital Purchase'],\n      'category': 'GENERAL_SERVICES_OTHER_GENERAL_SERVICES',\n      'date': '2024-07-02T05:00:00Z',\n      'name': 'Cloud Vb',\n      'originalName': 'Google CLOUD vB57xH. Merchant name: Google Cloud',\n      'merchantName': 'Cloud Vb',\n      'originalMerchantName': 'Cloud Vb',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-07-01T18:09:46.709Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j1qqt56k7ytp6ynqz7q82yzn',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 1287,\n      'spendingId': 'spnd_01ggwaxcq0y6eazf56a4sq3f02',\n      'spendingAmount': 1287,\n      'categories': ['Shops', 'Digital Purchase'],\n      'category': 'TRANSFER_OUT_ACCOUNT_TRANSFER',\n      'date': '2024-07-02T05:00:00Z',\n      'name': 'Svcsmonetr.app.',\n      'originalName': 'SVCSMONETR.APP. Merchant name: Google',\n      'merchantName': 'Svcsmonetr.app.',\n      'originalMerchantName': 'Svcsmonetr.app.',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-07-01T18:09:46.709Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j1q2sqwwbmvecxd50t453x40',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 1440,\n      'spendingId': 'spnd_01fpwx3pxg6yaspkx0wn3fptkf',\n      'spendingAmount': 1440,\n      'categories': ['Shops', 'Digital Purchase'],\n      'category': 'GENERAL_SERVICES_OTHER_GENERAL_SERVICES',\n      'date': '2024-07-02T05:00:00Z',\n      'name': 'Gsuite Monetr.a.',\n      'originalName': 'GSUITE MONETR.A. Merchant name: Gsuite',\n      'merchantName': 'Gsuite Monetr.a.',\n      'originalMerchantName': 'Gsuite Monetr.a.',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-07-01T12:02:32.988Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j1fzxja9mcy0tj6wb62b5n0p',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': -22000,\n      'spendingId': null,\n      'categories': ['Transfer', 'Payroll'],\n      'category': 'INCOME_WAGES',\n      'date': '2024-06-28T05:00:00Z',\n      'name': 'Elliot\\'s Contribution',\n      'originalName': '5176 TREASURY PR; DEPOSIT; COURANT ELLIOT. Merchant name: 5176 TREASURY PR',\n      'originalMerchantName': '',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-06-28T17:57:31.593Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j1e1d9p7qb41prh6jne7dtw7',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 34800,\n      'spendingId': 'spnd_01h264znvxkghmxp5s0wmdbr9j',\n      'spendingAmount': 34800,\n      'categories': ['Service'],\n      'category': 'TRANSFER_OUT_ACCOUNT_TRANSFER',\n      'date': '2024-06-28T05:00:00Z',\n      'name': 'Gitlab Inc..',\n      'originalName': 'GITLAB INC.. Merchant name: Gitlab',\n      'merchantName': 'Gitlab Inc..',\n      'originalMerchantName': 'Gitlab Inc..',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-06-27T23:45:06.759Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j1c2cq8dwdpjyvs8fxpkeh5q',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 2900,\n      'spendingId': 'spnd_01fpwx67z8djhb8bqcy17mrzfe',\n      'spendingAmount': 2900,\n      'categories': ['Shops', 'Digital Purchase'],\n      'category': 'FOOD_AND_DRINK_GROCERIES',\n      'date': '2024-06-27T05:00:00Z',\n      'name': 'Sentry.',\n      'originalName': 'SENTRY. Merchant name: Sentry',\n      'merchantName': 'Sentry.',\n      'originalMerchantName': 'Sentry.',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-06-27T05:23:47.597Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j0psb1fgb1zcc696h7psm9c8',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': 800,\n      'spendingId': 'spnd_01fpwx6ye0kehpverathqakm9x',\n      'spendingAmount': 800,\n      'categories': ['Service', 'Computers', 'Software Development'],\n      'category': 'GENERAL_SERVICES_OTHER_GENERAL_SERVICES',\n      'date': '2024-06-19T05:00:00Z',\n      'name': 'GitHub',\n      'originalName': 'GITHUB, INC.. Merchant name: Github',\n      'merchantName': 'GitHub',\n      'originalMerchantName': 'GitHub',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-06-18T23:01:32.273Z',\n      'deletedAt': null\n    }, {\n      'transactionId': 'txn_01j0cfj0ajsrqx2c0b41ewyhnj',\n      'bankAccountId': 'bac_01gds6eqsq7h5mgevwtmw3cyxb',\n      'plaidTransaction': null,\n      'pendingPlaidTransaction': null,\n      'amount': -20000,\n      'spendingId': null,\n      'categories': ['Transfer', 'Payroll'],\n      'category': 'INCOME_WAGES',\n      'date': '2024-06-14T05:00:00Z',\n      'name': 'Elliot\\'s Contribution',\n      'originalName': '5176 TREASURY PR; DEPOSIT; COURANT ELLIOT. Merchant name: 5176 TREASURY PR',\n      'originalMerchantName': '',\n      'currency': 'USD',\n      'isPending': false,\n      'uploadIdentifier': null,\n      'createdAt': '2024-06-14T22:58:10.386Z',\n      'deletedAt': null\n    }]);\n    return <Story />;\n  }],\n  render: () => <Monetr />,\n  parameters: {\n    reactRouter: {\n      routePath: '/*',\n      browserPath: '/bank/bac_01gds6eqsq7h5mgevwtmw3cyxb/transactions'\n    }\n  }\n}"},null===(_Transactions_parameters1=app_stories_Transactions.parameters)||void 0===_Transactions_parameters1?void 0:null===(_Transactions_parameters_docs=_Transactions_parameters1.docs)||void 0===_Transactions_parameters_docs?void 0:_Transactions_parameters_docs.source)})});let __namedExportsOrder=["Transactions"]},"../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[8].use[2]!../interface/src/loading.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=/*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=/*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".dot{animation:dot 3.2s infinite}.dot,.dots{transform:translateX(0)}.dots{animation:dots 3.2s infinite}.blobs{filter:url(#magic);gap:2rem}.blob{border-radius:100%;height:4rem;width:4rem}@keyframes dot{50%{transform:translateX(18rem)}}@keyframes dots{50%{transform:translateX(-6rem)}}","",{version:3,sources:["webpack://./../interface/src/loading.css"],names:[],mappings:"AAAA,KAEE,2BACF,CAEA,WAJE,uBAOF,CAHA,MAEE,4BACF,CAEA,OACE,kBAAqB,CACrB,QACF,CAEA,MAGE,kBAAmB,CADnB,WAAY,CADZ,UAGF,CAEA,eACE,IACE,2BACF,CACF,CACA,gBACE,IACE,2BACF,CACF",sourcesContent:['.dot {\n  transform: translateX(0);\n  animation: dot 3.2s infinite;\n}\n\n.dots {\n  transform: translateX(0);\n  animation: dots 3.2s infinite;\n}\n\n.blobs {\n  filter: url("#magic");\n  gap: 2rem;\n}\n\n.blob {\n  width: 4rem;\n  height: 4rem;\n  border-radius: 100%;\n}\n\n@keyframes dot {\n  50% {\n    transform: translateX(18rem);\n  }\n}\n@keyframes dots {\n  50% {\n    transform: translateX(-6rem);\n  }\n}\n'],sourceRoot:""}]);let __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/css-loader/dist/cjs.js!../node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!../interface/src/components/MSelectSpendingTransaction.scss":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _stories_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_stories_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=/*#__PURE__*/__webpack_require__.n(_stories_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_stories_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=/*#__PURE__*/__webpack_require__.n(_stories_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_stories_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".group:hover:not(:focus-within) div.m-select-spending-transaction__control{--tw-border-opacity:1!important;border-color:rgb(113 113 122/var(--tw-border-opacity))!important}.group:hover .m-select-spending-transaction__input-container,.group:hover .m-select-spending-transaction__single-value,.group:hover .m-select-spending-transaction__value-container{font-size:1rem;font-weight:500;line-height:1.5rem}.group:hover .m-select-spending-transaction__input-container:is(.dark *),.group:hover .m-select-spending-transaction__single-value:is(.dark *),.group:hover .m-select-spending-transaction__value-container:is(.dark *){--tw-text-opacity:1;color:rgb(250 250 250/var(--tw-text-opacity))}.group div.m-select-spending-transaction__control{background-color:initial;transition:unset}.group div.m-select-spending-transaction__control:not(:hover):not(:focus-within){border-color:#0000}.group div.m-select-spending-transaction__control:not(:hover):not(:focus-within) .m-select-spending-transaction__indicators .m-select-spending-transaction__dropdown-indicator,.group div.m-select-spending-transaction__control:not(:hover):not(:focus-within) .m-select-spending-transaction__indicators .m-select-spending-transaction__indicator-separator{opacity:0}.group div.m-select-spending-transaction__control .m-select-spending-transaction__input-container,.group div.m-select-spending-transaction__control .m-select-spending-transaction__single-value,.group div.m-select-spending-transaction__control .m-select-spending-transaction__value-container{font-size:1rem;font-weight:500;line-height:1.5rem}.group div.m-select-spending-transaction__control .m-select-spending-transaction__input-container:is(.dark *),.group div.m-select-spending-transaction__control .m-select-spending-transaction__single-value:is(.dark *),.group div.m-select-spending-transaction__control .m-select-spending-transaction__value-container:is(.dark *){--tw-text-opacity:1;color:rgb(161 161 170/var(--tw-text-opacity))}","",{version:3,sources:["webpack://./../interface/src/components/MSelectSpendingTransaction.scss"],names:[],mappings:"AAIQ,2EAAA,+BAAA,CAAA,gEAAA,CAOF,oLAAA,cAAA,CAAA,eAAA,CAAA,kBAAA,CAAA,wNAAA,mBAAA,CAAA,6CAAA,CAIJ,kDAME,wBAAA,CALA,gBAKA,CAMI,iFAAA,kBAAA,CAKI,+VAAA,SAAA,CAWN,mSAAA,cAAA,CAAA,eAAA,CAAA,kBAAA,CAAA,uUAAA,mBAAA,CAAA,6CAAA",sourcesContent:[".group {\n  &:hover {\n    &:not(:focus-within) {\n     div.m-select-spending-transaction__control  {\n        @apply border-dark-monetr-border-string !important;\n      }\n    }\n\n    .m-select-spending-transaction__value-container,\n    .m-select-spending-transaction__input-container,\n    .m-select-spending-transaction__single-value {\n      @apply text-base font-medium dark:text-dark-monetr-content-emphasis;\n    }\n  }\n\n  div.m-select-spending-transaction__control {\n    transition: unset;\n\n    /* Because this is in the sidebar, it might have the blurred background */\n    /* beneath the actual select component, make sure that part renders */\n    /* correctly. But this way the dropdown itself still has a solid background */\n    @apply bg-transparent;\n\n    /* Only show the border and indicator separator when the react-select */\n    /* is hovered or focuses. */\n    &:not(:hover) {\n      &:not(:focus-within) {\n        @apply border-transparent;\n\n        .m-select-spending-transaction__indicators {\n          .m-select-spending-transaction__indicator-separator,\n          .m-select-spending-transaction__dropdown-indicator {\n            @apply opacity-0;\n          }\n        }\n      }\n    }\n\n    /* Make the value text displayed a bit bigger because this is a significant */\n    /* component in the sidebar */\n    .m-select-spending-transaction__value-container,\n    .m-select-spending-transaction__input-container,\n    .m-select-spending-transaction__single-value {\n      @apply text-base font-medium dark:text-dark-monetr-content-subtle;\n    }\n  }\n}\n\n"],sourceRoot:""}]);let __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);