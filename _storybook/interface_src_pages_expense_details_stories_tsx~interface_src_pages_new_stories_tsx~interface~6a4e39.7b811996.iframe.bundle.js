(self.webpackChunk_monetr_stories=self.webpackChunk_monetr_stories||[]).push([["interface_src_pages_expense_details_stories_tsx~interface_src_pages_new_stories_tsx~interface~6a4e39"],{"../interface/src/components/MSelectAccount.scss":function(e,t,n){e.hot.accept()},"../interface/src/components/MSelectSpendingTransaction.scss":function(e,t,n){e.hot.accept()},"../interface/src/components/Layout/BankSidebar.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return f}});var s=n("../node_modules/react/jsx-runtime.js");n("../node_modules/react/index.js");var r=n("../node_modules/react-router-dom/dist/index.js"),a=n("../node_modules/@mui/icons-material/esm/index.js"),i=n.ir(n("../interface/src/components/Layout/BankSidebarSubscriptionItem.tsx")),l=n("../interface/src/assets/index.js"),o=n.ir(n("../interface/src/components/Layout/BankSidebarItem.tsx")),c=n.ir(n("../interface/src/components/MDivider.tsx")),d=n.ir(n("../interface/src/components/MSidebarToggle.tsx")),u=n("../interface/src/hooks/links.ts"),m=n.ir(n("../interface/src/util/mergeTailwind.ts"));function f(e){let{data:t,isLoading:n,isError:i}=(0,u.useLinks)();return n?(0,s.jsx)(x,{className:e.className}):i?(0,s.jsx)(x,{className:e.className,children:(0,s.jsx)("div",{className:"w-full h-12 flex items-center justify-center relative group",children:(0,s.jsx)("div",{className:"absolute rounded-full w-10 h-10 dark:bg-dark-monetr-background-subtle dark:hover:bg-dark-monetr-background-emphasis drop-shadow-md flex justify-center items-center",children:(0,s.jsx)(a.ErrorOutline,{className:"text-3xl"})})})}):(0,s.jsxs)(x,{className:e.className,children:[Array.from(t.values()).map(e=>(0,s.jsx)(o.default,{link:e},e.linkId)),(0,s.jsx)("div",{className:"w-full h-12 flex items-center justify-center relative group",children:(0,s.jsx)(r.Link,{to:"/link/create",className:"cursor-pointer absolute rounded-full w-10 h-10 dark:bg-dark-monetr-background-subtle dark:hover:bg-dark-monetr-background-emphasis drop-shadow-md flex justify-center items-center",children:(0,s.jsx)(a.PlusOne,{className:"text-3xl"})})})]})}function x(e){let t=(0,m.default)("border","border-transparent","dark:border-r-dark-monetr-border","flex","flex-col","flex-none","gap-4","h-full","items-center","lg:py-4","pt-2","pb-4","w-16",e.className);return(0,s.jsxs)("div",{className:t,"data-testid":"bank-sidebar",children:[(0,s.jsx)(d.default,{className:"flex lg:hidden"}),(0,s.jsx)("div",{className:"h-10 w-10",children:(0,s.jsx)("img",{src:l.Logo,className:"w-full"})}),(0,s.jsx)(c.default,{className:"w-1/2"}),(0,s.jsx)("div",{className:"h-full w-full flex items-center flex-col overflow-y-auto",children:e?.children}),(0,s.jsx)(i.default,{}),(0,s.jsx)(p,{}),(0,s.jsx)(h,{})]})}function p(){return(0,s.jsx)(r.Link,{to:"/settings","data-testid":"bank-sidebar-settings",children:(0,s.jsx)(a.Settings,{className:"dark:hover:text-dark-monetr-content-emphasis dark:text-dark-monetr-content-subtle cursor-pointer"})})}function h(){return(0,s.jsx)(r.Link,{to:"/logout","data-testid":"bank-sidebar-logout",children:(0,s.jsx)(a.Logout,{className:"dark:hover:text-dark-monetr-content-emphasis dark:text-dark-monetr-content-subtle cursor-pointer"})})}},"../interface/src/components/Layout/BankSidebarItem.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});var s=n("../node_modules/react/jsx-runtime.js");n("../node_modules/react/index.js");var r=n("../node_modules/react-router-dom/dist/index.js"),a=n("../node_modules/@mui/icons-material/esm/index.js"),i=n("../node_modules/@mui/material/index.js"),l=n("../interface/src/hooks/bankAccounts.ts"),o=n("../interface/src/hooks/institutions.ts"),c=n.ir(n("../interface/src/util/mergeTailwind.ts")),d=n.ir(n("../interface/src/util/sortAccounts.ts"));function u({link:e}){let{result:t}=(0,o.useInstitution)(e.plaidInstitutionId),n=(0,l.useSelectedBankAccount)(),{data:u}=(0,l.useBankAccounts)(),m=n.data?.linkId===e.linkId,f=(0,d.default)(u?.filter(t=>t.linkId===e.linkId)),x=f.length>0?f[0]:null,p=()=>t?.logo?(0,s.jsx)("img",{"data-testid":`bank-sidebar-item-${e.linkId}-logo`,src:`data:image/png;base64,${t.logo}`}):(0,s.jsx)(a.AccountBalance,{"data-testid":`bank-sidebar-item-${e.linkId}-logo-missing`,color:"info"}),h=()=>e.getIsError()?(0,s.jsxs)("span",{className:"absolute flex h-3 w-3 right-0 bottom-0",children:[(0,s.jsx)("span",{className:"animate-ping-slow absolute inline-flex h-full w-full rounded-full bg-yellow-400"}),(0,s.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-yellow-500"})]}):null,g=(0,c.default)("absolute","dark:bg-dark-monetr-border","right-0","rounded-l-xl","transition-transform","w-1.5",{"h-8":m,"scale-y-100":m},{"h-4":!m,"group-hover:scale-y-100":!m,"group-hover:scale-x-100":!m,"scale-x-0":!m,"scale-y-50":!m}),j=e.getName();return e.getIsError()&&(j=`${j} (Error)`),(0,s.jsx)(i.Tooltip,{title:j,arrow:!0,placement:"right",classes:{tooltip:"text-base font-medium"},children:(0,s.jsxs)("div",{className:"w-full h-12 flex items-center justify-center relative group","data-testid":`bank-sidebar-item-${e.linkId}`,children:[(0,s.jsx)("div",{className:g}),(0,s.jsxs)(r.Link,{className:"absolute rounded-full w-10 h-10 dark:bg-dark-monetr-background-subtle drop-shadow-md flex justify-center items-center",to:`/bank/${x?.bankAccountId}/transactions`,children:[(0,s.jsx)(p,{}),(0,s.jsx)(h,{})]})]})})}},"../interface/src/components/Layout/BankSidebarSubscriptionItem.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return m}});var s=n("../node_modules/react/jsx-runtime.js");n("../node_modules/react/index.js");var r=n("../node_modules/react-router-dom/dist/index.js"),a=n.ir(n("../node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js")),i=n("../node_modules/@mui/icons-material/esm/index.js"),l=n("../node_modules/@mui/material/index.js"),o=n("../node_modules/date-fns/esm/index.js"),c=n("../interface/src/hooks/useAppConfiguration.ts"),d=n("../interface/src/hooks/useAuthentication.ts"),u=n.ir(n("../interface/src/hooks/useTheme.ts"));function m(){let e=(0,c.useAppConfiguration)(),t=(0,u.default)(),{result:n}=(0,d.useAuthenticationSink)(),m="/settings/billing";if(!e?.billingEnabled)return null;let f=(0,a.default)(l.Badge)(()=>({"& .MuiBadge-badge":{opacity:"90%",backgroundColor:t.tailwind.colors.yellow["600"],boxShadow:`0 0 0 2px ${t.tailwind.colors["dark-monetr"].background.DEFAULT}`,"&::after":{color:t.tailwind.colors.yellow["600"],position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"100%",animation:"ripple-trial 3s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple-trial":{"0%":{transform:"scale(.8)",opacity:1},"70%":{transform:"scale(.9)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}));return n?.isTrialing?(0,s.jsx)(r.Link,{to:m,"data-testid":"bank-sidebar-subscription",children:(0,s.jsx)(l.Tooltip,{title:`Your trial ends in ${(0,o.differenceInDays)(n.trialingUntil,new Date)} day(s).`,arrow:!0,placement:"right",classes:{tooltip:"text-base font-medium"},children:(0,s.jsx)(f,{overlap:"circular",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:(0,o.differenceInDays)(n.trialingUntil,new Date),classes:{badge:"left-1 top-1 text-[11px]"},children:(0,s.jsx)(i.CreditCard,{className:"dark:hover:text-dark-monetr-content-emphasis dark:text-dark-monetr-content-subtle cursor-pointer mt-1.5"})})})}):(0,s.jsx)(r.Link,{to:m,"data-testid":"bank-sidebar-subscription",children:(0,s.jsx)(i.CreditCard,{className:"dark:hover:text-dark-monetr-content-emphasis dark:text-dark-monetr-content-subtle cursor-pointer"})})}},"../interface/src/components/Layout/BudgetingSidebar.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return h}});var s=n("../node_modules/react/jsx-runtime.js");n("../node_modules/react/index.js");var r=n("../node_modules/react-router-dom/dist/index.js"),a=n("../node_modules/@mui/icons-material/esm/index.js"),i=n.ir(n("../interface/src/components/Layout/BudgetingSidebarTitle.tsx")),l=n.ir(n("../interface/src/components/MBadge.tsx")),o=n.ir(n("../interface/src/components/MDivider.tsx")),c=n.ir(n("../interface/src/components/MSelectAccount.tsx")),d=n.ir(n("../interface/src/components/MSpan.tsx")),u=n("../interface/src/hooks/balances.ts"),m=n("../interface/src/hooks/bankAccounts.ts"),f=n("../interface/src/hooks/fundingSchedules.ts"),x=n("../interface/src/hooks/links.ts"),p=n.ir(n("../interface/src/util/mergeTailwind.ts"));function h(e){let{data:t,isLoading:n,isError:r}=(0,m.useSelectedBankAccount)(),{data:f}=(0,x.useLink)(t?.linkId),h=(0,u.useCurrentBalance)(),b=(0,p.default)("w-72 h-full flex-none flex flex-col dark:border-r-dark-monetr-border border border-transparent items-center pb-4",e.className);return r?null:(0,s.jsxs)("div",{className:b,children:[(0,s.jsx)(i.default,{}),(0,s.jsxs)("div",{className:"flex h-full w-full flex-col items-center gap-4 px-2 py-4",children:[(0,s.jsx)(c.default,{}),(0,s.jsx)(o.default,{className:"w-1/2"}),(0,s.jsxs)("div",{className:"flex w-full flex-col items-center gap-2 px-2",children:[(0,s.jsx)(function(){switch(t?.accountSubType){case"checking":case"savings":return(0,s.jsxs)("div",{className:"flex w-full justify-between",children:[(0,s.jsxs)(d.default,{size:"lg",weight:"semibold",className:"dark:text-dark-monetr-content-emphasis",children:[(0,s.jsx)(a.AccountBalanceWalletOutlined,{}),"Free-To-Use:"]}),(0,s.jsx)(d.default,{size:"lg",weight:"semibold",className:"dark:text-dark-monetr-content-emphasis",children:h?.getFreeToUseString()})]})}return null},{}),(0,s.jsx)(function(){switch(t?.accountSubType){case"checking":case"savings":return(0,s.jsxs)("div",{className:"flex w-full justify-between",children:[(0,s.jsxs)(d.default,{size:"lg",weight:"semibold",className:"dark:text-dark-monetr-content-emphasis",children:[(0,s.jsx)(a.LocalAtmOutlined,{}),"Available:"]}),(0,s.jsx)(d.default,{size:"lg",weight:"semibold",className:"dark:text-dark-monetr-content-emphasis",children:h?.getAvailableString()})]})}return null},{}),(0,s.jsxs)("div",{className:"flex w-full justify-between",children:[(0,s.jsxs)(d.default,{size:"lg",weight:"semibold",className:"dark:text-dark-monetr-content-emphasis",children:[(0,s.jsx)(a.TollOutlined,{}),"Current:"]}),(0,s.jsx)(d.default,{size:"lg",weight:"semibold",className:"dark:text-dark-monetr-content-emphasis",children:h?.getCurrentString()})]})]}),(0,s.jsx)(o.default,{className:"w-1/2"}),(0,s.jsxs)("div",{className:"flex h-full w-full flex-col gap-2 pb-4",children:[(0,s.jsxs)(g,{to:`/bank/${t?.bankAccountId}/transactions`,children:[(0,s.jsx)(a.ShoppingCartOutlined,{}),(0,s.jsx)(d.default,{ellipsis:!0,color:"inherit",children:"Transactions"})]}),(0,s.jsxs)(g,{to:`/bank/${t?.bankAccountId}/expenses`,children:[(0,s.jsx)(a.PriceCheckOutlined,{}),(0,s.jsx)(d.default,{ellipsis:!0,color:"inherit",children:"Expenses"}),(0,s.jsx)(l.default,{className:"ml-auto",size:"sm",children:h?.getExpensesString()})]}),(0,s.jsxs)(g,{to:`/bank/${t?.bankAccountId}/goals`,children:[(0,s.jsx)(a.SavingsOutlined,{}),(0,s.jsx)(d.default,{ellipsis:!0,color:"inherit",children:"Goals"}),(0,s.jsx)(l.default,{className:"ml-auto",size:"sm",children:h?.getGoalsString()})]}),(0,s.jsxs)(g,{to:`/bank/${t?.bankAccountId}/funding`,children:[(0,s.jsx)(a.TodayOutlined,{}),(0,s.jsx)(d.default,{ellipsis:!0,color:"inherit",children:"Funding Schedules"}),(0,s.jsx)(j,{})]})]})]})]})}function g(e){let t=(0,r.useLocation)(),n=t.pathname.endsWith(e.to.replaceAll(".","")),a=(0,p.default)({"dark:bg-dark-monetr-background-emphasis":n,"dark:text-dark-monetr-content-emphasis":n,"dark:text-dark-monetr-content-subtle":!n,"font-semibold":n,"font-medium":!n},["align-middle","cursor-pointer","flex","text-lg","gap-2","dark:hover:bg-dark-monetr-background-emphasis","dark:hover:text-dark-monetr-content-emphasis","items-center","px-2","py-1","rounded-md","w-full"]);return(0,s.jsx)(r.Link,{className:a,to:e.to,children:e.children})}function j(){let e=(0,f.useNextFundingDate)();return e?(0,s.jsx)(l.default,{className:"ml-auto",size:"sm",children:e}):null}},"../interface/src/components/Layout/BudgetingSidebarTitle.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return f}});var s=n("../node_modules/react/jsx-runtime.js"),r=n("../node_modules/react/index.js"),a=n("../node_modules/@mui/icons-material/esm/index.js"),i=n("../node_modules/@mui/material/index.js"),l=n.ir(n("../interface/src/components/MDivider.tsx")),o=n.ir(n("../interface/src/components/MSpan.tsx")),c=n("../interface/src/hooks/bankAccounts.ts"),d=n("../interface/src/hooks/links.ts"),u=n("../interface/src/modals/RemoveLinkModal.tsx"),m=n("../interface/src/modals/UpdatePlaidAccountOverlay.tsx");function f(){let{data:e,isLoading:t,isError:n}=(0,c.useSelectedBankAccount)(),{data:o}=(0,d.useLink)(e?.linkId),[f,p]=(0,r.useState)(null),h=(0,r.useCallback)(()=>p(null),[p]),g=(0,r.useCallback)(e=>{p(e.currentTarget)},[p]),j=(0,r.useCallback)(()=>p(null),[p]),b=(0,r.useCallback)(()=>{h(),(0,m.showUpdatePlaidAccountOverlay)({link:o})},[h,o]),k=(0,r.useCallback)(()=>{h(),(0,m.showUpdatePlaidAccountOverlay)({link:o,updateAccountSelection:!0})},[h,o]),w=(0,r.useCallback)(()=>{h(),(0,u.showRemoveLinkModal)({link:o})},[h,o]);return o?(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("div",{onClick:g,className:"flex h-12 w-full items-center p-2 dark:text-dark-monetr-content-emphasis dark:hover:bg-dark-monetr-background-emphasis cursor-pointer",children:[(0,s.jsx)("span",{className:"truncate text-xl font-semibold",children:o?.getName()}),(0,s.jsx)(a.MoreVert,{className:"ml-auto"})]}),(0,s.jsx)(l.default,{className:"w-1/2"}),(0,s.jsx)(i.Popover,{open:!!f,anchorEl:f,onClose:j,transitionDuration:100,anchorOrigin:{vertical:"bottom",horizontal:"left"},className:"ml-[5px]",children:(0,s.jsxs)("div",{className:"flex flex-col dark:bg-dark-monetr-background rounded-lg border dark:border-dark-monetr-border-subtle dark:shadow-2xl",style:{width:`${f?.offsetWidth-10}px`},children:[(0,s.jsxs)(x,{visible:o.getIsPlaid()&&o.getIsError(),onClick:b,children:[(0,s.jsx)(a.Autorenew,{className:"mr-1 mb-0.5"}),"Reauthenticate"]}),(0,s.jsxs)(x,{visible:o.getIsPlaid(),onClick:k,children:[(0,s.jsx)(a.PriceChangeOutlined,{className:"mr-1 mb-0.5"}),"Update Account Selection"]}),(0,s.jsxs)(x,{visible:o.getIsPlaid(),onClick:()=>{},children:[(0,s.jsx)(a.AutorenewOutlined,{className:"mr-1 mb-0.5"}),"Manually Resync"]}),(0,s.jsx)(l.default,{}),(0,s.jsxs)(x,{visible:!0,onClick:w,children:[(0,s.jsx)(a.DeleteOutline,{className:"mr-1 mb-0.5 dark:text-dark-monetr-red"}),"Remove ",o?.getName()]})]})})]}):null}function x({visible:e,onClick:t,children:n}){return e?(0,s.jsx)(o.default,{size:"md",weight:"medium",className:"p-2 cursor-pointer dark:hover:bg-dark-monetr-background-emphasis dark:hover:text-dark-monetr-content-emphasis",component:"a",ellipsis:!0,onClick:t,children:n}):null}},"../interface/src/components/MDivider.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});var s=n("../node_modules/react/jsx-runtime.js");n("../node_modules/react/index.js");var r=n.ir(n("../interface/src/util/mergeTailwind.ts"));function a(e){let t=(0,r.default)("border-0 border-b-[thin] dark:border-dark-monetr-border",e.className);return(0,s.jsx)("hr",{className:t})}},"../interface/src/components/MSelectAccount.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});var s=n("../node_modules/react/jsx-runtime.js");n("../node_modules/react/index.js");var r=n("../node_modules/react-router-dom/dist/index.js"),a=n.ir(n("../node_modules/react-select/dist/react-select.esm.js")),i=n("../interface/src/hooks/bankAccounts.ts"),l=n.ir(n("../interface/src/hooks/useTheme.ts")),o=n.ir(n("../interface/src/util/sortAccounts.ts"));function c(){let e=(0,l.default)(),t=(0,r.useNavigate)(),{data:n,isLoading:c}=(0,i.useBankAccounts)(),{data:d,isLoading:u}=(0,i.useSelectedBankAccount)(),m=(0,o.default)(n?.filter(e=>e.linkId===d?.linkId)).map(e=>({label:e.name,value:e.bankAccountId,type:e.accountSubType,mask:e.mask})),f=m?.find(e=>e.value===d?.bankAccountId);return(0,s.jsx)(a.default,{theme:t=>({...t,borderRadius:8,colors:{...t.colors,neutral0:e.tailwind.colors["dark-monetr"].background.DEFAULT,neutral5:e.tailwind.colors["dark-monetr"].background.subtle,neutral10:e.tailwind.colors["dark-monetr"].background.emphasis,neutral20:e.tailwind.colors["dark-monetr"].border.string,neutral30:e.tailwind.colors["dark-monetr"].content.DEFAULT,neutral60:e.tailwind.colors["dark-monetr"].content.emphasis,neutral70:e.tailwind.colors["dark-monetr"].content.emphasis,neutral80:e.tailwind.colors["dark-monetr"].content.emphasis,neutral90:e.tailwind.colors["dark-monetr"].content.emphasis,primary25:e.tailwind.colors["dark-monetr"].background.emphasis,primary50:e.tailwind.colors["dark-monetr"].brand.faint,primary:e.tailwind.colors["dark-monetr"].brand.DEFAULT}}),onChange:function({value:e}){t(`/bank/${e}/transactions`)},isClearable:!1,options:m,value:f,className:"w-full font-medium",classNamePrefix:"m-select-account",isLoading:c||u,styles:{option:t=>({...t,color:e.tailwind.colors["dark-monetr"].content.emphasized}),menuPortal:e=>({...e,zIndex:9999})}})}n("../interface/src/components/MSelectAccount.scss")},"../interface/src/components/MSelectSpendingTransaction.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return g},SpendingSelectOption:function(){return j}});var s=n("../node_modules/react/jsx-runtime.js"),r=n("../node_modules/react/index.js"),a=n.ir(n("../node_modules/react-select/dist/react-select.esm.js")),i=n("../node_modules/@mui/icons-material/esm/index.js"),l=n.ir(n("../interface/src/components/MBadge.tsx")),o=n.ir(n("../interface/src/components/MSpan.tsx")),c=n("../interface/src/hooks/balances.ts"),d=n("../interface/src/hooks/spending.ts"),u=n("../interface/src/hooks/transactions.ts"),m=n.ir(n("../interface/src/hooks/useTheme.ts")),f=n("../interface/src/models/Spending.ts"),x=n.ir(n("../interface/src/models/Transaction.ts")),p=n("../interface/src/util/amounts.ts"),h=n.ir(n("../interface/src/util/mergeTailwind.ts"));function g(e){let{transaction:t}=e,{result:n,isLoading:i}=(0,d.useSpendingSink)(),l=(0,c.useCurrentBalance)(),o=(0,u.useUpdateTransaction)(),f=(0,m.default)(),[p,g]=(0,r.useState)(!1);async function b(e){let n=e?e.spendingId:null;if(n==t.spendingId)return Promise.resolve();g(!0);let s=new x.default({...t,spendingId:n});return o(s).finally(()=>g(!1))}let k={label:"Free-To-Use",value:null,spending:{currentAmount:l?.free}},w=n.map(e=>({label:e.name,value:e.spendingId,spending:e})),v=[k,...w.sort((e,t)=>e.label.toLowerCase()>t.label.toLowerCase()?1:-1)],N=t.spendingId?w.find(e=>e.value===t.spendingId):k;return(0,s.jsx)("div",{className:"hidden md:flex w-1/2 flex-1 items-center",children:(0,s.jsx)(a.default,{theme:e=>({...e,borderRadius:8,spacing:{controlHeight:32,baseUnit:3,menuGutter:15},colors:{...e.colors,neutral0:f.tailwind.colors["dark-monetr"].background.DEFAULT,neutral5:f.tailwind.colors["dark-monetr"].background.subtle,neutral10:f.tailwind.colors["dark-monetr"].background.emphasis,neutral20:f.tailwind.colors["dark-monetr"].border.string,neutral30:f.tailwind.colors["dark-monetr"].content.DEFAULT,neutral60:f.tailwind.colors["dark-monetr"].content.emphasis,neutral70:f.tailwind.colors["dark-monetr"].content.emphasis,neutral80:f.tailwind.colors["dark-monetr"].content.emphasis,neutral90:f.tailwind.colors["dark-monetr"].content.emphasis,primary25:f.tailwind.colors["dark-monetr"].background.emphasis,primary50:f.tailwind.colors["dark-monetr"].brand.faint,primary:f.tailwind.colors["dark-monetr"].brand.DEFAULT}}),menuPortalTarget:document.body,components:{Option:j},styles:{placeholder:e=>({...e,fontSize:"0.875rem",lineHeight:"1.5rem"}),valueContainer:e=>({...e,fontSize:"0.875rem",lineHeight:"1.5rem",padding:"0px 5px"}),option:e=>({...e,color:f.tailwind.colors["dark-monetr"].content.emphasized}),menuPortal:e=>({...e,zIndex:9999})},classNamePrefix:"m-select-spending-transaction",isLoading:p||i&&!!t.spendingId,onChange:function(e,t){return b(e.spending)},formatOptionLabel:function(e,t){return"value"===t.context?(0,s.jsxs)(r.Fragment,{children:["Spent From ",(0,s.jsx)("span",{className:(0,h.default)({"font-bold dark:text-dark-monetr-content-emphasis":!!e.value}),children:e.label})]}):e.label},options:v,value:N,className:"w-full"})})}function j({children:e,...t}){let n=t.data.spending?.currentAmount===void 0,r=n?"N/A":(0,p.formatAmount)(t.data.spending.currentAmount);return(0,s.jsx)(a.components.Option,{...t,children:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(o.default,{size:"md",color:"emphasis",children:t.label}),(0,s.jsxs)("div",{className:"flex gap-2",children:[t.data.spending?.spendingType===f.SpendingType.Goal&&(0,s.jsx)(l.default,{size:"sm",className:"dark:bg-dark-monetr-blue  max-h-[24px]",children:(0,s.jsx)(i.SavingsOutlined,{})}),t.data.spending?.spendingType===f.SpendingType.Expense&&(0,s.jsx)(l.default,{size:"sm",className:"dark:bg-dark-monetr-green max-h-[24px]",children:(0,s.jsx)(i.PriceCheckOutlined,{})}),(0,s.jsx)(l.default,{size:"sm",children:r})]})]})})}n("../interface/src/components/MSelectSpendingTransaction.scss")},"../interface/src/components/MSidebarToggle.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});var s=n("../node_modules/react/jsx-runtime.js");n("../node_modules/react/index.js");var r=n("../node_modules/react-router-dom/dist/index.js"),a=n("../node_modules/@mui/icons-material/esm/index.js"),i=n.ir(n("../interface/src/hooks/store.ts")),l=n.ir(n("../interface/src/util/mergeTailwind.ts"));function o(e){let t=(0,r.useNavigate)(),{setMobileSidebarOpen:n,mobileSidebarOpen:o}=(0,i.default)();function c(){e.backButton?t(e.backButton):n(!o)}let d=(0,l.default)("visible lg:hidden","dark:text-dark-monetr-content-emphasis cursor-pointer h-12 flex items-center justify-center",e.className);return e.backButton?(0,s.jsx)("div",{className:d,onClick:c,children:(0,s.jsx)(a.ArrowBackOutlined,{})}):(0,s.jsxs)("div",{className:d,onClick:c,children:[!o&&(0,s.jsx)(a.MenuOutlined,{}),o&&(0,s.jsx)(a.MenuOpenOutlined,{})]})}},"../interface/src/components/MTopNavigation.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});var s=n("../node_modules/react/jsx-runtime.js"),r=n("../node_modules/react/index.js"),a=n("../node_modules/react-router-dom/dist/index.js"),i=n.ir(n("../interface/src/components/MSidebarToggle.tsx")),l=n.ir(n("../interface/src/components/MSpan.tsx")),o=n.ir(n("../interface/src/util/mergeTailwind.ts"));function c(e){let t=e.icon,n=(0,a.useNavigate)(),c=(0,r.useCallback)(()=>{e.base&&n(e.base)},[e.base,n]),d=(0,o.default)({"dark:text-dark-monetr-content-emphasis":!e.breadcrumb,"dark:text-dark-monetr-content-subtle dark:hover:text-dark-monetr-content-emphasis":!!e.breadcrumb,"cursor-pointer":!!e.base},"w-auto order-1"),u=(0,o.default)({"hidden md:inline":!!e.breadcrumb},"w-auto text-center order-1"),m=(0,o.default)({"mr-0 md:mr-2":!!e.breadcrumb,"mr-2":!e.breadcrumb},"mb-1");return(0,s.jsxs)("div",{className:"w-full h-auto md:h-12 flex flex-col md:flex-row md:items-center px-4 gap-4 justify-between",children:[(0,s.jsxs)("div",{className:"flex gap-2 min-w-0 h-12 items-center flex-grow",children:[(0,s.jsx)(i.default,{className:"mr-2",backButton:e.base}),(0,s.jsxs)("span",{className:"flex gap-2 flex-grow min-w-0",children:[(0,s.jsx)(function(){return(0,s.jsxs)(l.default,{weight:"bold",size:"2xl",className:d,onClick:c,ellipsis:!0,children:[(0,s.jsx)(t,{className:m}),(0,s.jsx)("span",{className:u,children:e.title})]})},{}),(0,s.jsx)(function(){return e.breadcrumb?(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(l.default,{weight:"bold",size:"2xl",color:"subtle",className:"hidden md:block order-2",children:"/"}),(0,s.jsx)(l.default,{weight:"bold",size:"2xl",color:"emphasis",ellipsis:!0,className:"order-3",children:e.breadcrumb})]}):null},{})]})]}),e.children&&(0,s.jsx)("div",{className:"flex gap-2 pb-4 md:p-0",children:e.children})]})}},"../interface/src/modals/RemoveLinkModal.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"showRemoveLinkModal",{enumerable:!0,get:function(){return x}});var s=n("../node_modules/react/jsx-runtime.js"),r=n("../node_modules/react/index.js"),a=n("../node_modules/react-router-dom/dist/index.js"),i=n.ir(n("../node_modules/@ebay/nice-modal-react/lib/esm/index.js")),l=n("../node_modules/@mui/icons-material/esm/index.js"),o=n("../node_modules/notistack/notistack.esm.js"),c=n("../interface/src/components/MButton.tsx"),d=n.ir(n("../interface/src/components/MModal.tsx")),u=n.ir(n("../interface/src/components/MSpan.tsx")),m=n("../interface/src/hooks/links.ts");let f=i.default.create(function(e){let t=(0,i.useModal)(),n=(0,r.useRef)(null),{enqueueSnackbar:f}=(0,o.useSnackbar)(),[x,p]=(0,r.useState)(!1),h=(0,m.useRemoveLink)(),g=(0,a.useNavigate)();async function j(){return p(!0),h(e.link.linkId).then(()=>{g("/"),t.remove()}).catch(t=>{p(!1),f(t?.response?.data?.error||`Failed to remove ${e.link.getName()}`,{variant:"error",disableWindowBlurListener:!0})})}return(0,s.jsx)(d.default,{open:t.visible,ref:n,className:"py-4 md:max-w-md",children:(0,s.jsxs)("div",{className:"h-full flex flex-col gap-4 p-2 justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)(u.default,{weight:"bold",size:"xl",className:"mb-2",children:[(0,s.jsx)(l.DeleteOutlined,{}),"Remove ",e.link.getName(),"?"]}),(0,s.jsxs)(u.default,{size:"lg",weight:"medium",children:["Are you sure you want to remove your ",e.link.getName()," data?"]}),(0,s.jsx)(u.default,{size:"lg",children:"All expenses, goals and transactions related to this will be deleted. This cannot be undone."})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(c.MBaseButton,{disabled:x,color:"secondary",onClick:t.remove,children:"Cancel"}),(0,s.jsx)(c.MBaseButton,{disabled:x,color:"cancel",type:"submit",onClick:j,children:"Remove"})]})]})})});function x(e){return i.default.show(f,e)}},"../interface/src/modals/UpdatePlaidAccountOverlay.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"showUpdatePlaidAccountOverlay",{enumerable:!0,get:function(){return m}});var s=n("../node_modules/react/jsx-runtime.js"),r=n("../node_modules/react/index.js"),a=n("../node_modules/react-plaid-link/dist/index.umd.js"),i=n.ir(n("../node_modules/@ebay/nice-modal-react/lib/esm/index.js")),l=n("../node_modules/@tanstack/react-query/build/lib/index.mjs"),o=n.ir(n("../interface/src/components/MModal.tsx")),c=n.ir(n("../interface/src/components/MSpan.tsx")),d=n.ir(n("../interface/src/util/request.ts"));let u=i.default.create(function({link:e,updateAccountSelection:t}){let n,u;let m=(0,i.useModal)(),f=(0,l.useQueryClient)(),[x,p]=(0,r.useState)({loading:!0,linkToken:null,error:null});(0,r.useEffect)(()=>{(0,d.default)().put(`/plaid/link/update/${e.linkId}?update_account_selection=${!!t}`).then(e=>p({loading:!1,linkToken:e.data.linkToken})).catch(e=>{throw p({loading:!1,error:e}),e})},[e,t]);let h=(0,r.useCallback)(async(t,n)=>(console.log("plaidOnSuccess",{token:t,metadata:n}),p({loading:!0}),(0,d.default)().post("/plaid/link/update/callback",{linkId:e.linkId,publicToken:t,accountIds:n.accounts.map(e=>e.id)}).then(()=>Promise.all([f.invalidateQueries(["/bank_accounts"]),f.invalidateQueries(["/links"]),f.invalidateQueries([`/links/${e.linkId}`])])).then(()=>m.remove())),[e,m,f]),g=(0,r.useCallback)((e,t)=>{console.log("plaidOnExit",{error:e,metadata:t}),t&&e&&m.remove()},[m]),j=(0,r.useCallback)((e,t)=>{console.log("plaidOnEvent",{eventName:e,metadata:t})},[]),{error:b,open:k}=(0,a.usePlaidLink)({token:x.linkToken,onSuccess:h,onExit:g,onEvent:j});return(0,r.useEffect)(()=>{if(b){console.error("PLAID LINK ERROR",b);return}k&&x.linkToken&&k()},[b,k,x.linkToken]),t?(n="Updating Account Selection",u=`One moment while we prepare Plaid to update your account selection for ${e.getName()}.`):(n="Reauthenticating",u=`One moment while we prepare Plaid to reauthenticate your connection to ${e.getName()}.`),(0,s.jsx)(o.default,{open:m.visible,className:"py-4 md:max-w-md",children:(0,s.jsx)("div",{className:"h-full flex flex-col gap-4 p-2 justify-between",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(c.default,{weight:"bold",size:"xl",className:"mb-2",children:n}),(0,s.jsx)(c.default,{size:"lg",weight:"medium",children:u})]})})})});function m(e){return i.default.show(u,e)}},"../interface/src/pages/expenses.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return p}});var s=n("../node_modules/react/jsx-runtime.js"),r=n("../node_modules/react/index.js"),a=n("../node_modules/react-router-dom/dist/index.js"),i=n("../node_modules/@mui/icons-material/esm/index.js"),l=n("../interface/src/components/MButton.tsx"),o=n.ir(n("../interface/src/components/MSpan.tsx")),c=n.ir(n("../interface/src/components/MTopNavigation.tsx")),d=n("../interface/src/hooks/spending.ts"),u=n("../interface/src/modals/NewExpenseModal.tsx"),m=n("../interface/src/models/Spending.ts"),f=n.ir(n("../interface/src/pages/new/ExpenseItem.tsx"));let x=0;function p(){let{result:e,isError:t,isLoading:n}=(0,d.useSpendingFiltered)(m.SpendingType.Expense),p=(0,r.useRef)(null),g=(0,a.useNavigationType)(),j=(0,r.useCallback)(()=>{x=p.current.scrollTop},[p]);return((0,r.useEffect)(()=>{if(!p.current)return;"POP"===g&&(p.current.scrollTop=x);let e=p.current;return p.current.addEventListener("scroll",j),()=>{e.removeEventListener("scroll",j)}},[p.current,g,j]),n)?(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2",children:(0,s.jsx)(o.default,{className:"text-5xl",children:"One moment..."})}):t?(0,s.jsxs)("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2",children:[(0,s.jsx)(i.HeartBroken,{className:"dark:text-dark-monetr-content h-24 w-24"}),(0,s.jsx)(o.default,{className:"text-5xl",children:"Something isn't right..."}),(0,s.jsx)(o.default,{className:"text-2xl",children:"We weren't able to retrieve expenses at this time..."})]}):(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(c.default,{icon:i.PriceCheckOutlined,title:"Expenses",children:(0,s.jsxs)(l.MBaseButton,{color:"primary",className:"gap-1 py-1 px-2",onClick:u.showNewExpenseModal,children:[(0,s.jsx)(i.AddOutlined,{}),"New Expense"]})}),(0,s.jsx)("div",{className:"w-full h-full overflow-y-auto min-w-0",ref:p,children:(0,s.jsx)(function(){return 0===e.length?(0,s.jsx)(h,{}):(0,s.jsx)("ul",{className:"w-full flex flex-col gap-2 py-2",children:e?.sort((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:-1).map(e=>(0,s.jsx)(f.default,{spending:e},e.spendingId))})},{})})]})}function h(){return(0,s.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2 items-center max-w-md",children:[(0,s.jsxs)("div",{className:"w-full flex justify-center space-x-4",children:[(0,s.jsx)(i.AccountBalance,{className:"h-full text-5xl dark:text-dark-monetr-content-muted"}),(0,s.jsx)(i.AutoModeOutlined,{className:"h-full text-5xl dark:text-dark-monetr-content-muted"}),(0,s.jsx)(i.PriceCheckOutlined,{className:"h-full text-5xl dark:text-dark-monetr-content-muted"})]}),(0,s.jsx)(o.default,{size:"xl",color:"subtle",className:"text-center",children:"You don't have any expenses yet..."}),(0,s.jsx)(o.default,{size:"lg",color:"subtle",className:"text-center",children:"Expenses are budgets for recurring spending. Things like your streaming subscription, rent, or car payments."})]})})}},"../interface/src/pages/new/ExpenseItem.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});var s=n("../node_modules/react/jsx-runtime.js");n("../node_modules/react/index.js");var r=n("../node_modules/react-router-dom/dist/index.js"),a=n("../node_modules/@mui/icons-material/esm/index.js"),i=n.ir(n("../interface/src/pages/new/MerchantIcon.tsx")),l=n("../interface/src/hooks/fundingSchedules.ts"),o=n("../node_modules/rrule/dist/esm/index.js"),c=n.ir(n("../interface/src/util/mergeTailwind.ts"));function d({spending:e}){let{data:t}=(0,l.useFundingSchedule)(e.fundingScheduleId),n=(0,r.useNavigate)(),d=(0,o.rrulestr)(e.ruleset),u=(0,c.default)({"text-green-500":e.targetAmount<=e.currentAmount,"text-blue-500":e.targetAmount!==e.currentAmount},"text-end","font-semibold");function m(){n(`/bank/${e.bankAccountId}/expenses/${e.spendingId}/details`)}return(0,s.jsxs)("li",{className:"group relative w-full px-1 md:px-2",children:[(0,s.jsx)("div",{className:"absolute left-0 top-0 flex h-full w-full cursor-pointer md:hidden md:cursor-auto",onClick:m}),(0,s.jsxs)("div",{className:"w-full flex rounded-lg group-hover:bg-zinc-600 gap-2 items-center px-2 py-1 cursor-pointer md:cursor-auto",children:[(0,s.jsxs)("div",{className:"flex items-center flex-1 w-full md:w-1/2 gap-4 min-w-0 pr-1",children:[(0,s.jsx)(i.default,{name:e.name}),(0,s.jsxs)("div",{className:"flex flex-col overflow-hidden min-w-0",children:[(0,s.jsx)("span",{className:"text-zinc-50 font-semibold text-base w-full overflow-hidden text-ellipsis whitespace-nowrap min-w-0",children:e.name}),(0,s.jsx)("span",{className:"hidden md:block text-zinc-200 font-sm text-sm w-full overflow-hidden text-ellipsis whitespace-nowrap min-w-0",children:d.toText()}),(0,s.jsxs)("span",{className:"md:hidden text-zinc-200 text-sm w-full overflow-hidden text-ellipsis whitespace-nowrap min-w-0",children:[e.getNextContributionAmountString()," / ",t?.name]})]})]}),(0,s.jsx)("div",{className:"hidden md:flex w-1/2 overflow-hidden flex-1 min-w-0 items-center",children:(0,s.jsxs)("span",{className:"text-zinc-50/75 font-medium text-base text-ellipsis whitespace-nowrap overflow-hidden min-w-0",children:[e.getNextContributionAmountString()," / ",t?.name]})}),(0,s.jsxs)("div",{className:"flex md:hidden shrink-0 items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:u,children:e.getCurrentAmountString()}),(0,s.jsx)("hr",{className:"w-full border-0 border-b-[thin] border-zinc-600"}),(0,s.jsx)("span",{className:"text-end text-zinc-400 group-hover:text-zinc-300 font-medium",children:e.getTargetAmountString()})]}),(0,s.jsx)(a.KeyboardArrowRight,{className:"text-zinc-600 group-hover:text-zinc-50 flex-none md:cursor-pointer"})]}),(0,s.jsxs)("div",{className:"hidden md:flex md:min-w-[12em] shrink-0 justify-end gap-2 items-center",children:[(0,s.jsx)("div",{className:"flex flex-col",children:(0,s.jsxs)("div",{className:"flex justify-end",children:[(0,s.jsx)("span",{className:u,children:e.getCurrentAmountString()}),"\xa0",(0,s.jsx)("span",{className:"text-end text-zinc-500 group-hover:text-zinc-400 font-medium",children:"of"}),"\xa0",(0,s.jsx)("span",{className:"text-end text-zinc-400 group-hover:text-zinc-300 font-medium",children:e.getTargetAmountString()})]})}),(0,s.jsx)(a.KeyboardArrowRight,{className:"flex-none dark:text-dark-monetr-content-subtle dark:group-hover:text-dark-monetr-content-emphasis md:cursor-pointer",onClick:m})]})]})]})}},"../interface/src/pages/new/MerchantIcon.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});var s=n("../node_modules/react/jsx-runtime.js");n("../node_modules/react/index.js");var r=n("../node_modules/@mui/material/index.js"),a=n("../interface/src/hooks/useIconSearch.ts"),i=n.ir(n("../interface/src/util/mergeTailwind.ts"));function l(e){let t=(0,a.useIconSearch)(e?.name);if(t?.svg){let e=(0,i.default)("dark:bg-dark-monetr-background-bright","flex","items-center","justify-center","h-10","w-10","rounded-full","flex-none"),n=t?.colors?.length>0?{backgroundColor:`#${t.colors[0]}`}:{backgroundColor:"#000000"},r={WebkitMaskImage:`url(data:image/svg+xml;base64,${t.svg})`,WebkitMaskRepeat:"no-repeat",height:"30px",width:"30px",...n};return(0,s.jsx)("div",{className:e,children:(0,s.jsx)("div",{style:r})})}let n=e?.name?.toUpperCase().charAt(0)||"?";return(0,s.jsx)(r.Avatar,{className:"dark:bg-dark-monetr-background-subtle h-10 w-10 dark:text-dark-monetr-content flex-none",children:n})}},"../interface/src/pages/new/TransactionDateItem.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});var s=n("../node_modules/react/jsx-runtime.js");n("../node_modules/react/index.js");var r=n("../node_modules/date-fns/esm/index.js");function a({date:e}){let t=(0,r.isThisYear)(e)?(0,r.format)(e,"MMMM do"):(0,r.format)(e,"MMMM do, yyyy");return(0,s.jsx)("li",{className:"sticky top-0 z-10 h-10 flex items-center backdrop-blur-sm bg-gradient-to-t from-transparent dark:to-dark-monetr-background via-90%",children:(0,s.jsx)("span",{className:"dark:text-dark-monetr-content-subtle font-semibold text-base z-10 px-3 md:px-4",children:t})})}},"../interface/src/pages/new/TransactionItem.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});var s=n("../node_modules/react/jsx-runtime.js");n("../node_modules/react/index.js");var r=n("../node_modules/react-router-dom/dist/index.js"),a=n("../node_modules/@mui/icons-material/esm/index.js"),i=n.ir(n("../interface/src/pages/new/TransactionMerchantIcon.tsx")),l=n.ir(n("../interface/src/components/MSelectSpendingTransaction.tsx")),o=n("../interface/src/hooks/spending.ts"),c=n.ir(n("../interface/src/util/mergeTailwind.ts"));function d({transaction:e}){let t=(0,o.useSpendingOld)(e.spendingId),n=(0,r.useNavigate)(),d=(0,c.default)({"dark:text-dark-monetr-green":e.getIsAddition(),"dark:text-dark-monetr-red":!e.getIsAddition()},"text-end","font-semibold");function u(){n(`/bank/${e.bankAccountId}/transactions/${e.transactionId}/details`)}function m(n){let r=(0,c.default)("overflow-hidden","text-ellipsis","whitespace-nowrap","min-w-0",n.className),a=(0,c.default)({"font-bold":!!e.spendingId,"dark:text-dark-monetr-content-emphasis":!!e.spendingId,"font-medium":!e.spendingId,"dark:text-dark-monetr-content":!e.spendingId},"md:text-base","min-w-0","overflow-hidden","text-ellipsis","text-sm","whitespace-nowrap");return e.getIsAddition()?(0,s.jsx)("span",{className:r,children:(0,s.jsx)("span",{className:"min-w-0 flex-none truncate font-medium dark:text-dark-monetr-content-subtle",children:"Contribution"})}):(0,s.jsxs)("span",{className:r,children:[(0,s.jsx)("span",{className:"min-w-0 flex-none truncate font-medium dark:text-dark-monetr-content",children:"Spent from"}),"\xa0",(0,s.jsx)("span",{className:a,children:t?.name||"Free-To-Use"})]})}return(0,s.jsxs)("li",{className:"group relative w-full px-1 md:px-2",children:[(0,s.jsx)("div",{className:"absolute left-0 top-0 flex h-full w-full cursor-pointer md:hidden md:cursor-auto",onClick:u}),(0,s.jsxs)("div",{className:"group flex h-full gap-1 rounded-lg px-2 py-1 group-hover:bg-zinc-600 md:gap-4",children:[(0,s.jsxs)("div",{className:"flex w-full min-w-0 flex-1 flex-row items-center gap-4 md:w-1/2",children:[(0,s.jsx)(i.default,{name:e.getName(),pending:e.isPending}),(0,s.jsxs)("div",{className:"flex min-w-0 flex-col overflow-hidden",children:[(0,s.jsx)("span",{className:"w-full min-w-0 truncate text-base font-semibold dark:text-dark-monetr-content-emphasis",children:e.getName()}),(0,s.jsx)("span",{className:"hidden w-full min-w-0 truncate text-sm font-medium dark:text-dark-monetr-content md:block",children:e.getMainCategory()}),(0,s.jsx)(m,{className:"flex w-full text-sm md:hidden"})]})]}),!e.getIsAddition()&&(0,s.jsx)(l.default,{transaction:e}),e.getIsAddition()&&(0,s.jsx)(m,{className:"hidden md:flex w-1/2 flex-1 items-center pl-6"}),(0,s.jsxs)("div",{className:"flex shrink-0 items-center justify-end gap-2 md:min-w-[8em]",children:[(0,s.jsx)("span",{className:d,children:e.getAmountString()}),(0,s.jsx)(a.KeyboardArrowRight,{className:"flex-none dark:text-dark-monetr-content-subtle dark:group-hover:text-dark-monetr-content-emphasis md:cursor-pointer",onClick:u})]})]})]})}},"../interface/src/pages/new/TransactionMerchantIcon.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});var s=n("../node_modules/react/jsx-runtime.js");n("../node_modules/react/index.js");var r=n("../node_modules/@mui/material/index.js"),a=n.ir(n("../interface/src/pages/new/MerchantIcon.tsx")),i=n.ir(n("../interface/src/hooks/useTheme.ts"));function l(e){let t=(0,i.default)(),{pending:n,...l}=e,o=(0,r.styled)(r.Badge)(()=>({"& .MuiBadge-badge":{backgroundColor:t.tailwind.colors.blue["500"],color:t.tailwind.colors.blue["500"],boxShadow:`0 0 0 2px ${t.tailwind.colors["dark-monetr"].background.DEFAULT}`,"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple-pending-txn 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple-pending-txn":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}));return n?(0,s.jsx)(o,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,s.jsx)(a.default,{...l})}):(0,s.jsx)(a.default,{...l})}},"../interface/src/pages/transaction/details.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return b}});var s=n("../node_modules/react/jsx-runtime.js");n("../node_modules/react/index.js");var r=n("../node_modules/react-router-dom/dist/index.js"),a=n("../node_modules/@mui/icons-material/esm/index.js"),i=n.ir(n("../interface/src/components/MAmountField.tsx")),l=n.ir(n("../interface/src/components/MButton.tsx")),o=n.ir(n("../interface/src/components/MCheckbox.tsx")),c=n.ir(n("../interface/src/components/MDatePicker.tsx")),d=n.ir(n("../interface/src/components/MForm.tsx")),u=n.ir(n("../interface/src/components/MSelectSpending.tsx")),m=n.ir(n("../interface/src/components/MSpan.tsx")),f=n.ir(n("../interface/src/components/MTextField.tsx")),x=n.ir(n("../interface/src/components/MTopNavigation.tsx")),p=n("../interface/src/hooks/transactions.ts"),h=n.ir(n("../interface/src/models/Transaction.ts")),g=n.ir(n("../interface/src/pages/new/MerchantIcon.tsx")),j=n("../interface/src/util/amounts.ts");function b(){let{transactionId:e}=(0,r.useParams)(),t=(0,p.useUpdateTransaction)(),n=+e||null,{data:b,isLoading:k,isError:w}=(0,p.useTransaction)(n);if(k)return(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2",children:(0,s.jsx)(m.default,{className:"text-5xl",children:"One moment..."})});if(!n&&!k)return(0,s.jsxs)("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2",children:[(0,s.jsx)(a.HeartBroken,{className:"dark:text-dark-monetr-content h-24 w-24"}),(0,s.jsx)(m.default,{className:"text-5xl",children:"Something isn't right..."}),(0,s.jsx)(m.default,{className:"text-2xl",children:"There wasn't an expense specified..."})]});if((w||!b)&&!k)return(0,s.jsxs)("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2",children:[(0,s.jsx)(a.HeartBroken,{className:"dark:text-dark-monetr-content h-24 w-24"}),(0,s.jsx)(m.default,{className:"text-5xl",children:"Something isn't right..."}),(0,s.jsx)(m.default,{className:"text-2xl",children:"We weren't able to load details for the transaction specified..."})]});async function v(e,n){let s=new h.default({...b,name:e.name,spendingId:e.spendingId});return n.setSubmitting(!0),t(s).finally(()=>n.setSubmitting(!1))}let N={name:b.name,originalName:b.originalName,date:b.date,spendingId:b.spendingId,isPending:b.isPending,amount:(0,j.amountToFriendly)(b.amount)};return(0,s.jsxs)(d.default,{initialValues:N,onSubmit:v,className:"flex w-full h-full flex-col",children:[(0,s.jsx)(x.default,{icon:a.ShoppingCartOutlined,title:"Transactions",base:`/bank/${b.bankAccountId}/transactions`,breadcrumb:b?.name,children:(0,s.jsxs)(l.default,{color:"primary",className:"gap-1 py-1 px-2",type:"submit",children:[(0,s.jsx)(a.SaveOutlined,{}),"Save Changes"]})}),(0,s.jsx)("div",{className:"w-full h-full overflow-y-auto min-w-0 p-4",children:(0,s.jsx)("div",{className:"flex flex-col md:flex-row w-full gap-8 items-center md:items-stretch",children:(0,s.jsxs)("div",{className:"w-full md:w-1/2 flex flex-col items-center",children:[(0,s.jsx)("div",{className:"w-full flex justify-center mb-2",children:(0,s.jsx)(g.default,{name:b?.name})}),(0,s.jsx)(f.default,{id:"transaction-name-search",label:"Name",placeholder:"Transaction name...",name:"name",className:"w-full"}),(0,s.jsx)(f.default,{label:"Original Name",placeholder:"No original name...?",name:"originalName",className:"w-full",disabled:!0}),(0,s.jsx)(i.default,{className:"w-full",disabled:!0,label:"Amount",name:"amount"}),(0,s.jsx)(c.default,{label:"Date",name:"date",className:"w-full",disabled:!0}),(0,s.jsx)(o.default,{id:"transaction-details-pending","data-testid":"transaction-details-pending",name:"isPending",label:"Is Pending",description:"Transaction has not yet cleared, the name or amount may change.",className:"w-full",disabled:!0}),!b.getIsAddition()&&(0,s.jsx)(u.default,{className:"w-full",name:"spendingId"})]})})})]})}},"../interface/src/pages/transactions.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return h}});var s=n("../node_modules/react/jsx-runtime.js"),r=n("../node_modules/react/index.js"),a=n.ir(n("../node_modules/react-infinite-scroll-hook/dist/react-infinite-scroll-hook.esm.js")),i=n("../node_modules/react-router-dom/dist/index.js"),l=n("../node_modules/@mui/icons-material/esm/index.js"),o=n.ir(n("../interface/node_modules/ramda/es/index.js")),c=n.ir(n("../interface/src/components/MSpan.tsx")),d=n.ir(n("../interface/src/components/MTopNavigation.tsx")),u=n("../node_modules/date-fns/esm/index.js"),m=n("../interface/src/hooks/transactions.ts"),f=n.ir(n("../interface/src/pages/new/TransactionDateItem.tsx")),x=n.ir(n("../interface/src/pages/new/TransactionItem.tsx"));let p=0;function h(){let{isLoading:e,isError:t,isFetching:n,fetchNextPage:h,result:g,hasNextPage:j}=(0,m.useTransactions)(),b=(0,r.useRef)(null),k=(0,i.useNavigationType)(),w=(0,r.useCallback)(()=>{p=b.current.scrollTop},[b]);(0,r.useEffect)(()=>{if(!b.current)return;"POP"===k&&(b.current.scrollTop=p);let e=b.current;return b.current.addEventListener("scroll",w),()=>{e.removeEventListener("scroll",w)}},[b.current,k,w]);let v=e||n,[N]=(0,a.default)({loading:v,hasNextPage:j,onLoadMore:h,disabled:t,rootMargin:"0px 0px 0px 0px"});if(e)return(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2",children:(0,s.jsx)(c.default,{className:"text-5xl",children:"One moment..."})});if(t)return(0,s.jsxs)("div",{className:"w-full h-full flex items-center justify-center flex-col gap-2",children:[(0,s.jsx)(l.HeartBroken,{className:"dark:text-dark-monetr-content h-24 w-24"}),(0,s.jsx)(c.default,{className:"text-5xl",children:"Something isn't right..."}),(0,s.jsx)(c.default,{className:"text-2xl",children:"We weren't able to retrieve transactions at this time..."})]});let y="No more transactions...";return(v?y="Loading...":j&&(y="Load more?"),e||0!==g.length)?(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(d.default,{icon:l.ShoppingCartOutlined,title:"Transactions"}),(0,s.jsx)("div",{className:"flex flex-grow min-w-0 min-h-0",children:(0,s.jsxs)("ul",{className:"w-full overflow-y-auto",ref:b,children:[(0,s.jsx)(function(){return o.pipe(o.groupBy(e=>(0,u.format)(e.date,"yyyy-MM-dd")),o.mapObjIndexed((e,t)=>({transactions:e,group:(0,u.parse)(t,"yyyy-MM-dd",new Date)})),o.values,o.map(({transactions:e,group:t})=>(0,s.jsx)("li",{children:(0,s.jsxs)("ul",{className:"flex gap-2 flex-col",children:[(0,s.jsx)(f.default,{date:t}),e.map(e=>(0,s.jsx)(x.default,{transaction:e},e.transactionId))]})},(0,u.getUnixTime)(t))))(g)},{}),v&&(0,s.jsx)("li",{ref:N,children:(0,s.jsx)("div",{className:"w-full flex justify-center p-5 opacity-70",children:(0,s.jsx)("h1",{children:y})})}),!v&&j&&(0,s.jsx)("li",{ref:N,children:(0,s.jsx)("div",{className:"w-full flex justify-center p-5 opacity-70",children:(0,s.jsx)("h1",{children:y})})}),!v&&!j&&(0,s.jsx)("li",{children:(0,s.jsx)("div",{className:"w-full flex justify-center p-5 opacity-70",children:(0,s.jsx)("h1",{children:y})})})]})})]}):(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(d.default,{icon:l.ShoppingCartOutlined,title:"Transactions"}),(0,s.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2 items-center max-w-md",children:[(0,s.jsx)("div",{className:"w-full flex justify-center space-x-4",children:(0,s.jsx)(l.ShoppingCartOutlined,{className:"h-full text-5xl dark:text-dark-monetr-content-muted"})}),(0,s.jsx)(c.default,{size:"xl",color:"subtle",className:"text-center",children:"You don't have any transactions yet..."}),(0,s.jsx)(c.default,{size:"lg",color:"subtle",className:"text-center",children:"Transactions will show up here once we receive them from Plaid. Or the current account might not support transaction data from Plaid."})]})})]})}},"../interface/src/hooks/institutions.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useInstitution",{enumerable:!0,get:function(){return a}});var s=n("../node_modules/@tanstack/react-query/build/lib/index.mjs"),r=n.ir(n("../interface/src/models/Institution.ts"));function a(e){let t=(0,s.useQuery)([`/institutions/${e}`],{staleTime:18e5,enabled:!!e});return{...t,result:new r.default(t.data)}}},"../interface/src/hooks/store.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});var s=n.ir(n("../node_modules/zustand/esm/index.mjs"));let r=(0,s.default)(e=>({mobileSidebarOpen:!1,setMobileSidebarOpen:t=>e(()=>({mobileSidebarOpen:t}))}));var a=r},"../interface/src/hooks/transactions.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{useTransactions:function(){return o},useTransaction:function(){return c},useUpdateTransaction:function(){return d}});var s=n("../node_modules/@tanstack/react-query/build/lib/index.mjs"),r=n("../interface/src/hooks/bankAccounts.ts"),a=n.ir(n("../interface/src/models/Balance.ts")),i=n.ir(n("../interface/src/models/Transaction.ts")),l=n.ir(n("../interface/src/util/request.ts"));function o(){let e=(0,r.useSelectedBankAccountId)(),t=(0,s.useInfiniteQuery)([`/bank_accounts/${e}/transactions`],{getNextPageParam:(e,t)=>25*t.length,enabled:!!e});return{...t,hasNextPage:!t?.data?.pages.some(e=>e.length<25),result:t?.data?.pages.flatMap(e=>e).map(e=>new i.default(e))||[]}}function c(e){let t=(0,r.useSelectedBankAccountId)();return(0,s.useQuery)([`/bank_accounts/${t}/transactions/${e}`],{enabled:!!t&&!!e,select:e=>new i.default(e)})}function d(){let e=(0,s.useQueryClient)();async function t(e){return(0,l.default)().put(`/bank_accounts/${e.bankAccountId}/transactions/${e.transactionId}`,e).then(e=>e.data)}let{mutateAsync:n}=(0,s.useMutation)(t,{onSuccess:t=>Promise.all([e.setQueriesData([`/bank_accounts/${t.transaction.bankAccountId}/transactions`],e=>({...e,pages:e.pages.map(e=>e.map(e=>e.transactionId===t.transaction.transactionId?t.transaction:e))})),e.setQueriesData([`/bank_accounts/${t.transaction.bankAccountId}/transactions/${t.transaction.transactionId}`],t.transaction),e.setQueriesData([`/bank_accounts/${t.transaction.bankAccountId}/spending`],e=>e.map(e=>(t.spending||[]).find(t=>t.spendingId===e.spendingId)||e)),(t.spending||[]).map(n=>e.setQueriesData([`/bank_accounts/${t.transaction.bankAccountId}/spending/${n.spendingId}`],n)),e.setQueriesData([`/bank_accounts/${t.transaction.bankAccountId}/balances`],e=>new a.default({...e,...t.balance})),e.invalidateQueries([`/bank_accounts/${t.transaction.bankAccountId}/forecast`]),e.invalidateQueries([`/bank_accounts/${t.transaction.bankAccountId}/forecast/next_funding`])])});return n}},"../interface/src/hooks/useIconSearch.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIconSearch",{enumerable:!0,get:function(){return a}});var s=n("../node_modules/@tanstack/react-query/build/lib/index.mjs"),r=n("../interface/src/hooks/useAppConfiguration.ts");function a(e){let t=(0,r.useAppConfiguration)(),{data:n}=(0,s.useQuery)(["/icons/search",{name:e}],{enabled:!!t?.iconsEnabled&&!!e&&e?.length>0,staleTime:36e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1});return n}},"../interface/src/models/Institution.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return r},InstitutionStatus:function(){return a},InstitutionPlaidIncident:function(){return i}});var s=n("../node_modules/date-fns/esm/index.js");class r{name;url;primaryColor;logo;status;timestamp;constructor(e){e&&Object.assign(this,{...e,status:new a(e.status),timestamp:new Date})}}class a{transactions_updates;plaidIncidents;constructor(e){e&&Object.assign(this,{...e,plaidIncidents:(e?.plaidIncidents||[]).map(e=>new i(e))})}}class i{start;end;title;constructor(e){e&&Object.assign(this,{...e,start:(0,s.parseJSON)(e.start),end:e.end&&(0,s.parseJSON)(e.end)})}}},"../interface/src/models/Transaction.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});var s=n("../node_modules/date-fns/esm/index.js"),r=n("../interface/src/util/amounts.ts");class a{transactionId;bankAccountId;amount;spendingId;spendingAmount;categories;originalCategories;date;authorizedDate;name;originalName;merchantName;originalMerchantName;isPending;createdAt;constructor(e){e&&Object.assign(this,{...e,date:(0,s.parseJSON)(e.date),authorizedDate:e.authorizedDate??(0,s.parseJSON)(e.authorizedDate),createdAt:(0,s.parseJSON)(e.createdAt)})}getAmountString(){let e=Math.abs(this.amount);return this.amount<0?`+ ${(0,r.formatAmount)(e)}`:(0,r.formatAmount)(e)}getIsAddition(){return this.amount<0}getName(){return this.name?this.name:this.originalName}getTitle(){if(this.name)return this.name;if(this.merchantName)return this.merchantName;if(this.originalMerchantName)return this.originalMerchantName;return this.originalName}getOriginalName(){return this.originalName}getMerchantName(){return this.merchantName?this.merchantName:this.originalMerchantName}getMainCategory(){return this.categories&&this.categories.length>0?this.categories[0]:this.originalCategories&&this.originalCategories.length>0?this.originalCategories[0]:"Other"}}},"../interface/src/util/sortAccounts.ts":function(e,t,n){"use strict";function s(e){if(!e)return[];let t=["loan","credit","depository"],n=["money market","mortgage","credit card","savings","checking"];return e.sort((e,s)=>{let r=[e,s],a=[0,0];for(let e=0;e<2;e++)a[e]+=t.indexOf(r[e].accountType),a[e]+=n.indexOf(r[e].accountSubType);return a[0]<a[1]?1:a[0]>a[1]?-1:0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}})}}]);