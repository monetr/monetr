stages:
  - Dependencies
  - Build

Fetch Dependencies:
  stage: Dependencies
  image: node:15.8.0-buster
  tags:
    - k8s:shared
  script:
    - yarn install
  cache:
    key: ${CI_COMMIT_REF_SLUG}
    paths:
      - ./node_modules
    policy: push

Build:
  stage: Build
  image: node:15.8.0-buster
  tags:
    - k8s:shared
  script:
    - npm build
  cache:
    key: ${CI_COMMIT_REF_SLUG}
    paths:
      - ./node_modules
    policy: pull
