(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6323],{2973:(s,e,i)=>{"use strict";i.d(e,{A:()=>c});var a=i(6514),n=i(1729),t=i(1003),l=i(8245),r=i.n(l),h=i(39);function c(){var s;let e=(0,h.UK)();return(0,a.jsxs)("div",{className:"flex flex-col gap-1 items-center my-10 text-center",children:[(null==(s=e.frontMatter)?void 0:s.image)&&(0,a.jsx)(r(),{alt:e.frontMatter.title,className:"rounded-lg mb-4",height:720,src:e.frontMatter.image,width:1280}),(0,a.jsx)("span",{className:"text-dark-monetr-content",children:(0,n.GP)((0,t.qg)(e.frontMatter.date,"yyyy/MM/dd",new Date),"MMMM dd, yyyy")}),(0,a.jsxs)("div",{className:"flex items-center justify-center relative",children:[(0,a.jsx)("span",{className:"absolute mx-auto flex w-fit bg-gradient-to-r blur-xl opacity-50 from-purple-100 via-purple-200 to-purple-300 bg-clip-text text-5xl sm:text-6xl font-extrabold text-transparent text-center select-none",children:e.frontMatter.title}),(0,a.jsx)("h1",{className:"relative top-0 justify-center flex bg-gradient-to-r items-center from-purple-100 via-purple-200 to-purple-300 bg-clip-text text-5xl sm:text-6xl font-extrabold text-transparent text-center select-auto",children:e.frontMatter.title})]}),(0,a.jsx)("p",{className:"text-xl text-dark-monetr-content",children:e.frontMatter.description})]})}},4299:(s,e,i)=>{"use strict";i.d(e,{P:()=>h});var a=i(6514),n=i(3367),t=i(3413);let l={default:"\uD83D\uDCA1",error:"\uD83D\uDEAB",info:(0,a.jsx)(t.KS,{className:"_mt-1"}),warning:"⚠️"},r={default:(0,n.A)("_border-orange-100 _bg-orange-50 _text-orange-800 dark:_border-orange-400/30 dark:_bg-orange-400/20 dark:_text-orange-300"),error:(0,n.A)("_border-red-200 _bg-red-100 _text-red-900 dark:_border-red-200/30 dark:_bg-red-900/30 dark:_text-red-200"),info:(0,n.A)("_border-blue-200 _bg-blue-100 _text-blue-900 dark:_border-blue-200/30 dark:_bg-blue-900/30 dark:_text-blue-200"),warning:(0,n.A)("_border-yellow-100 _bg-yellow-50 _text-yellow-900 dark:_border-yellow-200/30 dark:_bg-yellow-700/30 dark:_text-yellow-200")};function h({children:s,type:e="default",emoji:i=l[e]}){return(0,a.jsxs)("div",{className:(0,n.A)("nextra-callout _overflow-x-auto _mt-6 _flex _rounded-lg _border _py-2 ltr:_pr-4 rtl:_pl-4","contrast-more:_border-current contrast-more:dark:_border-current",r[e]),children:[(0,a.jsx)("div",{className:"_select-none _text-xl ltr:_pl-3 ltr:_pr-2 rtl:_pr-3 rtl:_pl-2",style:{fontFamily:'"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'},children:i}),(0,a.jsx)("div",{className:"_w-full _min-w-0 _leading-7",children:s})]})}},5724:(s,e,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/2025-12-31-similar-transactions",function(){return i(6640)}])},6640:(s,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>p,useTOC:()=>m});var a=i(6514),n=i(7017),t=i(808),l=i(9493);let r={src:"/_next/static/media/dumbstuff.762ed3f2.png",height:887,width:706,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAMAAADtGH4KAAAAY1BMVEVFNCdXOTR5aGCLcmNyYVo2JxamiXqMgYuTgHZpXlnPqmzGlkZVRjV/cn1XVEiUhoEeHi9KSFE2MSxkXGm5mYWPeXvGold4Xj+4hT6LbVpwUzOmdT1tTTCwnouWbECajJbKqJB8F5i0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAO0lEQVR4nAXBBwLAEBAAwcVxgvTe8/9XZgYzaz127Per2rOkYEtDzs/q4dyO4uFKTmTAflNsK4wLUfgBSroCYWH0sJAAAAAASUVORK5CYII=",blurWidth:6,blurHeight:8},h={src:"/_next/static/media/similar-trace.18e65d14.png",height:677,width:1847,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAElBMVEU0LjxQL0o9IUA5N0YlIy5BPEpPQIpzAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAHUlEQVR4nAXBAQEAAAzCoOl8/8oHFJIET9iGB237AokAMnLVEcoAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3};var c=i(4299),d=i(2973),o=i(3413);function m(s){return[{value:"tf-idf",id:"tf-idf",depth:2},{value:"DBSCAN",id:"dbscan",depth:2},{value:"Consistently identifying clusters",id:"consistently-identifying-clusters",depth:2},{value:"Room for improvement",id:"room-for-improvement",depth:2}]}let p=(0,n.e)(function(s){let{toc:e=m(s)}=s,i={a:"a",annotation:"annotation",code:"code",em:"em",h2:"h2",hr:"hr",img:"img",li:"li",mark:"mark",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mover:"mover",mrow:"mrow",mspace:"mspace",msqrt:"msqrt",msub:"msub",msubsup:"msubsup",mtext:"mtext",munderover:"munderover",ol:"ol",p:"p",path:"path",pre:"pre",section:"section",semantics:"semantics",span:"span",strong:"strong",sup:"sup",svg:"svg",ul:"ul",...(0,l.R)(),...s.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{}),"\n",(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"w-1/2 sm:w-1/3",children:(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{alt:"Dumb Stuff",placeholder:"blur",src:r})})})}),"\n",(0,a.jsx)(c.P,{children:(0,a.jsxs)(i.p,{children:["This blog post contains information that is loosely understood and probably ",(0,a.jsx)(i.strong,{children:"wrong"}),". Do not mistake this blog post\nand the achievement of the desired results as proof that I know what I’m doing, or that the things discussed here are\n100% factual. This blog post covers what I have done based on my loose understanding and assumptions only. ",(0,a.jsx)(i.strong,{children:"I am\nsimply making mistakes in public so that people can point them out sooner."})]})}),"\n",(0,a.jsx)(i.p,{children:"One of the coolest problems that I was able to work on with monetr was trying to come up with a way to group\ntransactions together. I wanted to be able to view a transaction and in the same view see other similar transactions.\nThis simple idea has a lot of things that can be built on top of it. Similar transactions will have patterns, like\nrecurring dates, or amounts that vary seasonally. I can surface data to the user about these patterns and even use some\nof them to automate parts of setting up a user’s budget. At least that’s the long term idea."}),"\n",(0,a.jsxs)(i.p,{children:["But getting there the first problem is “group similar transactions”. Initially I explored simply comparing every\ntransaction to every other transaction using ",(0,a.jsx)(i.a,{href:"https://en.wikipedia.org/wiki/Levenshtein_distance",children:"Levenshtein Distance"}),"\nwith the names or memo of the transaction. This was ",(0,a.jsx)(i.em,{children:"extremely"})," computationally expensive and even for a dataset of\naround 1000 transactions was very slow. It also didn’t handle nuances very well since the value or meaningfulness of\neach word in a transactions memo was the same. Two transactions for different merchants but with slightly similar\nspelling could be considered the same. The false positive rate seemed very high even just testing this against my own\ntransaction data."]}),"\n",(0,a.jsxs)(i.p,{children:["Eventually I found ",(0,a.jsx)(i.a,{href:"https://en.wikipedia.org/wiki/Tf%E2%80%93idf",children:"tf-idf"}),", or “term frequency-inverse document\nfrequency”. This algorithm measures the frequency of words in a set of documents (transactions in this case) and gives\neach word a value that intends to represent how significant that word is in that document. Words that appear in every\ndocument are given less value overall, and words appearing in fewer documents are given more value. Words that appear\nmore often in a single document are also considered more valuable within that document, but this is weighted against how\noften that word appears in all of the other documents."]}),"\n",(0,a.jsx)(i.p,{children:"Here is an example of a transaction name or memo that I’m dealing with in my own dataset:"}),"\n",(0,a.jsx)(i.pre,{tabIndex:"0","data-language":"text","data-word-wrap":"","data-filename":"Original Name",children:(0,a.jsx)(i.code,{children:(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{children:"POS DEBIT-DC 1234 TST* CARIBOU COFFE NORTH BRANCH MN"})})})}),"\n",(0,a.jsx)(c.P,{type:"info",children:(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Note"}),": In this example I’m only using the “original name” of the transaction. In practice, monetr uses both the\n“original name” and the “original merchant name” of the transaction concatenated into a single string. This way if a\nword appears in both then it will appear multiple times in the combined string and be considered more valuable by\ntf-idf."]})}),"\n",(0,a.jsxs)(i.p,{children:["Most of the transactions in my dataset follow this format. The first word is the payment method, in this case ",(0,a.jsx)(i.code,{children:"POS"})," or\n“Point of Sale”. Other transactions may have other payment methods like ",(0,a.jsx)(i.code,{children:"ACH"})," though. Then the direction of the payment,\n",(0,a.jsx)(i.code,{children:"DEBIT"})," in this case. The last 4 of my card number. Then the actual merchant information, and in this case the town that\nthe merchant is located in."]}),"\n",(0,a.jsxs)(i.p,{children:["An assumption I made is that not all of the transaction data that monetr deals with will follow this same pattern. But\nthat generally, within a single institution (your own bank); transactions would follow a consistent format. Even if the\norder of the data changed, a bank will always have these pieces of information in some form in the memo of their\ntransaction. The words they use might change as well, maybe ",(0,a.jsx)(i.code,{children:"WITHDRAWAL"})," instead of ",(0,a.jsx)(i.code,{children:"DEBIT"}),". But as long as every\ntransaction from that bank used the same pattern, it shouldn’t matter."]}),"\n",(0,a.jsxs)(i.p,{children:["That assumption plays into how I ended up using tf-idf, and how tf-idf ultimately ended up being the solution. There are\nshortfalls here that I’ll address later on, but the premise of this is basically: All transactions from an institution\nwill follow a consistent pattern, so meaningless words such as “debit”, “pos”, “transfer” or things that appear in\nalmost every transaction are easy to assign a low value using tf-idf. With that, the more meaningful parts of a\ntransaction will naturally become more valuable. Not every transaction will contain the words ",(0,a.jsx)(i.code,{children:"CARIBOU COFFE"}),", so those\nwords will be more significant."]}),"\n",(0,a.jsx)(i.p,{children:"The way this works in monetr is a transaction memo such as the one above is taken and “tokenized”. The result of that\ntokenization looks like this:"}),"\n",(0,a.jsxs)(i.p,{children:["First it takes all of the known good words out of the text. This step can sometimes omit specific words that are simply\nknown to be useless, such as ",(0,a.jsx)(i.code,{children:"null"})," or ",(0,a.jsx)(i.code,{children:"inc"}),"."]}),"\n",(0,a.jsx)(i.pre,{tabIndex:"0","data-language":"text","data-word-wrap":"","data-filename":"Original Name + Desired Tokens",children:(0,a.jsx)(i.code,{children:(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.mark,{"data-highlighted-chars":"",children:(0,a.jsx)(i.span,{children:"POS"})}),(0,a.jsx)(i.span,{children:" "}),(0,a.jsx)(i.mark,{"data-highlighted-chars":"",children:(0,a.jsx)(i.span,{children:"DEBIT"})}),(0,a.jsx)(i.span,{children:"-DC 1234 TST* "}),(0,a.jsx)(i.mark,{"data-highlighted-chars":"",children:(0,a.jsx)(i.span,{children:"CARIBOU"})}),(0,a.jsx)(i.span,{children:" "}),(0,a.jsx)(i.mark,{"data-highlighted-chars":"",children:(0,a.jsx)(i.span,{children:"COFFE"})}),(0,a.jsx)(i.span,{children:" "}),(0,a.jsx)(i.mark,{"data-highlighted-chars":"",children:(0,a.jsx)(i.span,{children:"NORTH"})}),(0,a.jsx)(i.span,{children:" "}),(0,a.jsx)(i.mark,{"data-highlighted-chars":"",children:(0,a.jsx)(i.span,{children:"BRANCH"})}),(0,a.jsx)(i.span,{children:" MN"})]})})}),"\n",(0,a.jsxs)(i.p,{children:["Then it transforms them all to be cased consistently and removes unnecessary text. This step also might apply some basic\nspelling corrections, such as adjusting ",(0,a.jsx)(i.code,{children:"coffe"})," to be ",(0,a.jsx)(i.code,{children:"coffee"}),"."]}),"\n",(0,a.jsx)(i.pre,{tabIndex:"0","data-language":"text","data-word-wrap":"","data-filename":"Original Name + Desired Tokens + Transformations",children:(0,a.jsx)(i.code,{children:(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.mark,{"data-highlighted-chars":"",children:(0,a.jsx)(i.span,{children:"pos"})}),(0,a.jsx)(i.span,{children:" "}),(0,a.jsx)(i.mark,{"data-highlighted-chars":"",children:(0,a.jsx)(i.span,{children:"debit"})}),(0,a.jsx)(i.span,{children:" "}),(0,a.jsx)(i.mark,{"data-highlighted-chars":"",children:(0,a.jsx)(i.span,{children:"caribou"})}),(0,a.jsx)(i.span,{children:" "}),(0,a.jsx)(i.mark,{"data-highlighted-chars":"",children:(0,a.jsx)(i.span,{children:"coffee"})}),(0,a.jsx)(i.span,{children:" "}),(0,a.jsx)(i.mark,{"data-highlighted-chars":"",children:(0,a.jsx)(i.span,{children:"north"})}),(0,a.jsx)(i.span,{children:" "}),(0,a.jsx)(i.mark,{"data-highlighted-chars":"",children:(0,a.jsx)(i.span,{children:"branch"})})]})})}),"\n",(0,a.jsx)(i.p,{children:"Overall this is what is happening:"}),"\n",(0,a.jsxs)(i.ol,{children:["\n",(0,a.jsx)(i.li,{children:"Split the string by non-word characters."}),"\n",(0,a.jsx)(i.li,{children:"Throw out any words that are purely numeric or contain no vowels, these are usually pieces of information that are not\nvaluable anyway."}),"\n",(0,a.jsxs)(i.li,{children:["Throw out any words from a “drop word” lookup table, this table (as mentioned above) removes words that are\nuniversally considered low value regardless of context. Such as ",(0,a.jsx)(i.code,{children:"null"})," or ",(0,a.jsx)(i.code,{children:"inc"}),"."]}),"\n",(0,a.jsxs)(i.li,{children:["Throw out any words from a state lookup table, this lookup table will remove words that are in a list of state 2\nletter characters. So ",(0,a.jsx)(i.code,{children:"CA"})," or ",(0,a.jsx)(i.code,{children:"NY"})," is thrown out."]}),"\n",(0,a.jsxs)(i.li,{children:["Correct any words using a lookup table, some basic spelling things can be corrected here as sometimes words are\ntruncated. ",(0,a.jsx)(i.code,{children:"COFFE"})," becomes ",(0,a.jsx)(i.code,{children:"Coffee"}),"."]}),"\n",(0,a.jsx)(i.li,{children:"Store a copy of all of the words in lower case so that our tf-idf is not case sensitive."}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:"These transformations give us an array of words or “tokens” that can now be fed into our tf-idf algorithm."}),"\n",(0,a.jsx)(i.h2,{id:e[0].id,children:e[0].value}),"\n",(0,a.jsx)(i.p,{children:"Now that the data has been transformed into a useful format, the data is fed into the tf-idf algorithm. For every\ntransaction (or document) each word is taken and added to a “word count” map that is specific to that document. Then the\nterm frequency of each word is calculated. Taking the number of times that specific word is seen in the document divided\nby the number of words in the document. This term frequency is then stored for later use. We also increment the global\ncounts for each word."}),"\n",(0,a.jsx)(i.span,{className:"katex-display",children:(0,a.jsxs)(i.span,{className:"katex",children:[(0,a.jsx)(i.span,{className:"katex-mathml",children:(0,a.jsx)(i.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(i.semantics,{children:[(0,a.jsxs)(i.mrow,{children:[(0,a.jsxs)(i.msub,{children:[(0,a.jsx)(i.mtext,{children:"tf"}),(0,a.jsxs)(i.mrow,{children:[(0,a.jsx)(i.mi,{children:"w"}),(0,a.jsx)(i.mi,{children:"o"}),(0,a.jsx)(i.mi,{children:"r"}),(0,a.jsx)(i.mi,{children:"d"})]})]}),(0,a.jsx)(i.mo,{children:"="}),(0,a.jsxs)(i.mfrac,{children:[(0,a.jsxs)(i.msub,{children:[(0,a.jsx)(i.mtext,{children:"frequency\xa0within\xa0document"}),(0,a.jsxs)(i.mrow,{children:[(0,a.jsx)(i.mi,{children:"w"}),(0,a.jsx)(i.mi,{children:"o"}),(0,a.jsx)(i.mi,{children:"r"}),(0,a.jsx)(i.mi,{children:"d"})]})]}),(0,a.jsx)(i.mtext,{children:"number\xa0of\xa0unique\xa0words\xa0within\xa0document"})]})]}),(0,a.jsx)(i.annotation,{encoding:"application/x-tex",children:"\\text{tf}_{word} = \\frac{\\text{frequency within document}_{word}}{\\text{number of unique words within document}}\n"})]})})}),(0,a.jsxs)(i.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.8444em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord text",children:(0,a.jsx)(i.span,{className:"mord",children:"tf"})}),(0,a.jsx)(i.span,{className:"msupsub",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(i.span,{style:{top:"-2.55em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(i.span,{className:"mord mtight",children:[(0,a.jsx)(i.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02691em"},children:"w"}),(0,a.jsx)(i.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"or"}),(0,a.jsx)(i.span,{className:"mord mathnormal mtight",children:"d"})]})})]})}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(i.span,{})})})]})})]}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(i.span,{className:"mrel",children:"="}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"2.2519em",verticalAlign:"-0.8804em"}}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(i.span,{className:"mfrac",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsxs)(i.span,{className:"vlist",style:{height:"1.3714em"},children:[(0,a.jsxs)(i.span,{style:{top:"-2.314em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(i.span,{className:"mord",children:(0,a.jsx)(i.span,{className:"mord text",children:(0,a.jsx)(i.span,{className:"mord",children:"number\xa0of\xa0unique\xa0words\xa0within\xa0document"})})})]}),(0,a.jsxs)(i.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(i.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(i.span,{style:{top:"-3.677em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(i.span,{className:"mord",children:(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord text",children:(0,a.jsx)(i.span,{className:"mord",children:"frequency\xa0within\xa0document"})}),(0,a.jsx)(i.span,{className:"msupsub",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.242em"},children:(0,a.jsxs)(i.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(i.span,{className:"mord mtight",children:[(0,a.jsx)(i.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02691em"},children:"w"}),(0,a.jsx)(i.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"or"}),(0,a.jsx)(i.span,{className:"mord mathnormal mtight",children:"d"})]})})]})}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.2441em"},children:(0,a.jsx)(i.span,{})})})]})})]})})]})]}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.8804em"},children:(0,a.jsx)(i.span,{})})})]})}),(0,a.jsx)(i.span,{className:"mclose nulldelimiter"})]})]})]})]})}),"\n",(0,a.jsx)(c.P,{type:"info",children:(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Note"}),": monetr is dividing the frequency of the word within the document by the number of unique words in the\ndocument. More precisely, the number of unique non-useless tokens in the document. Tokens or words that were thrown\nout in the tokenization step are not considered in this count."]})}),"\n",(0,a.jsx)(i.p,{children:"Once all of the documents have been added, the “idf” can be calculated. This is done using the following formula."}),"\n",(0,a.jsx)(i.span,{className:"katex-display",children:(0,a.jsxs)(i.span,{className:"katex",children:[(0,a.jsx)(i.span,{className:"katex-mathml",children:(0,a.jsx)(i.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(i.semantics,{children:[(0,a.jsxs)(i.mrow,{children:[(0,a.jsxs)(i.msub,{children:[(0,a.jsx)(i.mtext,{children:"idf"}),(0,a.jsxs)(i.mrow,{children:[(0,a.jsx)(i.mi,{children:"w"}),(0,a.jsx)(i.mi,{children:"o"}),(0,a.jsx)(i.mi,{children:"r"}),(0,a.jsx)(i.mi,{children:"d"})]})]}),(0,a.jsx)(i.mo,{children:"="}),(0,a.jsx)(i.mi,{children:"log"}),(0,a.jsx)(i.mo,{children:"⁡"}),(0,a.jsx)(i.mo,{stretchy:"false",children:"("}),(0,a.jsxs)(i.mfrac,{children:[(0,a.jsx)(i.mtext,{children:"number\xa0of\xa0documents"}),(0,a.jsxs)(i.mrow,{children:[(0,a.jsx)(i.mo,{stretchy:"false",children:"("}),(0,a.jsxs)(i.msub,{children:[(0,a.jsx)(i.mtext,{children:"count"}),(0,a.jsxs)(i.mrow,{children:[(0,a.jsx)(i.mi,{children:"w"}),(0,a.jsx)(i.mi,{children:"o"}),(0,a.jsx)(i.mi,{children:"r"}),(0,a.jsx)(i.mi,{children:"d"})]})]}),(0,a.jsx)(i.mo,{children:"+"}),(0,a.jsx)(i.mn,{children:"1"}),(0,a.jsx)(i.mo,{stretchy:"false",children:")"})]})]}),(0,a.jsx)(i.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(i.annotation,{encoding:"application/x-tex",children:"\\text{idf}_{word} = \\log(\\frac{\\text{number of documents}} {(\\text{count}_{word} + 1)})\n"})]})})}),(0,a.jsxs)(i.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.8444em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord text",children:(0,a.jsx)(i.span,{className:"mord",children:"idf"})}),(0,a.jsx)(i.span,{className:"msupsub",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(i.span,{style:{top:"-2.55em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(i.span,{className:"mord mtight",children:[(0,a.jsx)(i.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02691em"},children:"w"}),(0,a.jsx)(i.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"or"}),(0,a.jsx)(i.span,{className:"mord mathnormal mtight",children:"d"})]})})]})}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(i.span,{})})})]})})]}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(i.span,{className:"mrel",children:"="}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"2.3074em",verticalAlign:"-0.936em"}}),(0,a.jsxs)(i.span,{className:"mop",children:["lo",(0,a.jsx)(i.span,{style:{marginRight:"0.01389em"},children:"g"})]}),(0,a.jsx)(i.span,{className:"mopen",children:"("}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(i.span,{className:"mfrac",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsxs)(i.span,{className:"vlist",style:{height:"1.3714em"},children:[(0,a.jsxs)(i.span,{style:{top:"-2.314em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mopen",children:"("}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord text",children:(0,a.jsx)(i.span,{className:"mord",children:"count"})}),(0,a.jsx)(i.span,{className:"msupsub",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(i.span,{style:{top:"-2.55em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(i.span,{className:"mord mtight",children:[(0,a.jsx)(i.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02691em"},children:"w"}),(0,a.jsx)(i.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"or"}),(0,a.jsx)(i.span,{className:"mord mathnormal mtight",children:"d"})]})})]})}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(i.span,{})})})]})})]}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(i.span,{className:"mbin",children:"+"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(i.span,{className:"mord",children:"1"}),(0,a.jsx)(i.span,{className:"mclose",children:")"})]})]}),(0,a.jsxs)(i.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(i.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(i.span,{style:{top:"-3.677em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(i.span,{className:"mord",children:(0,a.jsx)(i.span,{className:"mord text",children:(0,a.jsx)(i.span,{className:"mord",children:"number\xa0of\xa0documents"})})})]})]}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.936em"},children:(0,a.jsx)(i.span,{})})})]})}),(0,a.jsx)(i.span,{className:"mclose nulldelimiter"})]}),(0,a.jsx)(i.span,{className:"mclose",children:")"})]})]})]})}),"\n",(0,a.jsx)(c.P,{type:"info",children:(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Note"}),": This isn’t quite the same weighting scheme as ",(0,a.jsx)(i.strong,{children:"inverse document frequency"})," or ",(0,a.jsx)(i.strong,{children:"inverse document frequency\nsmoothed"}),". I’ve simply translated what I have in code and its very possible (read likely) that I implemented this\npart wrong."]})}),"\n",(0,a.jsx)(i.p,{children:"Now we have an individual document frequency for every word among all of our transactions. This on its own is valuable\nin that it will already show which words show up in almost every transaction."}),"\n",(0,a.jsx)(i.p,{children:"Then for each document monetr will calculate two parts. The first part is the final tf-idf for that specific document as\nwell as a “vector” which monetr uses for the next stage. The tf-idf is per word, so for every word in a single document\nwe look up what the idf of that word is that we calculated above and we multiply it by the term frequency inside that\nspecific document:"}),"\n",(0,a.jsx)(i.span,{className:"katex-display",children:(0,a.jsxs)(i.span,{className:"katex",children:[(0,a.jsx)(i.span,{className:"katex-mathml",children:(0,a.jsx)(i.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(i.semantics,{children:[(0,a.jsxs)(i.mrow,{children:[(0,a.jsxs)(i.msub,{children:[(0,a.jsx)(i.mtext,{children:"tfidf"}),(0,a.jsxs)(i.mrow,{children:[(0,a.jsx)(i.mi,{children:"w"}),(0,a.jsx)(i.mi,{children:"o"}),(0,a.jsx)(i.mi,{children:"r"}),(0,a.jsx)(i.mi,{children:"d"})]})]}),(0,a.jsx)(i.mo,{children:"="}),(0,a.jsxs)(i.msub,{children:[(0,a.jsx)(i.mtext,{children:"tf"}),(0,a.jsxs)(i.mrow,{children:[(0,a.jsx)(i.mi,{children:"w"}),(0,a.jsx)(i.mi,{children:"o"}),(0,a.jsx)(i.mi,{children:"r"}),(0,a.jsx)(i.mi,{children:"d"})]})]}),(0,a.jsx)(i.mo,{children:"\xd7"}),(0,a.jsxs)(i.msub,{children:[(0,a.jsx)(i.mtext,{children:"idf"}),(0,a.jsxs)(i.mrow,{children:[(0,a.jsx)(i.mi,{children:"w"}),(0,a.jsx)(i.mi,{children:"o"}),(0,a.jsx)(i.mi,{children:"r"}),(0,a.jsx)(i.mi,{children:"d"})]})]})]}),(0,a.jsx)(i.annotation,{encoding:"application/x-tex",children:"\\text{tfidf}_{word} = \\text{tf}_{word} \\times \\text{idf}_{word}\n"})]})})}),(0,a.jsxs)(i.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.8444em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord text",children:(0,a.jsx)(i.span,{className:"mord",children:"tfidf"})}),(0,a.jsx)(i.span,{className:"msupsub",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(i.span,{style:{top:"-2.55em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(i.span,{className:"mord mtight",children:[(0,a.jsx)(i.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02691em"},children:"w"}),(0,a.jsx)(i.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"or"}),(0,a.jsx)(i.span,{className:"mord mathnormal mtight",children:"d"})]})})]})}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(i.span,{})})})]})})]}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(i.span,{className:"mrel",children:"="}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.8444em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord text",children:(0,a.jsx)(i.span,{className:"mord",children:"tf"})}),(0,a.jsx)(i.span,{className:"msupsub",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(i.span,{style:{top:"-2.55em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(i.span,{className:"mord mtight",children:[(0,a.jsx)(i.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02691em"},children:"w"}),(0,a.jsx)(i.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"or"}),(0,a.jsx)(i.span,{className:"mord mathnormal mtight",children:"d"})]})})]})}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(i.span,{})})})]})})]}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(i.span,{className:"mbin",children:"\xd7"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.8444em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord text",children:(0,a.jsx)(i.span,{className:"mord",children:"idf"})}),(0,a.jsx)(i.span,{className:"msupsub",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(i.span,{style:{top:"-2.55em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(i.span,{className:"mord mtight",children:[(0,a.jsx)(i.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02691em"},children:"w"}),(0,a.jsx)(i.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"or"}),(0,a.jsx)(i.span,{className:"mord mathnormal mtight",children:"d"})]})})]})}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(i.span,{})})})]})})]})]})]})]})}),"\n",(0,a.jsxs)(i.p,{children:["Now monetr knows how much each word in each transaction is “worth” and it needs to turn this data into a way of finding\nsimilar transactions. Simply, we can take all of these values of all of these words and assign each unique word a\nposition in a vector. Words that are more significant will have a higher value in the vector and words that are less\nsignificant will have a lower value. Words that aren’t present in that specific document will have a value of ",(0,a.jsx)(i.code,{children:"0"})," in\nthis vector."]}),"\n",(0,a.jsxs)(i.p,{children:["To make this easy monetr takes all of the words observed in all of the transactions and sorts them alphabetically. Then\ncreates a vector that is the at least the length equal to the number of words seen but rounded ",(0,a.jsx)(i.em,{children:"up"})," to the nearest size\nthat is divisible by 16."]}),"\n",(0,a.jsx)(i.p,{children:"The reason we round up to 16 is so that the vector fits nicely into SIMD registers used for our normalization and\ndistance functions. On computers that support X86’s AVX instructions these registers allow us to work with 8 values from\nthe vector at a time (using a 256-bit register), on newer hardware that supports AVX512 we can work with 16 values at a\ntime (using a 512-bit register). Keeping the vector a size that is divisible by 16 means that we never need to worry\nabout aligning memory for these operations or handling tailing values of odd sizes. Which keeps the assembly code much\nsimpler and doesn’t require branching logic outside of iterating over the vector."}),"\n",(0,a.jsx)(i.p,{children:"All in all, by the end of this initial tf-idf process we get a vector of 32-bit floats that looks like this for a given\ntransaction:"}),"\n",(0,a.jsx)(i.pre,{icon:o.WL,tabIndex:"0","data-language":"go","data-word-wrap":"","data-filename":"tf-idf Vector Before Normalization",children:(0,a.jsxs)(i.code,{children:[(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"vector "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:":="}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" []"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"float32"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"{"})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.000000"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// acctverify"})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.000000"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// ach"})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.000000"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// adjustment"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // ..."})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.293779"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// branch"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // ..."})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.340398"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// caribou"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // ..."})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.339518"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// coffee"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // ..."})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.014512"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// debit"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // ..."})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.294113"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// north"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // ..."})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.045037"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// pos"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // ..."})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.000000"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// withdrawal"})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.000000"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// xfer"})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.000000"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"//"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,a.jsxs)(i.p,{children:["Notice that the only words with a non-zero value in our vector are the words that were in our tokenized transaction\nstring. Each of these words now serves as it’s own “dimension” within the vector, with absent words having no value. But\nwords that are present in our transaction have not only a non-zero value, but also have a higher value if that\nparticular word is considered more “meaningful” relative to the rest of the dataset. This can be seen with the words\n",(0,a.jsx)(i.code,{children:"caribou"})," and ",(0,a.jsx)(i.code,{children:"coffee"})," having higher values than words that appear more frequently in all other documents such as ",(0,a.jsx)(i.code,{children:"pos"}),"\nand ",(0,a.jsx)(i.code,{children:"debit"}),". Also note the padding at the end, even though these values are ",(0,a.jsx)(i.code,{children:"0.000000"})," I included it above to show how\nthe vector is padded to the nearest value divisible by 16 (the example is not showing the value for every single word)."]}),"\n",(0,a.jsxs)(i.p,{children:["Once we have this vector built we modify the vector using ",(0,a.jsx)(i.a,{href:"https://en.wikipedia.org/wiki/Norm_(mathematics)#Euclidean_norm",children:"Euclidean\nnormalization"}),(0,a.jsx)(i.sup,{children:(0,a.jsx)(i.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),". We do this to make the data behave\nmore sanely when it comes to the following DBSCAN algorithm that will be discussed below."]}),"\n",(0,a.jsxs)(i.p,{children:["To begin, we represent our vector above as ",(0,a.jsxs)(i.span,{className:"katex",children:[(0,a.jsx)(i.span,{className:"katex-mathml",children:(0,a.jsx)(i.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(i.semantics,{children:[(0,a.jsx)(i.mrow,{children:(0,a.jsx)(i.mi,{mathvariant:"bold",children:"x"})}),(0,a.jsx)(i.annotation,{encoding:"application/x-tex",children:"\\mathbf{x}"})]})})}),(0,a.jsx)(i.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.4444em"}}),(0,a.jsx)(i.span,{className:"mord mathbf",children:"x"})]})})]}),":"]}),"\n",(0,a.jsx)(i.span,{className:"katex-display",children:(0,a.jsxs)(i.span,{className:"katex",children:[(0,a.jsx)(i.span,{className:"katex-mathml",children:(0,a.jsx)(i.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(i.semantics,{children:[(0,a.jsxs)(i.mrow,{children:[(0,a.jsx)(i.mi,{mathvariant:"bold",children:"x"}),(0,a.jsx)(i.mo,{children:"="}),(0,a.jsx)(i.mo,{stretchy:"false",children:"["}),(0,a.jsxs)(i.msub,{children:[(0,a.jsx)(i.mi,{children:"x"}),(0,a.jsx)(i.mn,{children:"1"})]}),(0,a.jsx)(i.mo,{separator:"true",children:","}),(0,a.jsxs)(i.msub,{children:[(0,a.jsx)(i.mi,{children:"x"}),(0,a.jsx)(i.mn,{children:"2"})]}),(0,a.jsx)(i.mo,{separator:"true",children:","}),(0,a.jsx)(i.mo,{children:"…"}),(0,a.jsx)(i.mo,{separator:"true",children:","}),(0,a.jsxs)(i.msub,{children:[(0,a.jsx)(i.mi,{children:"x"}),(0,a.jsx)(i.mi,{children:"n"})]}),(0,a.jsx)(i.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(i.annotation,{encoding:"application/x-tex",children:"\\mathbf{x} = [x_1, x_2, \\dots, x_n]\n"})]})})}),(0,a.jsxs)(i.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.4444em"}}),(0,a.jsx)(i.span,{className:"mord mathbf",children:"x"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(i.span,{className:"mrel",children:"="}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(i.span,{className:"mopen",children:"["}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(i.span,{className:"msupsub",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(i.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(i.span,{className:"mord mtight",children:"1"})})]})}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(i.span,{})})})]})})]}),(0,a.jsx)(i.span,{className:"mpunct",children:","}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(i.span,{className:"msupsub",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(i.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(i.span,{className:"mord mtight",children:"2"})})]})}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(i.span,{})})})]})})]}),(0,a.jsx)(i.span,{className:"mpunct",children:","}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(i.span,{className:"minner",children:"…"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(i.span,{className:"mpunct",children:","}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(i.span,{className:"msupsub",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.1514em"},children:(0,a.jsxs)(i.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(i.span,{className:"mord mathnormal mtight",children:"n"})})]})}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(i.span,{})})})]})})]}),(0,a.jsx)(i.span,{className:"mclose",children:"]"})]})]})]})}),"\n",(0,a.jsxs)(i.p,{children:["Given the vector above where ",(0,a.jsxs)(i.span,{className:"katex",children:[(0,a.jsx)(i.span,{className:"katex-mathml",children:(0,a.jsx)(i.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(i.semantics,{children:[(0,a.jsx)(i.mrow,{children:(0,a.jsx)(i.mi,{children:"n"})}),(0,a.jsx)(i.annotation,{encoding:"application/x-tex",children:"n"})]})})}),(0,a.jsx)(i.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(i.span,{className:"mord mathnormal",children:"n"})]})})]})," is divisible by 16, we can use SIMD for the following operations. Create a sum of the\nsquared values of the vector and calculate it’s square root. This is our “norm” that we’ll use below."]}),"\n",(0,a.jsx)(i.span,{className:"katex-display",children:(0,a.jsxs)(i.span,{className:"katex",children:[(0,a.jsx)(i.span,{className:"katex-mathml",children:(0,a.jsx)(i.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(i.semantics,{children:[(0,a.jsxs)(i.mrow,{children:[(0,a.jsx)(i.mi,{mathvariant:"normal",children:"∥"}),(0,a.jsx)(i.mi,{mathvariant:"bold",children:"x"}),(0,a.jsxs)(i.msub,{children:[(0,a.jsx)(i.mi,{mathvariant:"normal",children:"∥"}),(0,a.jsx)(i.mn,{children:"2"})]}),(0,a.jsx)(i.mo,{children:"="}),(0,a.jsx)(i.msqrt,{children:(0,a.jsxs)(i.mrow,{children:[(0,a.jsxs)(i.munderover,{children:[(0,a.jsx)(i.mo,{children:"∑"}),(0,a.jsxs)(i.mrow,{children:[(0,a.jsx)(i.mi,{children:"i"}),(0,a.jsx)(i.mo,{children:"="}),(0,a.jsx)(i.mn,{children:"1"})]}),(0,a.jsx)(i.mi,{children:"n"})]}),(0,a.jsxs)(i.msubsup,{children:[(0,a.jsx)(i.mi,{children:"x"}),(0,a.jsx)(i.mi,{children:"i"}),(0,a.jsx)(i.mn,{children:"2"})]})]})})]}),(0,a.jsx)(i.annotation,{encoding:"application/x-tex",children:"\\|\\mathbf{x}\\|_2 = \\sqrt{\\sum_{i=1}^{n} x_i^2}\n"})]})})}),(0,a.jsxs)(i.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(i.span,{className:"mord",children:"∥"}),(0,a.jsx)(i.span,{className:"mord mathbf",children:"x"}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord",children:"∥"}),(0,a.jsx)(i.span,{className:"msupsub",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(i.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(i.span,{className:"mord mtight",children:"2"})})]})}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(i.span,{})})})]})})]}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(i.span,{className:"mrel",children:"="}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"3.1568em",verticalAlign:"-1.2777em"}}),(0,a.jsx)(i.span,{className:"mord sqrt",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsxs)(i.span,{className:"vlist",style:{height:"1.8791em"},children:[(0,a.jsxs)(i.span,{className:"svg-align",style:{top:"-5.1168em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"5.1168em"}}),(0,a.jsxs)(i.span,{className:"mord",style:{paddingLeft:"1.056em"},children:[(0,a.jsx)(i.span,{className:"mop op-limits",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsxs)(i.span,{className:"vlist",style:{height:"1.6514em"},children:[(0,a.jsxs)(i.span,{style:{top:"-1.8723em",marginLeft:"0em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"3.05em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(i.span,{className:"mord mtight",children:[(0,a.jsx)(i.span,{className:"mord mathnormal mtight",children:"i"}),(0,a.jsx)(i.span,{className:"mrel mtight",children:"="}),(0,a.jsx)(i.span,{className:"mord mtight",children:"1"})]})})]}),(0,a.jsxs)(i.span,{style:{top:"-3.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"3.05em"}}),(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{className:"mop op-symbol large-op",children:"∑"})})]}),(0,a.jsxs)(i.span,{style:{top:"-4.3em",marginLeft:"0em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"3.05em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(i.span,{className:"mord mtight",children:(0,a.jsx)(i.span,{className:"mord mathnormal mtight",children:"n"})})})]})]}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"1.2777em"},children:(0,a.jsx)(i.span,{})})})]})}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(i.span,{className:"msupsub",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsxs)(i.span,{className:"vlist",style:{height:"0.7959em"},children:[(0,a.jsxs)(i.span,{style:{top:"-2.4231em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(i.span,{className:"mord mathnormal mtight",children:"i"})})]}),(0,a.jsxs)(i.span,{style:{top:"-3.0448em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(i.span,{className:"mord mtight",children:"2"})})]})]}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.2769em"},children:(0,a.jsx)(i.span,{})})})]})})]})]})]}),(0,a.jsxs)(i.span,{style:{top:"-3.8391em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"5.1168em"}}),(0,a.jsx)(i.span,{className:"hide-tail",style:{minWidth:"0.742em",height:"3.1968em"},children:(0,a.jsx)(i.svg,{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"3.1968em",viewBox:"0 0 400000 3196",preserveAspectRatio:"xMinYMin slice",children:(0,a.jsx)(i.path,{d:"M702 80H40000040 H742v3062l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1 h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170 c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667 219 661 l218 661zM702 80H400000v40H742z"})})})]})]}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"1.2777em"},children:(0,a.jsx)(i.span,{})})})]})})]})]})]})}),"\n",(0,a.jsx)(i.p,{children:"Then change the original vector, dividing each value by the “norm” we derived from above."}),"\n",(0,a.jsx)(i.span,{className:"katex-display",children:(0,a.jsxs)(i.span,{className:"katex",children:[(0,a.jsx)(i.span,{className:"katex-mathml",children:(0,a.jsx)(i.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(i.semantics,{children:[(0,a.jsxs)(i.mrow,{children:[(0,a.jsxs)(i.msub,{children:[(0,a.jsxs)(i.mover,{accent:"true",children:[(0,a.jsx)(i.mi,{children:"x"}),(0,a.jsx)(i.mo,{children:"^"})]}),(0,a.jsx)(i.mi,{children:"i"})]}),(0,a.jsx)(i.mo,{children:"="}),(0,a.jsxs)(i.mfrac,{children:[(0,a.jsxs)(i.msub,{children:[(0,a.jsx)(i.mi,{children:"x"}),(0,a.jsx)(i.mi,{children:"i"})]}),(0,a.jsxs)(i.mrow,{children:[(0,a.jsx)(i.mi,{mathvariant:"normal",children:"∥"}),(0,a.jsx)(i.mi,{mathvariant:"bold",children:"x"}),(0,a.jsxs)(i.msub,{children:[(0,a.jsx)(i.mi,{mathvariant:"normal",children:"∥"}),(0,a.jsx)(i.mn,{children:"2"})]})]})]}),(0,a.jsx)(i.mspace,{width:"1em"}),(0,a.jsx)(i.mtext,{children:"for\xa0"}),(0,a.jsx)(i.mi,{children:"i"}),(0,a.jsx)(i.mo,{children:"="}),(0,a.jsx)(i.mn,{children:"1"}),(0,a.jsx)(i.mo,{separator:"true",children:","}),(0,a.jsx)(i.mo,{children:"…"}),(0,a.jsx)(i.mo,{separator:"true",children:","}),(0,a.jsx)(i.mi,{children:"n"})]}),(0,a.jsx)(i.annotation,{encoding:"application/x-tex",children:"\\hat{x}_i = \\frac{x_i}{\\|\\mathbf{x}\\|_2}\n\\quad\\text{for } i = 1, \\dots, n\n"})]})})}),(0,a.jsxs)(i.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.8444em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord accent",children:(0,a.jsx)(i.span,{className:"vlist-t",children:(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsxs)(i.span,{className:"vlist",style:{height:"0.6944em"},children:[(0,a.jsxs)(i.span,{style:{top:"-3em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(i.span,{className:"mord mathnormal",children:"x"})]}),(0,a.jsxs)(i.span,{style:{top:"-3em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(i.span,{className:"accent-body",style:{left:"-0.2222em"},children:(0,a.jsx)(i.span,{className:"mord",children:"^"})})]})]})})})}),(0,a.jsx)(i.span,{className:"msupsub",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.3117em"},children:(0,a.jsxs)(i.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(i.span,{className:"mord mathnormal mtight",children:"i"})})]})}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(i.span,{})})})]})})]}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(i.span,{className:"mrel",children:"="}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"2.0436em",verticalAlign:"-0.936em"}}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(i.span,{className:"mfrac",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsxs)(i.span,{className:"vlist",style:{height:"1.1076em"},children:[(0,a.jsxs)(i.span,{style:{top:"-2.314em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord",children:"∥"}),(0,a.jsx)(i.span,{className:"mord mathbf",children:"x"}),(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord",children:"∥"}),(0,a.jsx)(i.span,{className:"msupsub",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(i.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(i.span,{className:"mord mtight",children:"2"})})]})}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(i.span,{})})})]})})]})]})]}),(0,a.jsxs)(i.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(i.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(i.span,{style:{top:"-3.677em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(i.span,{className:"mord",children:(0,a.jsxs)(i.span,{className:"mord",children:[(0,a.jsx)(i.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(i.span,{className:"msupsub",children:(0,a.jsxs)(i.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(i.span,{className:"vlist-r",children:[(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.3117em"},children:(0,a.jsxs)(i.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(i.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(i.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(i.span,{className:"mord mathnormal mtight",children:"i"})})]})}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(i.span,{})})})]})})]})})]})]}),(0,a.jsx)(i.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(i.span,{className:"vlist-r",children:(0,a.jsx)(i.span,{className:"vlist",style:{height:"0.936em"},children:(0,a.jsx)(i.span,{})})})]})}),(0,a.jsx)(i.span,{className:"mclose nulldelimiter"})]}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"1em"}}),(0,a.jsx)(i.span,{className:"mord text",children:(0,a.jsx)(i.span,{className:"mord",children:"for\xa0"})}),(0,a.jsx)(i.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(i.span,{className:"mrel",children:"="}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.8389em",verticalAlign:"-0.1944em"}}),(0,a.jsx)(i.span,{className:"mord",children:"1"}),(0,a.jsx)(i.span,{className:"mpunct",children:","}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(i.span,{className:"minner",children:"…"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(i.span,{className:"mpunct",children:","}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(i.span,{className:"mord mathnormal",children:"n"})]})]})]})}),"\n",(0,a.jsx)(i.p,{children:"This normalization makes the vector more uniform while preserving the ratios between the values within that vector.\nFor example, consider the original vector above. The result after normalization would be:"}),"\n",(0,a.jsx)(i.pre,{icon:o.WL,tabIndex:"0","data-language":"go","data-word-wrap":"","data-filename":"tf-idf Vector After Normalization",children:(0,a.jsxs)(i.code,{children:[(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"vector "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:":="}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" []"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"float32"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"{"})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.000000"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// acctverify"})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.000000"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// ach"})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.000000"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// adjustment"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // ..."})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.460952"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// branch"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // ..."})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.534099"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// caribou"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // ..."})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.532719"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// coffee"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // ..."})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.022770"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// debit"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // ..."})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.461476"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// north"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // ..."})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.070664"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// pos"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // ..."})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.000000"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// withdrawal"})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.000000"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// xfer"})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"  0.000000"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"//"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,a.jsxs)(i.p,{children:["This process is repeated for ",(0,a.jsx)(i.em,{children:"every"})," transaction within a single bank account in monetr, resulting in an array of\nvectors that can now be compared with the next step in the process."]}),"\n",(0,a.jsx)(i.h2,{id:e[1].id,children:e[1].value}),"\n",(0,a.jsxs)(i.p,{children:["At this point monetr has an array of vectors with each vector representing what is “meaningful” about the associated\ntransaction. This data can now be used to determine which transactions are similar to each other. To do that monetr uses\nan algorithm called ",(0,a.jsx)(i.a,{href:"https://en.wikipedia.org/wiki/DBSCAN",children:"DBSCAN"})," and ",(0,a.jsx)(i.a,{href:"https://en.wikipedia.org/wiki/Euclidean_distance",children:"Euclidean\nDistance"})," as the distance function."]}),"\n",(0,a.jsx)(i.p,{children:"The way DBSCAN works is it iterates over all of the data procedurally. It takes the first vector and looks for other\nvectors in the dataset that are “neighbors”. Vectors within a certain euclidean distance of the initial vector. If it\nfinds at least a minimum number of neighbors within that distance, then that is considered the “root” of a cluster. If\nit does not find the minimum number of neighbors though, then that means that there are no other transactions that are\n“similar” to that initial one (or at the very least, that there are not a sufficient number of transactions for this\ntransaction to be considered part of a group of similar transactions). That transaction is marked as “noise” or\n“visited” so that it is excluded from future calculations."}),"\n",(0,a.jsxs)(i.p,{children:["But transactions that do have neighbors get built out even more. Each of the neighbors are then addressed recursively,\nlooking for each of ",(0,a.jsx)(i.em,{children:"their"})," neighbors. This allows the cluster of similar transactions to expand as long as there are\nvectors within the distance threshold specified. This process is repeated until the cluster cannot expand anymore."]}),"\n",(0,a.jsx)(i.p,{children:"Because each word in our dataset is given a specific index in our vector, each word represents a dimension for every\ntransaction. Words that aren’t present in that transaction have no value in that dimension. If there were only 3 words\nin the dataset then you could express the similarity of transactions with X, Y and Z coordinates. If a transaction\ncontains the word for the X coordinate, then that transaction is pushed out in 3D space on that coordinate. But if the\ntransaction also contains the word for the Y coordinate, then it is also pushed out on the Y coordinate. This results in\neach transaction having some location within this 3D space, and all DBSCAN is doing is looking for clusters of these\ncoordinates that are close together. Transactions might share the same word but words that are more valuable will have\nmore influence on the coordinates of the transaction, and transactions that share words that are valuable will have\ncoordinates that are proximate in this highly dimensional space."}),"\n",(0,a.jsx)(i.p,{children:"The result of all of this is that we now have an array of clusters of transactions. We know that within each cluster the\ntransactions therein are at least somewhat similar. The similarity however is not perfect, as I’ll cover below."}),"\n",(0,a.jsx)(i.h2,{id:e[2].id,children:e[2].value}),"\n",(0,a.jsx)(i.p,{children:"The next important part of this process is being able to consistently identify the clusters, this way as transactions\nare added and clusters grow we can still know that it is the same cluster over time. This is not as simple as selecting\na transaction ID from the cluster and deciding that it is the “basis” of a cluster and using it as the unique\nidentifier. The cluster could be built poorly initially when there is not sufficient data, but then changes as more data\nmakes the similarities more accurate. This ID would stay the same but the members of the cluster will have changed."}),"\n",(0,a.jsx)(i.p,{children:"To do this, monetr takes all of the vectors from a similar transaction cluster and tries to calculate which one of the\nvectors is the center-most or centroid of the cluster. Given that it is likely that many of the transactions may have\nidentical transaction names used for this calculation, there may be multiple transactions that meet this “center-most”\ncriteria. If that is the case, we use the transaction with the lowest ID alphabetically as our centroid or base\ntransaction."}),"\n",(0,a.jsx)(i.p,{children:"From this we take all of the words that appear in the centroid transaction and sort them by their value. The most\nvaluable words for a transaction rise to the top here. For example, a cluster of transactions for the Caribou Coffee\ntransaction above would have the most valuable words like this:"}),"\n",(0,a.jsx)(i.pre,{tabIndex:"0","data-language":"json","data-word-wrap":"","data-filename":"Tokens From The Centroid Transaction",children:(0,a.jsxs)(i.code,{children:[(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"["})}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  {"})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "word"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"Caribou"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "sanitized"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"caribou"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "order"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"4"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "value"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"151.68399"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "rank"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0.5677639"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  },"})}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  {"})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "word"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"Coffee"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "sanitized"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"coffee"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "order"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"5"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "value"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"151.29242"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "rank"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0.5648364"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  },"})}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  {"})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "word"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"North"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "sanitized"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"north"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "order"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"6"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "value"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"131.05951"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "rank"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0.42386284"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  },"})}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  {"})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "word"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"Branch"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "sanitized"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"branch"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "order"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"7"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "value"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"130.91055"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "rank"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0.42289993"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  },"})}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  {"})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "word"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"Pos"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "sanitized"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"pos"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "order"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "value"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"20.068632"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "rank"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0.009938569"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  },"})}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  {"})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "word"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"Debit"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "sanitized"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"debit"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "order"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"1"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "value"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"6.466796"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "rank"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0.001031969"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  }"})}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"]"})})]})}),"\n",(0,a.jsxs)(i.p,{children:["In the example above, the ",(0,a.jsx)(i.code,{children:"value"})," field is the sum of all of the tf-idf values for that word in each individual\ntransaction in the similar transaction cluster. The ",(0,a.jsx)(i.code,{children:"rank"})," is the ",(0,a.jsx)(i.code,{children:"value"})," divided by the number of transactions in the\ncluster to try to create an average. This helps smooth out any outliers where maybe a few transactions within a cluster\nhave a word that is considered very valuable or meaningful, but might not be present or is considered less valuable in\nthe other transactions in the same cluster."]}),"\n",(0,a.jsx)(i.p,{children:"You can see that the value of the two meaningful words is much higher than the less meaningful words (the location of\nthe transaction). We then take the top 75% of ranked words within this list and we sort them by the order they appeared\nin the transaction (because the order of the words is not represented by their value necessarily)."}),"\n",(0,a.jsx)(i.pre,{tabIndex:"0","data-language":"json","data-word-wrap":"","data-filename":"Tokens In The Top 75%",children:(0,a.jsxs)(i.code,{children:[(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"["})}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    {"})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "word"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"Caribou"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "sanitized"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"caribou"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "order"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"4"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "value"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"151.68399"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "rank"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0.5677639"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    },"})}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    {"})}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "word"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"Coffee"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "sanitized"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"coffee"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "order"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"5"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "value"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"151.29242"}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,a.jsxs)(i.span,{children:[(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "rank"'}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,a.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0.5648364"})]}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})}),"\n",(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  ]"})})]})}),"\n",(0,a.jsxs)(i.p,{children:["So for our example, our transaction cluster would be given the name ",(0,a.jsx)(i.code,{children:"Caribou Coffee"}),". As these are the most valuable\nwords in that cluster."]}),"\n",(0,a.jsx)(i.pre,{tabIndex:"0","data-language":"text","data-word-wrap":"","data-filename":"Transaction Cluster Name",children:(0,a.jsx)(i.code,{children:(0,a.jsx)(i.span,{children:(0,a.jsx)(i.span,{children:"Caribou Coffee"})})})}),"\n",(0,a.jsx)(i.p,{children:"This ends up being a pretty reasonable way to derive a merchant name from a transaction without the data being sanitized\nfor us already (something that Plaid offers). So this can be used as a way to enrich offline data that is provided via\nfile imports or less reliable data connectors in the future."}),"\n",(0,a.jsxs)(i.p,{children:["But the values of these words might change over time so we still need a good way to identify the cluster consistently as\nnew transactions appear. To do this we make the assumption that the order of the most valuable words ",(0,a.jsx)(i.em,{children:"may"})," change in the\nfuture, maybe ",(0,a.jsx)(i.code,{children:"coffee"})," becomes more valuable that ",(0,a.jsx)(i.code,{children:"caribou"})," as an example. But we assume that those words (and the most\nvaluable words in any cluster) will remain within our upper 75% threshold consistently over time."]}),"\n",(0,a.jsxs)(i.p,{children:["So to create an identity for this cluster, we’ll take these most valuable words and we’ll sort them alphabetically,\nconvert them to lowercase and then simply SHA256 hash them. This way clusters that share the same signature can also be\nmerged meaningfully, but it also means that we can lookup this signature in the database when we append or modify\ntransaction clusters in the future",(0,a.jsx)(i.sup,{children:(0,a.jsx)(i.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),"."]}),"\n",(0,a.jsx)(i.h2,{id:e[3].id,children:e[3].value}),"\n",(0,a.jsxs)(i.p,{children:["This entire process is very much “good enough”",(0,a.jsx)(i.sup,{children:(0,a.jsx)(i.a,{href:"#user-content-fn-3",id:"user-content-fnref-3","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"3"})}),", my goal was to build something that provided similar transactions in\na way that did not rely on the use of AI models that were difficult to scrutinize. Or in a way that required huge sets\nof training data to get just right. The assumptions I made here about how transaction data exists is very much “good\nenough”",(0,a.jsx)(i.sup,{children:(0,a.jsx)(i.a,{href:"#user-content-fn-3",id:"user-content-fnref-3-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"3"})}),". However with that there are some huge spaces for improvement."]}),"\n",(0,a.jsxs)(i.ol,{children:["\n",(0,a.jsxs)(i.li,{children:["There are too many dimensions, there is one dimension per word for the entire transaction dataset. While this might\nnot necessarily diminish the “accuracy” of the process on its own, it makes the process significantly less efficient.\nMost vectors that are compared in the DBSCAN process are primarily ",(0,a.jsx)(i.code,{children:"0.0"})," values, with the exception of maybe 2-6\nnon-zero values. This means that a lot of the “optimized” assembly code I’ve written is computing ",(0,a.jsx)(i.em,{children:"nothing"})," most of\nthe time. There are some safe assumptions I could make to improve this. Right now the values are only ever positive,\nbut they don’t ",(0,a.jsx)(i.em,{children:"need"})," to be. For example, I could combine two words into a single dimension as long as those two\nwords never appear on the same transaction. A negative value on that dimension would represent one word, and a\npositive value would represent another word. This would reduce the size of the vector (potentially significantly)\nwithout any loss in the quality of the output."]}),"\n",(0,a.jsxs)(i.li,{children:["Words are not exactly the greatest things to index on and some words can be shared between irrelevant transactions.\nFor example, if you have a transaction ",(0,a.jsx)(i.code,{children:"POS DEBIT-DC    1234 WHITE CASTLE  0800 FOREST LAKE MN"})," and a transaction\n",(0,a.jsx)(i.code,{children:"POS DEBIT-DC    1234 TST* CARIBOU COFFE WHITE BEAR LA MN"}),". The tf-idf process has no way of distinguishing the\n",(0,a.jsx)(i.code,{children:"WHITE"})," in the first transaction from the ",(0,a.jsx)(i.code,{children:"WHITE"})," in the second transaction. This can skew transaction similarity and\ncause some weird issues where some words that ",(0,a.jsx)(i.em,{children:"are"})," meaningful are not treated as such because of how common the word\nis. The way I would try to solve this is by instead calculating the tf-idf values of word pairs. For example ",(0,a.jsx)(i.code,{children:'["pos debit", "debit white", "white castle", "castle forest", "forest lake"]'}),". This rolling pairwise tokenization would\nallow for better values of pairs of words that are significant. However this essentially ruins any concept of\n“document frequency” because a “word” (word pair) won’t really ever appear in a document twice. So I would still need\nto take into consideration individual words somehow."]}),"\n",(0,a.jsxs)(i.li,{children:["Right now this entire process is re-performed from scratch every time there are transaction changes (file upload or\nPlaid webhook). This is not efficient at all and while the entire process is pretty quick (a few seconds even for\nhuge accounts) it could be improved significantly if I could capture parts of the data and cache it or store it\nsomewhere and only recalculate what was needed. I have some ideas here but want to get the output really refined\nfirst.","\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:["It is worth noting here that the DBSCAN portion of this is ",(0,a.jsx)(i.em,{children:"the most expensive part of this by far"}),". Calculating the\ntf-idf for every transaction (including querying the database for every transaction for a specific bank account) is\nessentially negligible compared to how long the DBSCAN can take. This can be seen in the screenshot below which is\na trace from a production account calculating similar transactions after having received a Plaid webhook.\n",(0,a.jsx)(i.img,{alt:"Similar Transaction Trace",placeholder:"blur",src:h}),"\nAs you can see, even the inefficient N+1 query and the tf-idf code is just insignificant compared to the time it\ntakes to perform the DBSCAN. (",(0,a.jsx)(i.strong,{children:"Note"}),": monetr’s production servers are not using AVX512)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:"There are surely more ways that I can improve this process, but these are the two that are front of mind for me at the\nmoment. I am not a mathematics expert by any means either so its very possible that the calculations or my\nimplementation of them is not correct. If you would be interested in correcting me and helping me learn more, please let\nme know. monetr is built in the open and the code is fully available to everyone. I’m here making stupid choices in\npublic so people can point them out sooner."}),"\n",(0,a.jsx)(c.P,{type:"warning",children:(0,a.jsx)(i.p,{children:"At the time of writing this blog post, some of the functionality and behaviors discussed in this blog post were made\nas part of writing it (turns out looking at your code to write about what it’s doing makes you realize how bad your\ncode is). So some of the improvements made as part of writing this blog post have not been released (at the time of\nwriting this). These improvements will be available in the next update."})}),"\n",(0,a.jsx)(i.hr,{}),"\n",(0,a.jsxs)(i.section,{"data-footnotes":!0,className:"footnotes",children:[(0,a.jsx)(i.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,a.jsxs)(i.ol,{children:["\n",(0,a.jsxs)(i.li,{id:"user-content-fn-1",children:["\n",(0,a.jsxs)(i.p,{children:["I perform this normalization only with the understanding (or assumed understanding) that it benefits the quality\nof the output of the Euclidean Distance function that is ultimately used to calculate true similarity. This may\nnot actually be correct. However it is “good enough”",(0,a.jsx)(i.sup,{children:(0,a.jsx)(i.a,{href:"#user-content-fn-3",id:"user-content-fnref-3-3","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"3"})}),". ",(0,a.jsx)(i.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{id:"user-content-fn-2",children:["\n",(0,a.jsxs)(i.p,{children:["This isn’t being done just yet but the changes here make it so that it’s very close to actually happening. ",(0,a.jsx)(i.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{id:"user-content-fn-3",children:["\n",(0,a.jsxs)(i.p,{children:["This has not been certified as good enough by the ",(0,a.jsx)(i.a,{href:"https://youtu.be/44-NAlPruD4?t=700",children:"certified good enough certification\nauthority"}),". ",(0,a.jsx)(i.a,{href:"#user-content-fnref-3","data-footnote-backref":"","aria-label":"Back to reference 3",className:"data-footnote-backref",children:"↩"})," ",(0,a.jsxs)(i.a,{href:"#user-content-fnref-3-2","data-footnote-backref":"","aria-label":"Back to reference 3-2",className:"data-footnote-backref",children:["↩",(0,a.jsx)(i.sup,{children:"2"})]})," ",(0,a.jsxs)(i.a,{href:"#user-content-fnref-3-3","data-footnote-backref":"","aria-label":"Back to reference 3-3",className:"data-footnote-backref",children:["↩",(0,a.jsx)(i.sup,{children:"3"})]})]}),"\n"]}),"\n"]}),"\n"]})]})},"/blog/2025-12-31-similar-transactions",{filePath:"src/pages/blog/2025-12-31-similar-transactions.mdx",timestamp:1767220146e3,pageMap:t.O,frontMatter:{title:"How monetr's similar transactions work",date:"2025/12/31",description:"A technical deep-dive into how monetr detects similar transactions offline and without AI.",tag:"Engineering",ogImage:"/blog/2025-12-31-similar-transactions/preview.png",author:"Elliot Courant",searchable:!0},title:"How monetr's similar transactions work"},"undefined"==typeof RemoteContent?m:RemoteContent.useTOC)}},s=>{s.O(0,[7017,1729,808,636,6593,8792],()=>s(s.s=5724)),_N_E=s.O()}]);