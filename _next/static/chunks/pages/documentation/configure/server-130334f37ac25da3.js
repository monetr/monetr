(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2207],{1652:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>c,useTOC:()=>h});var r=i(6514),t=i(7017),n=i(235),l=i(9493),d=i(4299);function h(e){return[{value:"Cookies",id:"cookies",depth:2}]}let c=(0,t.e)(function(e){let{toc:s=h(e)}=e,i={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.h1,{children:"Server Configuration"}),"\n",(0,r.jsx)(i.p,{children:"These configuration parameters control monetr’s actual HTTP server as well as some configuration around cookies."}),"\n",(0,r.jsx)(i.pre,{tabIndex:"0","data-language":"yaml","data-word-wrap":"","data-filename":"config.yaml",children:(0,r.jsxs)(i.code,{children:[(0,r.jsxs)(i.span,{children:[(0,r.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"server"}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,r.jsxs)(i.span,{children:[(0,r.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  listenPort"}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"4000"})]}),"\n",(0,r.jsxs)(i.span,{children:[(0,r.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  listenAddress"}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0.0.0.0"})]}),"\n",(0,r.jsxs)(i.span,{children:[(0,r.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  externalUrl"}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"<http://localhost:4000>"})]}),"\n",(0,r.jsxs)(i.span,{children:[(0,r.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  statsPort"}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"9000"})]}),"\n",(0,r.jsxs)(i.span,{children:[(0,r.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  uiCacheHours"}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"336"}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:" # 14 days in hours, determines cache headers for UI assets."})]}),"\n",(0,r.jsxs)(i.span,{children:[(0,r.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  tlsCertificate"}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"</etc/monetr/tls.crt>"})]}),"\n",(0,r.jsxs)(i.span,{children:[(0,r.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  tlsKey"}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"</etc/monetr/tls.key>"})]}),"\n",(0,r.jsxs)(i.span,{children:[(0,r.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  cookies"}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,r.jsxs)(i.span,{children:[(0,r.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    sameSiteStrict"}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"<true|false>"})]}),"\n",(0,r.jsxs)(i.span,{children:[(0,r.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    secure"}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"<true|false>"})]}),"\n",(0,r.jsxs)(i.span,{children:[(0,r.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    name"}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,r.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"M-Token"})]})]})}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:(0,r.jsx)(i.strong,{children:"Name"})}),(0,r.jsx)(i.th,{children:(0,r.jsx)(i.strong,{children:"Type"})}),(0,r.jsx)(i.th,{children:(0,r.jsx)(i.strong,{children:"Default"})}),(0,r.jsx)(i.th,{children:(0,r.jsx)(i.strong,{children:"Description"})})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"listenPort"})}),(0,r.jsx)(i.td,{children:"Number"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"4000"})}),(0,r.jsx)(i.td,{children:"The TCP port that monetr will listen for HTTP connections on."})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"listenAddress"})}),(0,r.jsx)(i.td,{children:"String"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"0.0.0.0"})}),(0,r.jsxs)(i.td,{children:["The TCP address that monetr will listen for HTTP connections on. Recommended to set to your computer’s IP address or ",(0,r.jsx)(i.code,{children:"0.0.0.0"})," if you want to access it from outside the host’s system."]})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"externalUrl"})}),(0,r.jsx)(i.td,{children:"String"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"https://localhost:{{ Listen Port }}"})}),(0,r.jsxs)(i.td,{children:["The actual external URL that monetr is accessible at, if you are exposing monetr to the internet or just your local network via a domain name you ",(0,r.jsx)(i.strong,{children:"must"})," specify this parameter. For example: ",(0,r.jsx)(i.code,{children:"http://monetr.local:4000"}),". monetr uses this to determine how to set cookies as well as build URLs used in emails."]})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"statsPort"})}),(0,r.jsx)(i.td,{children:"Number"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"9000"})}),(0,r.jsxs)(i.td,{children:["The TCP port that monetr will server Prometheus metrics on. ",(0,r.jsx)(i.strong,{children:"Note"}),": These metrics are not well maintained at the moment."]})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"uiCacheHours"})}),(0,r.jsx)(i.td,{children:"Number"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"336"})}),(0,r.jsx)(i.td,{children:"Defines the number of hours that UI assets should be cached by clients, sets the cache headers on all UI asset HTTP responses."})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"tlsCertificate"})}),(0,r.jsx)(i.td,{children:"String"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"Specify the TLS certificate that the monetr HTTP server should use."})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"tlsKey"})}),(0,r.jsx)(i.td,{children:"String"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"Specify the TLS key that the monetr HTTP server should use."})]})]})]}),"\n",(0,r.jsx)(d.P,{type:"info",children:(0,r.jsxs)(i.p,{children:["The TLS certificate and key ",(0,r.jsx)(i.strong,{children:"do not affect the external URL"}),". If you specify ",(0,r.jsx)(i.code,{children:"https://..."})," in the external URL and\nomit a TLS certificate and key, monetr assumes that you have some kind of proxy layer such as Nginx providing TLS\ntermination."]})}),"\n",(0,r.jsx)(d.P,{type:"info",children:(0,r.jsx)(i.p,{children:"TLS certificates are also not automatically rotated for the HTTP server either. The server must be restarted after\ncertificates are changed."})}),"\n",(0,r.jsx)(i.p,{children:"The following environment variables map to the following configuration file fields. Each field is documented below."}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Variable"}),(0,r.jsx)(i.th,{children:"Config File Field"})]})}),(0,r.jsx)(i.tbody,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"MONETR_SERVER_EXTERNAL_URL"})}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"server.externalUrl"})})]})})]}),"\n",(0,r.jsx)(i.h2,{id:s[0].id,children:s[0].value}),"\n",(0,r.jsx)(i.p,{children:"monetr uses cookies for authentication, cookies can be configured depending on whether or not you are using HTTPS for\nyour self hosted instance. But all cookies monetr issues are HTTP only such that they are never visible to client side\ncode."}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:(0,r.jsx)(i.strong,{children:"Name"})}),(0,r.jsx)(i.th,{children:(0,r.jsx)(i.strong,{children:"Type"})}),(0,r.jsx)(i.th,{children:(0,r.jsx)(i.strong,{children:"Default"})}),(0,r.jsx)(i.th,{children:(0,r.jsx)(i.strong,{children:"Description"})})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"sameSiteStrict"})}),(0,r.jsx)(i.td,{children:"Boolean"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"true"})}),(0,r.jsxs)(i.td,{children:["Should cookies be issued such that they are only usable by the exact website specified in the external URL above? (",(0,r.jsx)(i.strong,{children:"Please always set to true"}),")"]})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"secure"})}),(0,r.jsx)(i.td,{children:"Boolean"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"true"})}),(0,r.jsxs)(i.td,{children:["Should cookies be issued with the secure flag. If your external URL is using an ",(0,r.jsx)(i.code,{children:"http"})," protocol though, then this will be treated as ",(0,r.jsx)(i.code,{children:"false"})," regardless of the setting value here."]})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"name"})}),(0,r.jsx)(i.td,{children:"String"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"M-Token"})}),(0,r.jsx)(i.td,{children:"The name of the cookie that monetr should both issue for authentication and look for when authenticating requests from clients."})]})]})]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Note"}),": None of these can be configured via environment variables at this time."]})]})},"/documentation/configure/server",{filePath:"src/pages/documentation/configure/server.mdx",timestamp:1736019543e3,pageMap:n.O,frontMatter:{title:"Server",description:"Configure monetr's server parameters for self hosted environments."},title:"Server"},"undefined"==typeof RemoteContent?h:RemoteContent.useTOC)},4299:(e,s,i)=>{"use strict";i.d(s,{P:()=>h});var r=i(6514),t=i(3367),n=i(3413);let l={default:"\uD83D\uDCA1",error:"\uD83D\uDEAB",info:(0,r.jsx)(n.KS,{className:"_mt-1"}),warning:"⚠️"},d={default:(0,t.A)("_border-orange-100 _bg-orange-50 _text-orange-800 dark:_border-orange-400/30 dark:_bg-orange-400/20 dark:_text-orange-300"),error:(0,t.A)("_border-red-200 _bg-red-100 _text-red-900 dark:_border-red-200/30 dark:_bg-red-900/30 dark:_text-red-200"),info:(0,t.A)("_border-blue-200 _bg-blue-100 _text-blue-900 dark:_border-blue-200/30 dark:_bg-blue-900/30 dark:_text-blue-200"),warning:(0,t.A)("_border-yellow-100 _bg-yellow-50 _text-yellow-900 dark:_border-yellow-200/30 dark:_bg-yellow-700/30 dark:_text-yellow-200")};function h({children:e,type:s="default",emoji:i=l[s]}){return(0,r.jsxs)("div",{className:(0,t.A)("nextra-callout _overflow-x-auto _mt-6 _flex _rounded-lg _border _py-2 ltr:_pr-4 rtl:_pl-4","contrast-more:_border-current contrast-more:dark:_border-current",d[s]),children:[(0,r.jsx)("div",{className:"_select-none _text-xl ltr:_pl-3 ltr:_pr-2 rtl:_pr-3 rtl:_pl-2",style:{fontFamily:'"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'},children:i}),(0,r.jsx)("div",{className:"_w-full _min-w-0 _leading-7",children:e})]})}},6564:(e,s,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/documentation/configure/server",function(){return i(1652)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[7017,235,636,6593,8792],()=>s(6564)),_N_E=e.O()}]);