(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6345],{320:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>x,useTOC:()=>c});var t=i(6514),n=i(7017),r=i(808),d=i(9493),h=i(4299),l=i(8504),a=i(1198);function c(e){return[{value:"Plaintext",id:"plaintext",depth:2},{value:"AWS KMS Configuration",id:"aws-kms-configuration",depth:2},{value:"OpenBao Transit Configuration",id:"openbao-transit-configuration",depth:2},{value:"Vault Transit Configuration",id:"vault-transit-configuration",depth:2},{value:"Related Topics",id:"related-topics",depth:2}]}function o(e,s){throw Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}let x=(0,n.e)(function(e){let{toc:s=c(e)}=e,i={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return l.C||o("Cards",!1),l.C.Card||o("Cards.Card",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.h1,{children:"Encryption (Key Management)"}),"\n",(0,t.jsx)(i.p,{children:"monetr supports encrypting secrets before they are stored in PostgreSQL. Other data may support encryption in the future\nbut at the moment only Plaid credentials are encrypted."}),"\n",(0,t.jsx)(i.p,{children:"To that end, monetr supports a few different providers. An outline of the configuration for key management:"}),"\n",(0,t.jsx)(i.pre,{tabIndex:"0","data-language":"yaml","data-word-wrap":"","data-filename":"config.yaml",children:(0,t.jsxs)(i.code,{children:[(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"keyManagement"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  provider"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"<plaintext|aws|openbao|vault>"'}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:" # KMS provider, must be one of these values"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  aws"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": { "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"..."}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" }     "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"# AWS KMS specific configuration, only used when `provider: aws`"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  openbao"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": { "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"..."}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" } "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"# OpenBao specific configuration, only used when `provider: openbao`"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  vault"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": { "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"..."}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" }   "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"# Hashicorp Vault configuration, only used when `provider: vault`"})]})]})}),"\n",(0,t.jsx)(h.P,{type:"info",children:(0,t.jsxs)(i.p,{children:["If you are using the ",(0,t.jsx)(i.code,{children:"plaintext"})," provider (which is the default), no additional options needs to be provided for the\nkey management configuration."]})}),"\n",(0,t.jsx)(i.h2,{id:s[0].id,children:s[0].value}),"\n",(0,t.jsxs)(i.p,{children:["When ",(0,t.jsx)(i.code,{children:"plaintext"})," is specified as the provider, monetr will not encrypt any secrets and all items in the ",(0,t.jsx)(i.code,{children:"secrets"})," table\nwill be stored in plain text. This is fine for self hosted deployments or development environments."]}),"\n",(0,t.jsx)(i.h2,{id:s[1].id,children:s[1].value}),"\n",(0,t.jsx)(i.p,{children:"The AWS KMS will encrypt secrets using AWS’s key management API. There is also an option to run a local version of AWS\nKMS for the local development environment for monetr."}),"\n",(0,t.jsx)(i.pre,{tabIndex:"0","data-language":"yaml","data-word-wrap":"","data-filename":"config.yaml",children:(0,t.jsxs)(i.code,{children:[(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"keyManagement"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  aws"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    region"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"us-east1"'})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    accessKey"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"..."'})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    secretKey"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"..."'})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    keyID"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"..."'})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    endpoint"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"..."'}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:" # Only used in development, but can still be specified if you want."})]})]})}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:(0,t.jsx)(i.strong,{children:"Name"})}),(0,t.jsx)(i.th,{children:(0,t.jsx)(i.strong,{children:"Type"})}),(0,t.jsx)(i.th,{children:(0,t.jsx)(i.strong,{children:"Default"})}),(0,t.jsx)(i.th,{children:(0,t.jsx)(i.strong,{children:"Description"})})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"region"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"The AWS region to use for the client. May be required depending on your configuration."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"accessKey"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"The Access Key that monetr should use to access the AWS KMS API."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"secretKey"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"The Secret Key that monetr should use to access the AWS KMS API."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"keyID"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"The actual Key ID in AWS, this must be the ID of the key to use for encryption and decryption and should not be changed. If this ID is changed then values encrypted with another key will not be able to be decrypted with this new key."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"endpoint"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"null"})}),(0,t.jsx)(i.td,{children:"The AWS KMS API endpoint, this is intended to be used only for local development environments."})]})]})]}),"\n",(0,t.jsx)(i.h2,{id:s[2].id,children:s[2].value}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.a,{href:"https://openbao.org/",children:"OpenBao"})," is a self-hostable option for encryption. OpenBao keeps track of the encryption keys\nthemselves while monetr leverages the ",(0,t.jsx)(i.a,{href:"https://openbao.org/docs/secrets/transit/",children:"Transit"})," secrets engine to encrypt and\ndecrypt data."]}),"\n",(0,t.jsxs)(i.p,{children:["When running inside Kubernetes, monetr can use the ",(0,t.jsx)(i.code,{children:"kubernetes"})," authentication method to access OpenBao. When this is\nconfigured, monetr will automatically renew its OpenBao credentials a few moments before they expire. Other\nauthentication methods may require a non-expiring token such as the root token."]}),"\n",(0,t.jsx)(i.pre,{tabIndex:"0","data-language":"yaml","data-word-wrap":"","data-filename":"config.yaml",children:(0,t.jsxs)(i.code,{children:[(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"keyManagement"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  openbao"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    keyID"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"monetr"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    authMethod"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"kubernetes"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    role"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"monetr"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    endpoint"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"https://your-openbao-server.local:8200"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    tlsCertificatePath"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"/etc/monetr/openbao/tls.crt"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    tlsKeyPath"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"/etc/monetr/openbao/tls.key"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    tlsCAPath"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"/etc/monetr/openbao/ca.crt"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    insecureSkipVerify"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"false"})]})]})}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:(0,t.jsx)(i.strong,{children:"Name"})}),(0,t.jsx)(i.th,{children:(0,t.jsx)(i.strong,{children:"Type"})}),(0,t.jsx)(i.th,{children:(0,t.jsx)(i.strong,{children:"Default"})}),(0,t.jsx)(i.th,{children:(0,t.jsx)(i.strong,{children:"Description"})})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"keyID"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"Name of the transit mount to use for KMS."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"authMethod"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsxs)(i.td,{children:["Valid values are:",(0,t.jsx)("br",{}),"- ",(0,t.jsx)(i.code,{children:"token"}),": Use a hardcoded token to authenticate OpenBao.",(0,t.jsx)("br",{}),"- ",(0,t.jsx)(i.code,{children:"kubernetes"}),": Use the container’s Kubernetes Service Account Token.",(0,t.jsx)("br",{}),"- ",(0,t.jsx)(i.code,{children:"userpass"}),": Provide a username and password."]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"token"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"When using token authentication, you can provide the raw token here."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"tokenFile"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"As an alternative to providing the token directly in the config file, specify a path to a file containing the token itself."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"username"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsxs)(i.td,{children:["If you are using ",(0,t.jsx)(i.code,{children:"userpass"})," authentication, then this field and the ",(0,t.jsx)(i.code,{children:"password"})," field must be specified."]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"password"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsxs)(i.td,{children:["If you are using ",(0,t.jsx)(i.code,{children:"userpass"})," authentication, then this field and the ",(0,t.jsx)(i.code,{children:"username"})," field must be specified."]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"role"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"Role in OpenBao that monetr should authenticate for, decides what permissions monetr has."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"endpoint"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"The URL that OpenBao API requests should be made to, should be the complete URL including protocol (https), as well as port if non-standard and path if the API is on a sub-route."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"tlsCertificatePath"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"Path to the TLS certificate file, used if OpenBao is being hosted with a self signed certificate."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"tlsKeyPath"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"Path to the TLS key file, used if OpenBao is being hosted with a self signed certificate."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"tlsCAPath"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"Path to the Certificate Authority file, used if OpenBao is being hosted with a self signed certificate."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"insecureSkipVerify"})}),(0,t.jsx)(i.td,{children:"Boolean"}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"false"})}),(0,t.jsxs)(i.td,{children:["When ",(0,t.jsx)(i.code,{children:"true"}),", monetr will not verify the TLS certificate of the OpenBao server, ",(0,t.jsx)(i.strong,{children:"less secure"}),"."]})]})]})]}),"\n",(0,t.jsx)(i.h2,{id:s[3].id,children:s[3].value}),"\n",(0,t.jsx)(h.P,{type:"warning",children:(0,t.jsxs)(i.p,{children:["The Vault Transit KMS provider is being deprecated in an upcoming monetr release. If you are currently using the Vault\nTransit KMS provider then please follow the ",(0,t.jsx)(i.a,{href:"/documentation/guides/migrate-kms",children:"Migration Guide"})," as soon as possible\nto avoid future problems."]})}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.a,{href:"https://www.vaultproject.io/",children:"Hashicorp Vault"})," is a self-hostable option for encryption. Vault keeps track of the\nencryption keys themselves while monetr leverages the\n",(0,t.jsx)(i.a,{href:"https://developer.hashicorp.com/vault/docs/secrets/transit",children:"Transit"})," secrets engine to encrypt and decrypt data."]}),"\n",(0,t.jsxs)(i.p,{children:["When running inside Kubernetes, monetr can use the ",(0,t.jsx)(i.code,{children:"kubernetes"})," authentication method to access Vault. When this is\nconfigured, monetr will automatically renew its Vault credentials a few moments before they expire. Other authentication\nmethods may require a non-expiring token such as the root token."]}),"\n",(0,t.jsx)(i.pre,{tabIndex:"0","data-language":"yaml","data-word-wrap":"","data-filename":"config.yaml",children:(0,t.jsxs)(i.code,{children:[(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"keyManagement"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"  vault"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    keyID"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"monetr"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    authMethod"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"kubernetes"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    role"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"monetr"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    endpoint"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"https://your-vault-server.local:8200"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    tlsCertificatePath"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"/etc/monetr/vault/tls.crt"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    tlsKeyPath"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"/etc/monetr/vault/tls.key"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    tlsCAPath"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"/etc/monetr/vault/ca.crt"})]}),"\n",(0,t.jsxs)(i.span,{children:[(0,t.jsx)(i.span,{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"},children:"    insecureSkipVerify"}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,t.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"false"})]})]})}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:(0,t.jsx)(i.strong,{children:"Name"})}),(0,t.jsx)(i.th,{children:(0,t.jsx)(i.strong,{children:"Type"})}),(0,t.jsx)(i.th,{children:(0,t.jsx)(i.strong,{children:"Default"})}),(0,t.jsx)(i.th,{children:(0,t.jsx)(i.strong,{children:"Description"})})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"keyID"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"Name of the transit mount to use for KMS."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"authMethod"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsxs)(i.td,{children:["Valid values are:",(0,t.jsx)("br",{}),"- ",(0,t.jsx)(i.code,{children:"token"}),": Use a hardcoded token to authenticate Vault.",(0,t.jsx)("br",{}),"- ",(0,t.jsx)(i.code,{children:"kubernetes"}),": Use the container’s Kubernetes Service Account Token.",(0,t.jsx)("br",{}),"- ",(0,t.jsx)(i.code,{children:"userpass"}),": Provide a username and password."]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"token"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"When using token authentication, you can provide the raw token here."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"tokenFile"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"As an alternative to providing the token directly in the config file, specify a path to a file containing the token itself."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"username"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsxs)(i.td,{children:["If you are using ",(0,t.jsx)(i.code,{children:"userpass"})," authentication, then this field and the ",(0,t.jsx)(i.code,{children:"password"})," field must be specified."]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"password"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsxs)(i.td,{children:["If you are using ",(0,t.jsx)(i.code,{children:"userpass"})," authentication, then this field and the ",(0,t.jsx)(i.code,{children:"username"})," field must be specified."]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"role"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"Role in Vault that monetr should authenticate for, decides what permissions monetr has."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"endpoint"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"The URL that Vault API requests should be made to, should be the complete URL including protocol (https), as well as port if non-standard and path if the API is on a sub-route."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"tlsCertificatePath"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"Path to the TLS certificate file, used if Vault is being hosted with a self signed certificate."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"tlsKeyPath"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"Path to the TLS key file, used if Vault is being hosted with a self signed certificate."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"tlsCAPath"})}),(0,t.jsx)(i.td,{children:"String"}),(0,t.jsx)(i.td,{}),(0,t.jsx)(i.td,{children:"Path to the Certificate Authority file, used if Vault is being hosted with a self signed certificate."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"insecureSkipVerify"})}),(0,t.jsx)(i.td,{children:"Boolean"}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"false"})}),(0,t.jsxs)(i.td,{children:["When ",(0,t.jsx)(i.code,{children:"true"}),", monetr will not verify the TLS certificate of the Vault server, ",(0,t.jsx)(i.strong,{children:"less secure"}),"."]})]})]})]}),"\n",(0,t.jsx)(i.h2,{id:s[4].id,children:s[4].value}),"\n",(0,t.jsx)(l.C.Card,{icon:(0,t.jsx)(a.A,{}),title:"Migrate Between KMS Providers",description:"Migrate Between KMS Providers",href:"/documentation/guides/migrate-kms"})]})},"/documentation/configure/kms",{filePath:"src/pages/documentation/configure/kms.mdx",timestamp:1767907319e3,pageMap:r.O,frontMatter:{title:"Key Management",description:"Configure your self hosted monetr instance to encrypt secrets using an encryption service such as Vault or AWS KMS."},title:"Key Management"},"undefined"==typeof RemoteContent?c:RemoteContent.useTOC)},1198:(e,s,i)=>{"use strict";i.d(s,{A:()=>t});let t=(0,i(3693).A)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]])},4299:(e,s,i)=>{"use strict";i.d(s,{P:()=>l});var t=i(6514),n=i(3367),r=i(3413);let d={default:"\uD83D\uDCA1",error:"\uD83D\uDEAB",info:(0,t.jsx)(r.KS,{className:"_mt-1"}),warning:"⚠️"},h={default:(0,n.A)("_border-orange-100 _bg-orange-50 _text-orange-800 dark:_border-orange-400/30 dark:_bg-orange-400/20 dark:_text-orange-300"),error:(0,n.A)("_border-red-200 _bg-red-100 _text-red-900 dark:_border-red-200/30 dark:_bg-red-900/30 dark:_text-red-200"),info:(0,n.A)("_border-blue-200 _bg-blue-100 _text-blue-900 dark:_border-blue-200/30 dark:_bg-blue-900/30 dark:_text-blue-200"),warning:(0,n.A)("_border-yellow-100 _bg-yellow-50 _text-yellow-900 dark:_border-yellow-200/30 dark:_bg-yellow-700/30 dark:_text-yellow-200")};function l({children:e,type:s="default",emoji:i=d[s]}){return(0,t.jsxs)("div",{className:(0,n.A)("nextra-callout _overflow-x-auto _mt-6 _flex _rounded-lg _border _py-2 ltr:_pr-4 rtl:_pl-4","contrast-more:_border-current contrast-more:dark:_border-current",h[s]),children:[(0,t.jsx)("div",{className:"_select-none _text-xl ltr:_pl-3 ltr:_pr-2 rtl:_pr-3 rtl:_pl-2",style:{fontFamily:'"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'},children:i}),(0,t.jsx)("div",{className:"_w-full _min-w-0 _leading-7",children:e})]})}},6926:(e,s,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/documentation/configure/kms",function(){return i(320)}])},8504:(e,s,i)=>{"use strict";i.d(s,{C:()=>h});var t=i(6514),n=i(3367),r=i(6456),d=i.n(r);let h=Object.assign(function({children:e,num:s=3,className:i,style:r,...d}){return(0,t.jsx)("div",{className:(0,n.A)("nextra-cards _mt-4 _gap-4 _grid","_not-prose",i),...d,style:{...r,"--rows":s},children:e})},{displayName:"Cards",Card:function({children:e,title:s,icon:i,arrow:r,href:h,...l}){return(0,t.jsxs)(d(),{href:h,className:(0,n.A)("nextra-focus nextra-card _group _flex _flex-col _justify-start _overflow-hidden _rounded-lg _border _border-gray-200","_text-current _no-underline dark:_shadow-none","hover:_shadow-gray-100 dark:hover:_shadow-none _shadow-gray-100","active:_shadow-sm active:_shadow-gray-200","_transition-all _duration-200 hover:_border-gray-300",e?"_bg-gray-100 _shadow dark:_border-neutral-700 dark:_bg-neutral-800 dark:_text-gray-50 hover:_shadow-lg dark:hover:_border-neutral-500 dark:hover:_bg-neutral-700":"_bg-transparent _shadow-sm dark:_border-neutral-800 hover:_bg-slate-50 hover:_shadow-md dark:hover:_border-neutral-700 dark:hover:_bg-neutral-900"),...l,children:[e,(0,t.jsxs)("span",{className:(0,n.A)("_flex _font-semibold _items-center _gap-2 _p-4 _text-gray-700 hover:_text-gray-900",r&&'after:_content-["→"] after:_transition-transform after:_duration-75 after:group-hover:_translate-x-0.5',e?"dark:_text-gray-300 dark:hover:_text-gray-100":"dark:_text-neutral-200 dark:hover:_text-neutral-50"),title:s,children:[i,(0,t.jsx)("span",{className:"_truncate",children:s})]})]})}})}},e=>{e.O(0,[7017,808,636,6593,8792],()=>e(e.s=6926)),_N_E=e.O()}]);